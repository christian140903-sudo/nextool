<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>HTML Beautifier &amp; Minifier — Format or Compress HTML Instantly | NexTool</title>
<meta name="description" content="Beautify or minify HTML code instantly. Configurable indentation, syntax highlighting, attribute sorting. Free online tool by NexTool.">
<meta name="keywords" content="HTML beautifier, HTML minifier, HTML formatter, format HTML, indent HTML, NexTool">
<meta property="og:title" content="Free HTML Beautifier & Minifier | NexTool">
<meta property="og:description" content="Beautify or minify HTML code instantly. Syntax highlighting, configurable indent, copy and download. Free online tool.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://nextool.app/free-tools/html-formatter.html">
<meta property="og:image" content="https://nextool.app/free-tools/og/html-formatter.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<link rel="canonical" href="https://nextool.app/free-tools/html-formatter.html">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Free HTML Beautifier & Minifier | NexTool">
<meta name="twitter:description" content="Format or compress HTML code instantly. Free online tool by NexTool.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://nextool.app/"},{"@type":"ListItem","position":2,"name":"Free Tools","item":"https://nextool.app/free-tools/"},{"@type":"ListItem","position":3,"name":"HTML Formatter","item":"https://nextool.app/free-tools/html-formatter.html"}]}
</script>
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"SoftwareApplication","name":"NexTool HTML Beautifier & Minifier","applicationCategory":"DeveloperApplication","operatingSystem":"Web","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"description":"Beautify or minify HTML code with syntax highlighting, configurable indentation, and attribute sorting."}
</script>
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#050508;--surface:#111118;--surface2:#1a1a24;--border:#252533;--primary:#6366f1;--accent:#a855f7;--pink:#ec4899;--text:#e2e8f0;--text2:#94a3b8;--radius:12px;--glass:rgba(17,17,24,.7)}
html{scroll-behavior:smooth}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;overflow-x:hidden}
a{color:var(--primary);text-decoration:none}
.nav{position:sticky;top:0;z-index:100;backdrop-filter:blur(20px);background:rgba(5,5,8,.85);border-bottom:1px solid var(--border);padding:0 24px}
.nav-inner{max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;height:64px}
.logo{font-weight:800;font-size:1.35rem;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.nav-links{display:flex;gap:28px;align-items:center}
.nav-links a{color:var(--text2);font-size:.9rem;font-weight:500;transition:color .2s}
.nav-links a:hover{color:var(--text)}
.nav-links a.active{color:var(--primary)}
.btn-cta{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;padding:9px 22px;border-radius:8px;font-weight:600;font-size:.85rem;border:none;cursor:pointer;transition:transform .2s,box-shadow .2s}
.btn-cta:hover{transform:translateY(-1px);box-shadow:0 4px 20px rgba(99,102,241,.4)}
.mobile-toggle{display:none;background:none;border:none;color:var(--text);font-size:1.5rem;cursor:pointer}
.breadcrumb{max-width:1200px;margin:0 auto;padding:16px 24px 0;font-size:.82rem;color:var(--text2)}
.breadcrumb a{color:var(--text2);transition:color .2s}
.breadcrumb a:hover{color:var(--primary)}
.breadcrumb span{margin:0 8px;opacity:.5}
.hero{text-align:center;padding:60px 24px 40px;max-width:800px;margin:0 auto}
.hero .badge{display:inline-block;padding:6px 16px;border-radius:20px;background:var(--surface);border:1px solid var(--border);font-size:.8rem;color:var(--accent);font-weight:600;margin-bottom:20px}
.hero h1{font-size:clamp(2rem,5vw,3rem);font-weight:800;line-height:1.15;margin-bottom:16px}
.hero h1 .grad{background:linear-gradient(135deg,var(--primary),var(--accent),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{color:var(--text2);font-size:1.05rem;max-width:560px;margin:0 auto}
.tool-section{max-width:1100px;margin:0 auto;padding:0 24px 60px}
.glass-card{background:var(--glass);backdrop-filter:blur(16px);border:1px solid var(--border);border-radius:var(--radius);padding:32px;transition:transform .3s,box-shadow .3s}
.glass-card:hover{box-shadow:0 8px 40px rgba(99,102,241,.1)}
.controls{display:flex;gap:10px;margin-bottom:20px;flex-wrap:wrap;align-items:center}
.controls .action-btn{padding:10px 22px;border-radius:8px;font-weight:600;font-size:.85rem;cursor:pointer;border:1px solid var(--border);background:var(--surface2);color:var(--text);transition:all .2s;font-family:inherit}
.controls .action-btn:hover{border-color:var(--primary);color:var(--primary)}
.controls .action-btn.primary{background:linear-gradient(135deg,var(--primary),var(--accent));border:none;color:#fff}
.controls .action-btn.primary:hover{transform:translateY(-1px);box-shadow:0 4px 16px rgba(99,102,241,.35)}
.controls .action-btn.active{border-color:var(--primary);color:var(--primary);background:rgba(99,102,241,.1)}
.controls .spacer{flex:1}
.stats{font-size:.8rem;color:var(--text2);padding:4px 12px;background:var(--surface2);border-radius:6px;display:flex;gap:16px;align-items:center}
.stats span{white-space:nowrap}
.options-bar{display:flex;gap:10px;margin-bottom:16px;flex-wrap:wrap;align-items:center}
.opt-group{display:flex;align-items:center;gap:6px;font-size:.8rem;color:var(--text2)}
.opt-group label{cursor:pointer;white-space:nowrap}
.opt-group select,.opt-group input[type="checkbox"]{background:var(--surface2);color:var(--text);border:1px solid var(--border);border-radius:6px;padding:4px 8px;font-size:.78rem;font-family:inherit;cursor:pointer}
.opt-group select:focus{outline:none;border-color:var(--primary)}
.opt-group input[type="checkbox"]{width:16px;height:16px;accent-color:var(--primary)}
.editor-grid{display:grid;grid-template-columns:1fr 1fr;gap:24px}
.editor-pane{display:flex;flex-direction:column}
.editor-pane label{font-weight:600;font-size:.82rem;margin-bottom:8px;color:var(--text2);display:flex;justify-content:space-between;align-items:center}
.editor-pane label .label-actions{display:flex;gap:8px}
.label-btn{background:none;border:none;color:var(--text2);cursor:pointer;font-size:.78rem;font-weight:600;font-family:inherit;padding:2px 6px;border-radius:4px;transition:color .2s}
.label-btn:hover{color:var(--primary)}
textarea.code-input{width:100%;min-height:420px;background:var(--surface2);border:1px solid var(--border);border-radius:8px;padding:16px;color:var(--text);font-size:.85rem;font-family:'SF Mono','Fira Code','Cascadia Code',Consolas,monospace;line-height:1.65;resize:vertical;tab-size:2;transition:border-color .2s}
textarea.code-input:focus{outline:none;border-color:var(--primary)}
.output-wrap{position:relative;width:100%;min-height:420px;background:var(--surface2);border:1px solid var(--border);border-radius:8px;overflow:auto}
.output-wrap pre{padding:16px;margin:0;font-size:.85rem;font-family:'SF Mono','Fira Code','Cascadia Code',Consolas,monospace;line-height:1.65;white-space:pre-wrap;word-break:break-all}
.output-wrap .line-numbers{position:absolute;left:0;top:0;padding:16px 0;width:40px;text-align:right;color:var(--text2);font-size:.75rem;font-family:'SF Mono','Fira Code','Cascadia Code',Consolas,monospace;line-height:1.65;user-select:none;opacity:.5}
.output-wrap pre.has-lines{padding-left:52px}
.hl-tag{color:#c084fc}
.hl-attr{color:#67e8f9}
.hl-val{color:#34d399}
.hl-text{color:#e2e8f0}
.hl-comment{color:#64748b;font-style:italic}
.hl-doctype{color:#f472b6}
.hl-entity{color:#fbbf24}
.hl-bracket{color:#94a3b8}
.cta-bottom{text-align:center;padding:80px 24px;max-width:700px;margin:0 auto}
.cta-bottom h2{font-size:clamp(1.5rem,3.5vw,2.2rem);font-weight:800;margin-bottom:14px}
.cta-bottom h2 .grad{background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.cta-bottom p{color:var(--text2);margin-bottom:28px;font-size:1rem}
footer{border-top:1px solid var(--border);padding:60px 24px 32px;max-width:1200px;margin:0 auto}
.footer-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:40px;margin-bottom:40px}
.footer-col h4{font-size:.85rem;font-weight:700;margin-bottom:16px;color:var(--text)}
.footer-col a{display:block;color:var(--text2);font-size:.85rem;margin-bottom:10px;transition:color .2s}
.footer-col a:hover{color:var(--primary)}
.footer-bottom{text-align:center;color:var(--text2);font-size:.8rem;padding-top:24px;border-top:1px solid var(--border)}
@keyframes fadeUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
.fade-in{opacity:0;transform:translateY(24px);transition:opacity .6s,transform .6s}.fade-in.visible{opacity:1;transform:translateY(0)}
.toast{position:fixed;bottom:32px;left:50%;transform:translateX(-50%) translateY(80px);background:var(--primary);color:#fff;padding:12px 28px;border-radius:10px;font-weight:600;font-size:.9rem;z-index:200;transition:transform .35s cubic-bezier(.4,0,.2,1);pointer-events:none}
.toast.show{transform:translateX(-50%) translateY(0)}
@media(max-width:768px){
  .nav-links{display:none;position:absolute;top:64px;left:0;right:0;background:var(--surface);flex-direction:column;padding:20px;gap:16px;border-bottom:1px solid var(--border)}
  .nav-links.open{display:flex}
  .mobile-toggle{display:block}
  .editor-grid{grid-template-columns:1fr}
  .footer-grid{grid-template-columns:1fr 1fr}
  .glass-card{padding:24px 18px}
  .controls{flex-direction:column;align-items:stretch}
  .controls .spacer{display:none}
  .stats{justify-content:center}
  .options-bar{flex-direction:column;align-items:flex-start}
}
</style>
</head>
<body>
<nav class="nav"><div class="nav-inner">
  <a href="/" class="logo">NexTool</a>
  <button class="mobile-toggle" onclick="document.querySelector('.nav-links').classList.toggle('open')" aria-label="Menu">&#9776;</button>
  <div class="nav-links">
    <a href="/">Home</a><a href="/free-tools/" class="active">Free Tools</a><a href="/blog/">Blog</a>
    <a href="/pro.html" class="btn-cta">Get Pro</a>
  </div>
</div></nav>

<div class="breadcrumb">
  <a href="/">Home</a><span>/</span><a href="/free-tools/">Free Tools</a><span>/</span>HTML Formatter
</div>

<section class="hero fade-in">
  <div class="badge">Free Tool</div>
  <h1>HTML <span class="grad">Beautifier &amp; Minifier</span></h1>
  <p class="tool-summary" style="color:#94a3b8;font-size:15px;line-height:1.6;margin-bottom:24px;max-width:700px;margin-left:auto;margin-right:auto;">Format minified HTML into readable code with configurable indentation, or compress HTML for production use. Features syntax highlighting for tags, attributes, and values, optional attribute wrapping and sorting, and support for 2-space, 4-space, or tab indentation. Download or copy results instantly.</p>
  <p>Format your HTML with proper indentation and syntax highlighting, or compress it for production. Configure indent style, attribute handling, and more.</p>
</section>

<section class="tool-section">
  <div class="glass-card fade-in">
    <div class="controls">
      <button class="action-btn primary" id="btn-beautify" onclick="beautify()">Beautify</button>
      <button class="action-btn" id="btn-minify" onclick="minifyHTML()">Minify</button>
      <div class="spacer"></div>
      <div class="stats" id="stats">
        <span>Lines: <strong id="stat-lines">0</strong></span>
        <span>Input: <strong id="stat-in">0</strong></span>
        <span>Output: <strong id="stat-out">0</strong></span>
        <span id="stat-saving" style="display:none">Saved: <strong id="stat-pct">0</strong>%</span>
      </div>
    </div>
    <div class="options-bar">
      <div class="opt-group">
        <label for="opt-indent">Indent:</label>
        <select id="opt-indent">
          <option value="2">2 spaces</option>
          <option value="4">4 spaces</option>
          <option value="tab">Tab</option>
        </select>
      </div>
      <div class="opt-group">
        <input type="checkbox" id="opt-wrap-attr">
        <label for="opt-wrap-attr">Wrap attributes</label>
      </div>
      <div class="opt-group">
        <input type="checkbox" id="opt-sort-attr">
        <label for="opt-sort-attr">Sort attributes</label>
      </div>
    </div>
    <div class="editor-grid">
      <div class="editor-pane">
        <label>
          Input HTML
          <div class="label-actions">
            <button class="label-btn" onclick="loadSample('basic')">Basic</button>
            <button class="label-btn" onclick="loadSample('page')">Page</button>
            <button class="label-btn" onclick="clearInput()">Clear</button>
          </div>
        </label>
        <textarea class="code-input" id="input" placeholder="Paste your HTML here..." spellcheck="false"></textarea>
      </div>
      <div class="editor-pane">
        <label>
          Output
          <div class="label-actions">
            <button class="label-btn" onclick="copyOutput()">Copy</button>
            <button class="label-btn" onclick="downloadFile()">Download .html</button>
          </div>
        </label>
        <div class="output-wrap" id="output-wrap">
          <div class="line-numbers" id="line-nums"></div>
          <pre id="output" class="has-lines"></pre>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="cta-bottom fade-in">
  <h2>Explore <span class="grad">231+ Free Tools</span></h2>
  <p>NexTool is your all-in-one developer toolkit. Formatters, generators, converters, and more — all free, all instant.</p>
  <a href="/free-tools/" class="btn-cta" style="display:inline-block;padding:14px 36px;font-size:1rem">Browse All Tools</a>
</section>

<section style="max-width:900px;margin:40px auto;padding:0 24px;">
<div style="background:linear-gradient(135deg,rgba(99,102,241,0.1),rgba(168,85,247,0.08));border:1px solid rgba(99,102,241,0.15);border-radius:20px;padding:32px 28px;text-align:center;">
<div style="font-size:13px;color:#818cf8;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Founding Member</div>
<h3 style="font-size:22px;font-weight:800;color:#fff;margin:0 0 8px;">Get NexTool Pro</h3>
<p style="color:#94a3b8;font-size:14px;margin:0 auto 20px;max-width:500px;">No banners, clean output, enhanced features on all 231+ tools. One-time payment.</p>
<div style="display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap;">
<a href="/pro.html" style="display:inline-block;padding:12px 28px;background:linear-gradient(135deg,#6366f1,#a855f7,#ec4899);color:#fff;border-radius:10px;font-weight:700;font-size:15px;text-decoration:none;transition:transform 0.2s;" onmouseenter="this.style.transform='translateY(-2px)'" onmouseleave="this.style.transform='translateY(0)'">$29 — Get Pro</a>
<a href="/free-tools/" style="color:#94a3b8;font-size:14px;text-decoration:none;transition:color 0.2s;" onmouseenter="this.style.color='#e2e8f0'" onmouseleave="this.style.color='#94a3b8'">Browse 231+ Free Tools &rarr;</a>
</div>
</div>
</section>


<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/box-shadow-generator.html" style="color:var(--primary);text-decoration:none">CSS Box Shadow Generator</a> · <a href="/free-tools/emoji-picker.html" style="color:var(--primary);text-decoration:none">Emoji Picker & Search</a> · <a href="/free-tools/meta-tag-generator.html" style="color:var(--primary);text-decoration:none">Meta Tag Generator</a> · <a href="/free-tools/favicon-generator.html" style="color:var(--primary);text-decoration:none">Favicon Generator</a> · <a href="/free-tools/base64.html" style="color:var(--primary);text-decoration:none">Free Base64 Encoder/Decoder</a></p>
</div>

<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/html-beautifier.html" style="color:var(--primary);text-decoration:none">Free HTML Beautifier</a> · <a href="/free-tools/icon-generator.html" style="color:var(--primary);text-decoration:none">Free Icon Generator</a> · <a href="/free-tools/git-diff-viewer.html" style="color:var(--primary);text-decoration:none">Free Git Diff Viewer</a></p>
</div>

<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/json-to-yaml-converter.html" style="color:var(--primary);text-decoration:none">Free JSON to YAML Converter</a> · <a href="/free-tools/accessibility-checker.html" style="color:var(--primary);text-decoration:none">Free Accessibility Checker</a> · <a href="/free-tools/api-request-builder.html" style="color:var(--primary);text-decoration:none">Free API Request Builder</a></p>
</div>
<footer>
  <div class="footer-grid">
    <div class="footer-col"><h4>Tools</h4>
      <a href="/free-tools/">All Free Tools</a><a href="/free-tools/css-formatter.html">CSS Formatter</a><a href="/free-tools/javascript-formatter.html">JS Formatter</a><a href="/free-tools/yaml-formatter.html">YAML Formatter</a><a href="/free-tools/csv-formatter.html">CSV Formatter</a>
    </div>
    <div class="footer-col"><h4>Resources</h4>
      <a href="/free-tools/">Free Tools</a><a href="/blog/">Blog</a><a href="/pro.html">NexTool Pro</a>
    </div>
    <div class="footer-col"><h4>Legal</h4>
      <a href="/terms.html">Privacy Policy</a><a href="/terms.html">Terms of Service</a>
    </div>
    <div class="footer-col"><h4>Product</h4>
      <a href="/">Home</a><a href="/pro.html">Pro</a><a href="/blog/">Blog</a>
    </div>
  </div>
  <div class="footer-bottom">&copy; 2026 NexTool. All rights reserved.</div>
</footer>

<div class="toast" id="toast">Copied!</div>

<script>
const inputEl=document.getElementById('input');
const outputEl=document.getElementById('output');
const lineNumsEl=document.getElementById('line-nums');
const statIn=document.getElementById('stat-in');
const statOut=document.getElementById('stat-out');
const statLines=document.getElementById('stat-lines');
const statSaving=document.getElementById('stat-saving');
const statPct=document.getElementById('stat-pct');
let rawOutput='';

function showToast(msg){
  const t=document.getElementById('toast');
  t.textContent=msg;t.classList.add('show');
  setTimeout(()=>t.classList.remove('show'),2000);
}

function getIndent(){
  const v=document.getElementById('opt-indent').value;
  return v==='tab'?'\t':' '.repeat(parseInt(v));
}

function updateStats(){
  const inLen=inputEl.value.length;
  const outLen=rawOutput.length;
  const lines=rawOutput?rawOutput.split('\n').length:0;
  statIn.textContent=inLen.toLocaleString()+' chars';
  statOut.textContent=outLen.toLocaleString()+' chars';
  statLines.textContent=lines.toLocaleString();
  if(inLen>0&&outLen>0&&outLen<inLen){
    const pct=Math.round((1-outLen/inLen)*100);
    if(pct>0){statPct.textContent=pct;statSaving.style.display=''}
    else{statSaving.style.display='none'}
  }else{statSaving.style.display='none'}
}

// ========== HTML BEAUTIFIER ==========
function beautify(){
  const html=inputEl.value;
  if(!html.trim()){showToast('Paste some HTML first');return}
  const indent=getIndent();
  const wrapAttrs=document.getElementById('opt-wrap-attr').checked;
  const sortAttrs=document.getElementById('opt-sort-attr').checked;
  rawOutput=htmlBeautify(html,indent,wrapAttrs,sortAttrs);
  renderOutput(rawOutput);
  updateStats();
  document.getElementById('btn-beautify').classList.add('active');
  document.getElementById('btn-minify').classList.remove('active');
}

function htmlBeautify(html,indent,wrapAttrs,sortAttrs){
  const voidTags=new Set(['area','base','br','col','embed','hr','img','input','link','meta','param','source','track','wbr']);
  const rawTags=new Set(['script','style','pre','code','textarea']);
  const inlineTags=new Set(['a','abbr','b','bdi','bdo','cite','code','data','dfn','em','i','kbd','mark','q','rp','rt','ruby','s','samp','small','span','strong','sub','sup','time','u','var','wbr']);
  let result='';
  let level=0;
  let i=0;
  const len=html.length;

  function addLine(content){
    result+=indent.repeat(level)+content+'\n';
  }

  while(i<len){
    // Skip whitespace between tags
    if(/\s/.test(html[i])&&(result.endsWith('\n')||result==='')){
      while(i<len&&/\s/.test(html[i]))i++;
      if(i>=len)break;
    }

    // Comment
    if(html.slice(i,i+4)==='<!--'){
      let end=html.indexOf('-->',i+4);
      if(end===-1)end=len-3;
      end+=3;
      addLine(html.slice(i,end));
      i=end;
      continue;
    }

    // Doctype
    if(html.slice(i,i+9).toLowerCase()==='<!doctype'){
      let end=html.indexOf('>',i);
      if(end===-1)end=len-1;
      end+=1;
      addLine(html.slice(i,end));
      i=end;
      continue;
    }

    // Closing tag
    if(html[i]==='<'&&html[i+1]==='/'){
      let end=html.indexOf('>',i);
      if(end===-1)end=len-1;
      end+=1;
      const tag=html.slice(i,end);
      level=Math.max(0,level-1);
      addLine(tag);
      i=end;
      continue;
    }

    // Opening tag
    if(html[i]==='<'&&/[a-zA-Z!]/.test(html[i+1]||'')){
      let end=i+1;
      let inQuote=false;
      let quoteChar='';
      while(end<len){
        if(inQuote){
          if(html[end]===quoteChar)inQuote=false;
        }else{
          if(html[end]==='"'||html[end]==="'"){inQuote=true;quoteChar=html[end]}
          if(html[end]==='>'){end++;break}
        }
        end++;
      }
      let tag=html.slice(i,end);
      const tagNameMatch=tag.match(/^<([a-zA-Z][a-zA-Z0-9-]*)/);
      const tagName=tagNameMatch?tagNameMatch[1].toLowerCase():'';
      const selfClosing=tag.trimEnd().endsWith('/>')||voidTags.has(tagName);

      // Handle attributes
      if(sortAttrs||wrapAttrs){
        const attrMatch=tag.match(/^(<[a-zA-Z][a-zA-Z0-9-]*)([\s\S]*?)(\/?>)$/);
        if(attrMatch){
          const opening=attrMatch[1];
          const attrStr=attrMatch[2];
          const closing=attrMatch[3];
          const attrs=[];
          const attrRegex=/\s+([a-zA-Z_:][\w:.-]*)(?:\s*=\s*(?:"([^"]*)"|'([^']*)'|(\S+)))?/g;
          let m;
          while((m=attrRegex.exec(attrStr))!==null){
            const name=m[1];
            const val=m[2]!==undefined?m[2]:m[3]!==undefined?m[3]:m[4];
            attrs.push({name,val});
          }
          if(sortAttrs){attrs.sort((a,b)=>a.name.localeCompare(b.name))}
          if(wrapAttrs&&attrs.length>1){
            const attrIndent=indent.repeat(level+1);
            const formatted=attrs.map(a=>a.val!==undefined?`${a.name}="${a.val}"`:a.name).join('\n'+attrIndent);
            tag=opening+'\n'+attrIndent+formatted+'\n'+indent.repeat(level)+closing;
          }else{
            const formatted=attrs.map(a=>a.val!==undefined?`${a.name}="${a.val}"`:a.name).join(' ');
            tag=opening+(formatted?' '+formatted:'')+closing;
          }
        }
      }

      addLine(tag);
      if(!selfClosing&&!inlineTags.has(tagName)){
        // Check for raw content tags
        if(rawTags.has(tagName)){
          const closeTag='</'+tagName+'>';
          const closeIdx=html.toLowerCase().indexOf(closeTag.toLowerCase(),end);
          if(closeIdx!==-1){
            const rawContent=html.slice(end,closeIdx);
            if(rawContent.trim()){
              level++;
              const rawLines=rawContent.split('\n');
              for(const rl of rawLines){
                if(rl.trim())addLine(rl.trim());
              }
              level=Math.max(0,level-1);
            }
            addLine(html.slice(closeIdx,closeIdx+closeTag.length));
            i=closeIdx+closeTag.length;
            continue;
          }
        }
        level++;
      }
      i=end;
      continue;
    }

    // Text content
    let end=html.indexOf('<',i);
    if(end===-1)end=len;
    const text=html.slice(i,end).trim();
    if(text){addLine(text)}
    i=end;
  }

  return result.replace(/\n{3,}/g,'\n\n').trim()+'\n';
}

// ========== HTML MINIFIER ==========
function minifyHTML(){
  const html=inputEl.value;
  if(!html.trim()){showToast('Paste some HTML first');return}
  rawOutput=htmlMinify(html);
  renderOutput(rawOutput);
  updateStats();
  document.getElementById('btn-minify').classList.add('active');
  document.getElementById('btn-beautify').classList.remove('active');
}

function htmlMinify(html){
  let r=html;
  r=r.replace(/<!--[\s\S]*?-->/g,'');
  r=r.replace(/>\s+</g,'><');
  r=r.replace(/\s{2,}/g,' ');
  r=r.trim();
  return r;
}

// ========== SYNTAX HIGHLIGHTER ==========
function highlightHTML(html){
  function esc(s){return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')}
  let result='';
  let i=0;
  const len=html.length;

  while(i<len){
    // Comment
    if(html.slice(i,i+4)==='<!--'){
      let end=html.indexOf('-->',i+4);
      if(end===-1)end=len-3;
      end+=3;
      result+='<span class="hl-comment">'+esc(html.slice(i,end))+'</span>';
      i=end;continue;
    }
    // Doctype
    if(html.slice(i,i+9).toLowerCase()==='<!doctype'){
      let end=html.indexOf('>',i);
      if(end===-1)end=len-1;
      end+=1;
      result+='<span class="hl-doctype">'+esc(html.slice(i,end))+'</span>';
      i=end;continue;
    }
    // Tags
    if(html[i]==='<'){
      const isClosing=html[i+1]==='/';
      result+='<span class="hl-bracket">'+esc(isClosing?'</':'<')+'</span>';
      i+=isClosing?2:1;
      // Tag name
      let nameEnd=i;
      while(nameEnd<len&&/[a-zA-Z0-9-]/.test(html[nameEnd]))nameEnd++;
      if(nameEnd>i){
        result+='<span class="hl-tag">'+esc(html.slice(i,nameEnd))+'</span>';
        i=nameEnd;
      }
      // Attributes and closing
      while(i<len&&html[i]!=='>'){
        // Whitespace
        if(/\s/.test(html[i])){
          result+=esc(html[i]);i++;continue;
        }
        // Self-closing slash
        if(html[i]==='/'&&html[i+1]==='>'){
          result+='<span class="hl-bracket">/&gt;</span>';
          i+=2;break;
        }
        // Attribute name
        if(/[a-zA-Z_:]/.test(html[i])){
          let ae=i;
          while(ae<len&&/[\w:.-]/.test(html[ae]))ae++;
          result+='<span class="hl-attr">'+esc(html.slice(i,ae))+'</span>';
          i=ae;
          // =
          if(html[i]==='='){
            result+='<span class="hl-bracket">=</span>';i++;
            // Value
            if(html[i]==='"'||html[i]==="'"){
              const q=html[i];
              let ve=i+1;
              while(ve<len&&html[ve]!==q)ve++;
              ve++;
              result+='<span class="hl-val">'+esc(html.slice(i,ve))+'</span>';
              i=ve;
            }else{
              let ve=i;
              while(ve<len&&!/[\s>]/.test(html[ve]))ve++;
              result+='<span class="hl-val">'+esc(html.slice(i,ve))+'</span>';
              i=ve;
            }
          }
          continue;
        }
        result+=esc(html[i]);i++;
      }
      if(i<len&&html[i]==='>'){
        result+='<span class="hl-bracket">&gt;</span>';i++;
      }
      continue;
    }
    // Entity
    if(html[i]==='&'){
      let ee=html.indexOf(';',i);
      if(ee!==-1&&ee-i<12){
        ee++;
        result+='<span class="hl-entity">'+esc(html.slice(i,ee))+'</span>';
        i=ee;continue;
      }
    }
    // Text content
    let end=i;
    while(end<len&&html[end]!=='<'&&html[end]!=='&')end++;
    if(end>i){
      result+='<span class="hl-text">'+esc(html.slice(i,end))+'</span>';
      i=end;
    }else{
      result+=esc(html[i]);i++;
    }
  }
  return result;
}

// ========== RENDER OUTPUT ==========
function renderOutput(html){
  const highlighted=highlightHTML(html);
  outputEl.innerHTML=highlighted;
  const lines=html.split('\n');
  let nums='';
  for(let i=1;i<=lines.length;i++)nums+=i+'\n';
  lineNumsEl.textContent=nums;
  document.getElementById('output-wrap').scrollTop=0;
}

// ========== ACTIONS ==========
function copyOutput(){
  if(!rawOutput){showToast('Nothing to copy');return}
  navigator.clipboard.writeText(rawOutput).then(()=>showToast('Copied to clipboard!')).catch(()=>showToast('Copy failed'));
}

function downloadFile(){
  if(!rawOutput){showToast('Nothing to download');return}
  const blob=new Blob([rawOutput],{type:'text/html'});
  const a=document.createElement('a');
  a.href=URL.createObjectURL(blob);
  a.download='formatted.html';
  a.click();
  URL.revokeObjectURL(a.href);
  showToast('Downloaded!');
}

function clearInput(){
  inputEl.value='';rawOutput='';
  outputEl.innerHTML='';lineNumsEl.textContent='';
  updateStats();
}

function loadSample(type){
  if(type==='basic'){
    inputEl.value='<div class="container"><h1>Hello World</h1><p>This is a <strong>sample</strong> HTML snippet with <a href="/" target="_blank">a link</a> and some <em>emphasis</em>.</p><ul><li>Item one</li><li>Item two</li><li>Item three</li></ul><img src="image.png" alt="Sample" width="300" height="200" loading="lazy" /><button type="button" class="btn primary" data-action="submit" id="main-btn">Click Me</button></div>';
  }else{
    inputEl.value='<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>My Page</title><link rel="stylesheet" href="style.css"><script src="app.js" defer><\/script></head><body><header><nav class="nav"><a href="/" class="logo">Brand</a><ul><li><a href="/#about-story">About</a></li><li><a href="/#contact">Contact</a></li></ul></nav></header><main><section class="hero"><h1>Welcome to My Site</h1><p>A short description of what we do.</p><a href="#cta" class="btn">Browse Tools</a></section><section class="features"><div class="card"><h3>Feature One</h3><p>Description of the first feature.</p></div><div class="card"><h3>Feature Two</h3><p>Description of the second feature.</p></div></section></main><footer><p>&copy; 2026 Brand. All rights reserved.</p></footer></body></html>';
  }
  beautify();
}

inputEl.addEventListener('input',()=>{
  statIn.textContent=inputEl.value.length.toLocaleString()+' chars';
});

const obs=new IntersectionObserver(entries=>{entries.forEach(e=>{if(e.isIntersecting){e.target.classList.add('visible');obs.unobserve(e.target)}})},{threshold:.15});
document.querySelectorAll('.fade-in').forEach(el=>obs.observe(el));
</script>
<script src="/js/revenue.js" defer></script>
<script src="/js/lead-capture.js" defer></script>
<script src="/js/analytics-lite.js" defer></script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What does an HTML beautifier do?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "An HTML beautifier takes compressed or unformatted HTML and adds proper indentation, line breaks, and spacing to make the code readable and maintainable. NexTool's HTML Beautifier also handles nested tags correctly, preserves raw content in script and style blocks, and offers optional attribute sorting."
      }
    },
    {
      "@type": "Question",
      "name": "Can I configure the indentation style?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes. You can choose between 2 spaces, 4 spaces, or tab indentation. Additional options include wrapping attributes onto separate lines and alphabetically sorting attributes within each tag."
      }
    },
    {
      "@type": "Question",
      "name": "Does the HTML minifier remove comments?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes. The minifier removes all HTML comments, collapses whitespace between tags, and reduces multiple spaces to single spaces. The tool displays the size reduction percentage so you can see exactly how much space was saved."
      }
    }
  ]
}
</script>
</body>
</html>