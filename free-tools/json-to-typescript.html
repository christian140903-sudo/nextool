<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>JSON to TypeScript Converter | NexTool Free Tools</title>
<meta name="description" content="Convert JSON objects to TypeScript interfaces and type definitions. Supports nested objects, arrays, optional properties, and multiple naming conventions. Free online tool.">
<meta name="keywords" content="json to typescript, json converter, typescript interface generator, type definitions, json parser">
<meta property="og:title" content="JSON to TypeScript Converter | NexTool Free Tools">
<meta property="og:description" content="Convert JSON objects to clean TypeScript interfaces with support for nested objects, arrays, and optional properties.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://nextool.app/free-tools/json-to-typescript.html">
<meta property="og:image" content="https://nextool.app/free-tools/og/json-to-typescript.png">
<link rel="canonical" href="https://nextool.app/free-tools/json-to-typescript.html">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://nextool.app/"},{"@type":"ListItem","position":2,"name":"Free Tools","item":"https://nextool.app/free-tools/"},{"@type":"ListItem","position":3,"name":"JSON to TypeScript","item":"https://nextool.app/free-tools/json-to-typescript.html"}]}
</script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--bg:#050508;--surface:#111118;--surface2:#1a1a24;--primary:#6366f1;--accent:#a855f7;--pink:#ec4899;--cyan:#06b6d4;--text:#e2e8f0;--text2:#94a3b8;--radius:16px;--glow:0 0 30px rgba(99,102,241,0.2)}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);min-height:100vh;line-height:1.6;-webkit-font-smoothing:antialiased}
a{color:inherit;text-decoration:none}
nav{position:sticky;top:0;z-index:100;background:rgba(5,5,8,0.85);backdrop-filter:blur(20px);border-bottom:1px solid rgba(255,255,255,0.06);padding:0 2rem;height:64px;display:flex;align-items:center;justify-content:space-between}
.nav-logo{font-size:1.35rem;font-weight:800;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.nav-links{display:flex;gap:1.5rem;align-items:center}
.nav-links a{font-size:.875rem;color:var(--text2);transition:color .2s}
.nav-links a:hover{color:var(--text)}
.nav-hamburger{display:none;flex-direction:column;gap:5px;cursor:pointer;padding:8px}
.nav-hamburger span{width:22px;height:2px;background:var(--text);border-radius:2px;transition:all .3s}
@media(max-width:768px){.nav-links{display:none;position:absolute;top:64px;left:0;right:0;flex-direction:column;background:var(--surface);padding:1.5rem;gap:1rem;border-bottom:1px solid rgba(255,255,255,0.06)}.nav-links.open{display:flex}.nav-hamburger{display:flex}}
.hero{text-align:center;padding:4rem 2rem 2rem}
.breadcrumb{font-size:.8rem;color:var(--text2);margin-bottom:1.5rem}
.breadcrumb a:hover{color:var(--primary)}
.breadcrumb span{margin:0 .5rem;opacity:.4}
.hero h1{font-size:clamp(2rem,5vw,3.2rem);font-weight:800;line-height:1.15;margin-bottom:1rem}
.hero h1 .grad{background:linear-gradient(135deg,var(--primary),var(--cyan));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{color:var(--text2);max-width:600px;margin:0 auto;font-size:1.05rem}
.container{max-width:1200px;margin:0 auto;padding:2rem}
/* OPTIONS */
.options-bar{display:flex;flex-wrap:wrap;gap:1rem;align-items:center;margin-bottom:1.5rem;background:var(--surface);border:1px solid rgba(255,255,255,0.06);border-radius:var(--radius);padding:1rem 1.25rem}
.option-group{display:flex;align-items:center;gap:.5rem}
.option-group label{font-size:.8rem;color:var(--text2);white-space:nowrap}
.option-group select,.option-group input[type="text"]{background:var(--surface2);border:1px solid rgba(255,255,255,0.1);border-radius:8px;color:var(--text);padding:.4rem .6rem;font-size:.8rem;font-family:'Inter',sans-serif}
.option-group select:focus,.option-group input:focus{outline:none;border-color:var(--primary)}
.toggle{display:flex;align-items:center;gap:.4rem;cursor:pointer}
.toggle input{display:none}
.toggle .slider{width:36px;height:20px;background:var(--surface2);border-radius:10px;position:relative;transition:.3s}
.toggle .slider::after{content:'';position:absolute;top:2px;left:2px;width:16px;height:16px;background:var(--text2);border-radius:50%;transition:.3s}
.toggle input:checked+.slider{background:var(--primary)}
.toggle input:checked+.slider::after{transform:translateX(16px);background:#fff}
.toggle span{font-size:.8rem;color:var(--text2)}
/* EDITOR AREA */
.editor-grid{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem}
@media(max-width:800px){.editor-grid{grid-template-columns:1fr}}
.editor-panel{display:flex;flex-direction:column}
.editor-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}
.editor-header h3{font-size:.85rem;font-weight:600;color:var(--text2);text-transform:uppercase;letter-spacing:.05em}
.editor-header button{background:none;border:none;color:var(--text2);font-size:.75rem;cursor:pointer;font-family:'Inter',sans-serif;padding:.25rem .5rem;border-radius:6px;transition:.2s}
.editor-header button:hover{background:rgba(255,255,255,0.08);color:var(--text)}
.code-area{width:100%;min-height:420px;background:var(--surface);border:1px solid rgba(255,255,255,0.08);border-radius:var(--radius);padding:1.25rem;color:var(--text);font-family:'Menlo','Monaco','Courier New',monospace;font-size:.85rem;resize:vertical;line-height:1.6;tab-size:2;transition:border-color .3s}
.code-area:focus{outline:none;border-color:var(--primary);box-shadow:var(--glow)}
.code-area::placeholder{color:var(--text2);opacity:.4}
.output-area{width:100%;min-height:420px;background:var(--surface);border:1px solid rgba(255,255,255,0.08);border-radius:var(--radius);padding:1.25rem;color:#a5f3fc;font-family:'Menlo','Monaco','Courier New',monospace;font-size:.85rem;overflow:auto;line-height:1.6;white-space:pre;tab-size:2}
/* ACTIONS */
.main-actions{display:flex;gap:.75rem;margin-bottom:1.5rem;flex-wrap:wrap}
.btn{padding:.65rem 1.25rem;border-radius:10px;border:none;font-family:'Inter',sans-serif;font-size:.85rem;font-weight:600;cursor:pointer;transition:all .2s}
.btn-primary{background:linear-gradient(135deg,var(--primary),var(--cyan));color:#fff}
.btn-primary:hover{opacity:.9;transform:translateY(-1px)}
.btn-ghost{background:rgba(255,255,255,0.04);color:var(--text2);border:1px solid rgba(255,255,255,0.08)}
.btn-ghost:hover{background:rgba(255,255,255,0.08);color:var(--text)}
/* ERROR */
.error-msg{background:rgba(239,68,68,0.1);border:1px solid rgba(239,68,68,0.3);border-radius:10px;padding:.75rem 1rem;color:#fca5a5;font-size:.85rem;margin-bottom:1rem;display:none}
.error-msg.show{display:block}
/* STATS */
.stats-bar{display:flex;gap:2rem;margin-top:1rem;padding:1rem;background:var(--surface);border:1px solid rgba(255,255,255,0.06);border-radius:12px}
.stat-item{text-align:center}
.stat-item .val{font-size:1.3rem;font-weight:700;color:var(--primary)}
.stat-item .lbl{font-size:.7rem;color:var(--text2);text-transform:uppercase;letter-spacing:.05em;margin-top:.15rem}
@media(max-width:600px){.stats-bar{flex-wrap:wrap;gap:1rem}.stat-item{min-width:80px}}
/* HISTORY */
.history-section{background:var(--surface);border:1px solid rgba(255,255,255,0.06);border-radius:var(--radius);padding:1.5rem;margin-top:2rem}
.history-section h3{font-size:.75rem;text-transform:uppercase;letter-spacing:.08em;color:var(--text2);margin-bottom:.75rem;display:flex;justify-content:space-between;align-items:center}
.history-section h3 button{background:none;border:none;color:var(--text2);cursor:pointer;font-size:.7rem;font-family:'Inter',sans-serif}
.history-section h3 button:hover{color:var(--text)}
.history-item{display:flex;align-items:center;gap:.75rem;padding:.5rem 0;border-bottom:1px solid rgba(255,255,255,0.04);font-size:.8rem}
.history-item:last-child{border-bottom:none}
.history-item .hi-name{color:var(--primary);font-weight:600;min-width:100px}
.history-item .hi-info{color:var(--text2);flex:1}
.history-item .hi-btn{background:rgba(99,102,241,0.1);border:none;color:var(--primary);padding:.25rem .5rem;border-radius:6px;cursor:pointer;font-size:.7rem;font-family:'Inter',sans-serif}
.history-item .hi-btn:hover{background:rgba(99,102,241,0.2)}
.history-empty{color:var(--text2);font-size:.85rem;text-align:center;padding:1rem}
/* TYPE MAP */
.typemap-section{background:var(--surface);border:1px solid rgba(255,255,255,0.06);border-radius:var(--radius);padding:1.5rem;margin-top:1.5rem}
.typemap-section h3{font-size:.75rem;text-transform:uppercase;letter-spacing:.08em;color:var(--text2);margin-bottom:.75rem}
.typemap-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:.5rem}
.typemap-item{display:flex;justify-content:space-between;padding:.4rem .75rem;background:var(--surface2);border-radius:8px;font-size:.8rem}
.typemap-item .tm-from{color:var(--text2)}
.typemap-item .tm-to{color:var(--primary);font-family:'Menlo',monospace;font-weight:600}
/* TIPS */
.tips-section{background:var(--surface);border:1px solid rgba(255,255,255,0.06);border-radius:var(--radius);padding:1.5rem;margin-top:1.5rem}
.tips-section h3{font-size:.75rem;text-transform:uppercase;letter-spacing:.08em;color:var(--text2);margin-bottom:.75rem}
.tip-item{padding:.5rem 0;border-bottom:1px solid rgba(255,255,255,0.04);font-size:.85rem;color:var(--text2);line-height:1.5}
.tip-item:last-child{border-bottom:none}
.tip-item code{background:var(--surface2);padding:.15rem .4rem;border-radius:4px;color:var(--primary);font-size:.8rem;font-family:'Menlo',monospace}
/* DOWNLOAD */
.download-actions{display:flex;gap:.75rem;margin-top:1rem;flex-wrap:wrap}
/* MORE TOOLS */
.more-tools{margin-top:4rem;padding:3rem 0;border-top:1px solid rgba(255,255,255,0.06)}
.more-tools h2{text-align:center;font-size:1.5rem;margin-bottom:2rem}
.tools-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1rem}
.tool-card{background:var(--surface);border:1px solid rgba(255,255,255,0.06);border-radius:var(--radius);padding:1.5rem;transition:all .3s}
.tool-card:hover{border-color:var(--primary);transform:translateY(-3px);box-shadow:0 8px 30px rgba(99,102,241,0.1)}
.tool-card .icon{font-size:1.5rem;margin-bottom:.75rem}
.tool-card h3{font-size:1rem;margin-bottom:.4rem}
.tool-card p{font-size:.8rem;color:var(--text2)}
footer{margin-top:4rem;padding:2rem;text-align:center;border-top:1px solid rgba(255,255,255,0.06);color:var(--text2);font-size:.8rem}
footer .brand{font-weight:700;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
</style>
</head>
<body>

<nav>
  <a href="/" class="nav-logo">NexTool</a>
  <div class="nav-links" id="navLinks">
    <a href="/">Home</a>
    <a href="/free-tools/">Tools</a>
    <a href="/services/">Services</a>
    <a href="/blog/">Blog</a>
    <a href="/products/">Products</a>
    <a href="/pricing/">Pricing</a>
    <a href="/extension.html">Extension</a>
  </div>
  <div class="nav-hamburger" onclick="document.getElementById('navLinks').classList.toggle('open')">
    <span></span><span></span><span></span>
  </div>
</nav>

<section class="hero">
  <div class="breadcrumb"><a href="/">Home</a><span>/</span><a href="/free-tools/">Free Tools</a><span>/</span>JSON to TypeScript</div>
  <h1><span class="grad">JSON to TypeScript</span> Converter</h1>
  <p>Paste JSON and instantly generate clean TypeScript interfaces with support for nested objects, arrays, and optional properties.</p>
</section>

<div class="container">
  <div class="options-bar">
    <div class="option-group">
      <label>Root Name:</label>
      <input type="text" id="rootName" value="Root" placeholder="Root">
    </div>
    <div class="option-group">
      <label>Output:</label>
      <select id="outputType">
        <option value="interface">interface</option>
        <option value="type">type alias</option>
      </select>
    </div>
    <div class="option-group">
      <label>Naming:</label>
      <select id="namingConvention">
        <option value="pascal">PascalCase</option>
        <option value="camel">camelCase</option>
        <option value="original">Original</option>
      </select>
    </div>
    <label class="toggle"><input type="checkbox" id="optReadonly"><span class="slider"></span><span>readonly</span></label>
    <label class="toggle"><input type="checkbox" id="optOptional"><span class="slider"></span><span>all optional</span></label>
    <label class="toggle"><input type="checkbox" id="optExport" checked><span class="slider"></span><span>export</span></label>
    <label class="toggle"><input type="checkbox" id="optSemicolon" checked><span class="slider"></span><span>semicolons</span></label>
  </div>

  <div class="main-actions">
    <button class="btn btn-primary" onclick="convert()">Convert to TypeScript</button>
    <button class="btn btn-ghost" onclick="loadSample()">Load Sample</button>
    <button class="btn btn-ghost" onclick="clearAll()">Clear</button>
    <button class="btn btn-ghost" onclick="copyOutput()">Copy Output</button>
  </div>

  <div class="error-msg" id="errorMsg"></div>

  <div class="editor-grid">
    <div class="editor-panel">
      <div class="editor-header">
        <h3>JSON Input</h3>
        <button onclick="formatJSON()">Format JSON</button>
      </div>
      <textarea class="code-area" id="jsonInput" placeholder='{\n  "name": "John",\n  "age": 30,\n  "email": "john@example.com"\n}'></textarea>
    </div>
    <div class="editor-panel">
      <div class="editor-header">
        <h3>TypeScript Output</h3>
        <button onclick="copyOutput()">Copy</button>
      </div>
      <div class="output-area" id="tsOutput">// Paste JSON on the left and click "Convert"</div>
    </div>
  </div>

  <div class="stats-bar">
    <div class="stat-item"><div class="val" id="statInterfaces">0</div><div class="lbl">Interfaces</div></div>
    <div class="stat-item"><div class="val" id="statProperties">0</div><div class="lbl">Properties</div></div>
    <div class="stat-item"><div class="val" id="statNested">0</div><div class="lbl">Nested Types</div></div>
    <div class="stat-item"><div class="val" id="statLines">0</div><div class="lbl">Lines</div></div>
  </div>

  <div class="download-actions">
    <button class="btn btn-ghost" onclick="downloadOutput()">Download .ts File</button>
    <button class="btn btn-ghost" onclick="downloadJSON()">Download Formatted JSON</button>
  </div>

  <div class="history-section">
    <h3>Conversion History <button onclick="clearHistory()">Clear</button></h3>
    <div id="historyList"><p class="history-empty">No conversions yet</p></div>
  </div>

  <div class="typemap-section">
    <h3>JSON to TypeScript Type Mapping</h3>
    <div class="typemap-grid">
      <div class="typemap-item"><span class="tm-from">string</span><span class="tm-to">string</span></div>
      <div class="typemap-item"><span class="tm-from">number (int)</span><span class="tm-to">number</span></div>
      <div class="typemap-item"><span class="tm-from">number (float)</span><span class="tm-to">number</span></div>
      <div class="typemap-item"><span class="tm-from">boolean</span><span class="tm-to">boolean</span></div>
      <div class="typemap-item"><span class="tm-from">null</span><span class="tm-to">null</span></div>
      <div class="typemap-item"><span class="tm-from">array</span><span class="tm-to">T[]</span></div>
      <div class="typemap-item"><span class="tm-from">object</span><span class="tm-to">interface</span></div>
      <div class="typemap-item"><span class="tm-from">mixed array</span><span class="tm-to">(A | B)[]</span></div>
      <div class="typemap-item"><span class="tm-from">empty array</span><span class="tm-to">unknown[]</span></div>
      <div class="typemap-item"><span class="tm-from">nested object</span><span class="tm-to">NestedInterface</span></div>
    </div>
  </div>

  <div class="tips-section">
    <h3>Tips &amp; Best Practices</h3>
    <div class="tip-item">Use <code>interface</code> for object shapes that may be extended; use <code>type</code> for unions, intersections, or computed types.</div>
    <div class="tip-item">Enable <code>readonly</code> for immutable data structures like API responses to prevent accidental mutations.</div>
    <div class="tip-item">Use <code>optional</code> properties when some fields may not be present in every response variant.</div>
    <div class="tip-item">Name your root interface after the API endpoint or domain concept (e.g., <code>UserProfile</code>, <code>OrderResponse</code>).</div>
    <div class="tip-item">For arrays of objects, the converter automatically creates a separate interface with <code>Item</code> suffix.</div>
    <div class="tip-item">Properties with special characters are automatically quoted (e.g., <code>'content-type'</code>).</div>
  </div>

  <section class="more-tools">
    <h2>More Free Tools</h2>
    <div class="tools-grid">
      <a href="/free-tools/word-counter.html" class="tool-card"><div class="icon">Aa</div><h3>Word Counter</h3><p>Count words, characters, sentences with readability analysis.</p></a>
      <a href="/free-tools/css-minifier.html" class="tool-card"><div class="icon">&lt;/&gt;</div><h3>CSS Minifier</h3><p>Minify and beautify CSS with size reduction stats.</p></a>
      <a href="/free-tools/slug-generator.html" class="tool-card"><div class="icon">#</div><h3>Slug Generator</h3><p>Convert text to URL-friendly slugs in multiple formats.</p></a>
      <a href="/free-tools/base64-encoder.html" class="tool-card"><div class="icon">&#128274;</div><h3>Base64 Encoder</h3><p>Encode and decode Base64 strings and files online.</p></a>
    </div>
  </section>
</div>

<footer>
  <p><span class="brand">NexTool</span> &mdash; AI Automation Studio &copy; 2026. All rights reserved.</p>
</footer>

<script>
let interfaceCount = 0;
let propertyCount = 0;
let nestedCount = 0;

function toPascal(str) {
  return str.replace(/(^|[_\-\s])(\w)/g, (_, __, c) => c.toUpperCase()).replace(/^(\w)/, (_, c) => c.toUpperCase());
}
function toCamel(str) {
  const p = toPascal(str);
  return p.charAt(0).toLowerCase() + p.slice(1);
}
function applyNaming(str) {
  const convention = document.getElementById('namingConvention').value;
  if (convention === 'pascal') return toPascal(str);
  if (convention === 'camel') return toCamel(str);
  return str;
}
function applyInterfaceNaming(str) {
  return toPascal(str); // Interface names always PascalCase
}

function getType(value, key, parentName, interfaces) {
  if (value === null || value === undefined) return 'null';
  if (typeof value === 'string') return 'string';
  if (typeof value === 'number') return Number.isInteger(value) ? 'number' : 'number';
  if (typeof value === 'boolean') return 'boolean';
  if (Array.isArray(value)) {
    if (value.length === 0) return 'unknown[]';
    const types = new Set();
    let hasObject = false;
    let objectSample = null;
    value.forEach(item => {
      if (item !== null && typeof item === 'object' && !Array.isArray(item)) {
        hasObject = true;
        if (!objectSample) objectSample = item;
        else {
          // Merge keys
          Object.keys(item).forEach(k => {
            if (!(k in objectSample)) objectSample[k] = item[k];
          });
        }
      } else {
        types.add(getType(item, key, parentName, interfaces));
      }
    });
    if (hasObject) {
      const itemName = applyInterfaceNaming(key) + 'Item';
      generateInterface(objectSample, itemName, interfaces);
      types.add(itemName);
    }
    const typeArr = [...types];
    if (typeArr.length === 1) return typeArr[0] + '[]';
    return '(' + typeArr.join(' | ') + ')[]';
  }
  if (typeof value === 'object') {
    const nestedName = applyInterfaceNaming(key);
    generateInterface(value, nestedName, interfaces);
    nestedCount++;
    return nestedName;
  }
  return 'unknown';
}

function generateInterface(obj, name, interfaces) {
  const outputType = document.getElementById('outputType').value;
  const useReadonly = document.getElementById('optReadonly').checked;
  const allOptional = document.getElementById('optOptional').checked;
  const useExport = document.getElementById('optExport').checked;
  const useSemicolon = document.getElementById('optSemicolon').checked;
  const end = useSemicolon ? ';' : '';
  const ro = useReadonly ? 'readonly ' : '';
  const opt = allOptional ? '?' : '';

  interfaceCount++;
  const lines = [];
  const prefix = useExport ? 'export ' : '';

  if (outputType === 'interface') {
    lines.push(`${prefix}interface ${name} {`);
  } else {
    lines.push(`${prefix}type ${name} = {`);
  }

  const keys = Object.keys(obj);
  keys.forEach(key => {
    propertyCount++;
    const type = getType(obj[key], key, name, interfaces);
    const safeKey = /^[a-zA-Z_$][a-zA-Z0-9_$]*$/.test(key) ? key : `'${key}'`;
    lines.push(`  ${ro}${safeKey}${opt}: ${type}${end}`);
  });

  if (outputType === 'interface') {
    lines.push('}');
  } else {
    lines.push('}' + end);
  }

  interfaces.push(lines.join('\n'));
}

function convert() {
  const input = document.getElementById('jsonInput').value.trim();
  const errorEl = document.getElementById('errorMsg');
  errorEl.classList.remove('show');

  if (!input) {
    errorEl.textContent = 'Please paste some JSON to convert.';
    errorEl.classList.add('show');
    return;
  }

  let parsed;
  try {
    parsed = JSON.parse(input);
  } catch (e) {
    errorEl.textContent = 'Invalid JSON: ' + e.message;
    errorEl.classList.add('show');
    return;
  }

  interfaceCount = 0;
  propertyCount = 0;
  nestedCount = 0;

  const interfaces = [];
  const rootName = applyInterfaceNaming(document.getElementById('rootName').value || 'Root');

  if (Array.isArray(parsed)) {
    if (parsed.length > 0 && typeof parsed[0] === 'object' && parsed[0] !== null) {
      const merged = {};
      parsed.forEach(item => {
        if (typeof item === 'object' && item !== null) {
          Object.keys(item).forEach(k => { if (!(k in merged)) merged[k] = item[k]; });
        }
      });
      generateInterface(merged, rootName, interfaces);
      const useExport = document.getElementById('optExport').checked;
      const prefix = useExport ? 'export ' : '';
      interfaces.push(`\n${prefix}type ${rootName}Array = ${rootName}[];`);
    } else {
      const types = new Set(parsed.map(v => typeof v));
      document.getElementById('tsOutput').textContent = `type ${rootName} = ${[...types].join(' | ')}[];`;
      updateStats(1, 0, 0, 1);
      return;
    }
  } else if (typeof parsed === 'object' && parsed !== null) {
    generateInterface(parsed, rootName, interfaces);
  } else {
    document.getElementById('tsOutput').textContent = `type ${rootName} = ${typeof parsed};`;
    updateStats(1, 0, 0, 1);
    return;
  }

  const output = interfaces.join('\n\n');
  document.getElementById('tsOutput').textContent = output;
  updateStats(interfaceCount, propertyCount, nestedCount, output.split('\n').length);
  addToHistory(rootName, interfaceCount, propertyCount);
}

function updateStats(ifaces, props, nested, lines) {
  document.getElementById('statInterfaces').textContent = ifaces;
  document.getElementById('statProperties').textContent = props;
  document.getElementById('statNested').textContent = nested;
  document.getElementById('statLines').textContent = lines;
}

function formatJSON() {
  const input = document.getElementById('jsonInput').value.trim();
  try {
    const parsed = JSON.parse(input);
    document.getElementById('jsonInput').value = JSON.stringify(parsed, null, 2);
    document.getElementById('errorMsg').classList.remove('show');
  } catch(e) {
    document.getElementById('errorMsg').textContent = 'Cannot format: Invalid JSON - ' + e.message;
    document.getElementById('errorMsg').classList.add('show');
  }
}

function loadSample() {
  const sample = {
    "id": 1,
    "name": "NexTool",
    "version": "2.0.0",
    "isActive": true,
    "tags": ["ai", "automation", "tools"],
    "config": {
      "theme": "dark",
      "language": "en",
      "notifications": {
        "email": true,
        "push": false,
        "frequency": "daily"
      }
    },
    "users": [
      {
        "id": 1,
        "username": "chriso",
        "role": "admin",
        "permissions": ["read", "write", "delete"]
      }
    ],
    "metadata": {
      "createdAt": "2026-01-01T00:00:00Z",
      "updatedAt": "2026-02-08T12:00:00Z",
      "stars": 4.9
    }
  };
  document.getElementById('jsonInput').value = JSON.stringify(sample, null, 2);
  convert();
}

function clearAll() {
  document.getElementById('jsonInput').value = '';
  document.getElementById('tsOutput').textContent = '// Paste JSON on the left and click "Convert"';
  document.getElementById('errorMsg').classList.remove('show');
  updateStats(0, 0, 0, 0);
}

function copyOutput() {
  const text = document.getElementById('tsOutput').textContent;
  navigator.clipboard.writeText(text).then(() => {
    const btn = document.querySelector('.main-actions .btn-ghost:last-child');
    const orig = btn.textContent;
    btn.textContent = 'Copied!';
    setTimeout(() => btn.textContent = orig, 1500);
  });
}

// History management
let conversionHistory = JSON.parse(localStorage.getItem('json-ts-history') || '[]');

function addToHistory(rootName, ifaceCount, propCount) {
  const entry = {
    name: rootName,
    interfaces: ifaceCount,
    properties: propCount,
    time: Date.now()
  };
  conversionHistory.unshift(entry);
  if (conversionHistory.length > 20) conversionHistory = conversionHistory.slice(0, 20);
  localStorage.setItem('json-ts-history', JSON.stringify(conversionHistory));
  renderHistory();
}

function renderHistory() {
  if (conversionHistory.length === 0) {
    document.getElementById('historyList').innerHTML = '<p class="history-empty">No conversions yet</p>';
    return;
  }
  let html = '';
  conversionHistory.slice(0, 10).forEach((h, i) => {
    const date = new Date(h.time);
    const timeStr = date.toLocaleTimeString([], {hour: '2-digit', minute: '2-digit'});
    html += `<div class="history-item">
      <span class="hi-name">${h.name}</span>
      <span class="hi-info">${h.interfaces} interface(s), ${h.properties} properties - ${timeStr}</span>
    </div>`;
  });
  document.getElementById('historyList').innerHTML = html;
}

function clearHistory() {
  conversionHistory = [];
  localStorage.removeItem('json-ts-history');
  renderHistory();
}

function downloadOutput() {
  const text = document.getElementById('tsOutput').textContent;
  if (!text || text.startsWith('//')) { alert('Convert JSON first.'); return; }
  const blob = new Blob([text], { type: 'text/typescript' });
  const a = document.createElement('a');
  const rootName = document.getElementById('rootName').value || 'types';
  a.href = URL.createObjectURL(blob);
  a.download = rootName.toLowerCase() + '.d.ts';
  a.click();
  URL.revokeObjectURL(a.href);
}

function downloadJSON() {
  const input = document.getElementById('jsonInput').value.trim();
  if (!input) { alert('Enter JSON first.'); return; }
  try {
    const parsed = JSON.parse(input);
    const formatted = JSON.stringify(parsed, null, 2);
    const blob = new Blob([formatted], { type: 'application/json' });
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = 'data.json';
    a.click();
    URL.revokeObjectURL(a.href);
  } catch(e) {
    alert('Invalid JSON: ' + e.message);
  }
}

// Init history on load
renderHistory();

// Auto-convert on input with debounce
let debounceTimer;
document.getElementById('jsonInput').addEventListener('input', () => {
  clearTimeout(debounceTimer);
  debounceTimer = setTimeout(() => {
    const val = document.getElementById('jsonInput').value.trim();
    if (val) convert();
  }, 500);
});

// Tab support in textarea
document.getElementById('jsonInput').addEventListener('keydown', function(e) {
  if (e.key === 'Tab') {
    e.preventDefault();
    const start = this.selectionStart;
    const end = this.selectionEnd;
    this.value = this.value.substring(0, start) + '  ' + this.value.substring(end);
    this.selectionStart = this.selectionEnd = start + 2;
  }
});
</script>
<script defer src="/free-tools/js/revenue.js"></script>
<script defer src="/free-tools/js/lead-capture.js"></script>
<script defer src="/free-tools/js/analytics-lite.js"></script>
</body>
</html>
