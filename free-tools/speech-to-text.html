<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Free Speech to Text — Voice to Text Transcription Online | NexTool</title>
<meta name="description" content="Free online speech to text converter. Transcribe your voice to text in real time using your browser microphone. Supports 15+ languages. No signup required.">
<meta name="keywords" content="speech to text online, voice to text converter, transcribe audio online free, voice recognition, dictation tool, speech recognition, free transcription">
<meta name="robots" content="index, follow">
<meta property="og:title" content="Free Speech to Text — Voice Transcription Online | NexTool">
<meta property="og:description" content="Convert speech to text in real time. 15+ languages, continuous mode, instant transcription. 100% free, runs in your browser.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://nextool.app/free-tools/speech-to-text.html">
<meta property="og:image" content="https://nextool.app/assets/og-default.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<link rel="canonical" href="https://nextool.app/free-tools/speech-to-text.html">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Free Speech to Text — Voice Transcription Online | NexTool">
<meta name="twitter:description" content="Convert speech to text in real time. 15+ languages, continuous listening, free online tool by NexTool.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"SoftwareApplication","name":"NexTool Speech to Text","applicationCategory":"UtilitiesApplication","operatingSystem":"Web","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"description":"Free online speech to text converter with real-time voice transcription, 15+ language support, and instant download."}
</script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--bg:#050508;--surface:#111118;--surface2:#1a1a24;--border:#2a2a3a;--text:#e4e4eb;--text2:#9494a8;--primary:#6366f1;--accent:#a855f7;--pink:#ec4899;--green:#22c55e;--red:#ef4444;--cyan:#22d3ee;--yellow:#eab308;--radius:12px;--glass:rgba(17,17,24,0.7)}
html{scroll-behavior:smooth}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;min-height:100vh;overflow-x:hidden}
/* NAV */
.nav{position:sticky;top:0;z-index:100;background:rgba(5,5,8,0.85);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:0 2rem;height:64px;display:flex;align-items:center;justify-content:space-between}
.nav-logo{font-size:1.4rem;font-weight:800;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-decoration:none}
.nav-links{display:flex;align-items:center;gap:1.5rem}
.nav-links a{color:var(--text2);text-decoration:none;font-size:.875rem;font-weight:500;transition:color .2s}
.nav-links a:hover{color:var(--text)}
.nav-cta{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff!important;padding:.5rem 1.2rem;border-radius:8px;font-weight:600;-webkit-text-fill-color:#fff!important}
.nav-cta:hover{opacity:.9}
.nav-toggle{display:none;background:none;border:none;color:var(--text);font-size:1.5rem;cursor:pointer}
/* HERO */
.hero{text-align:center;padding:3rem 1.5rem 2rem;max-width:700px;margin:0 auto}
.hero h1{font-size:2.2rem;font-weight:800;line-height:1.2;margin-bottom:.75rem}
.hero h1 span{background:linear-gradient(135deg,var(--primary),var(--accent),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{color:var(--text2);font-size:1rem}
/* TOOL */
.tool-container{max-width:800px;margin:0 auto;padding:0 1.5rem 3rem}
/* MIC AREA */
.mic-area{display:flex;flex-direction:column;align-items:center;gap:1.5rem;margin-bottom:2rem}
.mic-ring{position:relative;width:140px;height:140px;display:flex;align-items:center;justify-content:center}
.mic-pulse{position:absolute;inset:0;border-radius:50%;border:2px solid rgba(99,102,241,.3);transition:all .3s}
.mic-pulse.active{animation:pulse-ring 1.5s ease-out infinite}
@keyframes pulse-ring{
  0%{transform:scale(1);opacity:.6}
  100%{transform:scale(1.6);opacity:0}
}
.mic-pulse-2{position:absolute;inset:0;border-radius:50%;border:2px solid rgba(168,85,247,.2)}
.mic-pulse-2.active{animation:pulse-ring 1.5s ease-out .4s infinite}
.mic-btn{width:100px;height:100px;border-radius:50%;border:none;cursor:pointer;background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;font-size:2.4rem;display:flex;align-items:center;justify-content:center;transition:all .3s;box-shadow:0 4px 24px rgba(99,102,241,.3);position:relative;z-index:2}
.mic-btn:hover{transform:scale(1.05);box-shadow:0 8px 32px rgba(99,102,241,.4)}
.mic-btn.recording{background:linear-gradient(135deg,var(--red),#dc2626);box-shadow:0 4px 24px rgba(239,68,68,.4);animation:mic-glow 1.2s ease-in-out infinite alternate}
@keyframes mic-glow{
  0%{box-shadow:0 4px 24px rgba(239,68,68,.3)}
  100%{box-shadow:0 8px 40px rgba(239,68,68,.6)}
}
.mic-label{font-size:.9rem;font-weight:600;color:var(--text2);transition:color .3s}
.mic-label.active{color:var(--red)}
/* LEVEL BAR */
.level-container{width:200px;height:6px;background:var(--surface2);border-radius:3px;overflow:hidden;opacity:0;transition:opacity .3s}
.level-container.active{opacity:1}
.level-bar{height:100%;width:0;background:linear-gradient(90deg,var(--primary),var(--accent),var(--pink));border-radius:3px;transition:width .1s}
/* CONTROLS */
.controls{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:1rem;align-items:center;justify-content:center}
.controls select,.controls button{background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.45rem .9rem;border-radius:8px;font-size:.8rem;font-weight:500;cursor:pointer;transition:all .2s;font-family:inherit}
.controls select{appearance:none;padding-right:1.8rem;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%239494a8' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right .6rem center}
.controls button:hover{border-color:var(--primary);background:rgba(99,102,241,.12)}
.controls button.active{background:linear-gradient(135deg,var(--primary),var(--accent));border-color:transparent;color:#fff}
/* STATUS */
.status-bar{display:flex;align-items:center;gap:1rem;margin-bottom:1rem;font-size:.8rem;color:var(--text2);justify-content:center;flex-wrap:wrap}
.status-dot{width:8px;height:8px;border-radius:50%;display:inline-block}
.status-dot.idle{background:var(--border)}
.status-dot.listening{background:var(--green);animation:dot-blink 1s ease-in-out infinite}
.status-dot.error{background:var(--red)}
@keyframes dot-blink{0%,100%{opacity:1}50%{opacity:.4}}
/* TRANSCRIPT PANEL */
.panel{background:var(--glass);backdrop-filter:blur(16px);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;display:flex;flex-direction:column;margin-bottom:1rem}
.panel-header{padding:.6rem 1rem;border-bottom:1px solid var(--border);font-size:.8rem;font-weight:600;color:var(--text2);display:flex;justify-content:space-between;align-items:center;background:rgba(26,26,36,0.5)}
.panel-body{flex:1;position:relative}
#transcript{width:100%;min-height:260px;background:transparent;border:none;color:var(--text);font-family:'Inter',system-ui,sans-serif;font-size:.9rem;padding:1rem;resize:vertical;outline:none;line-height:1.8;tab-size:2}
#transcript::placeholder{color:var(--text2);opacity:.5}
/* INTERIM */
.interim-display{padding:0 1rem .75rem;min-height:24px;font-size:.85rem;color:rgba(99,102,241,.7);font-style:italic;border-top:1px solid var(--border)}
/* STATS */
.stats-bar{display:flex;flex-wrap:wrap;gap:1.5rem;justify-content:center;margin-bottom:1.5rem;font-size:.8rem;color:var(--text2)}
.stat{display:flex;align-items:center;gap:.35rem}
.stat-val{color:var(--text);font-weight:600}
/* COMPAT NOTICE */
.compat-notice{background:rgba(234,179,8,.08);border:1px solid rgba(234,179,8,.2);border-radius:var(--radius);padding:.75rem 1rem;font-size:.8rem;color:var(--yellow);text-align:center;margin-bottom:1.5rem;display:none}
.compat-notice.show{display:block}
/* CTA */
.cta-section{text-align:center;padding:4rem 1.5rem;max-width:700px;margin:0 auto}
.cta-section h2{font-size:1.8rem;font-weight:800;margin-bottom:.75rem}
.cta-section h2 span{background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.cta-section p{color:var(--text2);margin-bottom:1.5rem}
.cta-btn{display:inline-block;background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;padding:.75rem 2rem;border-radius:10px;font-weight:700;text-decoration:none;font-size:1rem;transition:transform .2s,box-shadow .2s}
.cta-btn:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(99,102,241,.3)}
/* FOOTER */
.footer{border-top:1px solid var(--border);padding:3rem 2rem 2rem;max-width:1200px;margin:0 auto}
.footer-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:2rem;margin-bottom:2rem}
.footer-col h4{font-size:.85rem;font-weight:700;margin-bottom:.75rem;color:var(--text)}
.footer-col a{display:block;color:var(--text2);text-decoration:none;font-size:.8rem;margin-bottom:.4rem;transition:color .2s}
.footer-col a:hover{color:var(--primary)}
.footer-bottom{text-align:center;color:var(--text2);font-size:.75rem;padding-top:1.5rem;border-top:1px solid var(--border)}
/* FADE IN */
.fade-in{opacity:0;transform:translateY(20px);transition:opacity .6s,transform .6s}
.fade-in.visible{opacity:1;transform:translateY(0)}
/* TOAST */
.toast{position:fixed;bottom:2rem;left:50%;transform:translateX(-50%) translateY(80px);background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.6rem 1.2rem;border-radius:10px;font-size:.85rem;font-weight:500;z-index:200;transition:transform .3s;pointer-events:none}
.toast.show{transform:translateX(-50%) translateY(0)}
/* RESPONSIVE */
@media(max-width:768px){
  .nav-links{display:none;position:absolute;top:64px;left:0;right:0;background:var(--bg);border-bottom:1px solid var(--border);flex-direction:column;padding:1rem 2rem;gap:1rem}
  .nav-links.open{display:flex}
  .nav-toggle{display:block}
  .hero h1{font-size:1.6rem}
  .footer-grid{grid-template-columns:1fr}
  .controls{gap:.35rem}
  .mic-ring{width:120px;height:120px}
  .mic-btn{width:84px;height:84px;font-size:2rem}
}
</style>
</head>
<body>

<nav class="nav">
  <a href="/" class="nav-logo">NexTool</a>
  <button class="nav-toggle" onclick="document.querySelector('.nav-links').classList.toggle('open')" aria-label="Menu">&#9776;</button>
  <div class="nav-links">
    <a href="/">Home</a>
    <a href="/free-tools/">Tools</a>
    <a href="/free-tools/">Free Tools</a>
    <a href="/blog/">Blog</a>
    <a href="/pro.html" class="nav-cta">Get Pro &mdash; $29</a>
  </div>
</nav>

<section class="hero fade-in">
  <h1>Free <span>Speech to Text</span> Converter</h1>
  <p class="tool-summary" style="color:#94a3b8;font-size:15px;line-height:1.6;margin-bottom:24px;max-width:700px;margin-left:auto;margin-right:auto;">Convert your voice to text in real time using your browser's built-in speech recognition. Supports 15+ languages with continuous listening mode, interim results, word count, and instant export. No signup, no server uploads &mdash; everything stays on your device.</p>
</section>

<div class="tool-container fade-in">

  <div id="compatNotice" class="compat-notice">
    Your browser does not support the Web Speech API. For best results, please use <strong>Google Chrome</strong> or <strong>Microsoft Edge</strong> on desktop.
  </div>

  <!-- Mic Button -->
  <div class="mic-area">
    <div class="mic-ring">
      <div class="mic-pulse" id="pulse1"></div>
      <div class="mic-pulse-2" id="pulse2"></div>
      <button class="mic-btn" id="micBtn" title="Click to start recording" aria-label="Start voice recording">
        <svg id="micIcon" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" y1="19" x2="12" y2="23"/><line x1="8" y1="23" x2="16" y2="23"/></svg>
        <svg id="stopIcon" style="display:none" width="28" height="28" viewBox="0 0 24 24" fill="currentColor"><rect x="4" y="4" width="16" height="16" rx="2"/></svg>
      </button>
    </div>
    <div class="mic-label" id="micLabel">Click to start listening</div>
    <div class="level-container" id="levelContainer">
      <div class="level-bar" id="levelBar"></div>
    </div>
  </div>

  <!-- Controls -->
  <div class="controls">
    <select id="langSelect" title="Recognition language">
      <option value="en-US">English (US)</option>
      <option value="en-GB">English (UK)</option>
      <option value="de-DE">Deutsch</option>
      <option value="fr-FR">Fran&ccedil;ais</option>
      <option value="es-ES">Espa&ntilde;ol</option>
      <option value="it-IT">Italiano</option>
      <option value="pt-BR">Portugu&ecirc;s (BR)</option>
      <option value="ja-JP">Japanese</option>
      <option value="ko-KR">Korean</option>
      <option value="zh-CN">Chinese (Simplified)</option>
      <option value="ru-RU">Russian</option>
      <option value="ar-SA">Arabic</option>
      <option value="hi-IN">Hindi</option>
      <option value="nl-NL">Dutch</option>
      <option value="pl-PL">Polish</option>
      <option value="tr-TR">Turkish</option>
    </select>
    <button id="continuousBtn" class="active" onclick="toggleContinuous()" title="Keep listening without stopping">Continuous</button>
    <button onclick="copyTranscript()" title="Copy to clipboard">Copy</button>
    <button onclick="downloadTranscript()" title="Download as .txt">Download</button>
    <button onclick="clearTranscript()" title="Clear all text">Clear</button>
  </div>

  <!-- Status -->
  <div class="status-bar">
    <span><span class="status-dot idle" id="statusDot"></span></span>
    <span id="statusText">Ready &mdash; click the microphone to begin</span>
  </div>

  <!-- Transcript -->
  <div class="panel">
    <div class="panel-header">
      <span>Transcript</span>
      <span id="panelInfo"></span>
    </div>
    <div class="panel-body">
      <textarea id="transcript" placeholder="Your transcribed text will appear here...&#10;&#10;Click the microphone button above and start speaking." spellcheck="true"></textarea>
    </div>
    <div class="interim-display" id="interimDisplay"></div>
  </div>

  <!-- Stats -->
  <div class="stats-bar">
    <div class="stat">Words: <span class="stat-val" id="wordCount">0</span></div>
    <div class="stat">Characters: <span class="stat-val" id="charCount">0</span></div>
    <div class="stat">Speaking time: <span class="stat-val" id="speakTime">0:00</span></div>
  </div>

</div>

<section class="cta-section fade-in">
  <h2>Need something <span>more powerful</span>?</h2>
  <p>Let us build it for you. Custom APIs, dashboards, automations &mdash; whatever you need.</p>
  <a href="/#contact" class="cta-btn">Start a Project &rarr;</a>
</section>

<!-- Cross Promo -->
<section style="max-width:900px;margin:40px auto;padding:0 24px;">
<div style="background:linear-gradient(135deg,rgba(99,102,241,0.1),rgba(168,85,247,0.08));border:1px solid rgba(99,102,241,0.15);border-radius:20px;padding:32px 28px;text-align:center;">
<div style="font-size:13px;color:#818cf8;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Founding Member</div>
<h3 style="font-size:22px;font-weight:800;color:#fff;margin:0 0 8px;">Get NexTool Pro</h3>
<p style="color:#94a3b8;font-size:14px;margin:0 auto 20px;max-width:500px;">No banners, clean output, enhanced features on all 245+ tools. One-time payment.</p>
<div style="display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap;">
<a href="/pro.html" style="display:inline-block;padding:12px 28px;background:linear-gradient(135deg,#6366f1,#a855f7,#ec4899);color:#fff;border-radius:10px;font-weight:700;font-size:15px;text-decoration:none;">$29 &mdash; Get Pro</a>
<a href="/free-tools/" style="color:#94a3b8;font-size:14px;text-decoration:none;">Browse 245+ Free Tools &rarr;</a>
</div>
</div>
</section>


<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/box-shadow-generator.html" style="color:var(--primary);text-decoration:none">CSS Box Shadow Generator</a> · <a href="/free-tools/emoji-picker.html" style="color:var(--primary);text-decoration:none">Emoji Picker & Search</a> · <a href="/free-tools/meta-tag-generator.html" style="color:var(--primary);text-decoration:none">Meta Tag Generator</a></p>
</div>

<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/json-to-yaml-converter.html" style="color:var(--primary);text-decoration:none">Free JSON to YAML Converter</a> · <a href="/free-tools/accessibility-checker.html" style="color:var(--primary);text-decoration:none">Free Accessibility Checker</a> · <a href="/free-tools/api-request-builder.html" style="color:var(--primary);text-decoration:none">Free API Request Builder</a></p>
</div>
<footer class="footer fade-in">
  <div class="footer-grid">
    <div class="footer-col">
      <h4>Products</h4>
      <a href="/free-tools/">245+ Free Tools</a>
<a href="/pro.html">NexTool Pro</a>
<a href="/workspace.html">Workspace</a>
    </div>
    <div class="footer-col">
      <h4>Explore</h4>
      <a href="/free-tools/">Free Tools</a><a href="/blog/">Blog</a><a href="/pro.html">FAQ</a><a href="/pro.html">Pro &mdash; $29</a>
    </div>
    <div class="footer-col">
      <h4>Ecosystem</h4>
      <a href="/">NexTool Home</a><a href="/#contact">Contact</a><a href="https://github.com/christian140903-sudo/nextool" target="_blank">GitHub</a>
    </div>
  </div>
  <div class="footer-bottom">&copy; 2026 NexTool. AI-powered tools for everyone.</div>
</footer>

<div class="toast" id="toast"></div>

<script>
/* ---- State ---- */
let recognition = null;
let isRecording = false;
let continuous = true;
let fullTranscript = '';
let sessionStart = null;
let totalSpeakMs = 0;
let audioCtx = null;
let analyser = null;
let micStream = null;
let levelRAF = null;

const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

/* ---- DOM refs ---- */
const micBtn = document.getElementById('micBtn');
const micIcon = document.getElementById('micIcon');
const stopIcon = document.getElementById('stopIcon');
const micLabel = document.getElementById('micLabel');
const pulse1 = document.getElementById('pulse1');
const pulse2 = document.getElementById('pulse2');
const levelContainer = document.getElementById('levelContainer');
const levelBar = document.getElementById('levelBar');
const statusDot = document.getElementById('statusDot');
const statusText = document.getElementById('statusText');
const transcriptEl = document.getElementById('transcript');
const interimDisplay = document.getElementById('interimDisplay');
const wordCountEl = document.getElementById('wordCount');
const charCountEl = document.getElementById('charCount');
const speakTimeEl = document.getElementById('speakTime');
const panelInfo = document.getElementById('panelInfo');
const langSelect = document.getElementById('langSelect');
const continuousBtn = document.getElementById('continuousBtn');
const compatNotice = document.getElementById('compatNotice');

/* ---- Compatibility check ---- */
if (!SpeechRecognition) {
  compatNotice.classList.add('show');
  micBtn.style.opacity = '0.4';
  micBtn.style.cursor = 'not-allowed';
  micBtn.disabled = true;
  statusText.textContent = 'Speech recognition not supported in this browser';
  statusDot.className = 'status-dot error';
}

/* ---- Init recognition ---- */
function createRecognition() {
  if (!SpeechRecognition) return null;
  const r = new SpeechRecognition();
  r.continuous = continuous;
  r.interimResults = true;
  r.maxAlternatives = 1;
  r.lang = langSelect.value;

  r.onstart = function() {
    isRecording = true;
    sessionStart = Date.now();
    micBtn.classList.add('recording');
    micIcon.style.display = 'none';
    stopIcon.style.display = '';
    micLabel.textContent = 'Listening... click to stop';
    micLabel.classList.add('active');
    pulse1.classList.add('active');
    pulse2.classList.add('active');
    levelContainer.classList.add('active');
    statusDot.className = 'status-dot listening';
    statusText.textContent = 'Listening...';
    startAudioLevel();
  };

  r.onresult = function(e) {
    let interim = '';
    let finalText = '';
    for (let i = e.resultIndex; i < e.results.length; i++) {
      const t = e.results[i][0].transcript;
      if (e.results[i].isFinal) {
        finalText += t;
      } else {
        interim += t;
      }
    }
    if (finalText) {
      /* Add spacing between sentences */
      if (fullTranscript.length > 0 && !fullTranscript.endsWith('\n')) {
        const lastChar = fullTranscript.slice(-1);
        if (lastChar === '.' || lastChar === '!' || lastChar === '?') {
          fullTranscript += ' ';
        } else if (lastChar !== ' ') {
          fullTranscript += ' ';
        }
      }
      fullTranscript += finalText;
      transcriptEl.value = fullTranscript;
      transcriptEl.scrollTop = transcriptEl.scrollHeight;
      updateStats();
    }
    interimDisplay.textContent = interim ? interim : '';
  };

  r.onerror = function(e) {
    if (e.error === 'no-speech') {
      statusText.textContent = 'No speech detected — try again';
      return;
    }
    if (e.error === 'aborted') return;
    if (e.error === 'not-allowed') {
      statusText.textContent = 'Microphone access denied — check browser permissions';
      statusDot.className = 'status-dot error';
      stopRecording();
      return;
    }
    statusText.textContent = 'Error: ' + e.error;
    statusDot.className = 'status-dot error';
  };

  r.onend = function() {
    if (sessionStart) {
      totalSpeakMs += (Date.now() - sessionStart);
      sessionStart = null;
    }
    updateStats();
    interimDisplay.textContent = '';
    /* Auto-restart in continuous mode if user didn't manually stop */
    if (isRecording && continuous) {
      try {
        recognition.start();
      } catch(ex) {
        stopRecording();
      }
      return;
    }
    stopRecording();
  };

  return r;
}

/* ---- Start / Stop ---- */
micBtn.addEventListener('click', function() {
  if (isRecording) {
    isRecording = false;
    if (recognition) recognition.stop();
    stopRecording();
  } else {
    startRecording();
  }
});

function startRecording() {
  if (!SpeechRecognition) return;
  recognition = createRecognition();
  if (!recognition) return;
  try {
    recognition.start();
  } catch(ex) {
    statusText.textContent = 'Could not start — try refreshing the page';
    statusDot.className = 'status-dot error';
  }
}

function stopRecording() {
  isRecording = false;
  if (sessionStart) {
    totalSpeakMs += (Date.now() - sessionStart);
    sessionStart = null;
  }
  micBtn.classList.remove('recording');
  micIcon.style.display = '';
  stopIcon.style.display = 'none';
  micLabel.textContent = 'Click to start listening';
  micLabel.classList.remove('active');
  pulse1.classList.remove('active');
  pulse2.classList.remove('active');
  levelContainer.classList.remove('active');
  levelBar.style.width = '0';
  interimDisplay.textContent = '';
  if (statusDot.className !== 'status-dot error') {
    statusDot.className = 'status-dot idle';
    const wc = countWords(transcriptEl.value);
    statusText.textContent = wc > 0 ? 'Stopped — ' + wc + ' words transcribed' : 'Ready — click the microphone to begin';
  }
  stopAudioLevel();
  updateStats();
}

/* ---- Audio Level Visualization ---- */
function startAudioLevel() {
  if (audioCtx) return;
  navigator.mediaDevices.getUserMedia({ audio: true }).then(function(stream) {
    micStream = stream;
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    const source = audioCtx.createMediaStreamSource(stream);
    analyser = audioCtx.createAnalyser();
    analyser.fftSize = 256;
    analyser.smoothingTimeConstant = 0.5;
    source.connect(analyser);
    animateLevel();
  }).catch(function() {
    /* Mic access denied — visualization just won't work */
  });
}

function animateLevel() {
  if (!analyser || !isRecording) return;
  const data = new Uint8Array(analyser.frequencyBinCount);
  analyser.getByteFrequencyData(data);
  let sum = 0;
  for (let i = 0; i < data.length; i++) sum += data[i];
  const avg = sum / data.length;
  const pct = Math.min(100, (avg / 128) * 100);
  levelBar.style.width = pct + '%';
  levelRAF = requestAnimationFrame(animateLevel);
}

function stopAudioLevel() {
  if (levelRAF) { cancelAnimationFrame(levelRAF); levelRAF = null; }
  if (micStream) { micStream.getTracks().forEach(function(t) { t.stop(); }); micStream = null; }
  if (audioCtx) { audioCtx.close().catch(function(){}); audioCtx = null; analyser = null; }
}

/* ---- Continuous toggle ---- */
function toggleContinuous() {
  continuous = !continuous;
  continuousBtn.classList.toggle('active', continuous);
}

/* ---- Stats ---- */
function countWords(text) {
  const t = text.trim();
  if (!t) return 0;
  return t.split(/\s+/).length;
}

function updateStats() {
  const text = transcriptEl.value;
  const words = countWords(text);
  const chars = text.length;
  wordCountEl.textContent = words;
  charCountEl.textContent = chars;

  let ms = totalSpeakMs;
  if (sessionStart) ms += (Date.now() - sessionStart);
  const secs = Math.floor(ms / 1000);
  const m = Math.floor(secs / 60);
  const s = secs % 60;
  speakTimeEl.textContent = m + ':' + (s < 10 ? '0' : '') + s;

  panelInfo.textContent = words > 0 ? words + ' words' : '';
}

/* Update stats when user edits manually */
transcriptEl.addEventListener('input', function() {
  fullTranscript = transcriptEl.value;
  updateStats();
});

/* ---- Language change restarts recognition ---- */
langSelect.addEventListener('change', function() {
  if (isRecording && recognition) {
    isRecording = false;
    recognition.stop();
    setTimeout(function() {
      startRecording();
    }, 200);
  }
});

/* ---- Copy ---- */
function copyTranscript() {
  const text = transcriptEl.value.trim();
  if (!text) { showToast('Nothing to copy'); return; }
  navigator.clipboard.writeText(text).then(function() { showToast('Copied to clipboard'); });
}

/* ---- Download ---- */
function downloadTranscript() {
  const text = transcriptEl.value.trim();
  if (!text) { showToast('Nothing to download'); return; }
  const blob = new Blob([text], { type: 'text/plain' });
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'transcript.txt';
  a.click();
  URL.revokeObjectURL(a.href);
  showToast('Downloaded transcript.txt');
}

/* ---- Clear ---- */
function clearTranscript() {
  transcriptEl.value = '';
  fullTranscript = '';
  totalSpeakMs = 0;
  interimDisplay.textContent = '';
  updateStats();
  showToast('Transcript cleared');
}

/* ---- Toast ---- */
function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(function() { t.classList.remove('show'); }, 2000);
}

/* ---- Fade-in observer ---- */
const observer = new IntersectionObserver(function(entries) {
  entries.forEach(function(entry) { if (entry.isIntersecting) { entry.target.classList.add('visible'); observer.unobserve(entry.target); }});
}, { threshold: 0.1 });
document.querySelectorAll('.fade-in').forEach(function(el) { observer.observe(el); });
</script>
<script src="/js/analytics-lite.js" defer></script>
<script src="/js/revenue.js" defer></script>
<script src="/js/lead-capture.js" defer></script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What is speech to text?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Speech to text (also called voice recognition or dictation) converts spoken language into written text. NexTool's Speech to Text tool uses your browser's built-in Web Speech API to transcribe your voice in real time, with no server uploads or signups required."
      }
    },
    {
      "@type": "Question",
      "name": "Which browsers support speech to text?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "The Web Speech API works best in Google Chrome and Microsoft Edge on desktop. Safari has partial support. Firefox does not currently support the SpeechRecognition API. For the best experience, use the latest version of Chrome."
      }
    },
    {
      "@type": "Question",
      "name": "What languages are supported?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "NexTool's Speech to Text supports 15+ languages including English (US/UK), German, French, Spanish, Italian, Portuguese, Japanese, Korean, Chinese, Russian, Arabic, Hindi, Dutch, Polish, and Turkish."
      }
    },
    {
      "@type": "Question",
      "name": "Is my voice data kept private?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Your audio is processed by your browser's speech recognition engine (which may send audio to cloud services like Google for processing in Chrome). NexTool itself never receives, stores, or transmits your audio data. The transcript stays entirely in your browser."
      }
    }
  ]
}
</script>
</body>
</html>
