<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
    <link rel="icon" type="image/svg+xml" href="/img/favicon.svg">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Free Changelog Generator — Keep a Changelog Format | ANIMA</title>
<meta name="description" content="Generate professional changelogs in Keep a Changelog format. Semantic versioning, categorized entries, Markdown output, live preview. Free, no signup required.">
<meta name="keywords" content="changelog generator, keep a changelog, semver, semantic versioning, CHANGELOG.md, release notes, markdown changelog, free online tool">
<meta property="og:title" content="Free Changelog Generator | ANIMA">
<meta property="og:description" content="Generate professional changelogs with semantic versioning and Keep a Changelog format. Free online tool.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://nextool.app/free-tools/changelog-generator.html">
<meta property="og:image" content="https://nextool.app/img/og-image.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<link rel="canonical" href="https://nextool.app/free-tools/changelog-generator.html">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Free Changelog Generator | ANIMA">
<meta name="twitter:description" content="Generate professional changelogs in Keep a Changelog format. Free online tool by ANIMA.">
<meta name="robots" content="index, follow">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"SoftwareApplication","name":"Changelog Generator","applicationCategory":"DeveloperApplication","operatingSystem":"Web","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"description":"Free online changelog generator following Keep a Changelog format with semantic versioning and Markdown output."}
</script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--bg:#050508;--surface:#111118;--surface2:#1a1a24;--border:#2a2a3a;--text:#e4e4eb;--text2:#9494a8;--primary:#00d4ff;--accent:#a855f7;--pink:#ec4899;--green:#22c55e;--red:#ef4444;--cyan:#22d3ee;--yellow:#eab308;--orange:#f97316;--radius:12px;--glass:rgba(17,17,24,0.7)}
html{scroll-behavior:smooth}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;min-height:100vh;overflow-x:hidden}
/* NAV */
.nav{position:sticky;top:0;z-index:100;background:rgba(5,5,8,0.85);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:0 2rem;height:64px;display:flex;align-items:center;justify-content:space-between}
.nav-logo{font-size:1.4rem;font-weight:800;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-decoration:none}
.nav-links{display:flex;align-items:center;gap:1.5rem}
.nav-links a{color:var(--text2);text-decoration:none;font-size:.875rem;font-weight:500;transition:color .2s}
.nav-links a:hover{color:var(--text)}
.nav-cta{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff!important;padding:.5rem 1.2rem;border-radius:8px;font-weight:600;-webkit-text-fill-color:#fff!important}
.nav-cta:hover{opacity:.9}
.nav-toggle{display:none;background:none;border:none;color:var(--text);font-size:1.5rem;cursor:pointer}
/* HERO */
.hero{text-align:center;padding:3rem 1.5rem 2rem;max-width:700px;margin:0 auto}
.hero h1{font-size:2.2rem;font-weight:800;line-height:1.2;margin-bottom:.75rem}
.hero h1 span{background:linear-gradient(135deg,var(--primary),var(--accent),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{color:var(--text2);font-size:1rem}
/* TOOL */
.tool-container{max-width:1200px;margin:0 auto;padding:0 1.5rem 3rem}
.toolbar{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:1rem;align-items:center}
.toolbar button,.toolbar select,.toolbar input{background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.45rem .9rem;border-radius:8px;font-size:.8rem;font-weight:500;cursor:pointer;transition:all .2s;font-family:inherit}
.toolbar button:hover{border-color:var(--primary);background:rgba(0,212,255,.12)}
.toolbar button.active{background:linear-gradient(135deg,var(--primary),var(--accent));border-color:transparent;color:#fff}
.toolbar input[type="file"]{display:none}
.toolbar label{background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.45rem .9rem;border-radius:8px;font-size:.8rem;font-weight:500;cursor:pointer;transition:all .2s}
.toolbar label:hover{border-color:var(--primary);background:rgba(0,212,255,.12)}
/* FORM */
.form-section{background:var(--glass);backdrop-filter:blur(16px);border:1px solid var(--border);border-radius:var(--radius);padding:1.5rem;margin-bottom:1rem}
.form-section h3{font-size:.95rem;font-weight:700;margin-bottom:1rem;color:var(--text)}
.form-row{display:flex;gap:.75rem;margin-bottom:.75rem;flex-wrap:wrap;align-items:flex-end}
.form-group{display:flex;flex-direction:column;gap:.3rem;flex:1;min-width:120px}
.form-group label{font-size:.75rem;font-weight:600;color:var(--text2);text-transform:uppercase;letter-spacing:.5px}
.form-group input,.form-group select,.form-group textarea{background:var(--surface);border:1px solid var(--border);color:var(--text);padding:.5rem .75rem;border-radius:8px;font-size:.85rem;font-family:inherit;transition:border-color .2s;outline:none}
.form-group input:focus,.form-group select:focus,.form-group textarea:focus{border-color:var(--primary)}
.form-group textarea{resize:vertical;min-height:60px}
.form-group select{appearance:none;padding-right:1.8rem;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%239494a8' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right .6rem center}
/* CATEGORY BADGES */
.cat-badges{display:flex;flex-wrap:wrap;gap:.4rem;margin-bottom:.75rem}
.cat-badge{padding:.35rem .75rem;border-radius:6px;font-size:.75rem;font-weight:600;cursor:pointer;border:1px solid var(--border);transition:all .2s;user-select:none}
.cat-badge:hover{opacity:.85}
.cat-badge.cat-added{background:rgba(34,197,94,.15);color:var(--green);border-color:rgba(34,197,94,.3)}
.cat-badge.cat-added.sel{background:rgba(34,197,94,.3);border-color:var(--green)}
.cat-badge.cat-changed{background:rgba(234,179,8,.15);color:var(--yellow);border-color:rgba(234,179,8,.3)}
.cat-badge.cat-changed.sel{background:rgba(234,179,8,.3);border-color:var(--yellow)}
.cat-badge.cat-deprecated{background:rgba(249,115,22,.15);color:var(--orange);border-color:rgba(249,115,22,.3)}
.cat-badge.cat-deprecated.sel{background:rgba(249,115,22,.3);border-color:var(--orange)}
.cat-badge.cat-removed{background:rgba(239,68,68,.15);color:var(--red);border-color:rgba(239,68,68,.3)}
.cat-badge.cat-removed.sel{background:rgba(239,68,68,.3);border-color:var(--red)}
.cat-badge.cat-fixed{background:rgba(0,212,255,.15);color:var(--primary);border-color:rgba(0,212,255,.3)}
.cat-badge.cat-fixed.sel{background:rgba(0,212,255,.3);border-color:var(--primary)}
.cat-badge.cat-security{background:rgba(168,85,247,.15);color:var(--accent);border-color:rgba(168,85,247,.3)}
.cat-badge.cat-security.sel{background:rgba(168,85,247,.3);border-color:var(--accent)}
/* ENTRY LIST */
.entry-list{margin-top:.75rem}
.entry-item{display:flex;align-items:center;gap:.5rem;padding:.4rem .6rem;border-radius:6px;margin-bottom:.3rem;font-size:.82rem;background:var(--surface);border:1px solid var(--border)}
.entry-item .entry-cat{font-size:.7rem;font-weight:700;padding:.15rem .45rem;border-radius:4px;text-transform:uppercase;flex-shrink:0}
.entry-item .entry-text{flex:1;word-break:break-word}
.entry-item .entry-del{background:none;border:none;color:var(--text2);cursor:pointer;font-size:1rem;padding:0 .25rem;transition:color .2s;flex-shrink:0}
.entry-item .entry-del:hover{color:var(--red)}
.btn-add{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;border:none;padding:.5rem 1.2rem;border-radius:8px;font-size:.82rem;font-weight:600;cursor:pointer;transition:opacity .2s;font-family:inherit}
.btn-add:hover{opacity:.9}
.btn-add:disabled{opacity:.4;cursor:not-allowed}
/* VERSION LIST */
.version-list{margin-top:1rem}
.version-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:1rem;margin-bottom:.75rem;position:relative}
.version-card h4{font-size:.95rem;font-weight:700;margin-bottom:.5rem;display:flex;align-items:center;gap:.5rem}
.version-card h4 .v-tag{font-size:.7rem;font-weight:600;padding:.15rem .5rem;border-radius:4px;background:rgba(0,212,255,.15);color:var(--primary)}
.version-card .v-date{color:var(--text2);font-size:.75rem}
.version-card .v-entries{font-size:.82rem;color:var(--text2);margin-top:.3rem}
.version-card .v-actions{position:absolute;top:.75rem;right:.75rem;display:flex;gap:.3rem}
.version-card .v-actions button{background:none;border:none;color:var(--text2);cursor:pointer;font-size:.9rem;padding:.15rem .3rem;transition:color .2s}
.version-card .v-actions button:hover{color:var(--red)}
/* PANELS */
.panels{display:grid;grid-template-columns:1fr 1fr;gap:1rem;min-height:400px;margin-top:1rem}
.panel{background:var(--glass);backdrop-filter:blur(16px);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;display:flex;flex-direction:column}
.panel-header{padding:.6rem 1rem;border-bottom:1px solid var(--border);font-size:.8rem;font-weight:600;color:var(--text2);display:flex;justify-content:space-between;align-items:center;background:rgba(26,26,36,0.5)}
.panel-body{flex:1;position:relative;overflow:auto}
.output-area{padding:1rem;font-family:'Courier New',monospace;font-size:.82rem;line-height:1.7;white-space:pre-wrap;word-break:break-all;min-height:300px;color:var(--text)}
/* PREVIEW */
.preview-area{padding:1.5rem;min-height:300px;font-size:.9rem;line-height:1.7}
.preview-area h1{font-size:1.6rem;font-weight:800;margin-bottom:1rem;color:var(--text)}
.preview-area h2{font-size:1.15rem;font-weight:700;margin-top:1.5rem;margin-bottom:.5rem;color:var(--text);padding-bottom:.3rem;border-bottom:1px solid var(--border)}
.preview-area h3{font-size:.95rem;font-weight:600;margin-top:.75rem;margin-bottom:.35rem}
.preview-area h3.cat-Added{color:var(--green)}
.preview-area h3.cat-Changed{color:var(--yellow)}
.preview-area h3.cat-Deprecated{color:var(--orange)}
.preview-area h3.cat-Removed{color:var(--red)}
.preview-area h3.cat-Fixed{color:var(--primary)}
.preview-area h3.cat-Security{color:var(--accent)}
.preview-area ul{margin:0 0 .5rem 1.2rem;color:var(--text2)}
.preview-area li{margin-bottom:.2rem}
.preview-area p{color:var(--text2);margin-bottom:.5rem}
.preview-area a{color:var(--primary);text-decoration:none}
/* CTA */
.cta-section{text-align:center;padding:4rem 1.5rem;max-width:700px;margin:0 auto}
.cta-section h2{font-size:1.8rem;font-weight:800;margin-bottom:.75rem}
.cta-section h2 span{background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.cta-section p{color:var(--text2);margin-bottom:1.5rem}
.cta-btn{display:inline-block;background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;padding:.75rem 2rem;border-radius:10px;font-weight:700;text-decoration:none;font-size:1rem;transition:transform .2s,box-shadow .2s}
.cta-btn:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(0,212,255,.3)}
/* FOOTER */
.footer{border-top:1px solid var(--border);padding:3rem 2rem 2rem;max-width:1200px;margin:0 auto}
.footer-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:2rem;margin-bottom:2rem}
.footer-col h4{font-size:.85rem;font-weight:700;margin-bottom:.75rem;color:var(--text)}
.footer-col a{display:block;color:var(--text2);text-decoration:none;font-size:.8rem;margin-bottom:.4rem;transition:color .2s}
.footer-col a:hover{color:var(--primary)}
.footer-bottom{text-align:center;color:var(--text2);font-size:.75rem;padding-top:1.5rem;border-top:1px solid var(--border)}
/* FADE IN */
.fade-in{opacity:0;transform:translateY(20px);transition:opacity .6s,transform .6s}
.fade-in.visible{opacity:1;transform:translateY(0)}
/* TOAST */
.toast{position:fixed;bottom:2rem;left:50%;transform:translateX(-50%) translateY(80px);background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.6rem 1.2rem;border-radius:10px;font-size:.85rem;font-weight:500;z-index:200;transition:transform .3s;pointer-events:none}
.toast.show{transform:translateX(-50%) translateY(0)}
/* RESPONSIVE */
@media(max-width:768px){
  .panels{grid-template-columns:1fr}
  .nav-links{display:none;position:absolute;top:64px;left:0;right:0;background:var(--bg);border-bottom:1px solid var(--border);flex-direction:column;padding:1rem 2rem;gap:1rem}
  .nav-links.open{display:flex}
  .nav-toggle{display:block}
  .hero h1{font-size:1.6rem}
  .footer-grid{grid-template-columns:1fr}
  .toolbar{gap:.35rem}
  .form-row{flex-direction:column}
}
</style>
</head>
<body>

<nav class="nav">
  <a href="/" class="nav-logo">ANIMA</a>
  <button class="nav-toggle" onclick="document.querySelector('.nav-links').classList.toggle('open')" aria-label="Menu">&#9776;</button>
  <div class="nav-links">
    <a href="/">Home</a>
    <a href="/free-tools/">Tools</a>
    <a href="/free-tools/">Free Tools</a>
    <a href="/blog/">Blog</a>
    <a href="https://github.com/christian140903-sudo/nextool" class="nav-cta" target="_blank" rel="noopener">GitHub</a>
  </div>
</nav>

<section class="hero fade-in">
  <h1>Free <span>Changelog Generator</span></h1>
  <p class="tool-summary" style="color:#94a3b8;font-size:15px;line-height:1.6;margin-bottom:24px;max-width:700px;margin-left:auto;margin-right:auto;">Generate professional changelogs following the Keep a Changelog standard. Add categorized entries (Added, Changed, Deprecated, Removed, Fixed, Security), manage semantic versions, preview rendered output, and export as CHANGELOG.md. 100% free, runs in your browser.</p>
</section>

<div class="tool-container fade-in">
  <div class="toolbar">
    <button onclick="copyMarkdown()" title="Copy Markdown to clipboard">Copy Markdown</button>
    <button onclick="downloadChangelog()" title="Download as CHANGELOG.md">Download .md</button>
    <label for="importFile" title="Import existing CHANGELOG.md">Import</label>
    <input type="file" id="importFile" accept=".md,.txt" onchange="importChangelog(event)">
    <button onclick="loadSample()" title="Load a sample changelog">Sample</button>
    <button onclick="clearAll()" title="Clear all versions and entries">Clear All</button>
    <button id="viewToggle" onclick="toggleView()" title="Toggle between Markdown and Preview">Preview</button>
  </div>

  <!-- VERSION + ENTRY FORM -->
  <div class="form-section">
    <h3>Add Release Entry</h3>
    <div class="form-row">
      <div class="form-group" style="max-width:180px">
        <label>Version</label>
        <input type="text" id="versionInput" placeholder="1.0.0" value="1.0.0">
      </div>
      <div class="form-group" style="max-width:180px">
        <label>Date</label>
        <input type="date" id="dateInput">
      </div>
      <div class="form-group" style="max-width:100px">
        <label>Bump</label>
        <div style="display:flex;gap:.3rem">
          <button onclick="bumpVersion('major')" style="padding:.35rem .5rem;font-size:.7rem;background:var(--surface2);border:1px solid var(--border);color:var(--text);border-radius:6px;cursor:pointer" title="Major bump">Major</button>
          <button onclick="bumpVersion('minor')" style="padding:.35rem .5rem;font-size:.7rem;background:var(--surface2);border:1px solid var(--border);color:var(--text);border-radius:6px;cursor:pointer" title="Minor bump">Minor</button>
          <button onclick="bumpVersion('patch')" style="padding:.35rem .5rem;font-size:.7rem;background:var(--surface2);border:1px solid var(--border);color:var(--text);border-radius:6px;cursor:pointer" title="Patch bump">Patch</button>
        </div>
      </div>
    </div>

    <label style="font-size:.75rem;font-weight:600;color:var(--text2);text-transform:uppercase;letter-spacing:.5px;margin-bottom:.3rem;display:block">Category</label>
    <div class="cat-badges" id="catBadges">
      <span class="cat-badge cat-added sel" data-cat="Added" onclick="selectCat(this)">Added</span>
      <span class="cat-badge cat-changed" data-cat="Changed" onclick="selectCat(this)">Changed</span>
      <span class="cat-badge cat-deprecated" data-cat="Deprecated" onclick="selectCat(this)">Deprecated</span>
      <span class="cat-badge cat-removed" data-cat="Removed" onclick="selectCat(this)">Removed</span>
      <span class="cat-badge cat-fixed" data-cat="Fixed" onclick="selectCat(this)">Fixed</span>
      <span class="cat-badge cat-security" data-cat="Security" onclick="selectCat(this)">Security</span>
    </div>

    <div class="form-row" style="align-items:flex-end">
      <div class="form-group" style="flex:3">
        <label>Entry Description</label>
        <input type="text" id="entryInput" placeholder="Describe the change..." onkeydown="if(event.key==='Enter')addEntry()">
      </div>
      <button class="btn-add" onclick="addEntry()" id="addBtn">Add Entry</button>
    </div>

    <!-- Current entries for active version -->
    <div class="entry-list" id="entryList"></div>
  </div>

  <!-- Existing versions -->
  <div id="versionCards"></div>

  <!-- OUTPUT PANELS -->
  <div class="panels">
    <div class="panel">
      <div class="panel-header"><span>Markdown Output</span><span id="lineCount"></span></div>
      <div class="panel-body">
        <div class="output-area" id="markdownOutput"></div>
      </div>
    </div>
    <div class="panel">
      <div class="panel-header"><span id="previewLabel">Rendered Preview</span></div>
      <div class="panel-body">
        <div class="preview-area" id="previewOutput"></div>
      </div>
    </div>
  </div>
</div>

<section class="cta-section fade-in">
  <h2>Need something <span>more powerful</span>?</h2>
  <p>Let us build it for you. Custom APIs, dashboards, automations &mdash; whatever you need.</p>
  <a href="/#contact" class="cta-btn">Start a Project &rarr;</a>
</section>

<!-- Cross Promo -->
<section style="max-width:900px;margin:40px auto;padding:0 24px;">
<div style="background:linear-gradient(135deg,rgba(0,212,255,0.1),rgba(168,85,247,0.08));border:1px solid rgba(0,212,255,0.15);border-radius:20px;padding:32px 28px;text-align:center;">
<div style="font-size:13px;color:#818cf8;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Founding Member</div>
<h3 style="font-size:22px;font-weight:800;color:#fff;margin:0 0 8px;">ANIMA on GitHub</h3>
<p style="color:#94a3b8;font-size:14px;margin:0 auto 20px;max-width:500px;">253+ free tools. No signup. Open source. Built by Christian Bucher.</p>
<div style="display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap;">
<a href="/about/" style="display:inline-block;padding:12px 28px;background:linear-gradient(135deg,#00d4ff,#a855f7,#ec4899);color:#fff;border-radius:10px;font-weight:700;font-size:15px;text-decoration:none;">Open Source &mdash; Free Forever</a>
<a href="/free-tools/" style="color:#94a3b8;font-size:14px;text-decoration:none;">Browse 250+ Free Tools &rarr;</a>
</div>
</div>
</section>


<!-- AUTO-LINKED by ANIMA Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/box-shadow-generator.html" style="color:var(--primary);text-decoration:none">CSS Box Shadow Generator</a> · <a href="/free-tools/emoji-picker.html" style="color:var(--primary);text-decoration:none">Emoji Picker & Search</a> · <a href="/free-tools/meta-tag-generator.html" style="color:var(--primary);text-decoration:none">Meta Tag Generator</a></p>
</div>

<!-- AUTO-LINKED by ANIMA Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/json-to-yaml-converter.html" style="color:var(--primary);text-decoration:none">Free JSON to YAML Converter</a> · <a href="/free-tools/accessibility-checker.html" style="color:var(--primary);text-decoration:none">Free Accessibility Checker</a> · <a href="/free-tools/api-request-builder.html" style="color:var(--primary);text-decoration:none">Free API Request Builder</a></p>
</div>

<!-- AUTO-LINKED by ANIMA Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/json-to-yaml.html" style="color:var(--primary);text-decoration:none">Free JSON to YAML Converter</a> · <a href="/free-tools/yaml-to-json.html" style="color:var(--primary);text-decoration:none">YAML to JSON Converter</a> · <a href="/free-tools/ascii-art-generator.html" style="color:var(--primary);text-decoration:none">Free ASCII Art Generator</a></p>
</div>
<footer class="footer fade-in">
  <div class="footer-grid">
    <div class="footer-col">
      <h4>Products</h4>
      <a href="/free-tools/">250+ Free Tools</a>
<a href="/about/">About</a>
<a href="/docs/">Documentation</a>
    </div>
    <div class="footer-col">
      <h4>Explore</h4>
      <a href="/free-tools/">Free Tools</a><a href="/blog/">Blog</a><a href="/about/">FAQ</a><a href="/about/">About</a>
    </div>
    <div class="footer-col">
      <h4>Ecosystem</h4>
      <a href="/">ANIMA Home</a><a href="/#contact">Contact</a><a href="https://github.com/christian140903-sudo/nextool" target="_blank">GitHub</a>
    </div>
  </div>
  <div class="footer-bottom">&copy; 2026 ANIMA. AI-powered tools for everyone.</div>
</footer>

<div class="toast" id="toast"></div>

<script>
/* ===== STATE ===== */
let projectTitle = 'Changelog';
let projectDesc = 'All notable changes to this project will be documented in this file.';
let projectUrl = '';
// Each version: { version, date, entries: [{cat, text}], yanked: false }
let versions = [];
// Current working entries (not yet committed to a version)
let currentEntries = [];
let selectedCat = 'Added';
let isPreview = true;

// Set today's date as default
document.getElementById('dateInput').value = new Date().toISOString().split('T')[0];

/* ===== CATEGORY SELECTION ===== */
function selectCat(el) {
  document.querySelectorAll('.cat-badge').forEach(b => b.classList.remove('sel'));
  el.classList.add('sel');
  selectedCat = el.dataset.cat;
}

/* ===== VERSION BUMPING ===== */
function bumpVersion(type) {
  const inp = document.getElementById('versionInput');
  const parts = inp.value.split('.').map(Number);
  if (parts.length !== 3 || parts.some(isNaN)) {
    // Try to parse what we can
    inp.value = '1.0.0';
    return;
  }
  if (type === 'major') { parts[0]++; parts[1] = 0; parts[2] = 0; }
  else if (type === 'minor') { parts[1]++; parts[2] = 0; }
  else { parts[2]++; }
  inp.value = parts.join('.');
}

/* ===== ADD ENTRY ===== */
function addEntry() {
  const input = document.getElementById('entryInput');
  const text = input.value.trim();
  if (!text) return;
  currentEntries.push({ cat: selectedCat, text: text });
  input.value = '';
  renderEntryList();
  commitCurrentVersion();
  generateOutput();
}

function removeEntry(idx) {
  currentEntries.splice(idx, 1);
  renderEntryList();
  commitCurrentVersion();
  generateOutput();
}

function renderEntryList() {
  const list = document.getElementById('entryList');
  if (!currentEntries.length) { list.innerHTML = ''; return; }
  const catColors = {
    Added: 'rgba(34,197,94,.2);color:#22c55e',
    Changed: 'rgba(234,179,8,.2);color:#eab308',
    Deprecated: 'rgba(249,115,22,.2);color:#f97316',
    Removed: 'rgba(239,68,68,.2);color:#ef4444',
    Fixed: 'rgba(0,212,255,.2);color:#00d4ff',
    Security: 'rgba(168,85,247,.2);color:#a855f7'
  };
  list.innerHTML = currentEntries.map((e, i) =>
    `<div class="entry-item">
      <span class="entry-cat" style="background:${catColors[e.cat]}">${e.cat}</span>
      <span class="entry-text">${escapeHtml(e.text)}</span>
      <button class="entry-del" onclick="removeEntry(${i})" title="Remove">&times;</button>
    </div>`
  ).join('');
}

/* ===== COMMIT VERSION (auto-save current entries as latest version) ===== */
function commitCurrentVersion() {
  const ver = document.getElementById('versionInput').value.trim() || 'Unreleased';
  const date = document.getElementById('dateInput').value || '';

  // Find if this version already exists
  const idx = versions.findIndex(v => v.version === ver);
  if (idx !== -1) {
    versions[idx].entries = [...currentEntries];
    versions[idx].date = date;
  } else if (currentEntries.length > 0) {
    versions.unshift({ version: ver, date: date, entries: [...currentEntries], yanked: false });
  }
}

/* ===== FINALIZE VERSION (lock it and start new) ===== */
function finalizeVersion() {
  if (!currentEntries.length) return;
  commitCurrentVersion();
  currentEntries = [];
  renderEntryList();
  // Bump patch for next version
  bumpVersion('patch');
  document.getElementById('dateInput').value = new Date().toISOString().split('T')[0];
  renderVersionCards();
  generateOutput();
}

/* ===== DELETE VERSION ===== */
function deleteVersion(idx) {
  versions.splice(idx, 1);
  renderVersionCards();
  generateOutput();
}

/* ===== EDIT VERSION (load back into editor) ===== */
function editVersion(idx) {
  // Save any current work first
  if (currentEntries.length > 0) {
    commitCurrentVersion();
  }
  const v = versions[idx];
  document.getElementById('versionInput').value = v.version;
  document.getElementById('dateInput').value = v.date;
  currentEntries = [...v.entries];
  renderEntryList();
  // Don't delete it - commitCurrentVersion will update it
}

function renderVersionCards() {
  const container = document.getElementById('versionCards');
  // Show committed versions that aren't the currently-being-edited one
  const currentVer = document.getElementById('versionInput').value.trim();
  const cards = versions.filter(v => v.version !== currentVer);
  if (!cards.length) { container.innerHTML = ''; return; }
  container.innerHTML = '<div style="margin-top:.5rem;margin-bottom:.5rem;font-size:.8rem;font-weight:600;color:var(--text2)">Previous Releases</div>' +
    cards.map((v, i) => {
      const realIdx = versions.indexOf(v);
      const entryCount = v.entries.length;
      const cats = [...new Set(v.entries.map(e => e.cat))];
      return `<div class="version-card">
        <div class="v-actions">
          <button onclick="editVersion(${realIdx})" title="Edit">&#9998;</button>
          <button onclick="deleteVersion(${realIdx})" title="Delete">&times;</button>
        </div>
        <h4>${escapeHtml(v.version)} <span class="v-tag">${v.date || 'No date'}</span></h4>
        <div class="v-entries">${entryCount} ${entryCount === 1 ? 'entry' : 'entries'} &mdash; ${cats.join(', ')}</div>
      </div>`;
    }).join('');
}

/* ===== GENERATE MARKDOWN ===== */
function generateMarkdown() {
  let md = `# ${projectTitle}\n\n`;
  md += `${projectDesc}\n\n`;
  md += `The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.1.0/),\nand this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).\n`;

  // Include current entries as the first version if they exist
  const allVersions = getAllVersions();

  for (const v of allVersions) {
    md += '\n';
    const dateStr = v.date || 'Unreleased';
    if (v.version === 'Unreleased') {
      md += `## [Unreleased]\n`;
    } else {
      md += `## [${v.version}] - ${dateStr}${v.yanked ? ' [YANKED]' : ''}\n`;
    }

    const cats = ['Added', 'Changed', 'Deprecated', 'Removed', 'Fixed', 'Security'];
    for (const cat of cats) {
      const items = v.entries.filter(e => e.cat === cat);
      if (items.length) {
        md += `\n### ${cat}\n\n`;
        for (const item of items) {
          md += `- ${item.text}\n`;
        }
      }
    }
  }

  return md;
}

function getAllVersions() {
  // Merge current entries with versions list
  const currentVer = document.getElementById('versionInput').value.trim() || 'Unreleased';
  const currentDate = document.getElementById('dateInput').value || '';
  const all = [];

  // Current working version first (if it has entries)
  if (currentEntries.length > 0) {
    all.push({ version: currentVer, date: currentDate, entries: [...currentEntries], yanked: false });
  }

  // Then other committed versions (skip if same version as current)
  for (const v of versions) {
    if (v.version !== currentVer) {
      all.push(v);
    }
  }

  return all;
}

/* ===== GENERATE PREVIEW HTML ===== */
function generatePreviewHtml() {
  const allVersions = getAllVersions();
  if (!allVersions.length) {
    return '<p style="color:var(--text2);font-style:italic">Add entries above to generate your changelog...</p>';
  }

  let html = `<h1>${escapeHtml(projectTitle)}</h1>`;
  html += `<p>${escapeHtml(projectDesc)}</p>`;
  html += `<p>The format is based on <a href="https://keepachangelog.com/en/1.1.0/" target="_blank">Keep a Changelog</a>, and this project adheres to <a href="https://semver.org/spec/v2.0.0.html" target="_blank">Semantic Versioning</a>.</p>`;

  for (const v of allVersions) {
    const dateStr = v.date || 'Unreleased';
    if (v.version === 'Unreleased') {
      html += `<h2>[Unreleased]</h2>`;
    } else {
      html += `<h2>[${escapeHtml(v.version)}] - ${escapeHtml(dateStr)}${v.yanked ? ' <span style="color:var(--red)">[YANKED]</span>' : ''}</h2>`;
    }

    const cats = ['Added', 'Changed', 'Deprecated', 'Removed', 'Fixed', 'Security'];
    for (const cat of cats) {
      const items = v.entries.filter(e => e.cat === cat);
      if (items.length) {
        html += `<h3 class="cat-${cat}">${cat}</h3><ul>`;
        for (const item of items) {
          html += `<li>${escapeHtml(item.text)}</li>`;
        }
        html += `</ul>`;
      }
    }
  }

  return html;
}

/* ===== OUTPUT ===== */
function generateOutput() {
  const md = generateMarkdown();
  document.getElementById('markdownOutput').textContent = md;
  document.getElementById('previewOutput').innerHTML = generatePreviewHtml();
  const lines = md.split('\n').length;
  document.getElementById('lineCount').textContent = lines + ' line' + (lines !== 1 ? 's' : '');
}

/* ===== TOGGLE VIEW ===== */
function toggleView() {
  isPreview = !isPreview;
  const btn = document.getElementById('viewToggle');
  btn.classList.toggle('active', isPreview);
  btn.textContent = isPreview ? 'Preview' : 'Markdown';
}

/* ===== COPY ===== */
function copyMarkdown() {
  const md = generateMarkdown();
  if (!md.trim() || getAllVersions().length === 0) { showToast('Nothing to copy'); return; }
  navigator.clipboard.writeText(md).then(() => showToast('Markdown copied to clipboard'));
}

/* ===== DOWNLOAD ===== */
function downloadChangelog() {
  const md = generateMarkdown();
  if (getAllVersions().length === 0) { showToast('No changelog to download'); return; }
  const blob = new Blob([md], { type: 'text/markdown' });
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'CHANGELOG.md';
  a.click();
  URL.revokeObjectURL(a.href);
  showToast('Downloaded CHANGELOG.md');
}

/* ===== IMPORT ===== */
function importChangelog(event) {
  const file = event.target.files[0];
  if (!file) return;
  const reader = new FileReader();
  reader.onload = function(e) {
    parseMarkdownChangelog(e.target.result);
    showToast('Changelog imported successfully');
  };
  reader.readAsText(file);
  event.target.value = '';
}

function parseMarkdownChangelog(md) {
  versions = [];
  currentEntries = [];

  const lines = md.split('\n');
  let currentVersion = null;
  let currentCat = 'Added';

  for (const line of lines) {
    // Match version header: ## [1.0.0] - 2024-01-01
    const versionMatch = line.match(/^##\s+\[([^\]]+)\]\s*-?\s*([\d-]*)\s*(.*)/);
    if (versionMatch) {
      if (currentVersion) {
        versions.push(currentVersion);
      }
      currentVersion = {
        version: versionMatch[1],
        date: versionMatch[2] || '',
        entries: [],
        yanked: versionMatch[3].includes('YANKED')
      };
      continue;
    }

    // Match category: ### Added
    const catMatch = line.match(/^###\s+(Added|Changed|Deprecated|Removed|Fixed|Security)/);
    if (catMatch) {
      currentCat = catMatch[1];
      continue;
    }

    // Match entry: - Some change
    const entryMatch = line.match(/^-\s+(.+)/);
    if (entryMatch && currentVersion) {
      currentVersion.entries.push({ cat: currentCat, text: entryMatch[1] });
    }
  }

  if (currentVersion) {
    versions.push(currentVersion);
  }

  // Load the first version into the editor
  if (versions.length > 0) {
    const first = versions.shift();
    document.getElementById('versionInput').value = first.version;
    document.getElementById('dateInput').value = first.date;
    currentEntries = first.entries;
    renderEntryList();
  }

  renderVersionCards();
  generateOutput();
}

/* ===== SAMPLE ===== */
function loadSample() {
  versions = [];
  currentEntries = [];

  // Version being edited
  document.getElementById('versionInput').value = '1.2.0';
  document.getElementById('dateInput').value = '2026-02-10';
  currentEntries = [
    { cat: 'Added', text: 'Dark mode support across all pages' },
    { cat: 'Added', text: 'Export to PDF functionality' },
    { cat: 'Changed', text: 'Upgraded authentication to OAuth 2.1' },
    { cat: 'Fixed', text: 'Resolved memory leak in dashboard component' },
    { cat: 'Security', text: 'Patched XSS vulnerability in user input fields' }
  ];

  // Previous versions
  versions = [
    {
      version: '1.1.0',
      date: '2026-01-15',
      entries: [
        { cat: 'Added', text: 'User profile settings page' },
        { cat: 'Added', text: 'Email notification preferences' },
        { cat: 'Changed', text: 'Improved search algorithm performance by 40%' },
        { cat: 'Deprecated', text: 'Legacy API v1 endpoints (use v2 instead)' },
        { cat: 'Fixed', text: 'Fixed timezone handling in date picker' }
      ],
      yanked: false
    },
    {
      version: '1.0.0',
      date: '2025-12-01',
      entries: [
        { cat: 'Added', text: 'Initial release with core features' },
        { cat: 'Added', text: 'User registration and authentication' },
        { cat: 'Added', text: 'Dashboard with real-time analytics' },
        { cat: 'Added', text: 'REST API with full CRUD operations' },
        { cat: 'Security', text: 'Implemented rate limiting on all endpoints' }
      ],
      yanked: false
    }
  ];

  renderEntryList();
  renderVersionCards();
  generateOutput();
  showToast('Sample changelog loaded');
}

/* ===== CLEAR ALL ===== */
function clearAll() {
  versions = [];
  currentEntries = [];
  document.getElementById('versionInput').value = '1.0.0';
  document.getElementById('dateInput').value = new Date().toISOString().split('T')[0];
  renderEntryList();
  renderVersionCards();
  generateOutput();
  showToast('Cleared all');
}

/* ===== HELPERS ===== */
function escapeHtml(s) { return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'); }

function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2000);
}

/* ===== LISTEN FOR VERSION/DATE CHANGES ===== */
document.getElementById('versionInput').addEventListener('input', function() {
  if (currentEntries.length > 0) {
    // Re-commit under new version name
    // First remove old version that matched
    const oldIdx = versions.findIndex(v => v.entries === currentEntries);
    // Just regenerate output
    generateOutput();
  }
});
document.getElementById('dateInput').addEventListener('input', function() {
  generateOutput();
});

/* ===== INIT ===== */
generateOutput();

/* IntersectionObserver fade-in */
const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('visible'); observer.unobserve(entry.target); }});
}, { threshold: 0.1 });
document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));
</script>
<script src="/js/analytics-lite.js" defer></script>
<script src="/js/revenue.js" defer></script>
<script src="/js/lead-capture.js" defer></script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What is Keep a Changelog?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Keep a Changelog is a standard format for writing changelogs. It organizes changes into categories like Added, Changed, Deprecated, Removed, Fixed, and Security, making it easy for users and contributors to understand what changed between versions."
      }
    },
    {
      "@type": "Question",
      "name": "What is semantic versioning?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Semantic versioning (SemVer) uses a three-part version number: MAJOR.MINOR.PATCH. Major versions indicate breaking changes, minor versions add backward-compatible features, and patch versions fix bugs. ANIMA's Changelog Generator includes one-click version bumping."
      }
    },
    {
      "@type": "Question",
      "name": "Is this changelog generator free?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, ANIMA's Changelog Generator is completely free. No signup required, no data sent to servers. Everything runs in your browser for maximum privacy and speed."
      }
    },
    {
      "@type": "Question",
      "name": "Can I import an existing CHANGELOG.md?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, you can import an existing CHANGELOG.md file using the Import button. The tool will parse version headers, categories, and entries so you can continue editing your changelog visually."
      }
    }
  ]
}
</script>
</body>
</html>
