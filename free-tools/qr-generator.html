<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Free QR Code Generator — Create Custom QR Codes Instantly | NexTool</title>
<meta name="description" content="Generate QR codes for URLs, text, email, phone, WiFi, and vCards instantly. Customize colors and size. Free online tool by NexTool.">
<meta name="keywords" content="QR code generator, free QR code, custom QR code, URL QR, WiFi QR, vCard QR, NexTool">
<meta property="og:title" content="Free QR Code Generator | NexTool">
<meta property="og:description" content="Create custom QR codes for URLs, text, WiFi, vCard and more. Download as PNG instantly.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://nextool.app/free-tools/qr-generator.html">
<meta property="og:image" content="https://nextool.app/assets/og-default.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<link rel="canonical" href="https://nextool.app/free-tools/qr-generator.html">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Free QR Code Generator | NexTool">
<meta name="twitter:description" content="Create custom QR codes instantly. Free online tool by NexTool.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"SoftwareApplication","name":"NexTool QR Code Generator","applicationCategory":"UtilityApplication","operatingSystem":"Web","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"description":"Generate custom QR codes for URLs, text, email, phone, WiFi, and vCards."}
</script>
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#050508;--surface:#111118;--surface2:#1a1a24;--border:#252533;--primary:#6366f1;--accent:#a855f7;--pink:#ec4899;--text:#e2e8f0;--text2:#94a3b8;--radius:12px;--glass:rgba(17,17,24,.7)}
html{scroll-behavior:smooth}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;overflow-x:hidden}
a{color:var(--primary);text-decoration:none}
.nav{position:sticky;top:0;z-index:100;backdrop-filter:blur(20px);background:rgba(5,5,8,.85);border-bottom:1px solid var(--border);padding:0 24px}
.nav-inner{max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;height:64px}
.logo{font-weight:800;font-size:1.35rem;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.nav-links{display:flex;gap:28px;align-items:center}
.nav-links a{color:var(--text2);font-size:.9rem;font-weight:500;transition:color .2s}
.nav-links a:hover{color:var(--text)}
.btn-cta{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;padding:9px 22px;border-radius:8px;font-weight:600;font-size:.85rem;border:none;cursor:pointer;transition:transform .2s,box-shadow .2s}
.btn-cta:hover{transform:translateY(-1px);box-shadow:0 4px 20px rgba(99,102,241,.4)}
.mobile-toggle{display:none;background:none;border:none;color:var(--text);font-size:1.5rem;cursor:pointer}
.hero{text-align:center;padding:80px 24px 40px;max-width:800px;margin:0 auto}
.hero .badge{display:inline-block;padding:6px 16px;border-radius:20px;background:var(--surface);border:1px solid var(--border);font-size:.8rem;color:var(--accent);font-weight:600;margin-bottom:20px}
.hero h1{font-size:clamp(2rem,5vw,3rem);font-weight:800;line-height:1.15;margin-bottom:16px}
.hero h1 .grad{background:linear-gradient(135deg,var(--primary),var(--accent),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{color:var(--text2);font-size:1.05rem;max-width:560px;margin:0 auto}
.tool-section{max-width:900px;margin:0 auto;padding:0 24px 60px}
.tool-grid{display:grid;grid-template-columns:1fr 1fr;gap:28px;align-items:start}
.glass-card{background:var(--glass);backdrop-filter:blur(16px);border:1px solid var(--border);border-radius:var(--radius);padding:32px;transition:transform .3s,box-shadow .3s}
.glass-card:hover{box-shadow:0 8px 40px rgba(99,102,241,.1)}
/* Tabs */
.tabs{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:20px}
.tab{padding:7px 14px;border-radius:8px;background:var(--surface2);border:1px solid transparent;color:var(--text2);font-size:.8rem;font-weight:600;cursor:pointer;transition:all .2s;font-family:inherit}
.tab.active{background:var(--primary);color:#fff;border-color:var(--primary)}
.tab:hover:not(.active){border-color:var(--border)}
/* Form */
.field{margin-bottom:16px}
.field label{display:block;font-weight:600;font-size:.82rem;margin-bottom:6px;color:var(--text2)}
.field input,.field textarea,.field select{width:100%;background:var(--surface2);border:1px solid var(--border);border-radius:8px;padding:10px 14px;color:var(--text);font-size:.9rem;font-family:inherit;transition:border-color .2s}
.field input:focus,.field textarea:focus,.field select:focus{outline:none;border-color:var(--primary)}
.field textarea{resize:vertical;min-height:80px}
.color-row{display:flex;gap:16px}
.color-row .field{flex:1}
.color-row input[type=color]{height:42px;padding:4px;cursor:pointer}
.size-row{display:flex;align-items:center;gap:14px}
.size-row input[type=range]{flex:1;-webkit-appearance:none;height:6px;border-radius:3px;background:var(--surface2);outline:none}
.size-row input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:20px;height:20px;border-radius:50%;background:linear-gradient(135deg,var(--primary),var(--accent));cursor:pointer}
.size-val{min-width:50px;text-align:center;font-weight:700;font-size:.9rem;color:var(--primary)}
.ec-row{display:flex;gap:8px}
.ec-btn{flex:1;padding:8px;border-radius:8px;background:var(--surface2);border:1px solid transparent;color:var(--text2);font-size:.78rem;font-weight:600;cursor:pointer;text-align:center;transition:all .2s;font-family:inherit}
.ec-btn.active{background:var(--primary);color:#fff;border-color:var(--primary)}
.ec-btn:hover:not(.active){border-color:var(--border)}
/* Preview */
.preview-card{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:400px}
.qr-wrap{background:#fff;border-radius:12px;padding:16px;display:inline-block;margin-bottom:20px;box-shadow:0 4px 24px rgba(0,0,0,.4)}
.qr-wrap canvas{display:block}
.qr-placeholder{width:256px;height:256px;display:flex;align-items:center;justify-content:center;color:var(--text2);font-size:.9rem;border:2px dashed var(--border);border-radius:8px}
.action-btns{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}
.action-btn{padding:10px 20px;border-radius:8px;font-weight:600;font-size:.85rem;cursor:pointer;border:1px solid var(--border);background:var(--surface2);color:var(--text);transition:all .2s;font-family:inherit}
.action-btn:hover{border-color:var(--primary);color:var(--primary)}
.action-btn.primary{background:linear-gradient(135deg,var(--primary),var(--accent));border:none;color:#fff}
.action-btn.primary:hover{transform:translateY(-1px);box-shadow:0 4px 16px rgba(99,102,241,.35)}
/* CTA */
.cta-bottom{text-align:center;padding:80px 24px;max-width:700px;margin:0 auto}
.cta-bottom h2{font-size:clamp(1.5rem,3.5vw,2.2rem);font-weight:800;margin-bottom:14px}
.cta-bottom h2 .grad{background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.cta-bottom p{color:var(--text2);margin-bottom:28px;font-size:1rem}
/* FOOTER */
footer{border-top:1px solid var(--border);padding:60px 24px 32px;max-width:1200px;margin:0 auto}
.footer-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:40px;margin-bottom:40px}
.footer-col h4{font-size:.85rem;font-weight:700;margin-bottom:16px;color:var(--text)}
.footer-col a{display:block;color:var(--text2);font-size:.85rem;margin-bottom:10px;transition:color .2s}
.footer-col a:hover{color:var(--primary)}
.footer-bottom{text-align:center;color:var(--text2);font-size:.8rem;padding-top:24px;border-top:1px solid var(--border)}
@keyframes fadeUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
.fade-in{opacity:0;transform:translateY(24px);transition:opacity .6s,transform .6s}.fade-in.visible{opacity:1;transform:translateY(0)}
@media(max-width:768px){
  .nav-links{display:none;position:absolute;top:64px;left:0;right:0;background:var(--surface);flex-direction:column;padding:20px;gap:16px;border-bottom:1px solid var(--border)}
  .nav-links.open{display:flex}
  .mobile-toggle{display:block}
  .tool-grid{grid-template-columns:1fr}
  .footer-grid{grid-template-columns:1fr}
  .glass-card{padding:24px 18px}
}
</style>
</head>
<body>
<nav class="nav"><div class="nav-inner">
  <a href="/" class="logo">NexTool</a>
  <button class="mobile-toggle" onclick="document.querySelector('.nav-links').classList.toggle('open')" aria-label="Menu">&#9776;</button>
  <div class="nav-links">
    <a href="/">Home</a><a href="/free-tools/">Tools</a><a href="/free-tools/">Free Tools</a><a href="/pro.html">Pro</a><a href="/blog/">Blog</a>
    <a href="/#contact" class="btn-cta">Get Pro — $29</a>
  </div>
</div></nav>

<section class="hero fade-in">
  <div class="badge">Free Tool</div>
  <h1>QR Code <span class="grad">Generator</span></h1>
  <p class="tool-summary" style="color:#94a3b8;font-size:15px;line-height:1.6;margin-bottom:24px;max-width:700px;margin-left:auto;margin-right:auto;">NexTool's QR Code Generator creates custom QR codes for URLs, text, email, phone numbers, WiFi networks, and vCards instantly. Customize foreground and background colors, adjust size, set error correction level, and download as PNG. Free, no signup, runs entirely in your browser.</p>
</section>

<section class="tool-section">
<div class="tool-grid">
  <div class="glass-card fade-in">
    <div class="tabs" id="type-tabs">
      <button class="tab active" data-type="url">URL</button>
      <button class="tab" data-type="text">Text</button>
      <button class="tab" data-type="email">Email</button>
      <button class="tab" data-type="phone">Phone</button>
      <button class="tab" data-type="wifi">WiFi</button>
      <button class="tab" data-type="vcard">vCard</button>
    </div>

    <div id="fields-url" class="type-fields">
      <div class="field"><label>URL</label><input type="url" id="f-url" placeholder="https://example.com" value="https://nextool.app"></div>
    </div>
    <div id="fields-text" class="type-fields" style="display:none">
      <div class="field"><label>Text</label><textarea id="f-text" placeholder="Enter any text..."></textarea></div>
    </div>
    <div id="fields-email" class="type-fields" style="display:none">
      <div class="field"><label>Email Address</label><input type="email" id="f-email" placeholder="hello@example.com"></div>
      <div class="field"><label>Subject (optional)</label><input id="f-email-subj" placeholder="Subject"></div>
      <div class="field"><label>Body (optional)</label><textarea id="f-email-body" placeholder="Email body..."></textarea></div>
    </div>
    <div id="fields-phone" class="type-fields" style="display:none">
      <div class="field"><label>Phone Number</label><input type="tel" id="f-phone" placeholder="+1234567890"></div>
    </div>
    <div id="fields-wifi" class="type-fields" style="display:none">
      <div class="field"><label>Network Name (SSID)</label><input id="f-wifi-ssid" placeholder="MyNetwork"></div>
      <div class="field"><label>Password</label><input id="f-wifi-pass" placeholder="password123"></div>
      <div class="field"><label>Encryption</label><select id="f-wifi-enc"><option value="WPA">WPA/WPA2</option><option value="WEP">WEP</option><option value="">None</option></select></div>
    </div>
    <div id="fields-vcard" class="type-fields" style="display:none">
      <div class="field"><label>Full Name</label><input id="f-vc-name" placeholder="John Doe"></div>
      <div class="field"><label>Phone</label><input id="f-vc-phone" placeholder="+1234567890"></div>
      <div class="field"><label>Email</label><input id="f-vc-email" placeholder="john@example.com"></div>
      <div class="field"><label>Organization</label><input id="f-vc-org" placeholder="Company"></div>
      <div class="field"><label>Website</label><input id="f-vc-url" placeholder="https://example.com"></div>
    </div>

    <div class="field" style="margin-top:8px">
      <label>QR Size</label>
      <div class="size-row">
        <input type="range" id="qr-size" min="128" max="512" value="256" step="16">
        <span class="size-val" id="qr-size-val">256px</span>
      </div>
    </div>
    <div class="field">
      <label>Error Correction</label>
      <div class="ec-row">
        <button class="ec-btn" data-ec="L">L (7%)</button>
        <button class="ec-btn active" data-ec="M">M (15%)</button>
        <button class="ec-btn" data-ec="Q">Q (25%)</button>
        <button class="ec-btn" data-ec="H">H (30%)</button>
      </div>
    </div>
    <div class="color-row">
      <div class="field"><label>Foreground</label><input type="color" id="qr-fg" value="#000000"></div>
      <div class="field"><label>Background</label><input type="color" id="qr-bg" value="#ffffff"></div>
    </div>
  </div>

  <div class="glass-card preview-card fade-in" id="preview-panel">
    <div class="qr-wrap" id="qr-wrap">
      <canvas id="qr-canvas" width="256" height="256"></canvas>
    </div>
    <div class="action-btns">
      <button class="action-btn primary" onclick="downloadQR()">Download PNG</button>
      <button class="action-btn" onclick="copyQR()">Copy to Clipboard</button>
    </div>
  </div>
</div>
</section>

<section class="cta-bottom fade-in">
  <h2>Need something <span class="grad">more powerful</span>?</h2>
  <p>Let us build custom automation, bots, websites, and AI tools tailored to your business.</p>
  <a href="/#contact" class="btn-cta" style="display:inline-block;padding:14px 36px;font-size:1rem">Get Pro — $29</a>
</section>

<!-- Cross Promo -->n<section style="max-width:900px;margin:40px auto;padding:0 24px;">n<div style="background:linear-gradient(135deg,rgba(99,102,241,0.1),rgba(168,85,247,0.08));border:1px solid rgba(99,102,241,0.15);border-radius:20px;padding:32px 28px;text-align:center;">n<div style="font-size:13px;color:#818cf8;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Founding Member</div>n<h3 style="font-size:22px;font-weight:800;color:#fff;margin:0 0 8px;">Get NexTool Pro</h3>n<p style="color:#94a3b8;font-size:14px;margin:0 auto 20px;max-width:500px;">No banners, clean output, enhanced features on all 220+ tools. One-time payment.</p>n<div style="display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap;">n<a href="/pro.html" style="display:inline-block;padding:12px 28px;background:linear-gradient(135deg,#6366f1,#a855f7,#ec4899);color:#fff;border-radius:10px;font-weight:700;font-size:15px;text-decoration:none;transition:transform 0.2s;" onmouseenter="this.style.transform='translateY(-2px)'" onmouseleave="this.style.transform='translateY(0)'">$29 — Get Pro</a>n<a href="/free-tools/" style="color:#94a3b8;font-size:14px;text-decoration:none;transition:color 0.2s;" onmouseenter="this.style.color='#e2e8f0'" onmouseleave="this.style.color='#94a3b8'">Browse 220+ Free Tools →</a>n</div>n</div>n</section>

<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/box-shadow-generator.html" style="color:var(--primary);text-decoration:none">CSS Box Shadow Generator</a> · <a href="/free-tools/emoji-picker.html" style="color:var(--primary);text-decoration:none">Emoji Picker & Search</a> · <a href="/free-tools/meta-tag-generator.html" style="color:var(--primary);text-decoration:none">Meta Tag Generator</a> · <a href="/free-tools/css-animation-generator.html" style="color:var(--primary);text-decoration:none">CSS Animation Generator - Free Tool</a> · <a href="/free-tools/favicon-generator.html" style="color:var(--primary);text-decoration:none">Favicon Generator</a></p>
</div>

<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/icon-generator.html" style="color:var(--primary);text-decoration:none">Free Icon Generator</a> · <a href="/free-tools/accessibility-checker.html" style="color:var(--primary);text-decoration:none">Free Accessibility Checker</a> · <a href="/free-tools/ascii-art-generator.html" style="color:var(--primary);text-decoration:none">Free Text to ASCII Art Generator</a></p>
</div>
<footer>
  <div class="footer-grid">
    <div class="footer-col"><h4>Products</h4>
      <a href="/free-tools/">220+ Free Tools</a>
<a href="/pro.html">NexTool Pro</a>
<a href="/workspace.html">Workspace</a>
    </div>
    <div class="footer-col"><h4>Explore</h4>
      <a href="/free-tools/">Free Tools</a><a href="/free-tools/password-generator.html">Password Generator</a><a href="/blog/">Blog</a><a href="/#contact">Contact</a>
    </div>
    <div class="footer-col"><h4>Ecosystem</h4>
      <a href="/">NexTool Home</a><a href="/pro.html">Pro — $29</a><a href="/pro.html">FAQ</a>
    </div>
  </div>
  <div class="footer-bottom">&copy; 2026 NexTool. All rights reserved.</div>
</footer>

<script>
// ====== PURE JS QR CODE ENCODER ======
// Implements QR Code Model 2 with byte mode encoding
// Supports versions 1-10, error correction L/M/Q/H

const QR=(function(){
  // Galois Field GF(256) arithmetic
  const EXP=new Uint8Array(256),LOG=new Uint8Array(256);
  (function(){let v=1;for(let i=0;i<255;i++){EXP[i]=v;LOG[v]=i;v<<=1;if(v&256)v^=0x11d}EXP[255]=EXP[0]})();
  function gfMul(a,b){return a&&b?EXP[(LOG[a]+LOG[b])%255]:0}
  function polyMul(a,b){const r=new Uint8Array(a.length+b.length-1);for(let i=0;i<a.length;i++)for(let j=0;j<b.length;j++)r[i+j]^=gfMul(a[i],b[j]);return r}
  function genPoly(n){let g=new Uint8Array([1]);for(let i=0;i<n;i++)g=polyMul(g,new Uint8Array([1,EXP[i]]));return g}
  function ecBytes(data,ecCount){
    const gen=genPoly(ecCount);const msg=new Uint8Array(data.length+ecCount);msg.set(data);
    for(let i=0;i<data.length;i++){const coef=msg[i];if(coef)for(let j=0;j<gen.length;j++)msg[i+j]^=gfMul(gen[j],coef)}
    return msg.slice(data.length);
  }

  // EC codewords table [version][L,M,Q,H] = {total, ec_per_block, blocks1, data1, blocks2, data2}
  const EC_TABLE=[
    null,
    [{t:26,e:7,b1:1,d1:19},{t:26,e:10,b1:1,d1:16},{t:26,e:13,b1:1,d1:13},{t:26,e:17,b1:1,d1:9}],
    [{t:44,e:10,b1:1,d1:34},{t:44,e:16,b1:1,d1:28},{t:44,e:22,b1:1,d1:22},{t:44,e:28,b1:1,d1:16}],
    [{t:70,e:15,b1:1,d1:55},{t:70,e:26,b1:1,d1:44},{t:70,e:18,b1:2,d1:17},{t:70,e:22,b1:2,d1:13}],
    [{t:100,e:20,b1:1,d1:80},{t:100,e:18,b1:2,d1:32},{t:100,e:26,b1:2,d1:24},{t:100,e:16,b1:4,d1:9}],
    [{t:134,e:26,b1:1,d1:108},{t:134,e:24,b1:2,d1:43},{t:134,e:18,b1:2,d1:15,b2:2,d2:16},{t:134,e:22,b1:2,d1:11,b2:2,d2:12}],
    [{t:172,e:18,b1:2,d1:68},{t:172,e:16,b1:4,d1:27},{t:172,e:24,b1:4,d1:19},{t:172,e:28,b1:4,d1:15}],
    [{t:196,e:20,b1:2,d1:78},{t:196,e:18,b1:4,d1:31},{t:196,e:18,b1:2,d1:14,b2:4,d2:15},{t:196,e:26,b1:4,d1:13,b2:1,d2:14}],
    [{t:242,e:24,b1:2,d1:97},{t:242,e:22,b1:2,d1:38,b2:2,d2:39},{t:242,e:22,b1:4,d1:18,b2:2,d2:19},{t:242,e:26,b1:4,d1:14,b2:2,d2:15}],
    [{t:292,e:30,b1:2,d1:116},{t:292,e:22,b1:3,d1:36,b2:2,d2:37},{t:292,e:20,b1:4,d1:16,b2:4,d2:17},{t:292,e:24,b1:4,d1:12,b2:4,d2:13}],
    [{t:346,e:18,b1:2,d1:68,b2:2,d2:69},{t:346,e:26,b1:4,d1:43,b2:1,d2:44},{t:346,e:24,b1:6,d1:19,b2:2,d2:20},{t:346,e:28,b1:6,d1:15,b2:2,d2:16}],
  ];
  const EC_IDX={L:0,M:1,Q:2,H:3};

  // Alignment pattern positions
  const ALIGN_POS=[null,[],
    [6,18],[6,22],[6,26],[6,30],[6,34],
    [6,22,38],[6,24,42],[6,26,46],[6,28,50]];

  // Format info bits
  const FORMAT_BITS=(function(){
    const table={};
    const ecBits={L:1,M:0,Q:3,H:2};
    for(const ec of ['L','M','Q','H']){
      table[ec]=[];
      for(let mask=0;mask<8;mask++){
        let d=(ecBits[ec]<<3)|mask;
        let rem=d;
        for(let i=0;i<10;i++){rem=(rem<<1)^((rem>>9)*0x537)}
        let bits=(d<<10)|rem;
        bits^=0x5412;
        table[ec][mask]=bits;
      }
    }
    return table;
  })();

  // Version info bits for versions 7+
  const VERSION_BITS=(function(){
    const t=new Array(11);
    for(let v=7;v<=10;v++){
      let rem=v;
      for(let i=0;i<12;i++) rem=(rem<<1)^((rem>>11)*0x1F25);
      t[v]=(v<<12)|rem;
    }
    return t;
  })();

  function getVersion(dataLen,ecLevel){
    const eci=EC_IDX[ecLevel];
    for(let v=1;v<=10;v++){
      const spec=EC_TABLE[v][eci];
      const dataCap=(spec.b1*spec.d1)+(spec.b2?spec.b2*spec.d2:0);
      // byte mode header: 4 bits mode + char count bits
      const ccBits=v<=9?8:16;
      const headerBytes=Math.ceil((4+ccBits)/8);
      if(dataLen<=dataCap-headerBytes-Math.ceil((4+ccBits)%8?0:0)) {
        // More precise: check total bits
        const totalBits=4+ccBits+dataLen*8;
        const totalBytes=Math.ceil(totalBits/8);
        if(totalBytes<=dataCap) return v;
      }
    }
    return -1; // too large
  }

  function encodeData(text,version,ecLevel){
    const eci=EC_IDX[ecLevel];
    const spec=EC_TABLE[version][eci];
    const dataCap=(spec.b1*spec.d1)+(spec.b2?spec.b2*spec.d2:0);
    const bytes=new TextEncoder().encode(text);
    const ccBits=version<=9?8:16;

    // Build bit stream
    let bits='';
    bits+='0100'; // byte mode
    bits+=bytes.length.toString(2).padStart(ccBits,'0');
    for(const b of bytes) bits+=b.toString(2).padStart(8,'0');
    bits+='0000'.slice(0,Math.min(4,dataCap*8-bits.length));
    while(bits.length%8) bits+='0';
    while(bits.length<dataCap*8){
      bits+='11101100';
      if(bits.length<dataCap*8) bits+='00010001';
    }
    const data=new Uint8Array(dataCap);
    for(let i=0;i<dataCap;i++) data[i]=parseInt(bits.slice(i*8,i*8+8),2);

    // Split into blocks and compute EC
    const blocks=[];
    let offset=0;
    for(let i=0;i<spec.b1;i++){
      blocks.push(data.slice(offset,offset+spec.d1));offset+=spec.d1;
    }
    if(spec.b2) for(let i=0;i<spec.b2;i++){
      blocks.push(data.slice(offset,offset+spec.d2));offset+=spec.d2;
    }
    const ecBlocks=blocks.map(b=>ecBytes(b,spec.e));

    // Interleave data
    const result=[];
    const maxDataLen=Math.max(spec.d1,spec.d2||0);
    for(let i=0;i<maxDataLen;i++)
      for(const b of blocks) if(i<b.length) result.push(b[i]);
    for(let i=0;i<spec.e;i++)
      for(const b of ecBlocks) result.push(b[i]);
    return new Uint8Array(result);
  }

  function createMatrix(version){
    const size=version*4+17;
    const m=Array.from({length:size},()=>new Int8Array(size)); // 0=unset, 1=dark, -1=light(reserved)
    const reserved=Array.from({length:size},()=>new Uint8Array(size));

    function setModule(r,c,dark){
      if(r>=0&&r<size&&c>=0&&c<size){m[r][c]=dark?1:-1;reserved[r][c]=1}
    }
    // Finder patterns
    function finderPattern(row,col){
      for(let r=-1;r<=7;r++)for(let c=-1;c<=7;c++){
        const rr=row+r,cc=col+c;
        if(rr<0||rr>=size||cc<0||cc>=size)continue;
        const dark=(r>=0&&r<=6&&(c===0||c===6))||(c>=0&&c<=6&&(r===0||r===6))||(r>=2&&r<=4&&c>=2&&c<=4);
        setModule(rr,cc,dark);
      }
    }
    finderPattern(0,0);finderPattern(0,size-7);finderPattern(size-7,0);

    // Alignment patterns
    const ap=ALIGN_POS[version];
    if(ap&&ap.length>1){
      for(const ar of ap) for(const ac of ap){
        if((ar<9&&ac<9)||(ar<9&&ac>size-9)||(ar>size-9&&ac<9))continue;
        for(let r=-2;r<=2;r++)for(let c=-2;c<=2;c++){
          const dark=Math.abs(r)===2||Math.abs(c)===2||(r===0&&c===0);
          setModule(ar+r,ac+c,dark);
        }
      }
    }

    // Timing patterns
    for(let i=8;i<size-8;i++){
      if(!reserved[6][i]){setModule(6,i,i%2===0)}
      if(!reserved[i][6]){setModule(i,6,i%2===0)}
    }

    // Dark module
    setModule(size-8,8,true);

    // Reserve format info areas
    for(let i=0;i<8;i++){
      if(!reserved[8][i]) {m[8][i]=0;reserved[8][i]=2}
      if(!reserved[8][size-1-i]) {m[8][size-1-i]=0;reserved[8][size-1-i]=2}
      if(!reserved[i][8]) {m[i][8]=0;reserved[i][8]=2}
      if(!reserved[size-1-i][8]) {m[size-1-i][8]=0;reserved[size-1-i][8]=2}
    }
    if(!reserved[8][8]){m[8][8]=0;reserved[8][8]=2}

    // Version info for v>=7
    if(version>=7){
      const vBits=VERSION_BITS[version];
      for(let i=0;i<18;i++){
        const bit=(vBits>>i)&1;
        const r=Math.floor(i/3),c=size-11+i%3;
        setModule(r,c,bit);setModule(c,r,bit);
      }
    }

    return{m,reserved,size};
  }

  function placeData(matrix,reserved,size,codewords){
    let bitIdx=0;
    const totalBits=codewords.length*8;
    let col=size-1;
    let upward=true;

    while(col>=0){
      if(col===6) col--; // skip timing column
      const rows=upward?[...Array(size).keys()].reverse():[...Array(size).keys()];
      for(const row of rows){
        for(let dx=0;dx<=1;dx++){
          const c=col-dx;
          if(c<0||c>=size) continue;
          if(reserved[row][c]) continue;
          if(bitIdx<totalBits){
            const bit=(codewords[bitIdx>>3]>>(7-(bitIdx&7)))&1;
            matrix[row][c]=bit?1:-1;
            bitIdx++;
          } else {
            matrix[row][c]=-1;
          }
        }
      }
      col-=2;
      upward=!upward;
    }
  }

  const MASK_FNS=[
    (r,c)=>(r+c)%2===0,
    (r,c)=>r%2===0,
    (r,c)=>c%3===0,
    (r,c)=>(r+c)%3===0,
    (r,c)=>(Math.floor(r/2)+Math.floor(c/3))%2===0,
    (r,c)=>(r*c)%2+(r*c)%3===0,
    (r,c)=>((r*c)%2+(r*c)%3)%2===0,
    (r,c)=>((r+c)%2+(r*c)%3)%2===0,
  ];

  function applyMask(m,reserved,size,maskIdx){
    const fn=MASK_FNS[maskIdx];
    for(let r=0;r<size;r++)for(let c=0;c<size;c++){
      if(reserved[r][c])continue;
      if(fn(r,c)) m[r][c]=m[r][c]===1?-1:1;
    }
  }

  function writeFormatInfo(m,size,ecLevel,maskIdx){
    const bits=FORMAT_BITS[ecLevel][maskIdx];
    const positions=[];
    // Around top-left finder
    for(let i=0;i<6;i++) positions.push([8,i]);
    positions.push([8,7]);positions.push([8,8]);positions.push([7,8]);
    for(let i=5;i>=0;i--) positions.push([i,8]);
    // Other positions
    const pos2=[];
    for(let i=0;i<7;i++) pos2.push([8,size-1-i]);
    for(let i=0;i<8;i++) pos2.push([size-1-i,8]);

    for(let i=0;i<15;i++){
      const bit=(bits>>(14-i))&1;
      if(i<positions.length){
        const [r,c]=positions[i];
        m[r][c]=bit?1:-1;
      }
      if(i<pos2.length){
        const [r,c]=pos2[i];
        m[r][c]=bit?1:-1;
      }
    }
  }

  function penaltyScore(m,size){
    let score=0;
    // Rule 1: runs of same color
    for(let r=0;r<size;r++){
      let run=1;
      for(let c=1;c<size;c++){
        if((m[r][c]>0)===(m[r][c-1]>0)){run++;if(run===5)score+=3;else if(run>5)score++}
        else run=1;
      }
    }
    for(let c=0;c<size;c++){
      let run=1;
      for(let r=1;r<size;r++){
        if((m[r][c]>0)===(m[r-1][c]>0)){run++;if(run===5)score+=3;else if(run>5)score++}
        else run=1;
      }
    }
    // Rule 2: 2x2 blocks
    for(let r=0;r<size-1;r++)for(let c=0;c<size-1;c++){
      const d=m[r][c]>0;
      if(d===(m[r][c+1]>0)&&d===(m[r+1][c]>0)&&d===(m[r+1][c+1]>0)) score+=3;
    }
    // Rule 3: finder-like patterns (simplified)
    // Rule 4: proportion
    let dark=0;
    for(let r=0;r<size;r++)for(let c=0;c<size;c++) if(m[r][c]>0)dark++;
    const pct=dark/(size*size)*100;
    const prev5=Math.floor(pct/5)*5,next5=prev5+5;
    score+=Math.min(Math.abs(prev5-50)/5,Math.abs(next5-50)/5)*10;
    return score;
  }

  function generate(text,ecLevel){
    if(!text) text=' ';
    const bytes=new TextEncoder().encode(text);
    let version=getVersion(bytes.length,ecLevel);
    if(version<0) version=10; // clamp & truncate for very long text
    const codewords=encodeData(text,version,ecLevel);
    const{m,reserved,size}=createMatrix(version);
    placeData(m,reserved,size,codewords);

    // Try all masks, pick best
    let bestMask=0,bestScore=Infinity;
    for(let mi=0;mi<8;mi++){
      const mc=m.map(r=>new Int8Array(r));
      applyMask(mc,reserved,size,mi);
      writeFormatInfo(mc,size,ecLevel,mi);
      const s=penaltyScore(mc,size);
      if(s<bestScore){bestScore=s;bestMask=mi}
    }
    applyMask(m,reserved,size,bestMask);
    writeFormatInfo(m,size,ecLevel,bestMask);

    return{modules:m,size};
  }

  return{generate};
})();

// ====== UI LOGIC ======
let currentType='url',currentEC='M';
const canvas=document.getElementById('qr-canvas');
const ctx=canvas.getContext('2d');
let debounceTimer;

// Tab switching
document.getElementById('type-tabs').addEventListener('click',e=>{
  if(!e.target.classList.contains('tab'))return;
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  e.target.classList.add('active');
  currentType=e.target.dataset.type;
  document.querySelectorAll('.type-fields').forEach(f=>f.style.display='none');
  document.getElementById('fields-'+currentType).style.display='block';
  scheduleRender();
});

// EC buttons
document.querySelectorAll('.ec-btn').forEach(btn=>{
  btn.addEventListener('click',()=>{
    document.querySelectorAll('.ec-btn').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    currentEC=btn.dataset.ec;
    scheduleRender();
  });
});

// Size slider
const sizeSlider=document.getElementById('qr-size');
const sizeVal=document.getElementById('qr-size-val');
sizeSlider.addEventListener('input',()=>{
  sizeVal.textContent=sizeSlider.value+'px';
  scheduleRender();
});

// Color pickers
document.getElementById('qr-fg').addEventListener('input',scheduleRender);
document.getElementById('qr-bg').addEventListener('input',scheduleRender);

// Input listeners for live preview
document.querySelectorAll('.field input, .field textarea, .field select').forEach(el=>{
  el.addEventListener('input',scheduleRender);
});

function scheduleRender(){clearTimeout(debounceTimer);debounceTimer=setTimeout(renderQR,150)}

function getData(){
  switch(currentType){
    case'url': return document.getElementById('f-url').value||'https://nextool.app';
    case'text': return document.getElementById('f-text').value||'Hello World';
    case'email':{
      const e=document.getElementById('f-email').value||'';
      const s=document.getElementById('f-email-subj').value;
      const b=document.getElementById('f-email-body').value;
      let mailto='mailto:'+e;
      const params=[];
      if(s)params.push('subject='+encodeURIComponent(s));
      if(b)params.push('body='+encodeURIComponent(b));
      if(params.length)mailto+='?'+params.join('&');
      return mailto;
    }
    case'phone': return 'tel:'+(document.getElementById('f-phone').value||'');
    case'wifi':{
      const ssid=document.getElementById('f-wifi-ssid').value||'';
      const pass=document.getElementById('f-wifi-pass').value||'';
      const enc=document.getElementById('f-wifi-enc').value;
      return `WIFI:T:${enc};S:${ssid};P:${pass};;`;
    }
    case'vcard':{
      const n=document.getElementById('f-vc-name').value||'';
      const p=document.getElementById('f-vc-phone').value||'';
      const e=document.getElementById('f-vc-email').value||'';
      const o=document.getElementById('f-vc-org').value||'';
      const u=document.getElementById('f-vc-url').value||'';
      let vc='BEGIN:VCARD\nVERSION:3.0\n';
      if(n)vc+='FN:'+n+'\n';
      if(p)vc+='TEL:'+p+'\n';
      if(e)vc+='EMAIL:'+e+'\n';
      if(o)vc+='ORG:'+o+'\n';
      if(u)vc+='URL:'+u+'\n';
      vc+='END:VCARD';
      return vc;
    }
  }
  return '';
}

function renderQR(){
  const data=getData();
  const size=parseInt(sizeSlider.value);
  const fg=document.getElementById('qr-fg').value;
  const bg=document.getElementById('qr-bg').value;

  try{
    const{modules,size:modSize}=QR.generate(data,currentEC);
    canvas.width=size;canvas.height=size;
    const cellSize=size/modSize;
    ctx.fillStyle=bg;ctx.fillRect(0,0,size,size);
    ctx.fillStyle=fg;
    for(let r=0;r<modSize;r++)for(let c=0;c<modSize;c++){
      if(modules[r][c]>0){
        ctx.fillRect(Math.floor(c*cellSize),Math.floor(r*cellSize),Math.ceil(cellSize),Math.ceil(cellSize));
      }
    }
  }catch(e){
    canvas.width=size;canvas.height=size;
    ctx.fillStyle=bg;ctx.fillRect(0,0,size,size);
    ctx.fillStyle='#666';ctx.font='14px Inter';ctx.textAlign='center';
    ctx.fillText('Text too long for QR v1-10',size/2,size/2);
  }
}

function downloadQR(){
  const link=document.createElement('a');
  link.download='nextool-qr-code.png';
  link.href=canvas.toDataURL('image/png');
  link.click();
}

function copyQR(){
  canvas.toBlob(blob=>{
    navigator.clipboard.write([new ClipboardItem({'image/png':blob})]).then(()=>{
      const btn=document.querySelector('.action-btns .action-btn:last-child');
      btn.textContent='Copied!';btn.style.color='#22c55e';btn.style.borderColor='#22c55e';
      setTimeout(()=>{btn.textContent='Copy to Clipboard';btn.style.color='';btn.style.borderColor=''},1500);
    }).catch(()=>alert('Copy failed — try downloading instead.'));
  });
}

// IntersectionObserver
const obs=new IntersectionObserver(entries=>{entries.forEach(e=>{if(e.isIntersecting){e.target.classList.add('visible');obs.unobserve(e.target)}})},{threshold:.15});
document.querySelectorAll('.fade-in').forEach(el=>obs.observe(el));

// Initial render
renderQR();
</script>
<script src="/js/analytics-lite.js" defer></script>
<script src="/js/revenue.js" defer></script>
<script src="/js/lead-capture.js" defer></script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What types of QR codes can I create?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "NexTool's QR Code Generator supports URLs, plain text, email addresses (with optional subject and body), phone numbers, WiFi network credentials (SSID, password, encryption type), and vCards with name, phone, email, organization, and website."
      }
    },
    {
      "@type": "Question",
      "name": "Can I customize the colors of my QR code?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, you can fully customize both the foreground and background colors of your QR code using color pickers. You can also adjust the size from 128px to 512px and choose from four error correction levels (L, M, Q, H)."
      }
    },
    {
      "@type": "Question",
      "name": "Is this QR code generator free?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, NexTool's QR Code Generator is completely free with no signup, no watermarks, and no limits. The QR codes are generated entirely in your browser using a pure JavaScript encoder — no server calls needed."
      }
    },
    {
      "@type": "Question",
      "name": "What is QR code error correction?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Error correction allows a QR code to remain scannable even if part of it is damaged or obscured. NexTool offers four levels: L (7% recovery), M (15%), Q (25%), and H (30%). Higher levels make the QR code more resilient but slightly larger."
      }
    }
  ]
}
</script>
</body>
</html>
