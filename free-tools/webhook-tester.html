<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Free Webhook Tester — Generate, Test & Verify Webhooks | NexTool</title>
<meta name="description" content="Free webhook testing tool. Generate sample payloads for GitHub, Stripe, Shopify, Slack, Discord, Twilio. Build cURL commands, calculate HMAC signatures, validate payloads.">
<meta name="keywords" content="webhook tester, webhook generator, webhook payload, HMAC signature, cURL webhook, webhook validator, GitHub webhook, Stripe webhook, free online tool, NexTool">
<meta property="og:title" content="Free Webhook Tester — Generate & Verify Webhooks | NexTool">
<meta property="og:description" content="Generate sample webhook payloads, build cURL commands, calculate HMAC signatures, and validate webhooks. 100% free, runs in your browser.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://nextool.app/free-tools/webhook-tester.html">
<meta property="og:image" content="https://nextool.app/assets/og-default.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<link rel="canonical" href="https://nextool.app/free-tools/webhook-tester.html">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Free Webhook Tester — Generate & Verify Webhooks | NexTool">
<meta name="twitter:description" content="Generate webhook payloads, cURL commands, and HMAC signatures. Free online tool by NexTool.">
<meta name="robots" content="index, follow">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"SoftwareApplication","name":"NexTool Webhook Tester","applicationCategory":"DeveloperApplication","operatingSystem":"Web","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"description":"Free online webhook tester to generate sample payloads, build cURL commands, calculate HMAC signatures, and validate webhook payloads."}
</script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--bg:#050508;--surface:#111118;--surface2:#1a1a24;--border:#2a2a3a;--text:#e4e4eb;--text2:#9494a8;--primary:#6366f1;--accent:#a855f7;--pink:#ec4899;--green:#22c55e;--red:#ef4444;--cyan:#22d3ee;--yellow:#eab308;--orange:#f97316;--radius:12px;--glass:rgba(17,17,24,0.7)}
html{scroll-behavior:smooth}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;min-height:100vh;overflow-x:hidden}
/* NAV */
.nav{position:sticky;top:0;z-index:100;background:rgba(5,5,8,0.85);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:0 2rem;height:64px;display:flex;align-items:center;justify-content:space-between}
.nav-logo{font-size:1.4rem;font-weight:800;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-decoration:none}
.nav-links{display:flex;align-items:center;gap:1.5rem}
.nav-links a{color:var(--text2);text-decoration:none;font-size:.875rem;font-weight:500;transition:color .2s}
.nav-links a:hover{color:var(--text)}
.nav-cta{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff!important;padding:.5rem 1.2rem;border-radius:8px;font-weight:600;-webkit-text-fill-color:#fff!important}
.nav-cta:hover{opacity:.9}
.nav-toggle{display:none;background:none;border:none;color:var(--text);font-size:1.5rem;cursor:pointer}
/* HERO */
.hero{text-align:center;padding:3rem 1.5rem 2rem;max-width:700px;margin:0 auto}
.hero h1{font-size:2.2rem;font-weight:800;line-height:1.2;margin-bottom:.75rem}
.hero h1 span{background:linear-gradient(135deg,var(--primary),var(--accent),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{color:var(--text2);font-size:1rem}
/* TOOL */
.tool-container{max-width:1200px;margin:0 auto;padding:0 1.5rem 3rem}
/* TABS */
.tab-bar{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:1.5rem;border-bottom:1px solid var(--border);padding-bottom:.75rem}
.tab-btn{background:none;border:none;color:var(--text2);padding:.5rem 1rem;font-size:.85rem;font-weight:600;cursor:pointer;border-radius:8px 8px 0 0;transition:all .2s;font-family:inherit;position:relative}
.tab-btn:hover{color:var(--text);background:rgba(99,102,241,.08)}
.tab-btn.active{color:var(--primary);background:rgba(99,102,241,.12)}
.tab-btn.active::after{content:'';position:absolute;bottom:-0.75rem;left:0;right:0;height:2px;background:var(--primary);border-radius:2px}
.tab-panel{display:none}
.tab-panel.active{display:block}
/* SHARED */
.card{background:var(--glass);backdrop-filter:blur(16px);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;margin-bottom:1rem}
.card-header{padding:.6rem 1rem;border-bottom:1px solid var(--border);font-size:.8rem;font-weight:600;color:var(--text2);display:flex;justify-content:space-between;align-items:center;background:rgba(26,26,36,0.5)}
.card-body{padding:1rem}
.form-row{display:flex;flex-wrap:wrap;gap:.75rem;margin-bottom:.75rem;align-items:end}
.form-group{display:flex;flex-direction:column;gap:.3rem;flex:1;min-width:180px}
.form-group label{font-size:.75rem;font-weight:600;color:var(--text2);text-transform:uppercase;letter-spacing:.5px}
.form-group select,.form-group input,.form-group textarea{background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.5rem .75rem;border-radius:8px;font-size:.85rem;font-family:inherit;outline:none;transition:border-color .2s}
.form-group select:focus,.form-group input:focus,.form-group textarea:focus{border-color:var(--primary)}
.form-group textarea{font-family:'Courier New',monospace;resize:vertical;min-height:120px;line-height:1.6;tab-size:2}
.btn{background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.5rem 1rem;border-radius:8px;font-size:.8rem;font-weight:600;cursor:pointer;transition:all .2s;font-family:inherit;white-space:nowrap}
.btn:hover{border-color:var(--primary);background:rgba(99,102,241,.12)}
.btn-primary{background:linear-gradient(135deg,var(--primary),var(--accent));border-color:transparent;color:#fff}
.btn-primary:hover{opacity:.9;border-color:transparent}
.btn-sm{padding:.35rem .7rem;font-size:.75rem}
.output-box{background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:1rem;font-family:'Courier New',monospace;font-size:.82rem;line-height:1.7;white-space:pre-wrap;word-break:break-all;max-height:500px;overflow:auto;color:var(--text)}
.output-box:empty::before{content:'Output will appear here...';color:var(--text2);opacity:.5}
/* SYNTAX */
.hl-key{color:#c084fc}.hl-str{color:#4ade80}.hl-num{color:var(--cyan)}.hl-bool{color:var(--yellow)}.hl-null{color:#6b7280}.hl-brace{color:var(--text2)}
/* SERVICE CHIPS */
.service-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:.5rem;margin-bottom:1rem}
.service-chip{display:flex;align-items:center;gap:.5rem;padding:.6rem .8rem;background:var(--surface2);border:1px solid var(--border);border-radius:10px;cursor:pointer;transition:all .2s;font-size:.8rem;font-weight:500}
.service-chip:hover{border-color:var(--primary);background:rgba(99,102,241,.08)}
.service-chip.active{border-color:var(--primary);background:rgba(99,102,241,.15);color:#fff}
.service-chip .icon{width:28px;height:28px;border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:14px;flex-shrink:0;font-weight:700}
.service-chip .icon.github{background:#24292e;color:#fff}
.service-chip .icon.stripe{background:#635bff;color:#fff}
.service-chip .icon.shopify{background:#96bf48;color:#fff}
.service-chip .icon.slack{background:#4a154b;color:#fff}
.service-chip .icon.discord{background:#5865f2;color:#fff}
.service-chip .icon.twilio{background:#f22f46;color:#fff}
/* EVENT SELECT */
.event-pills{display:flex;flex-wrap:wrap;gap:.4rem;margin-bottom:1rem}
.event-pill{padding:.3rem .7rem;font-size:.75rem;font-weight:500;border-radius:6px;background:var(--surface2);border:1px solid var(--border);cursor:pointer;color:var(--text2);transition:all .2s}
.event-pill:hover{border-color:var(--primary);color:var(--text)}
.event-pill.active{background:rgba(99,102,241,.15);border-color:var(--primary);color:var(--primary)}
/* HMAC result */
.sig-result{display:flex;align-items:center;gap:.5rem;padding:.6rem .8rem;background:rgba(34,197,94,.08);border:1px solid rgba(34,197,94,.2);border-radius:8px;margin-top:.75rem;font-family:'Courier New',monospace;font-size:.8rem;word-break:break-all;color:var(--green)}
.sig-result.error{background:rgba(239,68,68,.08);border-color:rgba(239,68,68,.2);color:var(--red)}
/* VALIDATION */
.val-pass{color:var(--green);font-weight:600}.val-fail{color:var(--red);font-weight:600}.val-warn{color:var(--yellow);font-weight:600}
.val-item{display:flex;align-items:flex-start;gap:.5rem;padding:.4rem 0;font-size:.85rem;border-bottom:1px solid rgba(42,42,58,.5)}
.val-item:last-child{border-bottom:none}
/* REQUEST BUILDER */
.req-line{display:flex;gap:.5rem;align-items:center;margin-bottom:.75rem}
.method-badge{padding:.35rem .7rem;border-radius:6px;font-size:.75rem;font-weight:700;text-transform:uppercase;letter-spacing:.5px}
.method-POST{background:rgba(34,197,94,.15);color:var(--green);border:1px solid rgba(34,197,94,.3)}
.method-GET{background:rgba(99,102,241,.15);color:var(--primary);border:1px solid rgba(99,102,241,.3)}
.method-PUT{background:rgba(249,115,22,.15);color:var(--orange);border:1px solid rgba(249,115,22,.3)}
.headers-list{font-size:.8rem;color:var(--text2);margin-bottom:.75rem}
.headers-list div{padding:.25rem 0;border-bottom:1px solid rgba(42,42,58,.3)}
.headers-list span.hk{color:#c084fc;font-weight:500}
.headers-list span.hv{color:#4ade80}
.response-block{background:var(--surface);border:1px solid var(--border);border-radius:8px;overflow:hidden;margin-top:.75rem}
.response-status{padding:.5rem 1rem;font-size:.8rem;font-weight:600;border-bottom:1px solid var(--border)}
.response-status.s2{background:rgba(34,197,94,.08);color:var(--green)}
.response-status.s4{background:rgba(239,68,68,.08);color:var(--red)}
.response-body{padding:1rem;font-family:'Courier New',monospace;font-size:.82rem;line-height:1.6;white-space:pre-wrap;color:var(--text)}
/* CTA */
.cta-section{text-align:center;padding:4rem 1.5rem;max-width:700px;margin:0 auto}
.cta-section h2{font-size:1.8rem;font-weight:800;margin-bottom:.75rem}
.cta-section h2 span{background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.cta-section p{color:var(--text2);margin-bottom:1.5rem}
.cta-btn{display:inline-block;background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;padding:.75rem 2rem;border-radius:10px;font-weight:700;text-decoration:none;font-size:1rem;transition:transform .2s,box-shadow .2s}
.cta-btn:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(99,102,241,.3)}
/* FOOTER */
.footer{border-top:1px solid var(--border);padding:3rem 2rem 2rem;max-width:1200px;margin:0 auto}
.footer-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:2rem;margin-bottom:2rem}
.footer-col h4{font-size:.85rem;font-weight:700;margin-bottom:.75rem;color:var(--text)}
.footer-col a{display:block;color:var(--text2);text-decoration:none;font-size:.8rem;margin-bottom:.4rem;transition:color .2s}
.footer-col a:hover{color:var(--primary)}
.footer-bottom{text-align:center;color:var(--text2);font-size:.75rem;padding-top:1.5rem;border-top:1px solid var(--border)}
/* FADE IN */
.fade-in{opacity:0;transform:translateY(20px);transition:opacity .6s,transform .6s}
.fade-in.visible{opacity:1;transform:translateY(0)}
/* TOAST */
.toast{position:fixed;bottom:2rem;left:50%;transform:translateX(-50%) translateY(80px);background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.6rem 1.2rem;border-radius:10px;font-size:.85rem;font-weight:500;z-index:200;transition:transform .3s;pointer-events:none}
.toast.show{transform:translateX(-50%) translateY(0)}
/* RESPONSIVE */
@media(max-width:768px){
  .nav-links{display:none;position:absolute;top:64px;left:0;right:0;background:var(--bg);border-bottom:1px solid var(--border);flex-direction:column;padding:1rem 2rem;gap:1rem}
  .nav-links.open{display:flex}
  .nav-toggle{display:block}
  .hero h1{font-size:1.6rem}
  .footer-grid{grid-template-columns:1fr}
  .service-grid{grid-template-columns:repeat(2,1fr)}
  .form-row{flex-direction:column}
  .form-group{min-width:100%}
  .req-line{flex-direction:column;align-items:stretch}
}
</style>
</head>
<body>

<nav class="nav">
  <a href="/" class="nav-logo">NexTool</a>
  <button class="nav-toggle" onclick="document.querySelector('.nav-links').classList.toggle('open')" aria-label="Menu">&#9776;</button>
  <div class="nav-links">
    <a href="/">Home</a>
    <a href="/free-tools/">Tools</a>
    <a href="/free-tools/">Free Tools</a>
    <a href="/blog/">Blog</a>
    <a href="/#contact" class="nav-cta">Get Pro — $29</a>
  </div>
</nav>

<section class="hero fade-in">
  <h1>Free <span>Webhook Tester</span></h1>
  <p style="color:#94a3b8;font-size:15px;line-height:1.6;margin-bottom:24px;max-width:700px;margin-left:auto;margin-right:auto;">Generate sample webhook payloads for GitHub, Stripe, Shopify, Slack, Discord, and Twilio. Build cURL commands, calculate HMAC signatures, validate payloads, and simulate webhook request/response flows. 100% client-side, no data leaves your browser.</p>
</section>

<div class="tool-container fade-in">

  <!-- TABS -->
  <div class="tab-bar">
    <button class="tab-btn active" data-tab="generate">Payload Generator</button>
    <button class="tab-btn" data-tab="curl">cURL Builder</button>
    <button class="tab-btn" data-tab="hmac">HMAC Signatures</button>
    <button class="tab-btn" data-tab="validate">Validator</button>
    <button class="tab-btn" data-tab="simulate">Request Simulator</button>
  </div>

  <!-- TAB 1: PAYLOAD GENERATOR -->
  <div class="tab-panel active" id="tab-generate">
    <div class="card">
      <div class="card-header"><span>Select Service</span></div>
      <div class="card-body">
        <div class="service-grid" id="serviceGrid">
          <div class="service-chip active" data-service="github" onclick="selectService('github')">
            <div class="icon github">GH</div><span>GitHub</span>
          </div>
          <div class="service-chip" data-service="stripe" onclick="selectService('stripe')">
            <div class="icon stripe">S</div><span>Stripe</span>
          </div>
          <div class="service-chip" data-service="shopify" onclick="selectService('shopify')">
            <div class="icon shopify">Sh</div><span>Shopify</span>
          </div>
          <div class="service-chip" data-service="slack" onclick="selectService('slack')">
            <div class="icon slack">Sl</div><span>Slack</span>
          </div>
          <div class="service-chip" data-service="discord" onclick="selectService('discord')">
            <div class="icon discord">D</div><span>Discord</span>
          </div>
          <div class="service-chip" data-service="twilio" onclick="selectService('twilio')">
            <div class="icon twilio">T</div><span>Twilio</span>
          </div>
        </div>
        <div class="event-pills" id="eventPills"></div>
      </div>
    </div>
    <div class="card">
      <div class="card-header">
        <span>Webhook Payload</span>
        <div style="display:flex;gap:.4rem">
          <button class="btn btn-sm" onclick="copyPayload()">Copy JSON</button>
          <button class="btn btn-sm" onclick="downloadPayload()">Download</button>
          <button class="btn btn-sm" onclick="sendToCurl()">Send to cURL</button>
        </div>
      </div>
      <div class="card-body" style="padding:0">
        <textarea id="payloadEditor" style="width:100%;min-height:400px;background:transparent;border:none;color:var(--text);font-family:'Courier New',monospace;font-size:.85rem;padding:1rem;resize:vertical;outline:none;line-height:1.7;tab-size:2" spellcheck="false"></textarea>
      </div>
    </div>
    <div class="card">
      <div class="card-header"><span>Formatted Preview</span><span id="previewInfo"></span></div>
      <div class="card-body" style="padding:0">
        <div class="output-box" id="payloadPreview" style="border:none;border-radius:0;max-height:400px"></div>
      </div>
    </div>
  </div>

  <!-- TAB 2: CURL BUILDER -->
  <div class="tab-panel" id="tab-curl">
    <div class="card">
      <div class="card-header"><span>cURL Configuration</span></div>
      <div class="card-body">
        <div class="form-row">
          <div class="form-group" style="flex:0 0 120px;min-width:120px">
            <label>Method</label>
            <select id="curlMethod">
              <option value="POST" selected>POST</option>
              <option value="PUT">PUT</option>
              <option value="PATCH">PATCH</option>
            </select>
          </div>
          <div class="form-group">
            <label>Webhook URL</label>
            <input type="url" id="curlUrl" placeholder="https://your-server.com/webhook" value="https://httpbin.org/post">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Content-Type</label>
            <select id="curlContentType">
              <option value="application/json" selected>application/json</option>
              <option value="application/x-www-form-urlencoded">application/x-www-form-urlencoded</option>
              <option value="text/plain">text/plain</option>
            </select>
          </div>
          <div class="form-group">
            <label>Custom Headers (one per line, Key: Value)</label>
            <textarea id="curlHeaders" rows="3" placeholder="X-Webhook-Secret: mysecret&#10;Authorization: Bearer token123"></textarea>
          </div>
        </div>
        <div class="form-group">
          <label>Request Body (JSON)</label>
          <textarea id="curlBody" rows="8" placeholder='{"event":"test","data":{}}'></textarea>
        </div>
        <div style="display:flex;gap:.5rem;margin-top:.75rem">
          <button class="btn btn-primary" onclick="buildCurl()">Generate cURL Command</button>
          <button class="btn" onclick="copyCurl()">Copy cURL</button>
        </div>
      </div>
    </div>
    <div class="card">
      <div class="card-header"><span>Generated cURL Command</span></div>
      <div class="card-body" style="padding:0">
        <div class="output-box" id="curlOutput" style="border:none;border-radius:0"></div>
      </div>
    </div>
  </div>

  <!-- TAB 3: HMAC SIGNATURES -->
  <div class="tab-panel" id="tab-hmac">
    <div class="card">
      <div class="card-header"><span>HMAC Signature Calculator</span></div>
      <div class="card-body">
        <div class="form-row">
          <div class="form-group" style="flex:0 0 180px;min-width:180px">
            <label>Algorithm</label>
            <select id="hmacAlgo">
              <option value="SHA-256" selected>HMAC-SHA256</option>
              <option value="SHA-1">HMAC-SHA1</option>
              <option value="SHA-384">HMAC-SHA384</option>
              <option value="SHA-512">HMAC-SHA512</option>
            </select>
          </div>
          <div class="form-group">
            <label>Secret Key</label>
            <input type="text" id="hmacSecret" placeholder="whsec_your_secret_key_here">
          </div>
        </div>
        <div class="form-group">
          <label>Payload (webhook body)</label>
          <textarea id="hmacPayload" rows="8" placeholder='Paste your webhook payload here...'></textarea>
        </div>
        <div class="form-row" style="margin-top:.75rem;margin-bottom:0">
          <button class="btn btn-primary" onclick="calcHmac()">Calculate Signature</button>
          <button class="btn" onclick="loadPayloadToHmac()">Load from Generator</button>
        </div>
        <div id="hmacResult" style="display:none"></div>

        <div style="margin-top:1.5rem;padding-top:1rem;border-top:1px solid var(--border)">
          <div class="form-group">
            <label>Verify Against Signature</label>
            <input type="text" id="hmacVerify" placeholder="sha256=abc123... (paste signature header to verify)">
          </div>
          <button class="btn" onclick="verifyHmac()" style="margin-top:.5rem">Verify Signature</button>
          <div id="hmacVerifyResult" style="display:none;margin-top:.5rem"></div>
        </div>

        <div style="margin-top:1.5rem;padding-top:1rem;border-top:1px solid var(--border)">
          <p style="font-size:.8rem;color:var(--text2);margin-bottom:.5rem"><strong>Common webhook signature headers:</strong></p>
          <div style="font-size:.78rem;color:var(--text2);line-height:2">
            <code style="background:var(--surface2);padding:2px 6px;border-radius:4px;color:var(--cyan)">X-Hub-Signature-256</code> GitHub<br>
            <code style="background:var(--surface2);padding:2px 6px;border-radius:4px;color:var(--cyan)">Stripe-Signature</code> Stripe<br>
            <code style="background:var(--surface2);padding:2px 6px;border-radius:4px;color:var(--cyan)">X-Shopify-Hmac-SHA256</code> Shopify<br>
            <code style="background:var(--surface2);padding:2px 6px;border-radius:4px;color:var(--cyan)">X-Slack-Signature</code> Slack<br>
            <code style="background:var(--surface2);padding:2px 6px;border-radius:4px;color:var(--cyan)">X-Twilio-Signature</code> Twilio
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- TAB 4: VALIDATOR -->
  <div class="tab-panel" id="tab-validate">
    <div class="card">
      <div class="card-header"><span>Webhook Payload Validator</span></div>
      <div class="card-body">
        <div class="form-row">
          <div class="form-group" style="flex:0 0 180px;min-width:180px">
            <label>Validate Against</label>
            <select id="valService" onchange="updateValSchema()">
              <option value="github">GitHub</option>
              <option value="stripe">Stripe</option>
              <option value="shopify">Shopify</option>
              <option value="slack">Slack</option>
              <option value="discord">Discord</option>
              <option value="twilio">Twilio</option>
              <option value="custom">Custom Schema</option>
            </select>
          </div>
          <div class="form-group">
            <label>Event Type</label>
            <select id="valEvent"></select>
          </div>
        </div>
        <div class="form-group">
          <label>Webhook Payload (JSON)</label>
          <textarea id="valPayload" rows="10" placeholder='Paste webhook payload JSON to validate...'></textarea>
        </div>
        <div class="form-group" id="customSchemaGroup" style="display:none">
          <label>Custom Required Fields (comma-separated JSON paths)</label>
          <input type="text" id="customSchema" placeholder="event, data.id, data.object, type">
        </div>
        <div style="display:flex;gap:.5rem;margin-top:.75rem">
          <button class="btn btn-primary" onclick="validatePayload()">Validate Payload</button>
          <button class="btn" onclick="loadPayloadToVal()">Load from Generator</button>
        </div>
      </div>
    </div>
    <div class="card">
      <div class="card-header"><span>Validation Results</span><span id="valSummary"></span></div>
      <div class="card-body">
        <div id="valResults" style="font-size:.85rem;color:var(--text2)">Run validation to see results...</div>
      </div>
    </div>
  </div>

  <!-- TAB 5: REQUEST SIMULATOR -->
  <div class="tab-panel" id="tab-simulate">
    <div class="card">
      <div class="card-header"><span>Simulated Webhook Request</span></div>
      <div class="card-body">
        <div class="form-row">
          <div class="form-group" style="flex:0 0 180px;min-width:180px">
            <label>Service</label>
            <select id="simService" onchange="updateSimRequest()">
              <option value="github">GitHub</option>
              <option value="stripe">Stripe</option>
              <option value="shopify">Shopify</option>
              <option value="slack">Slack</option>
              <option value="discord">Discord</option>
              <option value="twilio">Twilio</option>
            </select>
          </div>
          <div class="form-group">
            <label>Endpoint URL</label>
            <input type="text" id="simUrl" value="https://your-app.com/api/webhooks">
          </div>
          <div class="form-group" style="flex:0 0 auto;min-width:auto">
            <label>&nbsp;</label>
            <button class="btn btn-primary" onclick="simulateRequest()">Simulate</button>
          </div>
        </div>
      </div>
    </div>
    <div class="card">
      <div class="card-header"><span>Request</span></div>
      <div class="card-body" style="padding:0">
        <div style="padding:1rem">
          <div class="req-line">
            <span class="method-badge method-POST" id="simMethod">POST</span>
            <span style="font-family:'Courier New',monospace;font-size:.85rem;color:var(--cyan)" id="simUrlDisplay">/api/webhooks</span>
          </div>
          <div class="headers-list" id="simHeaders"></div>
        </div>
        <div class="output-box" id="simRequestBody" style="border-radius:0;border-left:none;border-right:none;border-bottom:none;max-height:300px"></div>
      </div>
    </div>
    <div class="card" id="simResponseCard" style="display:none">
      <div class="card-header"><span>Expected Response</span></div>
      <div class="card-body" style="padding:0">
        <div class="response-block" style="border:none">
          <div class="response-status s2" id="simResStatus"></div>
          <div class="response-body" id="simResBody"></div>
        </div>
      </div>
    </div>
  </div>

</div>

<section class="cta-section fade-in">
  <h2>Need something <span>more powerful</span>?</h2>
  <p>Let us build it for you. Custom APIs, dashboards, automations &mdash; whatever you need.</p>
  <a href="/#contact" class="cta-btn">Start a Project &rarr;</a>
</section>

<!-- Cross Promo -->
<section style="max-width:900px;margin:40px auto;padding:0 24px;">
<div style="background:linear-gradient(135deg,rgba(99,102,241,0.1),rgba(168,85,247,0.08));border:1px solid rgba(99,102,241,0.15);border-radius:20px;padding:32px 28px;text-align:center;">
<div style="font-size:13px;color:#818cf8;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Founding Member</div>
<h3 style="font-size:22px;font-weight:800;color:#fff;margin:0 0 8px;">Get NexTool Pro</h3>
<p style="color:#94a3b8;font-size:14px;margin:0 auto 20px;max-width:500px;">No banners, clean output, enhanced features on all 150+ tools. One-time payment.</p>
<div style="display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap;">
<a href="/pro.html" style="display:inline-block;padding:12px 28px;background:linear-gradient(135deg,#6366f1,#a855f7,#ec4899);color:#fff;border-radius:10px;font-weight:700;font-size:15px;text-decoration:none;">$29 — Get Pro</a>
<a href="/free-tools/" style="color:#94a3b8;font-size:14px;text-decoration:none;">Browse 150+ Free Tools &rarr;</a>
</div>
</div>
</section>


<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/box-shadow-generator.html" style="color:var(--primary);text-decoration:none">CSS Box Shadow Generator</a> · <a href="/free-tools/emoji-picker.html" style="color:var(--primary);text-decoration:none">Emoji Picker & Search</a> · <a href="/free-tools/hash-generator.html" style="color:var(--primary);text-decoration:none">Hash Generator</a></p>
</div>
<footer class="footer fade-in">
  <div class="footer-grid">
    <div class="footer-col">
      <h4>Products</h4>
      <a href="/free-tools/">150+ Free Tools</a>
      <a href="/pro.html">NexTool Pro</a>
      <a href="/workspace.html">Workspace</a>
    </div>
    <div class="footer-col">
      <h4>Explore</h4>
      <a href="/free-tools/">Free Tools</a><a href="/blog/">Blog</a><a href="/pro.html">FAQ</a><a href="/pro.html">Pro — $29</a>
    </div>
    <div class="footer-col">
      <h4>Ecosystem</h4>
      <a href="/">NexTool Home</a><a href="/#contact">Contact</a><a href="https://github.com/christian140903-sudo/nextool" target="_blank">GitHub</a>
    </div>
  </div>
  <div class="footer-bottom">&copy; 2026 NexTool. AI-powered tools for everyone.</div>
</footer>

<div class="toast" id="toast"></div>

<script>
/* ===== WEBHOOK PAYLOADS DATABASE ===== */
const PAYLOADS = {
  github: {
    name: 'GitHub',
    events: {
      push: {
        ref: 'refs/heads/main',
        before: '6113728f27ae82c7b1a177c8d03f9e96e0adf246',
        after: 'a10867b14bb761a232cd80139faf4c86ae38b23e',
        repository: {
          id: 123456789,
          name: 'my-project',
          full_name: 'octocat/my-project',
          private: false,
          owner: { login: 'octocat', id: 1, avatar_url: 'https://avatars.githubusercontent.com/u/1?v=4' },
          html_url: 'https://github.com/octocat/my-project',
          description: 'A sample project',
          fork: false,
          url: 'https://api.github.com/repos/octocat/my-project',
          created_at: '2024-01-15T10:30:00Z',
          updated_at: '2026-02-10T14:22:00Z',
          pushed_at: '2026-02-10T14:22:00Z',
          default_branch: 'main'
        },
        pusher: { name: 'octocat', email: 'octocat@github.com' },
        sender: { login: 'octocat', id: 1, type: 'User' },
        commits: [{
          id: 'a10867b14bb761a232cd80139faf4c86ae38b23e',
          message: 'feat: add webhook integration',
          timestamp: '2026-02-10T14:22:00Z',
          author: { name: 'Octocat', email: 'octocat@github.com', username: 'octocat' },
          added: ['src/webhooks.js'],
          removed: [],
          modified: ['package.json']
        }],
        head_commit: {
          id: 'a10867b14bb761a232cd80139faf4c86ae38b23e',
          message: 'feat: add webhook integration',
          timestamp: '2026-02-10T14:22:00Z'
        }
      },
      pull_request: {
        action: 'opened',
        number: 42,
        pull_request: {
          url: 'https://api.github.com/repos/octocat/my-project/pulls/42',
          id: 987654321,
          number: 42,
          state: 'open',
          title: 'Add webhook support',
          user: { login: 'octocat', id: 1 },
          body: 'This PR adds webhook support to the project.',
          created_at: '2026-02-10T14:00:00Z',
          updated_at: '2026-02-10T14:00:00Z',
          head: { ref: 'feature/webhooks', sha: 'a10867b14bb761a232cd80139faf4c86ae38b23e' },
          base: { ref: 'main', sha: '6113728f27ae82c7b1a177c8d03f9e96e0adf246' },
          merged: false,
          mergeable: true,
          commits: 1,
          additions: 150,
          deletions: 10,
          changed_files: 3
        },
        repository: { id: 123456789, name: 'my-project', full_name: 'octocat/my-project' },
        sender: { login: 'octocat', id: 1 }
      },
      issues: {
        action: 'opened',
        issue: {
          url: 'https://api.github.com/repos/octocat/my-project/issues/15',
          id: 112233445,
          number: 15,
          title: 'Bug: webhook payload missing timestamp',
          user: { login: 'contributor', id: 42 },
          labels: [{ id: 1, name: 'bug', color: 'd73a4a' }],
          state: 'open',
          body: 'The webhook payload is missing the timestamp field.',
          created_at: '2026-02-10T15:00:00Z'
        },
        repository: { id: 123456789, name: 'my-project', full_name: 'octocat/my-project' },
        sender: { login: 'contributor', id: 42 }
      },
      release: {
        action: 'published',
        release: {
          url: 'https://api.github.com/repos/octocat/my-project/releases/1',
          id: 55667788,
          tag_name: 'v2.0.0',
          name: 'Version 2.0.0',
          body: '## What\'s New\n- Webhook support\n- HMAC signature verification\n- Payload validation',
          draft: false,
          prerelease: false,
          created_at: '2026-02-10T16:00:00Z',
          published_at: '2026-02-10T16:00:00Z',
          author: { login: 'octocat', id: 1 }
        },
        repository: { id: 123456789, name: 'my-project', full_name: 'octocat/my-project' },
        sender: { login: 'octocat', id: 1 }
      }
    }
  },
  stripe: {
    name: 'Stripe',
    events: {
      'payment_intent.succeeded': {
        id: 'evt_1OqX2a2eZvKYlo2C3mU4hF6B',
        object: 'event',
        api_version: '2024-12-18',
        created: 1707566520,
        type: 'payment_intent.succeeded',
        data: {
          object: {
            id: 'pi_3OqX292eZvKYlo2C1eRbF9Mz',
            object: 'payment_intent',
            amount: 2999,
            currency: 'usd',
            status: 'succeeded',
            description: 'NexTool Pro License',
            customer: 'cus_PeA3bR7fK9xyz',
            payment_method: 'pm_1OqX292eZvKYlo2CJR2h5mNp',
            metadata: { order_id: 'ORD-2026-001', product: 'nextool_pro' },
            created: 1707566520,
            receipt_email: 'customer@example.com'
          }
        },
        livemode: false,
        pending_webhooks: 1,
        request: { id: 'req_abc123', idempotency_key: null }
      },
      'checkout.session.completed': {
        id: 'evt_1OqXbc2eZvKYlo2CjH9sK4dF',
        object: 'event',
        api_version: '2024-12-18',
        created: 1707567000,
        type: 'checkout.session.completed',
        data: {
          object: {
            id: 'cs_test_a1b2c3d4e5f6',
            object: 'checkout.session',
            amount_total: 2999,
            currency: 'usd',
            customer: 'cus_PeA3bR7fK9xyz',
            customer_email: 'customer@example.com',
            mode: 'payment',
            payment_status: 'paid',
            status: 'complete',
            success_url: 'https://nextool.app/thank-you',
            metadata: { plan: 'pro' }
          }
        },
        livemode: false,
        pending_webhooks: 1
      },
      'invoice.payment_failed': {
        id: 'evt_1OqXyz2eZvKYlo2CfN4tH8pQ',
        object: 'event',
        api_version: '2024-12-18',
        created: 1707567500,
        type: 'invoice.payment_failed',
        data: {
          object: {
            id: 'in_1OqXyz2eZvKYlo2C',
            object: 'invoice',
            amount_due: 2999,
            currency: 'usd',
            customer: 'cus_PeA3bR7fK9xyz',
            status: 'open',
            attempt_count: 1,
            next_payment_attempt: 1707653900,
            subscription: 'sub_1OqXyz2eZvKYlo2C'
          }
        },
        livemode: false,
        pending_webhooks: 1
      },
      'customer.subscription.created': {
        id: 'evt_1OqXab2eZvKYlo2CgR5mJ7nK',
        object: 'event',
        api_version: '2024-12-18',
        created: 1707568000,
        type: 'customer.subscription.created',
        data: {
          object: {
            id: 'sub_1OqXab2eZvKYlo2C',
            object: 'subscription',
            customer: 'cus_PeA3bR7fK9xyz',
            status: 'active',
            current_period_start: 1707568000,
            current_period_end: 1710246400,
            items: {
              data: [{ id: 'si_abc123', price: { id: 'price_1OqXab', unit_amount: 2999, currency: 'usd', recurring: { interval: 'month' } }, quantity: 1 }]
            },
            cancel_at_period_end: false
          }
        },
        livemode: false,
        pending_webhooks: 1
      }
    }
  },
  shopify: {
    name: 'Shopify',
    events: {
      'orders/create': {
        id: 820982911946154508,
        admin_graphql_api_id: 'gid://shopify/Order/820982911946154508',
        email: 'jon@example.com',
        created_at: '2026-02-10T15:30:00-05:00',
        updated_at: '2026-02-10T15:30:00-05:00',
        number: 234,
        order_number: 1234,
        total_price: '59.99',
        subtotal_price: '49.99',
        total_tax: '5.00',
        currency: 'USD',
        financial_status: 'paid',
        fulfillment_status: null,
        customer: {
          id: 115310627314723954,
          email: 'jon@example.com',
          first_name: 'Jon',
          last_name: 'Doe',
          orders_count: 3,
          total_spent: '199.97'
        },
        line_items: [{
          id: 866550311766439020,
          title: 'NexTool Pro License',
          quantity: 1,
          price: '49.99',
          sku: 'NTPRO-001',
          variant_title: 'Lifetime',
          fulfillment_status: null
        }],
        shipping_address: {
          first_name: 'Jon',
          last_name: 'Doe',
          city: 'Ottawa',
          province: 'Ontario',
          country: 'Canada',
          zip: 'K2P0V6'
        }
      },
      'orders/paid': {
        id: 820982911946154509,
        email: 'jane@example.com',
        created_at: '2026-02-10T16:00:00-05:00',
        order_number: 1235,
        total_price: '29.00',
        currency: 'USD',
        financial_status: 'paid',
        customer: { id: 115310627314723955, email: 'jane@example.com', first_name: 'Jane', last_name: 'Smith' },
        line_items: [{ id: 866550311766439021, title: 'NexTool Pro', quantity: 1, price: '29.00' }]
      },
      'products/create': {
        id: 788032119674292922,
        title: 'Webhook Testing Kit',
        body_html: '<p>Complete webhook testing toolkit</p>',
        vendor: 'NexTool',
        product_type: 'Digital',
        created_at: '2026-02-10T17:00:00-05:00',
        handle: 'webhook-testing-kit',
        status: 'active',
        variants: [{
          id: 457924702,
          title: 'Standard',
          price: '19.99',
          sku: 'WHK-001',
          inventory_quantity: 999
        }],
        images: []
      },
      'customers/create': {
        id: 115310627314723956,
        email: 'new@example.com',
        first_name: 'Alex',
        last_name: 'Johnson',
        created_at: '2026-02-10T18:00:00-05:00',
        orders_count: 0,
        total_spent: '0.00',
        verified_email: true,
        tags: 'newsletter',
        addresses: [{ city: 'New York', province: 'New York', country: 'United States', zip: '10001' }]
      }
    }
  },
  slack: {
    name: 'Slack',
    events: {
      message: {
        token: 'ZZZZZZWSxiZZZ2yIvs3peJ',
        team_id: 'T061EG9R6',
        api_app_id: 'A0MDYCDME',
        event: {
          type: 'message',
          channel: 'C2147483705',
          user: 'U2147483697',
          text: 'New webhook event received!',
          ts: '1707566520.000100',
          channel_type: 'channel'
        },
        type: 'event_callback',
        event_id: 'Ev0PV52K25',
        event_time: 1707566520
      },
      app_mention: {
        token: 'ZZZZZZWSxiZZZ2yIvs3peJ',
        team_id: 'T061EG9R6',
        api_app_id: 'A0MDYCDME',
        event: {
          type: 'app_mention',
          user: 'U2147483697',
          text: '<@U0LAN0Z89> check webhook status',
          ts: '1707567000.000200',
          channel: 'C2147483705'
        },
        type: 'event_callback',
        event_id: 'Ev0PV52K26',
        event_time: 1707567000
      },
      url_verification: {
        token: 'ZZZZZZWSxiZZZ2yIvs3peJ',
        challenge: '3eZbrw1aBm2rZgRNFdxV2595E9CY3gmdALWMmHkvFXO7tYXAYM8P',
        type: 'url_verification'
      },
      interactive_message: {
        type: 'block_actions',
        user: { id: 'U2147483697', username: 'devuser', name: 'Dev User', team_id: 'T061EG9R6' },
        trigger_id: '13345224609.738474920.8088930838d88f008e0',
        channel: { id: 'C2147483705', name: 'general' },
        actions: [{
          type: 'button',
          block_id: 'actionblock789',
          action_id: 'approve_webhook',
          text: { type: 'plain_text', text: 'Approve' },
          value: 'approve_123'
        }]
      }
    }
  },
  discord: {
    name: 'Discord',
    events: {
      message_create: {
        t: 'MESSAGE_CREATE',
        s: 42,
        op: 0,
        d: {
          id: '1234567890123456789',
          type: 0,
          content: 'Webhook event triggered!',
          channel_id: '9876543210987654321',
          author: {
            id: '1111222233334444555',
            username: 'NexToolBot',
            discriminator: '0',
            avatar: null,
            bot: true
          },
          timestamp: '2026-02-10T14:22:00.000000+00:00',
          guild_id: '5555666677778888999',
          member: { roles: [], joined_at: '2025-01-01T00:00:00.000000+00:00' }
        }
      },
      interaction_create: {
        t: 'INTERACTION_CREATE',
        s: 43,
        op: 0,
        d: {
          id: '2345678901234567890',
          type: 2,
          application_id: '9999888877776666555',
          channel_id: '9876543210987654321',
          guild_id: '5555666677778888999',
          member: {
            user: { id: '1111222233334444555', username: 'testuser', discriminator: '0' },
            roles: ['1234567890'],
            permissions: '2199023255551'
          },
          data: { id: '3456789012345678901', name: 'webhook-test', type: 1, options: [{ name: 'url', type: 3, value: 'https://example.com' }] },
          token: 'interaction_token_here'
        }
      },
      webhook_execute: {
        content: 'Deployment successful!',
        username: 'Deploy Bot',
        avatar_url: 'https://example.com/bot-avatar.png',
        embeds: [{
          title: 'Build #1234',
          description: 'All tests passed. Deployed to production.',
          color: 3066993,
          fields: [
            { name: 'Branch', value: 'main', inline: true },
            { name: 'Commit', value: 'a10867b', inline: true },
            { name: 'Duration', value: '2m 34s', inline: true }
          ],
          timestamp: '2026-02-10T14:22:00.000Z'
        }]
      }
    }
  },
  twilio: {
    name: 'Twilio',
    events: {
      sms_received: {
        MessageSid: 'SM1234567890abcdef1234567890abcdef',
        AccountSid: 'ACXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX',
        MessagingServiceSid: 'MG1234567890abcdef1234567890abcdef',
        From: '+15551234567',
        To: '+15559876543',
        Body: 'Hello from Twilio webhook!',
        NumMedia: '0',
        FromCity: 'San Francisco',
        FromState: 'CA',
        FromZip: '94105',
        FromCountry: 'US',
        ToCity: 'New York',
        ToState: 'NY',
        ToZip: '10001',
        ToCountry: 'US',
        ApiVersion: '2010-04-01'
      },
      sms_status: {
        MessageSid: 'SM1234567890abcdef1234567890abcdef',
        AccountSid: 'ACXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX',
        From: '+15551234567',
        To: '+15559876543',
        MessageStatus: 'delivered',
        ApiVersion: '2010-04-01',
        SmsSid: 'SM1234567890abcdef1234567890abcdef',
        SmsStatus: 'delivered'
      },
      voice_incoming: {
        CallSid: 'CA1234567890abcdef1234567890abcdef',
        AccountSid: 'ACXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX',
        From: '+15551234567',
        To: '+15559876543',
        CallStatus: 'ringing',
        ApiVersion: '2010-04-01',
        Direction: 'inbound',
        CallerName: 'John Doe',
        FromCity: 'San Francisco',
        FromState: 'CA',
        FromCountry: 'US'
      },
      voice_status: {
        CallSid: 'CA1234567890abcdef1234567890abcdef',
        AccountSid: 'ACXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX',
        CallStatus: 'completed',
        CallDuration: '45',
        Direction: 'inbound',
        From: '+15551234567',
        To: '+15559876543',
        ApiVersion: '2010-04-01'
      }
    }
  }
};

/* ===== VALIDATION SCHEMAS ===== */
const SCHEMAS = {
  github: {
    push: ['ref', 'before', 'after', 'repository', 'repository.id', 'repository.name', 'pusher', 'commits', 'head_commit'],
    pull_request: ['action', 'number', 'pull_request', 'pull_request.id', 'pull_request.state', 'pull_request.title', 'repository', 'sender'],
    issues: ['action', 'issue', 'issue.id', 'issue.title', 'issue.state', 'repository', 'sender'],
    release: ['action', 'release', 'release.tag_name', 'repository', 'sender']
  },
  stripe: {
    'payment_intent.succeeded': ['id', 'object', 'type', 'data', 'data.object', 'data.object.id', 'data.object.amount', 'data.object.currency', 'data.object.status'],
    'checkout.session.completed': ['id', 'object', 'type', 'data', 'data.object', 'data.object.id', 'data.object.payment_status'],
    'invoice.payment_failed': ['id', 'object', 'type', 'data', 'data.object', 'data.object.id', 'data.object.status'],
    'customer.subscription.created': ['id', 'object', 'type', 'data', 'data.object', 'data.object.id', 'data.object.status']
  },
  shopify: {
    'orders/create': ['id', 'email', 'total_price', 'currency', 'financial_status', 'customer', 'line_items'],
    'orders/paid': ['id', 'email', 'total_price', 'financial_status'],
    'products/create': ['id', 'title', 'vendor', 'status', 'variants'],
    'customers/create': ['id', 'email', 'first_name', 'last_name']
  },
  slack: {
    message: ['type', 'event', 'event.type', 'event.channel', 'event.text', 'event_id'],
    app_mention: ['type', 'event', 'event.type', 'event.user', 'event.text', 'event_id'],
    url_verification: ['token', 'challenge', 'type'],
    interactive_message: ['type', 'user', 'actions']
  },
  discord: {
    message_create: ['t', 'op', 'd', 'd.id', 'd.content', 'd.channel_id'],
    interaction_create: ['t', 'op', 'd', 'd.id', 'd.type', 'd.data'],
    webhook_execute: ['content']
  },
  twilio: {
    sms_received: ['MessageSid', 'AccountSid', 'From', 'To', 'Body'],
    sms_status: ['MessageSid', 'AccountSid', 'MessageStatus'],
    voice_incoming: ['CallSid', 'AccountSid', 'From', 'To', 'CallStatus'],
    voice_status: ['CallSid', 'AccountSid', 'CallStatus']
  }
};

/* ===== STATE ===== */
let currentService = 'github';
let currentEvent = 'push';
let lastHmacSig = '';

/* ===== TABS ===== */
document.querySelectorAll('.tab-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
    btn.classList.add('active');
    document.getElementById('tab-' + btn.dataset.tab).classList.add('active');
  });
});

/* ===== SERVICE SELECTION ===== */
function selectService(service) {
  currentService = service;
  document.querySelectorAll('.service-chip').forEach(c => c.classList.remove('active'));
  document.querySelector('[data-service="'+service+'"]').classList.add('active');
  renderEventPills();
}

function renderEventPills() {
  const events = Object.keys(PAYLOADS[currentService].events);
  const container = document.getElementById('eventPills');
  container.innerHTML = events.map((e, i) =>
    '<button class="event-pill'+(i===0?' active':'')+'" data-event="'+e+'" onclick="selectEvent(\''+e+'\')">'+e+'</button>'
  ).join('');
  currentEvent = events[0];
  loadPayload();
}

function selectEvent(evt) {
  currentEvent = evt;
  document.querySelectorAll('.event-pill').forEach(p => p.classList.remove('active'));
  document.querySelector('.event-pill[data-event="'+evt+'"]').classList.add('active');
  loadPayload();
}

function loadPayload() {
  const payload = PAYLOADS[currentService].events[currentEvent];
  const json = JSON.stringify(payload, null, 2);
  document.getElementById('payloadEditor').value = json;
  updatePreview();
}

/* ===== PREVIEW ===== */
function updatePreview() {
  const raw = document.getElementById('payloadEditor').value.trim();
  const preview = document.getElementById('payloadPreview');
  const info = document.getElementById('previewInfo');
  if (!raw) { preview.innerHTML = ''; info.textContent = ''; return; }
  try {
    const obj = JSON.parse(raw);
    const formatted = JSON.stringify(obj, null, 2);
    preview.innerHTML = syntaxHighlight(formatted);
    info.textContent = formatted.split('\n').length + ' lines | ' + formatBytes(new Blob([formatted]).size);
  } catch (e) {
    preview.innerHTML = '<span style="color:var(--red)">Invalid JSON: ' + escapeHtml(e.message) + '</span>';
    info.textContent = 'Error';
  }
}

document.getElementById('payloadEditor').addEventListener('input', debounce(updatePreview, 300));

/* ===== COPY / DOWNLOAD ===== */
function copyPayload() {
  const text = document.getElementById('payloadEditor').value;
  if (!text.trim()) { showToast('Nothing to copy'); return; }
  navigator.clipboard.writeText(text).then(() => showToast('Payload copied'));
}

function downloadPayload() {
  const text = document.getElementById('payloadEditor').value;
  if (!text.trim()) { showToast('Nothing to download'); return; }
  const blob = new Blob([text], { type: 'application/json' });
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = currentService + '-' + currentEvent + '-webhook.json';
  a.click();
  URL.revokeObjectURL(a.href);
  showToast('Downloaded webhook payload');
}

function sendToCurl() {
  const text = document.getElementById('payloadEditor').value;
  document.getElementById('curlBody').value = text;
  document.querySelector('[data-tab="curl"]').click();
  buildCurl();
}

/* ===== CURL BUILDER ===== */
function buildCurl() {
  const method = document.getElementById('curlMethod').value;
  const url = document.getElementById('curlUrl').value || 'https://httpbin.org/post';
  const contentType = document.getElementById('curlContentType').value;
  const headersRaw = document.getElementById('curlHeaders').value.trim();
  const body = document.getElementById('curlBody').value.trim();

  let cmd = 'curl -X ' + method + ' \\\n';
  cmd += "  '" + url + "' \\\n";
  cmd += "  -H 'Content-Type: " + contentType + "' \\\n";

  if (headersRaw) {
    headersRaw.split('\n').forEach(line => {
      line = line.trim();
      if (line) cmd += "  -H '" + line + "' \\\n";
    });
  }

  if (body) {
    // Escape single quotes in body for shell safety
    const escaped = body.replace(/'/g, "'\\''");
    cmd += "  -d '" + escaped + "'";
  } else {
    cmd = cmd.replace(/ \\\n$/, '');
  }

  document.getElementById('curlOutput').textContent = cmd;
}

function copyCurl() {
  const text = document.getElementById('curlOutput').textContent;
  if (!text) { showToast('Generate a cURL command first'); return; }
  navigator.clipboard.writeText(text).then(() => showToast('cURL command copied'));
}

/* ===== HMAC SIGNATURES ===== */
async function calcHmac() {
  const algo = document.getElementById('hmacAlgo').value;
  const secret = document.getElementById('hmacSecret').value;
  const payload = document.getElementById('hmacPayload').value;
  const result = document.getElementById('hmacResult');

  if (!secret || !payload) {
    result.style.display = 'block';
    result.innerHTML = '<div class="sig-result error">Please provide both a secret key and payload.</div>';
    return;
  }

  try {
    const encoder = new TextEncoder();
    const keyData = encoder.encode(secret);
    const msgData = encoder.encode(payload);
    const key = await crypto.subtle.importKey('raw', keyData, { name: 'HMAC', hash: algo }, false, ['sign']);
    const signature = await crypto.subtle.sign('HMAC', key, msgData);
    const hexSig = Array.from(new Uint8Array(signature)).map(b => b.toString(16).padStart(2, '0')).join('');
    const prefix = algo === 'SHA-256' ? 'sha256=' : algo === 'SHA-1' ? 'sha1=' : algo === 'SHA-384' ? 'sha384=' : 'sha512=';
    lastHmacSig = prefix + hexSig;

    result.style.display = 'block';
    result.innerHTML = '<div class="sig-result">' +
      '<strong style="white-space:nowrap;margin-right:8px">Signature:</strong>' +
      '<span>' + escapeHtml(lastHmacSig) + '</span>' +
      '<button class="btn btn-sm" style="margin-left:auto;flex-shrink:0" onclick="navigator.clipboard.writeText(\'' + lastHmacSig + '\').then(()=>showToast(\'Signature copied\'))">Copy</button>' +
      '</div>';
  } catch (e) {
    result.style.display = 'block';
    result.innerHTML = '<div class="sig-result error">Error: ' + escapeHtml(e.message) + '</div>';
  }
}

function loadPayloadToHmac() {
  document.getElementById('hmacPayload').value = document.getElementById('payloadEditor').value;
  showToast('Payload loaded into HMAC calculator');
}

async function verifyHmac() {
  const expected = document.getElementById('hmacVerify').value.trim();
  const result = document.getElementById('hmacVerifyResult');

  if (!expected) {
    result.style.display = 'block';
    result.innerHTML = '<div class="sig-result error">Please paste a signature to verify against.</div>';
    return;
  }

  if (!lastHmacSig) {
    result.style.display = 'block';
    result.innerHTML = '<div class="sig-result error">Calculate a signature first, then verify.</div>';
    return;
  }

  // Normalize: strip any prefix like sha256=, compare hex
  const normExpected = expected.replace(/^(sha(1|256|384|512))=/i, '').toLowerCase();
  const normComputed = lastHmacSig.replace(/^(sha(1|256|384|512))=/i, '').toLowerCase();

  result.style.display = 'block';
  if (normExpected === normComputed) {
    result.innerHTML = '<div class="sig-result">Signatures MATCH -- webhook payload is authentic.</div>';
  } else {
    result.innerHTML = '<div class="sig-result error">Signatures DO NOT match -- payload may be tampered.</div>';
  }
}

/* ===== VALIDATOR ===== */
function updateValSchema() {
  const service = document.getElementById('valService').value;
  const eventSelect = document.getElementById('valEvent');
  const customGroup = document.getElementById('customSchemaGroup');

  if (service === 'custom') {
    eventSelect.innerHTML = '<option value="custom">Custom</option>';
    customGroup.style.display = 'block';
    return;
  }

  customGroup.style.display = 'none';
  const events = Object.keys(SCHEMAS[service] || {});
  eventSelect.innerHTML = events.map(e => '<option value="'+e+'">'+e+'</option>').join('');
}

function loadPayloadToVal() {
  document.getElementById('valPayload').value = document.getElementById('payloadEditor').value;
  document.getElementById('valService').value = currentService;
  updateValSchema();
  const eventSelect = document.getElementById('valEvent');
  if (eventSelect.querySelector('option[value="'+currentEvent+'"]')) {
    eventSelect.value = currentEvent;
  }
  showToast('Payload loaded into validator');
}

function getNestedValue(obj, path) {
  const parts = path.split('.');
  let current = obj;
  for (const part of parts) {
    if (current === null || current === undefined || typeof current !== 'object') return undefined;
    current = current[part];
  }
  return current;
}

function validatePayload() {
  const raw = document.getElementById('valPayload').value.trim();
  const service = document.getElementById('valService').value;
  const event = document.getElementById('valEvent').value;
  const resultsEl = document.getElementById('valResults');
  const summaryEl = document.getElementById('valSummary');

  if (!raw) {
    resultsEl.innerHTML = '<span class="val-fail">No payload provided.</span>';
    summaryEl.textContent = '';
    return;
  }

  let obj;
  try {
    obj = JSON.parse(raw);
  } catch (e) {
    resultsEl.innerHTML = '<span class="val-fail">Invalid JSON: ' + escapeHtml(e.message) + '</span>';
    summaryEl.textContent = 'Failed';
    return;
  }

  let requiredFields;
  if (service === 'custom') {
    const customFields = document.getElementById('customSchema').value;
    requiredFields = customFields.split(',').map(f => f.trim()).filter(f => f);
    if (!requiredFields.length) {
      resultsEl.innerHTML = '<span class="val-warn">No required fields specified.</span>';
      summaryEl.textContent = '';
      return;
    }
  } else {
    requiredFields = (SCHEMAS[service] && SCHEMAS[service][event]) || [];
  }

  let pass = 0, fail = 0, warnings = 0;
  let html = '';

  // Check JSON validity
  html += '<div class="val-item"><span class="val-pass">PASS</span> Valid JSON structure</div>';
  pass++;

  // Check type (should be object)
  if (typeof obj === 'object' && !Array.isArray(obj)) {
    html += '<div class="val-item"><span class="val-pass">PASS</span> Root is an object</div>';
    pass++;
  } else {
    html += '<div class="val-item"><span class="val-warn">WARN</span> Root is ' + (Array.isArray(obj) ? 'an array' : typeof obj) + ' (expected object)</div>';
    warnings++;
  }

  // Check required fields
  for (const field of requiredFields) {
    const val = getNestedValue(obj, field);
    if (val !== undefined) {
      const typeStr = val === null ? 'null' : typeof val === 'object' ? (Array.isArray(val) ? 'array['+val.length+']' : 'object') : typeof val;
      html += '<div class="val-item"><span class="val-pass">PASS</span> <code style="color:var(--cyan)">' + escapeHtml(field) + '</code> present <span style="color:var(--text2);margin-left:4px">(' + typeStr + ')</span></div>';
      pass++;
    } else {
      html += '<div class="val-item"><span class="val-fail">FAIL</span> <code style="color:var(--red)">' + escapeHtml(field) + '</code> is missing</div>';
      fail++;
    }
  }

  // Check for empty strings
  const emptyStrings = [];
  function checkEmpty(o, path) {
    if (typeof o === 'string' && o === '') emptyStrings.push(path);
    else if (o && typeof o === 'object') {
      for (const key of Object.keys(o)) checkEmpty(o[key], path ? path + '.' + key : key);
    }
  }
  checkEmpty(obj, '');
  if (emptyStrings.length > 0) {
    html += '<div class="val-item"><span class="val-warn">WARN</span> ' + emptyStrings.length + ' empty string value(s): ' + emptyStrings.slice(0, 5).map(f => '<code style="color:var(--yellow)">'+escapeHtml(f)+'</code>').join(', ') + (emptyStrings.length > 5 ? '...' : '') + '</div>';
    warnings++;
  }

  resultsEl.innerHTML = html;
  const total = pass + fail + warnings;
  if (fail === 0) {
    summaryEl.innerHTML = '<span class="val-pass">' + pass + '/' + total + ' passed</span>' + (warnings ? ' <span class="val-warn">(' + warnings + ' warnings)</span>' : '');
  } else {
    summaryEl.innerHTML = '<span class="val-fail">' + fail + ' failed</span>, <span class="val-pass">' + pass + ' passed</span>' + (warnings ? ', <span class="val-warn">' + warnings + ' warnings</span>' : '');
  }
}

/* ===== REQUEST SIMULATOR ===== */
const SIM_HEADERS = {
  github: {
    'Content-Type': 'application/json',
    'X-GitHub-Event': '{event}',
    'X-GitHub-Delivery': 'a1b2c3d4-e5f6-7890-abcd-ef1234567890',
    'X-Hub-Signature-256': 'sha256=...',
    'User-Agent': 'GitHub-Hookshot/abc1234'
  },
  stripe: {
    'Content-Type': 'application/json',
    'Stripe-Signature': 't=1707566520,v1=5257a869e7e...',
    'User-Agent': 'Stripe/1.0 (+https://stripe.com/docs/webhooks)'
  },
  shopify: {
    'Content-Type': 'application/json',
    'X-Shopify-Topic': '{event}',
    'X-Shopify-Hmac-SHA256': 'XWmrwMey6OsLMeiZKwP4FppHRj...',
    'X-Shopify-Shop-Domain': 'mystore.myshopify.com',
    'X-Shopify-API-Version': '2024-10'
  },
  slack: {
    'Content-Type': 'application/json',
    'X-Slack-Signature': 'v0=a2114d57b48eac39b...',
    'X-Slack-Request-Timestamp': '1707566520'
  },
  discord: {
    'Content-Type': 'application/json',
    'X-Signature-Ed25519': 'a1b2c3d4e5f6...',
    'X-Signature-Timestamp': '1707566520',
    'User-Agent': 'DiscordBot (https://discord.com)'
  },
  twilio: {
    'Content-Type': 'application/x-www-form-urlencoded',
    'X-Twilio-Signature': 'GBBbrFPMD1sR+JdFm12k...',
    'User-Agent': 'TwilioProxy/1.1'
  }
};

const SIM_RESPONSES = {
  github: { status: '200 OK', body: { message: 'Webhook received', processed: true } },
  stripe: { status: '200 OK', body: { received: true } },
  shopify: { status: '200 OK', body: { status: 'ok' } },
  slack: { status: '200 OK', body: { ok: true, challenge: '3eZbrw1aBm2rZgRNFdxV2595E9CY3gmdALWMmHkvFXO7tYXAYM8P' } },
  discord: { status: '204 No Content', body: null },
  twilio: { status: '200 OK', body: '<?xml version="1.0" encoding="UTF-8"?>\n<Response>\n  <Message>Thanks for the message!</Message>\n</Response>' }
};

function updateSimRequest() {
  const service = document.getElementById('simService').value;
  const url = document.getElementById('simUrl').value;
  const headers = SIM_HEADERS[service];
  const events = Object.keys(PAYLOADS[service].events);
  const firstEvent = events[0];
  const payload = PAYLOADS[service].events[firstEvent];

  document.getElementById('simUrlDisplay').textContent = url || '/api/webhooks';

  let headersHtml = '';
  for (const [k, v] of Object.entries(headers)) {
    const displayVal = v.replace('{event}', firstEvent);
    headersHtml += '<div><span class="hk">' + escapeHtml(k) + '</span>: <span class="hv">' + escapeHtml(displayVal) + '</span></div>';
  }
  document.getElementById('simHeaders').innerHTML = headersHtml;
  document.getElementById('simRequestBody').innerHTML = syntaxHighlight(JSON.stringify(payload, null, 2));
  document.getElementById('simResponseCard').style.display = 'none';
}

function simulateRequest() {
  const service = document.getElementById('simService').value;
  updateSimRequest();

  const resp = SIM_RESPONSES[service];
  const resCard = document.getElementById('simResponseCard');
  const resStatus = document.getElementById('simResStatus');
  const resBody = document.getElementById('simResBody');

  resCard.style.display = 'block';
  resStatus.textContent = resp.status;
  resStatus.className = 'response-status ' + (resp.status.startsWith('2') ? 's2' : 's4');

  if (resp.body === null) {
    resBody.textContent = '(empty body)';
  } else if (typeof resp.body === 'string') {
    resBody.textContent = resp.body;
  } else {
    resBody.innerHTML = syntaxHighlight(JSON.stringify(resp.body, null, 2));
  }
}

/* ===== UTILITIES ===== */
function syntaxHighlight(json) {
  return json.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')
    .replace(/("(\\u[\da-fA-F]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?|\bnull\b|[{}\[\],])/g, match => {
      let cls = 'hl-num';
      if (/^"/.test(match)) cls = /:$/.test(match) ? 'hl-key' : 'hl-str';
      else if (/true|false/.test(match)) cls = 'hl-bool';
      else if (/null/.test(match)) cls = 'hl-null';
      else if (/[{}\[\],]/.test(match)) cls = 'hl-brace';
      return '<span class="' + cls + '">' + match + '</span>';
    });
}

function escapeHtml(s) { return String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'); }

function formatBytes(bytes) {
  if (bytes === 0) return '0 B';
  const k = 1024, sizes = ['B', 'KB', 'MB'];
  const i = Math.floor(Math.log(bytes) / Math.log(k));
  return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
}

function debounce(fn, ms) { let t; return (...a) => { clearTimeout(t); t = setTimeout(() => fn(...a), ms); }; }

function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2000);
}

/* Tab support in textareas */
document.querySelectorAll('textarea').forEach(el => {
  el.addEventListener('keydown', e => {
    if (e.key === 'Tab') {
      e.preventDefault();
      const start = el.selectionStart, end = el.selectionEnd;
      el.value = el.value.substring(0, start) + '  ' + el.value.substring(end);
      el.selectionStart = el.selectionEnd = start + 2;
    }
  });
});

/* ===== INIT ===== */
renderEventPills();
updateValSchema();
updateSimRequest();

/* IntersectionObserver fade-in */
const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('visible'); observer.unobserve(entry.target); }});
}, { threshold: 0.1 });
document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));
</script>
<script src="/js/analytics-lite.js" defer></script>
<script src="/js/revenue.js" defer></script>
<script src="/js/lead-capture.js" defer></script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What is a webhook tester?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "A webhook tester is a tool that helps developers generate, inspect, and validate webhook payloads from services like GitHub, Stripe, Shopify, Slack, Discord, and Twilio. NexTool's Webhook Tester lets you generate sample payloads, build cURL commands, calculate HMAC signatures, and validate webhook data — all in your browser."
      }
    },
    {
      "@type": "Question",
      "name": "How do I test webhooks locally?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Use NexTool's Webhook Tester to generate a realistic sample payload for your service, then use the built-in cURL builder to send the payload to your local endpoint. You can also calculate HMAC signatures to test your webhook verification logic."
      }
    },
    {
      "@type": "Question",
      "name": "What is HMAC webhook signature verification?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "HMAC signature verification is a security mechanism where the webhook sender creates a hash of the payload using a shared secret key. The receiver recalculates the hash and compares it to verify the payload was not tampered with. NexTool's HMAC calculator supports SHA-1, SHA-256, SHA-384, and SHA-512 algorithms."
      }
    },
    {
      "@type": "Question",
      "name": "Is this webhook tester free?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, NexTool's Webhook Tester is completely free with no signup required. It runs entirely in your browser so no webhook data leaves your machine. All payload generation, HMAC calculation, and validation happens client-side."
      }
    }
  ]
}
</script>
</body>
</html>
