<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CSS Animation Generator - Free Tool | NexTool</title>
<meta name="description" content="Create CSS keyframe animations visually. Predefined presets, customizable timing, live preview, and copy-ready code. Free online tool by NexTool.">
<meta name="keywords" content="CSS animation generator, keyframe editor, CSS transitions, animation presets, bounce, fade, slide, NexTool">
<meta property="og:title" content="Free CSS Animation Generator | NexTool">
<meta property="og:description" content="Create beautiful CSS keyframe animations with a visual editor and live preview.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://nextool.app/free-tools/css-animation-generator.html">
<meta property="og:image" content="https://nextool.app/assets/og-default.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Free CSS Animation Generator | NexTool">
<meta name="twitter:description" content="Create beautiful CSS keyframe animations with a visual editor and live preview.">
<link rel="canonical" href="https://nextool.app/free-tools/css-animation-generator.html">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"SoftwareApplication","name":"NexTool CSS Animation Generator","applicationCategory":"DesignApplication","operatingSystem":"Web","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"description":"Create CSS keyframe animations visually with predefined presets and live preview."}
</script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#050508;--surface:#111118;--surface2:#1a1a24;--surface3:#222233;
  --primary:#6366f1;--accent:#a855f7;--pink:#ec4899;
  --text:#e2e8f0;--text2:#94a3b8;--border:#252533;
  --radius:12px;--green:#22c55e;--glass:rgba(17,17,24,.7)
}
html{scroll-behavior:smooth}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);min-height:100vh;display:flex;flex-direction:column;line-height:1.6;overflow-x:hidden}
a{color:var(--primary);text-decoration:none;transition:color .2s}a:hover{color:var(--accent)}

/* NAV */
.nav{position:sticky;top:0;z-index:100;backdrop-filter:blur(20px);background:rgba(5,5,8,.85);border-bottom:1px solid var(--border);padding:0 24px}
.nav-inner{max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;height:64px}
.logo{font-weight:800;font-size:1.35rem;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.nav-links{display:flex;gap:28px;align-items:center;list-style:none}
.nav-links a{color:var(--text2);font-size:.9rem;font-weight:500;transition:color .2s}
.nav-links a:hover{color:var(--text)}
.nav-links a.active{color:var(--primary)}
.nav-toggle{display:none;background:none;border:none;color:var(--text);font-size:1.5rem;cursor:pointer}

/* HERO */
.hero{text-align:center;padding:72px 24px 36px;max-width:800px;margin:0 auto}
.hero .badge{display:inline-block;padding:6px 16px;border-radius:20px;background:var(--surface);border:1px solid var(--border);font-size:.8rem;color:var(--accent);font-weight:600;margin-bottom:20px}
.hero h1{font-size:clamp(2rem,5vw,2.8rem);font-weight:800;line-height:1.15;margin-bottom:14px}
.hero h1 .grad{background:linear-gradient(135deg,var(--primary),var(--accent),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{color:var(--text2);font-size:1.05rem;max-width:560px;margin:0 auto}

/* MAIN */
.tool-section{max-width:1200px;width:100%;margin:0 auto;padding:0 24px 60px}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:24px}
.card{background:var(--glass);backdrop-filter:blur(16px);border:1px solid var(--border);border-radius:var(--radius);padding:28px;margin-bottom:24px;transition:box-shadow .3s}
.card:hover{box-shadow:0 8px 40px rgba(99,102,241,.08)}
.card-title{font-size:1.05rem;font-weight:700;margin-bottom:18px;display:flex;align-items:center;gap:10px}
.card-title .icon{font-size:1.2rem}
@keyframes fadeUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
.fade-in{opacity:0;transform:translateY(24px);transition:opacity .6s,transform .6s}
.fade-in.visible{opacity:1;transform:translateY(0)}

/* FORM ELEMENTS */
label{display:block;color:var(--text2);font-size:.78rem;font-weight:600;margin-bottom:6px;margin-top:14px;text-transform:uppercase;letter-spacing:.5px}
label:first-child{margin-top:0}
select,input[type="text"],input[type="number"]{width:100%;background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:10px 14px;border-radius:8px;font-family:inherit;font-size:.88rem;outline:none;transition:border-color .2s}
select:focus,input:focus{border-color:var(--primary)}
input[type="range"]{width:100%;-webkit-appearance:none;height:6px;border-radius:3px;background:var(--surface2);outline:none;margin:6px 0}
input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none;width:18px;height:18px;border-radius:50%;background:var(--primary);cursor:pointer;box-shadow:0 2px 8px rgba(99,102,241,.4)}

/* PRESETS */
.presets-grid{display:flex;flex-wrap:wrap;gap:6px}
.preset-btn{padding:6px 14px;border:1px solid var(--border);background:var(--surface2);color:var(--text2);border-radius:6px;font-size:.78rem;font-weight:600;cursor:pointer;transition:all .2s;font-family:inherit}
.preset-btn:hover,.preset-btn.active{border-color:var(--primary);color:var(--primary);background:rgba(99,102,241,.08)}

/* RANGE ROW */
.range-row{display:flex;align-items:center;gap:12px}
.range-row input[type="range"]{flex:1}
.range-val{color:var(--text);font-size:.88rem;font-weight:600;min-width:48px;text-align:right;font-family:'SF Mono','Fira Code',Consolas,monospace}

/* PREVIEW */
.preview-area{width:100%;height:260px;background:var(--surface2);border:1px solid var(--border);border-radius:8px;display:flex;align-items:center;justify-content:center;overflow:hidden;margin-bottom:16px;position:relative;background-image:radial-gradient(circle at 50% 50%,rgba(99,102,241,.05) 0%,transparent 70%)}
.preview-element{width:80px;height:80px;border-radius:var(--radius);background:linear-gradient(135deg,var(--primary),var(--accent))}
.shape-options{display:flex;gap:6px;margin-bottom:12px}
.shape-btn{padding:6px 14px;border:1px solid var(--border);background:var(--surface2);color:var(--text2);border-radius:6px;font-size:.78rem;font-weight:600;cursor:pointer;transition:all .2s;font-family:inherit}
.shape-btn:hover,.shape-btn.active{border-color:var(--accent);color:var(--accent)}

/* COLOR PICKER */
.color-row{display:flex;gap:8px;align-items:center}
.color-row input[type="color"]{width:40px;height:36px;border:1px solid var(--border);border-radius:6px;cursor:pointer;background:var(--surface2);padding:2px}

/* CODE OUTPUT */
.code-area{background:var(--bg);border:1px solid var(--border);border-radius:8px;padding:18px;font-family:'SF Mono','Fira Code',Consolas,monospace;font-size:.8rem;color:var(--green);white-space:pre-wrap;word-break:break-word;max-height:320px;overflow-y:auto;line-height:1.7;position:relative}
.code-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}
.code-lang{font-size:.72rem;font-weight:600;color:var(--accent);text-transform:uppercase;letter-spacing:1px}

/* BUTTONS */
.btn{padding:10px 20px;border:none;border-radius:8px;font-family:inherit;font-size:.88rem;font-weight:600;cursor:pointer;transition:all .2s;display:inline-flex;align-items:center;gap:6px}
.btn-primary{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;box-shadow:0 2px 12px rgba(99,102,241,.25)}
.btn-primary:hover{transform:translateY(-2px);box-shadow:0 6px 20px rgba(99,102,241,.4)}
.btn-secondary{background:var(--surface2);color:var(--text);border:1px solid var(--border)}
.btn-secondary:hover{border-color:var(--primary);color:var(--primary)}
.btn-sm{padding:7px 14px;font-size:.8rem}
.btn-row{display:flex;gap:8px;flex-wrap:wrap}

/* FOOTER */
footer{border-top:1px solid var(--border);padding:48px 24px 28px;max-width:1200px;margin:0 auto;width:100%}
.footer-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:40px;margin-bottom:32px}
.footer-col h4{font-size:.85rem;font-weight:700;margin-bottom:14px;color:var(--text)}
.footer-col a{display:block;color:var(--text2);font-size:.85rem;margin-bottom:8px;transition:color .2s}
.footer-col a:hover{color:var(--primary)}
.footer-bottom{text-align:center;color:var(--text2);font-size:.8rem;padding-top:20px;border-top:1px solid var(--border)}

/* TOAST */
.toast{position:fixed;bottom:32px;left:50%;transform:translateX(-50%) translateY(80px);background:var(--primary);color:#fff;padding:12px 28px;border-radius:10px;font-weight:600;font-size:.9rem;z-index:200;transition:transform .35s cubic-bezier(.4,0,.2,1);pointer-events:none;box-shadow:0 4px 20px rgba(99,102,241,.4)}
.toast.show{transform:translateX(-50%) translateY(0)}

/* MOBILE */
@media(max-width:900px){
  .grid{grid-template-columns:1fr}
}
@media(max-width:768px){
  .nav-links{display:none;position:absolute;top:64px;left:0;right:0;background:var(--surface);border-bottom:1px solid var(--border);flex-direction:column;padding:20px;gap:14px}
  .nav-links.open{display:flex}.nav-toggle{display:block}
  h1{font-size:1.6rem!important}
  .tool-section{padding:0 16px 40px}
  .card{padding:20px 16px}
  .footer-grid{grid-template-columns:1fr 1fr}
  .preview-area{height:200px}
}
</style>
</head>
<body>

<nav class="nav">
  <div class="nav-inner">
    <a href="/" class="logo">NexTool</a>
    <button class="nav-toggle" onclick="document.querySelector('.nav-links').classList.toggle('open')" aria-label="Menu">&#9776;</button>
    <ul class="nav-links">
      <li><a href="/">Home</a></li>
      <li><a href="/free-tools/" class="active">Free Tools</a></li>
      <li><a href="/free-tools/">Tools</a></li>
      <li><a href="/pro.html">Pro</a></li>
      <li><a href="/blog/">Blog</a></li>
      <li><a href="/pro.html">Pro — $29</a></li>
    </ul>
  </div>
</nav>

<section class="hero fade-in">
  <div class="badge">Free Tool</div>
  <h1>CSS Animation <span class="grad">Generator</span></h1>
  <p>Create beautiful keyframe animations with a visual editor, 16 presets, and live preview. Copy production-ready CSS.</p>
</section>

<section class="tool-section">
  <div class="grid">
    <!-- LEFT: Controls -->
    <div>
      <!-- Presets -->
      <div class="card fade-in">
        <div class="card-title"><span class="icon">&#127912;</span> Presets</div>
        <div class="presets-grid" id="presets"></div>
      </div>

      <!-- Customization -->
      <div class="card fade-in">
        <div class="card-title"><span class="icon">&#9881;</span> Customize</div>

        <label>Animation Name</label>
        <input type="text" id="animName" value="myAnimation" oninput="update()">

        <label>Duration</label>
        <div class="range-row">
          <input type="range" id="duration" min="0.1" max="5" step="0.1" value="1" oninput="update()">
          <span class="range-val" id="durationVal">1s</span>
        </div>

        <label>Timing Function</label>
        <select id="timing" onchange="update()">
          <option value="ease">ease</option>
          <option value="ease-in">ease-in</option>
          <option value="ease-out">ease-out</option>
          <option value="ease-in-out">ease-in-out</option>
          <option value="linear">linear</option>
          <option value="cubic-bezier(0.68,-0.55,0.27,1.55)">elastic</option>
          <option value="cubic-bezier(0.34,1.56,0.64,1)">bounce-out</option>
          <option value="cubic-bezier(0.25,0.46,0.45,0.94)">ease-out-quad</option>
          <option value="steps(5, end)">steps(5)</option>
          <option value="steps(10, end)">steps(10)</option>
        </select>

        <label>Delay</label>
        <div class="range-row">
          <input type="range" id="delay" min="0" max="3" step="0.1" value="0" oninput="update()">
          <span class="range-val" id="delayVal">0s</span>
        </div>

        <label>Iteration Count</label>
        <select id="iterations" onchange="update()">
          <option value="1">1</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="5">5</option>
          <option value="10">10</option>
          <option value="infinite" selected>infinite</option>
        </select>

        <label>Direction</label>
        <select id="direction" onchange="update()">
          <option value="normal">normal</option>
          <option value="reverse">reverse</option>
          <option value="alternate" selected>alternate</option>
          <option value="alternate-reverse">alternate-reverse</option>
        </select>

        <label>Fill Mode</label>
        <select id="fillMode" onchange="update()">
          <option value="none">none</option>
          <option value="forwards">forwards</option>
          <option value="backwards">backwards</option>
          <option value="both" selected>both</option>
        </select>
      </div>
    </div>

    <!-- RIGHT: Preview + Code -->
    <div>
      <!-- Preview -->
      <div class="card fade-in">
        <div class="card-title"><span class="icon">&#128065;</span> Live Preview</div>
        <div class="shape-options">
          <button class="shape-btn active" onclick="setShape(this,'box')">Box</button>
          <button class="shape-btn" onclick="setShape(this,'circle')">Circle</button>
          <button class="shape-btn" onclick="setShape(this,'text')">Text</button>
          <button class="shape-btn" onclick="setShape(this,'button')">Button</button>
          <button class="shape-btn" onclick="setShape(this,'card')">Card</button>
        </div>
        <label>Preview Color</label>
        <div class="color-row" style="margin-bottom:16px">
          <input type="color" id="previewColor" value="#6366f1" oninput="updatePreviewColor()">
          <span style="font-size:.82rem;color:var(--text2)" id="previewColorHex">#6366f1</span>
        </div>
        <div class="preview-area" id="previewArea">
          <div class="preview-element" id="previewEl"></div>
        </div>
        <div class="btn-row">
          <button class="btn btn-secondary btn-sm" onclick="restartPreview()">Restart</button>
          <button class="btn btn-secondary btn-sm" onclick="togglePause()">Pause / Play</button>
        </div>
      </div>

      <!-- Code -->
      <div class="card fade-in">
        <div class="code-header">
          <div class="card-title" style="margin-bottom:0"><span class="icon">&#128187;</span> CSS Code</div>
          <span class="code-lang">CSS</span>
        </div>
        <div class="code-area" id="codeOutput"></div>
        <div class="btn-row" style="margin-top:14px">
          <button class="btn btn-primary btn-sm" onclick="copyCode()">Copy Full CSS</button>
          <button class="btn btn-secondary btn-sm" onclick="copyKeyframes()">Copy @keyframes</button>
          <button class="btn btn-secondary btn-sm" onclick="copyShorthand()">Copy Shorthand</button>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Cross Promo -->n<section style="max-width:900px;margin:40px auto;padding:0 24px;">n<div style="background:linear-gradient(135deg,rgba(99,102,241,0.1),rgba(168,85,247,0.08));border:1px solid rgba(99,102,241,0.15);border-radius:20px;padding:32px 28px;text-align:center;">n<div style="font-size:13px;color:#818cf8;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Founding Member</div>n<h3 style="font-size:22px;font-weight:800;color:#fff;margin:0 0 8px;">Get NexTool Pro</h3>n<p style="color:#94a3b8;font-size:14px;margin:0 auto 20px;max-width:500px;">No banners, clean output, enhanced features on all 215+ tools. One-time payment.</p>n<div style="display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap;">n<a href="/pro.html" style="display:inline-block;padding:12px 28px;background:linear-gradient(135deg,#6366f1,#a855f7,#ec4899);color:#fff;border-radius:10px;font-weight:700;font-size:15px;text-decoration:none;transition:transform 0.2s;" onmouseenter="this.style.transform='translateY(-2px)'" onmouseleave="this.style.transform='translateY(0)'">$29 — Get Pro</a>n<a href="/free-tools/" style="color:#94a3b8;font-size:14px;text-decoration:none;transition:color 0.2s;" onmouseenter="this.style.color='#e2e8f0'" onmouseleave="this.style.color='#94a3b8'">Browse 215+ Free Tools →</a>n</div>n</div>n</section>

<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/emoji-picker.html" style="color:var(--primary);text-decoration:none">Emoji Picker & Search</a> · <a href="/free-tools/favicon-generator.html" style="color:var(--primary);text-decoration:none">Favicon Generator</a> · <a href="/free-tools/meta-tag-generator.html" style="color:var(--primary);text-decoration:none">Meta Tag Generator</a> · <a href="/free-tools/base64.html" style="color:var(--primary);text-decoration:none">Free Base64 Encoder/Decoder</a> · <a href="/free-tools/blob-generator.html" style="color:var(--primary);text-decoration:none">Free SVG Blob Generator</a></p>
</div>

<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/css-animation-playground.html" style="color:var(--primary);text-decoration:none">Free CSS Animation Playground</a> · <a href="/free-tools/icon-generator.html" style="color:var(--primary);text-decoration:none">Free Icon Generator</a> · <a href="/free-tools/color-mixer.html" style="color:var(--primary);text-decoration:none">Free Color Mixer</a></p>
</div>
<footer>
  <div class="footer-grid">
    <div class="footer-col"><h4>Products</h4>
      <a href="/free-tools/">215+ Free Tools</a><a href="/pro.html">NexTool Pro — $29</a><a href="/workspace.html">Workspace</a>
    </div>
    <div class="footer-col"><h4>Free Tools</h4>
      <a href="/free-tools/css-animation-generator.html">CSS Animation Generator</a><a href="/free-tools/gradient-generator.html">Gradient Generator</a><a href="/free-tools/box-shadow-generator.html">Box Shadow Generator</a>
    </div>
    <div class="footer-col"><h4>Explore</h4>
      <a href="/free-tools/">All Free Tools</a><a href="/blog/">Blog</a><a href="/pro.html">Pro — $29</a>
    </div>
    <div class="footer-col"><h4>Legal</h4>
      <a href="/terms.html">Privacy Policy</a><a href="/terms.html">Terms of Service</a>
    </div>
  </div>
  <div class="footer-bottom">&copy; 2026 NexTool. All rights reserved.</div>
</footer>

<div class="toast" id="toast">Copied!</div>

<script>
// ========== ANIMATION PRESETS ==========
const presets = {
  bounce:    { kf:'0%,100%{transform:translateY(0)}50%{transform:translateY(-30px)}', timing:'ease', dir:'normal', iter:'infinite' },
  fadeIn:    { kf:'0%{opacity:0}100%{opacity:1}', timing:'ease', dir:'normal', iter:'1' },
  fadeOut:   { kf:'0%{opacity:1}100%{opacity:0}', timing:'ease', dir:'normal', iter:'1' },
  slideLeft: { kf:'0%{transform:translateX(-100px);opacity:0}100%{transform:translateX(0);opacity:1}', timing:'ease-out', dir:'normal', iter:'1' },
  slideRight:{ kf:'0%{transform:translateX(100px);opacity:0}100%{transform:translateX(0);opacity:1}', timing:'ease-out', dir:'normal', iter:'1' },
  slideUp:   { kf:'0%{transform:translateY(60px);opacity:0}100%{transform:translateY(0);opacity:1}', timing:'ease-out', dir:'normal', iter:'1' },
  rotate:    { kf:'0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}', timing:'linear', dir:'normal', iter:'infinite' },
  pulse:     { kf:'0%,100%{transform:scale(1)}50%{transform:scale(1.15)}', timing:'ease-in-out', dir:'normal', iter:'infinite' },
  shake:     { kf:'0%,100%{transform:translateX(0)}10%,30%,50%,70%,90%{transform:translateX(-5px)}20%,40%,60%,80%{transform:translateX(5px)}', timing:'ease-in-out', dir:'normal', iter:'1' },
  flip:      { kf:'0%{transform:perspective(400px) rotateY(0)}100%{transform:perspective(400px) rotateY(360deg)}', timing:'ease-in-out', dir:'normal', iter:'infinite' },
  swing:     { kf:'0%{transform:rotate(0deg)}20%{transform:rotate(15deg)}40%{transform:rotate(-10deg)}60%{transform:rotate(5deg)}80%{transform:rotate(-5deg)}100%{transform:rotate(0deg)}', timing:'ease-in-out', dir:'normal', iter:'infinite' },
  jello:     { kf:'0%,100%{transform:skewX(0) skewY(0)}30%{transform:skewX(-12.5deg) skewY(-12.5deg)}40%{transform:skewX(6.25deg) skewY(6.25deg)}50%{transform:skewX(-3.125deg) skewY(-3.125deg)}65%{transform:skewX(1.5625deg) skewY(1.5625deg)}75%{transform:skewX(-.78125deg) skewY(-.78125deg)}', timing:'ease-in-out', dir:'normal', iter:'infinite' },
  glow:      { kf:'0%,100%{box-shadow:0 0 5px rgba(99,102,241,.4)}50%{box-shadow:0 0 25px rgba(99,102,241,.8),0 0 50px rgba(168,85,247,.4)}', timing:'ease-in-out', dir:'normal', iter:'infinite' },
  float:     { kf:'0%,100%{transform:translateY(0)}50%{transform:translateY(-15px)}', timing:'ease-in-out', dir:'normal', iter:'infinite' },
  heartbeat: { kf:'0%{transform:scale(1)}14%{transform:scale(1.3)}28%{transform:scale(1)}42%{transform:scale(1.3)}70%{transform:scale(1)}', timing:'ease-in-out', dir:'normal', iter:'infinite' },
  zoomIn:    { kf:'0%{transform:scale(0);opacity:0}100%{transform:scale(1);opacity:1}', timing:'cubic-bezier(0.34,1.56,0.64,1)', dir:'normal', iter:'1' },
};

let currentPreset = 'bounce';
let currentShape = 'box';
let activeStyleEl = null;
let paused = false;

// ========== INIT ==========
function init() {
  const container = document.getElementById('presets');
  container.innerHTML = Object.keys(presets).map(name =>
    `<button class="preset-btn${name === currentPreset ? ' active' : ''}" onclick="selectPreset('${name}')">${name}</button>`
  ).join('');
  selectPreset('bounce');
  initObserver();
}

function initObserver() {
  const obs = new IntersectionObserver(entries => {
    entries.forEach(e => { if (e.isIntersecting) { e.target.classList.add('visible'); obs.unobserve(e.target); } });
  }, { threshold: 0.12 });
  document.querySelectorAll('.fade-in').forEach(el => obs.observe(el));
}

// ========== PRESET SELECTION ==========
function selectPreset(name) {
  currentPreset = name;
  const p = presets[name];
  document.getElementById('animName').value = name;
  document.querySelectorAll('.preset-btn').forEach(b => b.classList.toggle('active', b.textContent === name));

  // Try to set timing select
  const timingSel = document.getElementById('timing');
  let found = false;
  for (let i = 0; i < timingSel.options.length; i++) {
    if (timingSel.options[i].value === p.timing) { timingSel.selectedIndex = i; found = true; break; }
  }
  if (!found) timingSel.selectedIndex = 0;

  document.getElementById('direction').value = p.dir;
  document.getElementById('iterations').value = p.iter;
  paused = false;
  update();
}

// ========== SHAPE SELECTION ==========
function setShape(btn, shape) {
  currentShape = shape;
  document.querySelectorAll('.shape-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  renderPreviewElement();
  update();
}

function renderPreviewElement() {
  const el = document.getElementById('previewEl');
  const color = document.getElementById('previewColor').value;
  el.className = 'preview-element';
  el.textContent = '';
  el.style.cssText = '';

  switch (currentShape) {
    case 'circle':
      el.style.borderRadius = '50%';
      el.style.background = `linear-gradient(135deg, ${color}, var(--accent))`;
      break;
    case 'text':
      el.style.width = 'auto'; el.style.height = 'auto';
      el.style.background = 'none';
      el.style.fontSize = '1.8rem'; el.style.fontWeight = '800';
      el.style.background = `linear-gradient(135deg, ${color}, var(--accent))`;
      el.style.webkitBackgroundClip = 'text'; el.style.webkitTextFillColor = 'transparent';
      el.textContent = 'NexTool';
      break;
    case 'button':
      el.style.width = 'auto'; el.style.height = 'auto';
      el.style.padding = '14px 32px';
      el.style.fontSize = '1rem'; el.style.fontWeight = '600';
      el.style.color = '#fff'; el.style.borderRadius = '8px';
      el.style.background = `linear-gradient(135deg, ${color}, var(--accent))`;
      el.textContent = 'Click Me';
      break;
    case 'card':
      el.style.width = '140px'; el.style.height = '90px';
      el.style.background = 'var(--surface)';
      el.style.border = '1px solid var(--border)';
      el.style.borderRadius = '12px';
      el.style.display = 'flex'; el.style.alignItems = 'center'; el.style.justifyContent = 'center';
      el.style.fontSize = '.82rem'; el.style.fontWeight = '600';
      el.textContent = 'Card Element';
      break;
    default:
      el.style.background = `linear-gradient(135deg, ${color}, var(--accent))`;
  }
}

function updatePreviewColor() {
  const hex = document.getElementById('previewColor').value;
  document.getElementById('previewColorHex').textContent = hex;
  renderPreviewElement();
  update();
}

// ========== GET VALUES ==========
function getValues() {
  return {
    name: document.getElementById('animName').value || 'myAnimation',
    duration: parseFloat(document.getElementById('duration').value),
    timing: document.getElementById('timing').value,
    delay: parseFloat(document.getElementById('delay').value),
    iterations: document.getElementById('iterations').value,
    direction: document.getElementById('direction').value,
    fillMode: document.getElementById('fillMode').value
  };
}

function getKeyframes() {
  return presets[currentPreset]?.kf || presets.bounce.kf;
}

// ========== FORMAT KEYFRAMES ==========
function formatKeyframes(name, raw) {
  // Parse raw keyframes into structured format
  const parts = [];
  const regex = /([\d%,\s]+)\{([^}]+)\}/g;
  let match;
  while ((match = regex.exec(raw)) !== null) {
    const selector = match[1].trim();
    const props = match[2].trim().split(';').filter(Boolean).map(p => '    ' + p.trim() + ';').join('\n');
    parts.push(`  ${selector} {\n${props}\n  }`);
  }
  return `@keyframes ${name} {\n${parts.join('\n')}\n}`;
}

// ========== BUILD CSS ==========
function buildCSS() {
  const v = getValues();
  const kf = getKeyframes();
  const kfFormatted = formatKeyframes(v.name, kf);
  const shorthand = `${v.name} ${v.duration}s ${v.timing} ${v.delay}s ${v.iterations} ${v.direction} ${v.fillMode}`;

  const longhand = `.element {\n  animation-name: ${v.name};\n  animation-duration: ${v.duration}s;\n  animation-timing-function: ${v.timing};\n  animation-delay: ${v.delay}s;\n  animation-iteration-count: ${v.iterations};\n  animation-direction: ${v.direction};\n  animation-fill-mode: ${v.fillMode};\n}`;

  return { kfFormatted, shorthand, longhand, kf, v };
}

// ========== UPDATE ==========
function update() {
  const { kfFormatted, shorthand, longhand, kf, v } = buildCSS();
  document.getElementById('durationVal').textContent = v.duration + 's';
  document.getElementById('delayVal').textContent = v.delay + 's';

  const codeOut = document.getElementById('codeOutput');
  codeOut.textContent = `${kfFormatted}\n\n${longhand}\n\n/* Shorthand */\n.element {\n  animation: ${shorthand};\n}`;

  applyPreview(kf, v);
}

function applyPreview(kf, v) {
  if (activeStyleEl) activeStyleEl.remove();
  activeStyleEl = document.createElement('style');
  const playState = paused ? 'paused' : 'running';
  activeStyleEl.textContent = `@keyframes __preview{${kf}} #previewEl{animation:__preview ${v.duration}s ${v.timing} ${v.delay}s ${v.iterations} ${v.direction} ${v.fillMode};animation-play-state:${playState};}`;
  document.head.appendChild(activeStyleEl);
}

function restartPreview() {
  paused = false;
  const el = document.getElementById('previewEl');
  el.style.animation = 'none';
  el.offsetHeight; // force reflow
  el.style.animation = '';
  update();
}

function togglePause() {
  paused = !paused;
  update();
  showToast(paused ? 'Animation paused' : 'Animation playing');
}

// ========== COPY FUNCTIONS ==========
function copyCode() {
  const { kfFormatted, longhand, shorthand } = buildCSS();
  const full = `${kfFormatted}\n\n${longhand}\n\n/* Shorthand */\n.element {\n  animation: ${shorthand};\n}`;
  navigator.clipboard.writeText(full).then(() => showToast('Full CSS copied'));
}

function copyKeyframes() {
  const { kfFormatted } = buildCSS();
  navigator.clipboard.writeText(kfFormatted).then(() => showToast('@keyframes copied'));
}

function copyShorthand() {
  const { shorthand } = buildCSS();
  navigator.clipboard.writeText(`animation: ${shorthand};`).then(() => showToast('Shorthand copied'));
}

// ========== TOAST ==========
function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2200);
}

init();
</script>
<script src="/js/analytics-lite.js" defer></script>
<script src="/js/revenue.js" defer></script>
<script src="/js/lead-capture.js" defer></script>
</body>
</html>
