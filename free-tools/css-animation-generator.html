<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Free CSS Animation Generator — Visual Keyframe Builder | NexTool</title>
<meta name="description" content="Create CSS keyframe animations visually. Pick easing, duration, iteration. Live preview with animated element. Copy production-ready CSS. 100% free.">
<meta name="keywords" content="CSS animation generator, keyframe builder, CSS transitions, animation presets, CSS animation tool, free online tool, NexTool">
<meta name="robots" content="index, follow">
<meta property="og:title" content="Free CSS Animation Generator | NexTool">
<meta property="og:description" content="Build CSS keyframe animations visually with live preview and copy-ready code. 100% free.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://nextool.app/free-tools/css-animation-generator.html">
<meta property="og:image" content="https://nextool.app/assets/og-default.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<link rel="canonical" href="https://nextool.app/free-tools/css-animation-generator.html">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Free CSS Animation Generator | NexTool">
<meta name="twitter:description" content="Build CSS keyframe animations visually. Free online tool by NexTool.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"SoftwareApplication","name":"NexTool CSS Animation Generator","applicationCategory":"DesignApplication","operatingSystem":"Web","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"description":"Visual CSS keyframe animation builder with presets, live preview, and copy-ready code."}
</script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--bg:#050508;--surface:#111118;--surface2:#1a1a24;--border:#2a2a3a;--text:#e4e4eb;--text2:#9494a8;--primary:#6366f1;--accent:#a855f7;--pink:#ec4899;--green:#22c55e;--red:#ef4444;--cyan:#22d3ee;--yellow:#eab308;--radius:12px;--glass:rgba(17,17,24,0.7)}
html{scroll-behavior:smooth}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;min-height:100vh;overflow-x:hidden}
.nav{position:sticky;top:0;z-index:100;background:rgba(5,5,8,0.85);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:0 2rem;height:64px;display:flex;align-items:center;justify-content:space-between}
.nav-logo{font-size:1.4rem;font-weight:800;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-decoration:none}
.nav-links{display:flex;align-items:center;gap:1.5rem}
.nav-links a{color:var(--text2);text-decoration:none;font-size:.875rem;font-weight:500;transition:color .2s}
.nav-links a:hover{color:var(--text)}
.nav-cta{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff!important;padding:.5rem 1.2rem;border-radius:8px;font-weight:600;-webkit-text-fill-color:#fff!important}
.nav-cta:hover{opacity:.9}
.nav-toggle{display:none;background:none;border:none;color:var(--text);font-size:1.5rem;cursor:pointer}
.hero{text-align:center;padding:3rem 1.5rem 2rem;max-width:700px;margin:0 auto}
.hero h1{font-size:2.2rem;font-weight:800;line-height:1.2;margin-bottom:.75rem}
.hero h1 span{background:linear-gradient(135deg,var(--primary),var(--accent),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{color:var(--text2);font-size:1rem}
.tool-container{max-width:1200px;margin:0 auto;padding:0 1.5rem 3rem}
/* Layout: Controls + Preview side by side */
.main-grid{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;margin-bottom:1.5rem}
.controls-panel{display:flex;flex-direction:column;gap:1rem}
.card{background:var(--glass);backdrop-filter:blur(16px);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden}
.card-header{padding:.6rem 1rem;border-bottom:1px solid var(--border);font-size:.8rem;font-weight:600;color:var(--text2);background:rgba(26,26,36,0.5);display:flex;justify-content:space-between;align-items:center}
.card-body{padding:1rem}
/* Presets */
.presets-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:.4rem}
.preset-btn{background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.4rem .6rem;border-radius:8px;font-size:.75rem;font-weight:500;cursor:pointer;transition:all .2s;font-family:inherit;text-align:center}
.preset-btn:hover{border-color:var(--primary);background:rgba(99,102,241,.12)}
.preset-btn.active{background:linear-gradient(135deg,var(--primary),var(--accent));border-color:transparent;color:#fff}
/* Form controls */
.form-row{display:flex;gap:.75rem;margin-bottom:.75rem;align-items:center;flex-wrap:wrap}
.form-group{flex:1;min-width:120px}
.form-group label{display:block;font-size:.72rem;font-weight:600;color:var(--text2);margin-bottom:.3rem;text-transform:uppercase;letter-spacing:.5px}
.form-group input,.form-group select{width:100%;background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.45rem .6rem;border-radius:8px;font-size:.82rem;font-family:inherit;outline:none;transition:border-color .2s}
.form-group input:focus,.form-group select:focus{border-color:var(--primary)}
.form-group select{appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%239494a8' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right .6rem center;padding-right:1.8rem}
.range-row{display:flex;align-items:center;gap:.5rem}
.range-row input[type="range"]{flex:1;accent-color:var(--primary);height:4px}
.range-row .range-val{min-width:40px;text-align:right;font-size:.8rem;color:var(--text2);font-family:'Courier New',monospace}
/* Preview area */
.preview-card{display:flex;flex-direction:column}
.preview-stage{flex:1;min-height:300px;display:flex;align-items:center;justify-content:center;position:relative;background:repeating-conic-gradient(rgba(255,255,255,.02) 0% 25%,transparent 0% 50%) 0 0/20px 20px;overflow:hidden}
#previewEl{width:80px;height:80px;border-radius:12px;background:linear-gradient(135deg,var(--primary),var(--accent));display:flex;align-items:center;justify-content:center;font-size:1.5rem;font-weight:800;color:#fff;box-shadow:0 4px 20px rgba(99,102,241,.3)}
.preview-controls{display:flex;gap:.5rem;padding:.75rem 1rem;border-top:1px solid var(--border);background:rgba(26,26,36,0.5)}
.preview-controls button{background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.35rem .7rem;border-radius:8px;font-size:.75rem;font-weight:500;cursor:pointer;transition:all .2s;font-family:inherit}
.preview-controls button:hover{border-color:var(--primary);background:rgba(99,102,241,.12)}
.shape-btns{display:flex;gap:.3rem;margin-left:auto}
.shape-btns button{padding:.35rem .5rem;font-size:.7rem}
.shape-btns button.active{background:rgba(99,102,241,.15);border-color:var(--primary)}
/* Keyframes editor */
.kf-list{display:flex;flex-direction:column;gap:.5rem}
.kf-row{display:flex;align-items:center;gap:.5rem;padding:.5rem .6rem;background:var(--surface2);border:1px solid var(--border);border-radius:8px}
.kf-row .kf-pct{width:55px;text-align:center;font-weight:600;font-size:.8rem;color:var(--accent)}
.kf-row .kf-props{flex:1;font-family:'Courier New',monospace;font-size:.78rem;color:var(--text);background:var(--surface);border:1px solid var(--border);border-radius:6px;padding:.35rem .5rem;outline:none;transition:border-color .2s}
.kf-row .kf-props:focus{border-color:var(--primary)}
.kf-row button{background:none;border:none;color:var(--red);cursor:pointer;font-size:1rem;padding:0 .3rem;opacity:.6;transition:opacity .2s}
.kf-row button:hover{opacity:1}
.add-kf-btn{background:var(--surface2);border:1px dashed var(--border);color:var(--text2);padding:.5rem;border-radius:8px;font-size:.78rem;cursor:pointer;text-align:center;transition:all .2s;font-family:inherit}
.add-kf-btn:hover{border-color:var(--primary);color:var(--text)}
/* Code output */
.code-output{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;margin-top:1rem}
.code-header{padding:.6rem 1rem;border-bottom:1px solid var(--border);font-size:.8rem;font-weight:600;color:var(--text2);display:flex;justify-content:space-between;align-items:center;background:rgba(26,26,36,0.5)}
.code-header .copy-btns{display:flex;gap:.3rem}
.code-header button{background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.3rem .6rem;border-radius:6px;font-size:.72rem;font-weight:500;cursor:pointer;transition:all .2s;font-family:inherit}
.code-header button:hover{border-color:var(--primary);background:rgba(99,102,241,.12)}
.code-body{padding:1rem;font-family:'Courier New',monospace;font-size:.82rem;line-height:1.7;white-space:pre-wrap;color:var(--text);max-height:400px;overflow:auto}
.hl-prop{color:var(--cyan)}.hl-val{color:var(--green)}.hl-sel{color:#c084fc}.hl-brace{color:var(--text2)}.hl-at{color:var(--pink)}
/* CTA */
.cta-section{text-align:center;padding:4rem 1.5rem;max-width:700px;margin:0 auto}
.cta-section h2{font-size:1.8rem;font-weight:800;margin-bottom:.75rem}
.cta-section h2 span{background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.cta-section p{color:var(--text2);margin-bottom:1.5rem}
.cta-btn{display:inline-block;background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;padding:.75rem 2rem;border-radius:10px;font-weight:700;text-decoration:none;font-size:1rem;transition:transform .2s,box-shadow .2s}
.cta-btn:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(99,102,241,.3)}
.footer{border-top:1px solid var(--border);padding:3rem 2rem 2rem;max-width:1200px;margin:0 auto}
.footer-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:2rem;margin-bottom:2rem}
.footer-col h4{font-size:.85rem;font-weight:700;margin-bottom:.75rem;color:var(--text)}
.footer-col a{display:block;color:var(--text2);text-decoration:none;font-size:.8rem;margin-bottom:.4rem;transition:color .2s}
.footer-col a:hover{color:var(--primary)}
.footer-bottom{text-align:center;color:var(--text2);font-size:.75rem;padding-top:1.5rem;border-top:1px solid var(--border)}
.fade-in{opacity:0;transform:translateY(20px);transition:opacity .6s,transform .6s}
.fade-in.visible{opacity:1;transform:translateY(0)}
.toast{position:fixed;bottom:2rem;left:50%;transform:translateX(-50%) translateY(80px);background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.6rem 1.2rem;border-radius:10px;font-size:.85rem;font-weight:500;z-index:200;transition:transform .3s;pointer-events:none}
.toast.show{transform:translateX(-50%) translateY(0)}
@media(max-width:768px){
  .main-grid{grid-template-columns:1fr}
  .nav-links{display:none;position:absolute;top:64px;left:0;right:0;background:var(--bg);border-bottom:1px solid var(--border);flex-direction:column;padding:1rem 2rem;gap:1rem}
  .nav-links.open{display:flex}
  .nav-toggle{display:block}
  .hero h1{font-size:1.6rem}
  .footer-grid{grid-template-columns:1fr}
  .form-row{flex-direction:column}
  .form-group{min-width:100%}
}
</style>
</head>
<body>

<nav class="nav">
  <a href="/" class="nav-logo">NexTool</a>
  <button class="nav-toggle" onclick="document.querySelector('.nav-links').classList.toggle('open')" aria-label="Menu">&#9776;</button>
  <div class="nav-links">
    <a href="/">Home</a>
    <a href="/free-tools/">Tools</a>
    <a href="/free-tools/">Free Tools</a>
    <a href="/blog/">Blog</a>
    <a href="/#contact" class="nav-cta">Get Pro — $29</a>
  </div>
</nav>

<section class="hero fade-in">
  <h1>Free <span>CSS Animation Generator</span></h1>
  <p>Build CSS keyframe animations visually. Pick presets or customize keyframes, easing, duration, and iteration. Live preview with animated element. Copy production-ready CSS.</p>
</section>

<div class="tool-container fade-in">
  <div class="main-grid">
    <div class="controls-panel">
      <!-- Presets -->
      <div class="card">
        <div class="card-header"><span>Presets</span></div>
        <div class="card-body">
          <div class="presets-grid" id="presetsGrid"></div>
        </div>
      </div>

      <!-- Animation Properties -->
      <div class="card">
        <div class="card-header"><span>Properties</span></div>
        <div class="card-body">
          <div class="form-row">
            <div class="form-group">
              <label>Name</label>
              <input type="text" id="animName" value="myAnimation" spellcheck="false">
            </div>
            <div class="form-group">
              <label>Timing Function</label>
              <select id="animTiming">
                <option value="ease">ease</option>
                <option value="ease-in">ease-in</option>
                <option value="ease-out">ease-out</option>
                <option value="ease-in-out" selected>ease-in-out</option>
                <option value="linear">linear</option>
                <option value="cubic-bezier(0.68,-0.55,0.27,1.55)">elastic</option>
                <option value="cubic-bezier(0.34,1.56,0.64,1)">spring</option>
                <option value="steps(5, end)">steps(5)</option>
              </select>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Duration</label>
              <div class="range-row">
                <input type="range" id="animDuration" min="0.1" max="5" step="0.1" value="1">
                <span class="range-val" id="durVal">1s</span>
              </div>
            </div>
            <div class="form-group">
              <label>Delay</label>
              <div class="range-row">
                <input type="range" id="animDelay" min="0" max="3" step="0.1" value="0">
                <span class="range-val" id="delVal">0s</span>
              </div>
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Iteration Count</label>
              <select id="animIterations">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="5">5</option>
                <option value="infinite" selected>infinite</option>
              </select>
            </div>
            <div class="form-group">
              <label>Direction</label>
              <select id="animDirection">
                <option value="normal">normal</option>
                <option value="reverse">reverse</option>
                <option value="alternate" selected>alternate</option>
                <option value="alternate-reverse">alternate-reverse</option>
              </select>
            </div>
            <div class="form-group">
              <label>Fill Mode</label>
              <select id="animFill">
                <option value="none">none</option>
                <option value="forwards">forwards</option>
                <option value="backwards">backwards</option>
                <option value="both" selected>both</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <!-- Keyframes Editor -->
      <div class="card">
        <div class="card-header"><span>Keyframes</span><button class="add-kf-btn" onclick="addKeyframe()" style="border:none;background:none;color:var(--primary);font-size:.75rem;cursor:pointer;font-weight:600">+ Add Keyframe</button></div>
        <div class="card-body">
          <div class="kf-list" id="kfList"></div>
        </div>
      </div>
    </div>

    <!-- Preview -->
    <div class="card preview-card">
      <div class="card-header"><span>Live Preview</span></div>
      <div class="preview-stage" id="previewStage">
        <div id="previewEl">A</div>
      </div>
      <div class="preview-controls">
        <button onclick="restartPreview()">Restart</button>
        <button onclick="togglePause()">Pause/Play</button>
        <div class="shape-btns">
          <button class="active" onclick="setShape('box')">Box</button>
          <button onclick="setShape('circle')">Circle</button>
          <button onclick="setShape('text')">Text</button>
          <button onclick="setShape('button')">Button</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Code Output -->
  <div class="code-output">
    <div class="code-header">
      <span>Generated CSS</span>
      <div class="copy-btns">
        <button onclick="copyAll()">Copy All</button>
        <button onclick="copyKeyframes()">@keyframes</button>
        <button onclick="copyShorthand()">Shorthand</button>
      </div>
    </div>
    <div class="code-body" id="codeOutput"></div>
  </div>
</div>

<section class="cta-section fade-in">
  <h2>Need something <span>more powerful</span>?</h2>
  <p>Let us build it for you. Custom APIs, dashboards, automations &mdash; whatever you need.</p>
  <a href="/#contact" class="cta-btn">Start a Project &rarr;</a>
</section>

<section style="max-width:900px;margin:40px auto;padding:0 24px;">
<div style="background:linear-gradient(135deg,rgba(99,102,241,0.1),rgba(168,85,247,0.08));border:1px solid rgba(99,102,241,0.15);border-radius:20px;padding:32px 28px;text-align:center;">
<div style="font-size:13px;color:#818cf8;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Founding Member</div>
<h3 style="font-size:22px;font-weight:800;color:#fff;margin:0 0 8px;">Get NexTool Pro</h3>
<p style="color:#94a3b8;font-size:14px;margin:0 auto 20px;max-width:500px;">No banners, clean output, enhanced features on all 220+ tools. One-time payment.</p>
<div style="display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap;">
<a href="/pro.html" style="display:inline-block;padding:12px 28px;background:linear-gradient(135deg,#6366f1,#a855f7,#ec4899);color:#fff;border-radius:10px;font-weight:700;font-size:15px;text-decoration:none;">$29 — Get Pro</a>
<a href="/free-tools/" style="color:#94a3b8;font-size:14px;text-decoration:none;">Browse 220+ Free Tools &rarr;</a>
</div>
</div>
</section>

<footer class="footer fade-in">
  <div class="footer-grid">
    <div class="footer-col">
      <h4>Products</h4>
      <a href="/free-tools/">220+ Free Tools</a>
      <a href="/pro.html">NexTool Pro</a>
      <a href="/workspace.html">Workspace</a>
    </div>
    <div class="footer-col">
      <h4>Explore</h4>
      <a href="/free-tools/">Free Tools</a><a href="/blog/">Blog</a><a href="/pro.html">FAQ</a><a href="/pro.html">Pro — $29</a>
    </div>
    <div class="footer-col">
      <h4>Ecosystem</h4>
      <a href="/">NexTool Home</a><a href="/#contact">Contact</a><a href="https://github.com/christian140903-sudo/nextool" target="_blank">GitHub</a>
    </div>
  </div>
  <div class="footer-bottom">&copy; 2026 NexTool. AI-powered tools for everyone.</div>
</footer>

<div class="toast" id="toast"></div>

<script>
/* ========== PRESETS ========== */
const PRESETS = {
  'Fade In': [{ pct: '0%', props: 'opacity: 0' }, { pct: '100%', props: 'opacity: 1' }],
  'Fade Out': [{ pct: '0%', props: 'opacity: 1' }, { pct: '100%', props: 'opacity: 0' }],
  'Slide Up': [{ pct: '0%', props: 'transform: translateY(40px); opacity: 0' }, { pct: '100%', props: 'transform: translateY(0); opacity: 1' }],
  'Slide Down': [{ pct: '0%', props: 'transform: translateY(-40px); opacity: 0' }, { pct: '100%', props: 'transform: translateY(0); opacity: 1' }],
  'Slide Left': [{ pct: '0%', props: 'transform: translateX(40px); opacity: 0' }, { pct: '100%', props: 'transform: translateX(0); opacity: 1' }],
  'Slide Right': [{ pct: '0%', props: 'transform: translateX(-40px); opacity: 0' }, { pct: '100%', props: 'transform: translateX(0); opacity: 1' }],
  'Bounce': [{ pct: '0%', props: 'transform: translateY(0)' }, { pct: '30%', props: 'transform: translateY(-30px)' }, { pct: '50%', props: 'transform: translateY(0)' }, { pct: '70%', props: 'transform: translateY(-15px)' }, { pct: '100%', props: 'transform: translateY(0)' }],
  'Pulse': [{ pct: '0%', props: 'transform: scale(1)' }, { pct: '50%', props: 'transform: scale(1.08)' }, { pct: '100%', props: 'transform: scale(1)' }],
  'Shake': [{ pct: '0%', props: 'transform: translateX(0)' }, { pct: '25%', props: 'transform: translateX(-10px)' }, { pct: '50%', props: 'transform: translateX(10px)' }, { pct: '75%', props: 'transform: translateX(-10px)' }, { pct: '100%', props: 'transform: translateX(0)' }],
  'Spin': [{ pct: '0%', props: 'transform: rotate(0deg)' }, { pct: '100%', props: 'transform: rotate(360deg)' }],
  'Flip': [{ pct: '0%', props: 'transform: perspective(400px) rotateY(0)' }, { pct: '100%', props: 'transform: perspective(400px) rotateY(360deg)' }],
  'Zoom In': [{ pct: '0%', props: 'transform: scale(0); opacity: 0' }, { pct: '100%', props: 'transform: scale(1); opacity: 1' }],
  'Zoom Out': [{ pct: '0%', props: 'transform: scale(1); opacity: 1' }, { pct: '100%', props: 'transform: scale(0); opacity: 0' }],
  'Swing': [{ pct: '0%', props: 'transform: rotate(0deg)' }, { pct: '20%', props: 'transform: rotate(15deg)' }, { pct: '40%', props: 'transform: rotate(-10deg)' }, { pct: '60%', props: 'transform: rotate(5deg)' }, { pct: '80%', props: 'transform: rotate(-5deg)' }, { pct: '100%', props: 'transform: rotate(0deg)' }],
  'Wobble': [{ pct: '0%', props: 'transform: translateX(0) rotate(0deg)' }, { pct: '15%', props: 'transform: translateX(-12px) rotate(-5deg)' }, { pct: '30%', props: 'transform: translateX(10px) rotate(3deg)' }, { pct: '45%', props: 'transform: translateX(-6px) rotate(-3deg)' }, { pct: '60%', props: 'transform: translateX(4px) rotate(2deg)' }, { pct: '75%', props: 'transform: translateX(-2px) rotate(-1deg)' }, { pct: '100%', props: 'transform: translateX(0) rotate(0deg)' }],
  'Jello': [{ pct: '0%', props: 'transform: skewX(0deg) skewY(0deg)' }, { pct: '30%', props: 'transform: skewX(-12.5deg) skewY(-12.5deg)' }, { pct: '40%', props: 'transform: skewX(6.25deg) skewY(6.25deg)' }, { pct: '50%', props: 'transform: skewX(-3.125deg) skewY(-3.125deg)' }, { pct: '65%', props: 'transform: skewX(1.5625deg) skewY(1.5625deg)' }, { pct: '75%', props: 'transform: skewX(-.78125deg) skewY(-.78125deg)' }, { pct: '100%', props: 'transform: skewX(0deg) skewY(0deg)' }],
  'Glow': [{ pct: '0%', props: 'box-shadow: 0 0 5px rgba(99,102,241,0.2)' }, { pct: '50%', props: 'box-shadow: 0 0 25px rgba(99,102,241,0.6), 0 0 50px rgba(168,85,247,0.3)' }, { pct: '100%', props: 'box-shadow: 0 0 5px rgba(99,102,241,0.2)' }],
  'Float': [{ pct: '0%', props: 'transform: translateY(0)' }, { pct: '50%', props: 'transform: translateY(-10px)' }, { pct: '100%', props: 'transform: translateY(0)' }],
};

let keyframes = [];
let activePreset = null;
let paused = false;
let activeStyleEl = null;
let currentShape = 'box';

/* ========== INIT ========== */
function init() {
  // Build presets grid
  const grid = document.getElementById('presetsGrid');
  Object.keys(PRESETS).forEach(name => {
    const btn = document.createElement('button');
    btn.className = 'preset-btn';
    btn.textContent = name;
    btn.onclick = () => selectPreset(name);
    grid.appendChild(btn);
  });
  // Bind controls
  ['animName','animTiming','animDuration','animDelay','animIterations','animDirection','animFill'].forEach(id => {
    document.getElementById(id).addEventListener('input', update);
    document.getElementById(id).addEventListener('change', update);
  });
  document.getElementById('animDuration').addEventListener('input', () => {
    document.getElementById('durVal').textContent = document.getElementById('animDuration').value + 's';
  });
  document.getElementById('animDelay').addEventListener('input', () => {
    document.getElementById('delVal').textContent = document.getElementById('animDelay').value + 's';
  });
  // Load default preset
  selectPreset('Pulse');
}

function selectPreset(name) {
  activePreset = name;
  document.querySelectorAll('.preset-btn').forEach(b => b.classList.toggle('active', b.textContent === name));
  keyframes = PRESETS[name].map(kf => ({ ...kf }));
  renderKeyframes();
  update();
}

function renderKeyframes() {
  const list = document.getElementById('kfList');
  list.innerHTML = '';
  keyframes.forEach((kf, i) => {
    const row = document.createElement('div');
    row.className = 'kf-row';
    row.innerHTML = '<span class="kf-pct">' + kf.pct + '</span>' +
      '<input class="kf-props" value="' + escAttr(kf.props) + '" data-idx="' + i + '" spellcheck="false">' +
      (keyframes.length > 2 ? '<button onclick="removeKeyframe(' + i + ')" title="Remove">&times;</button>' : '');
    const inp = row.querySelector('.kf-props');
    inp.addEventListener('input', e => { keyframes[i].props = e.target.value; update(); });
    list.appendChild(row);
  });
}

function addKeyframe() {
  const last = keyframes.length > 0 ? parseInt(keyframes[keyframes.length - 1].pct) : 0;
  const prev = keyframes.length > 1 ? parseInt(keyframes[keyframes.length - 2].pct) : 0;
  let newPct = Math.round((last + prev) / 2);
  if (newPct <= prev || newPct >= last) newPct = last > 0 ? Math.round(last / 2) : 50;
  // Insert before last
  keyframes.splice(keyframes.length - 1, 0, { pct: newPct + '%', props: 'transform: scale(1)' });
  // Re-sort
  keyframes.sort((a, b) => parseInt(a.pct) - parseInt(b.pct));
  renderKeyframes();
  update();
}

function removeKeyframe(idx) {
  if (keyframes.length <= 2) return;
  keyframes.splice(idx, 1);
  renderKeyframes();
  update();
}

/* ========== BUILD CSS ========== */
function getValues() {
  return {
    name: document.getElementById('animName').value || 'myAnimation',
    timing: document.getElementById('animTiming').value,
    duration: parseFloat(document.getElementById('animDuration').value),
    delay: parseFloat(document.getElementById('animDelay').value),
    iterations: document.getElementById('animIterations').value,
    direction: document.getElementById('animDirection').value,
    fillMode: document.getElementById('animFill').value
  };
}

function buildCSS() {
  const v = getValues();
  // Build keyframes string
  let kfStr = '';
  keyframes.forEach(kf => {
    kfStr += '  ' + kf.pct + ' {\n';
    kf.props.split(';').filter(p => p.trim()).forEach(prop => {
      kfStr += '    ' + prop.trim() + ';\n';
    });
    kfStr += '  }\n';
  });
  const kfFormatted = '@keyframes ' + v.name + ' {\n' + kfStr + '}';
  // Build longhand
  const longhand = '.element {\n' +
    '  animation-name: ' + v.name + ';\n' +
    '  animation-duration: ' + v.duration + 's;\n' +
    '  animation-timing-function: ' + v.timing + ';\n' +
    '  animation-delay: ' + v.delay + 's;\n' +
    '  animation-iteration-count: ' + v.iterations + ';\n' +
    '  animation-direction: ' + v.direction + ';\n' +
    '  animation-fill-mode: ' + v.fillMode + ';\n' +
    '}';
  const shorthand = v.name + ' ' + v.duration + 's ' + v.timing + ' ' + v.delay + 's ' + v.iterations + ' ' + v.direction + ' ' + v.fillMode;
  return { kfFormatted, longhand, shorthand, kfStr, v };
}

function update() {
  const { kfFormatted, longhand, shorthand, kfStr, v } = buildCSS();
  // Update code output with syntax highlighting
  let html = highlightCSS(kfFormatted + '\n\n' + longhand + '\n\n/* Shorthand */\n.element {\n  animation: ' + shorthand + ';\n}');
  document.getElementById('codeOutput').innerHTML = html;
  // Apply preview
  applyPreview(kfStr, v);
}

function highlightCSS(css) {
  return css
    .replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;')
    .replace(/(@keyframes\s+\w+)/g, '<span class="hl-at">$1</span>')
    .replace(/(\.element)/g, '<span class="hl-sel">$1</span>')
    .replace(/([\w-]+)\s*:/g, '<span class="hl-prop">$1</span>:')
    .replace(/:\s*([^;{}\n]+)/g, ': <span class="hl-val">$1</span>');
}

function applyPreview(kfStr, v) {
  if (activeStyleEl) activeStyleEl.remove();
  activeStyleEl = document.createElement('style');
  const playState = paused ? 'paused' : 'running';
  activeStyleEl.textContent = '@keyframes __preview{' + keyframes.map(kf => kf.pct + '{' + kf.props + '}').join('') + '} #previewEl{animation:__preview ' + v.duration + 's ' + v.timing + ' ' + v.delay + 's ' + v.iterations + ' ' + v.direction + ' ' + v.fillMode + ';animation-play-state:' + playState + ';}';
  document.head.appendChild(activeStyleEl);
}

function restartPreview() {
  paused = false;
  const el = document.getElementById('previewEl');
  el.style.animation = 'none';
  el.offsetHeight; // force reflow
  el.style.animation = '';
  update();
}

function togglePause() {
  paused = !paused;
  update();
  showToast(paused ? 'Animation paused' : 'Animation playing');
}

function setShape(shape) {
  currentShape = shape;
  const el = document.getElementById('previewEl');
  document.querySelectorAll('.shape-btns button').forEach(b => b.classList.remove('active'));
  event.target.classList.add('active');
  switch (shape) {
    case 'box':
      el.style.width = '80px'; el.style.height = '80px'; el.style.borderRadius = '12px';
      el.style.fontSize = '1.5rem'; el.textContent = 'A';
      el.style.background = 'linear-gradient(135deg,var(--primary),var(--accent))';
      break;
    case 'circle':
      el.style.width = '80px'; el.style.height = '80px'; el.style.borderRadius = '50%';
      el.style.fontSize = '1.5rem'; el.textContent = '';
      el.style.background = 'linear-gradient(135deg,var(--accent),var(--pink))';
      break;
    case 'text':
      el.style.width = 'auto'; el.style.height = 'auto'; el.style.borderRadius = '8px';
      el.style.fontSize = '1.4rem'; el.textContent = 'Hello!';
      el.style.padding = '12px 24px';
      el.style.background = 'linear-gradient(135deg,var(--primary),var(--accent))';
      break;
    case 'button':
      el.style.width = 'auto'; el.style.height = 'auto'; el.style.borderRadius = '10px';
      el.style.fontSize = '0.9rem'; el.textContent = 'Click Me';
      el.style.padding = '10px 24px';
      el.style.background = 'linear-gradient(135deg,var(--primary),var(--accent))';
      break;
  }
  restartPreview();
}

/* ========== COPY FUNCTIONS ========== */
function copyAll() {
  const { kfFormatted, longhand, shorthand } = buildCSS();
  const full = kfFormatted + '\n\n' + longhand + '\n\n/* Shorthand */\n.element {\n  animation: ' + shorthand + ';\n}';
  navigator.clipboard.writeText(full).then(() => showToast('Full CSS copied'));
}

function copyKeyframes() {
  const { kfFormatted } = buildCSS();
  navigator.clipboard.writeText(kfFormatted).then(() => showToast('@keyframes copied'));
}

function copyShorthand() {
  const { shorthand } = buildCSS();
  navigator.clipboard.writeText('animation: ' + shorthand + ';').then(() => showToast('Shorthand copied'));
}

/* ========== UTILS ========== */
function escAttr(s) { return s.replace(/"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;'); }

function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2200);
}

const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('visible'); observer.unobserve(entry.target); }});
}, { threshold: 0.1 });
document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));

init();
</script>
<script src="/js/analytics-lite.js" defer></script>
<script src="/js/revenue.js" defer></script>
<script src="/js/lead-capture.js" defer></script>
</body>
</html>