<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Free Regex Tester &amp; Debugger — Test Regular Expressions Online | NexTool</title>
<meta name="description" content="Free online regex tester with real-time match highlighting, match details, common patterns library, cheat sheet, replace mode, and shareable URLs.">
<meta name="keywords" content="regex tester, regular expression tester, regex debugger, regex online, pattern matching, free tool">
<meta name="robots" content="index, follow">
<meta property="og:title" content="Free Regex Tester & Debugger | NexTool">
<meta property="og:description" content="Test and debug regular expressions online with real-time highlighting, match details, and a built-in cheat sheet.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://nextool.app/free-tools/regex-tester">
<meta property="og:image" content="https://nextool.app/assets/og-default.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Free Regex Tester & Debugger | NexTool">
<meta name="twitter:description" content="Test regular expressions online for free. Real-time highlighting and match details.">
<link rel="canonical" href="https://nextool.app/free-tools/regex-tester">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "NexTool Regex Tester & Debugger",
  "applicationCategory": "DeveloperApplication",
  "operatingSystem": "Web",
  "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
  "description": "Free online regex tester with real-time match highlighting, common patterns, cheat sheet, and replace mode.",
  "url": "https://nextool.app/free-tools/regex-tester"
}
</script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--bg:#050508;--surface:#111118;--surface2:#1a1a24;--border:#252535;--text:#e4e4ed;--text2:#9999aa;--primary:#6366f1;--accent:#a855f7;--pink:#ec4899;--green:#22c55e;--red:#ef4444;--orange:#f59e0b;--radius:12px;--glass:rgba(17,17,24,.72);--glass-border:rgba(99,102,241,.15)}
html{scroll-behavior:smooth}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;min-height:100vh;overflow-x:hidden}
::selection{background:var(--primary);color:#fff}
/* NAV */
.nav{position:sticky;top:0;z-index:100;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);background:rgba(5,5,8,.82);border-bottom:1px solid var(--glass-border);padding:0 1.5rem}
.nav-inner{max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;height:64px}
.nav-logo{font-size:1.35rem;font-weight:800;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-decoration:none}
.nav-links{display:flex;align-items:center;gap:1.75rem}
.nav-links a{color:var(--text2);text-decoration:none;font-size:.875rem;font-weight:500;transition:color .2s}
.nav-links a:hover{color:var(--text)}
.nav-cta{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff!important;padding:.5rem 1.15rem;border-radius:8px;font-weight:600;font-size:.85rem;-webkit-text-fill-color:#fff!important}
.nav-cta:hover{opacity:.9}
.nav-toggle{display:none;background:none;border:none;color:var(--text);font-size:1.5rem;cursor:pointer}
/* HERO */
.hero{text-align:center;padding:3.5rem 1.5rem 2rem;max-width:720px;margin:0 auto}
.hero-badge{display:inline-block;font-size:.75rem;font-weight:600;color:var(--accent);background:rgba(168,85,247,.1);border:1px solid rgba(168,85,247,.2);border-radius:99px;padding:.3rem .9rem;margin-bottom:1rem;letter-spacing:.03em}
.hero h1{font-size:clamp(1.75rem,4.5vw,2.5rem);font-weight:800;line-height:1.15;margin-bottom:.75rem}
.hero h1 span{background:linear-gradient(135deg,var(--primary),var(--accent),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{color:var(--text2);font-size:1.05rem;max-width:560px;margin:0 auto}
/* LAYOUT */
.tool-wrap{max-width:1100px;margin:0 auto;padding:0 1.5rem 3rem;display:grid;grid-template-columns:1fr 300px;gap:1.25rem}
.tool-main{min-width:0}
.tool-sidebar{min-width:0}
.glass-card{background:var(--glass);border:1px solid var(--glass-border);border-radius:var(--radius);backdrop-filter:blur(12px);padding:1.5rem;margin-bottom:1.25rem}
/* PATTERN INPUT */
.pattern-row{display:flex;gap:.5rem;margin-bottom:1rem;flex-wrap:wrap}
.pattern-field{flex:1;min-width:200px;position:relative}
.pattern-field input{width:100%;background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:.7rem .85rem .7rem 2.2rem;color:var(--text);font-family:'Inter',monospace;font-size:.9rem;transition:border-color .2s}
.pattern-field input:focus{outline:none;border-color:var(--primary)}
.pattern-field::before{content:'/';position:absolute;left:.85rem;top:50%;transform:translateY(-50%);color:var(--accent);font-family:monospace;font-size:1rem;font-weight:700}
.pattern-field input::placeholder{color:var(--text2);opacity:.5}
/* FLAGS */
.flags-row{display:flex;gap:.35rem;align-items:center}
.flag-btn{width:34px;height:38px;display:flex;align-items:center;justify-content:center;border:1px solid var(--border);border-radius:8px;background:var(--surface);color:var(--text2);font-family:monospace;font-weight:700;font-size:.85rem;cursor:pointer;transition:all .2s;user-select:none}
.flag-btn.active{background:rgba(99,102,241,.15);border-color:var(--primary);color:var(--primary)}
.flag-btn:hover{border-color:var(--primary)}
/* MATCH COUNT */
.match-bar{display:flex;justify-content:space-between;align-items:center;margin-bottom:.75rem;flex-wrap:wrap;gap:.5rem}
.match-count{font-size:.85rem;font-weight:600}
.match-count b{color:var(--green)}
.match-count.error b{color:var(--red)}
.share-btn{background:var(--surface2);border:1px solid var(--border);color:var(--text2);padding:.35rem .75rem;border-radius:8px;font-family:inherit;font-size:.78rem;font-weight:600;cursor:pointer;transition:all .2s;display:flex;align-items:center;gap:.3rem}
.share-btn:hover{border-color:var(--primary);color:var(--primary)}
/* HIGHLIGHT AREA */
.highlight-wrap{position:relative;margin-bottom:1rem}
.highlight-backdrop{position:absolute;inset:0;padding:.85rem;font-family:'Inter',monospace;font-size:.85rem;line-height:1.6;white-space:pre-wrap;word-wrap:break-word;overflow:auto;color:transparent;pointer-events:none;border-radius:10px;border:1px solid transparent}
.highlight-backdrop mark{background:rgba(99,102,241,.3);color:transparent;border-radius:3px;padding:0 1px;border-bottom:2px solid var(--primary)}
.highlight-backdrop mark:nth-child(even){background:rgba(168,85,247,.3);border-bottom-color:var(--accent)}
.test-area{width:100%;min-height:180px;resize:vertical;background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:.85rem;color:var(--text);font-family:'Inter',monospace;font-size:.85rem;line-height:1.6;position:relative;z-index:1}
.test-area:focus{outline:none;border-color:var(--primary)}
.test-area::placeholder{color:var(--text2);opacity:.5}
/* REPLACE */
.replace-section{margin-bottom:1rem}
.replace-section label{display:block;font-size:.78rem;font-weight:600;color:var(--text2);margin-bottom:.4rem;text-transform:uppercase;letter-spacing:.04em}
.replace-row{display:flex;gap:.5rem}
.replace-row input{flex:1;background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:.6rem .85rem;color:var(--text);font-family:'Inter',monospace;font-size:.85rem}
.replace-row input:focus{outline:none;border-color:var(--primary)}
.replace-result{margin-top:.75rem;background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:.85rem;font-family:'Inter',monospace;font-size:.85rem;line-height:1.6;white-space:pre-wrap;word-wrap:break-word;max-height:200px;overflow:auto;color:var(--green);display:none}
/* MATCH DETAILS */
.matches-panel{max-height:300px;overflow:auto}
.matches-panel h3{font-size:.82rem;text-transform:uppercase;letter-spacing:.04em;color:var(--text2);margin-bottom:.75rem;font-weight:700}
.match-item{background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:.6rem .75rem;margin-bottom:.5rem;font-size:.8rem}
.match-item .match-idx{color:var(--accent);font-weight:700;font-size:.72rem;text-transform:uppercase;letter-spacing:.03em}
.match-item .match-val{font-family:monospace;color:var(--green);margin-top:.2rem;word-break:break-all}
.match-item .match-pos{color:var(--text2);font-size:.72rem;margin-top:.15rem}
.match-item .match-groups{margin-top:.3rem;padding-top:.3rem;border-top:1px solid var(--border)}
.match-item .group-row{font-size:.75rem;color:var(--text2)}
.match-item .group-row span{color:var(--orange);font-family:monospace}
.no-matches{color:var(--text2);font-size:.85rem;text-align:center;padding:1.5rem 0}
/* SIDEBAR */
.sidebar-section{margin-bottom:1.25rem}
.sidebar-section h3{font-size:.82rem;text-transform:uppercase;letter-spacing:.04em;color:var(--text2);margin-bottom:.65rem;font-weight:700;display:flex;justify-content:space-between;align-items:center;cursor:pointer;user-select:none}
.sidebar-section h3 .caret{transition:transform .2s;font-size:.7rem}
.sidebar-section h3 .caret.open{transform:rotate(90deg)}
.sidebar-body{overflow:hidden;transition:max-height .3s ease}
.sidebar-body.collapsed{max-height:0!important}
.pattern-lib-item{display:flex;justify-content:space-between;align-items:center;padding:.45rem .6rem;border-radius:8px;cursor:pointer;transition:background .15s;font-size:.8rem;gap:.5rem}
.pattern-lib-item:hover{background:var(--surface2)}
.pattern-lib-item .pname{color:var(--text);font-weight:500;white-space:nowrap}
.pattern-lib-item .pval{color:var(--text2);font-family:monospace;font-size:.72rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:140px;text-align:right}
/* CHEAT SHEET */
.cheat-table{width:100%;border-collapse:collapse;font-size:.78rem}
.cheat-table th{text-align:left;color:var(--text2);font-weight:600;padding:.3rem .4rem;border-bottom:1px solid var(--border)}
.cheat-table td{padding:.3rem .4rem;border-bottom:1px solid rgba(37,37,53,.5)}
.cheat-table td:first-child{font-family:monospace;color:var(--primary);font-weight:600;white-space:nowrap}
.cheat-table td:last-child{color:var(--text2)}
/* TOAST */
.toast{position:fixed;bottom:1.5rem;left:50%;transform:translateX(-50%) translateY(80px);background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.7rem 1.2rem;border-radius:10px;font-size:.85rem;font-weight:500;z-index:999;transition:transform .3s ease,opacity .3s ease;opacity:0;pointer-events:none}
.toast.show{transform:translateX(-50%) translateY(0);opacity:1}
/* BTN */
.btn{padding:.5rem 1rem;border:none;border-radius:8px;font-family:inherit;font-size:.82rem;font-weight:600;cursor:pointer;transition:all .2s;display:inline-flex;align-items:center;gap:.3rem}
.btn-primary{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff}
.btn-primary:hover{opacity:.88}
.btn-secondary{background:var(--surface2);border:1px solid var(--border);color:var(--text)}
.btn-secondary:hover{border-color:var(--primary);color:var(--primary)}
/* CTA */
.cta-section{text-align:center;padding:4rem 1.5rem;max-width:700px;margin:0 auto}
.cta-section h2{font-size:clamp(1.5rem,3.5vw,2rem);font-weight:800;margin-bottom:.6rem}
.cta-section h2 span{background:linear-gradient(135deg,var(--primary),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.cta-section p{color:var(--text2);margin-bottom:1.5rem;font-size:1rem}
.cta-big{display:inline-block;background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;padding:.75rem 2rem;border-radius:10px;font-weight:700;font-size:1rem;text-decoration:none;transition:opacity .2s}
.cta-big:hover{opacity:.88}
/* FOOTER */
.footer{border-top:1px solid var(--border);padding:3rem 1.5rem 2rem;max-width:1200px;margin:0 auto}
.footer-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:2rem;margin-bottom:2rem}
.footer-col h4{font-size:.8rem;text-transform:uppercase;letter-spacing:.06em;color:var(--text2);margin-bottom:.75rem;font-weight:700}
.footer-col a{display:block;color:var(--text2);text-decoration:none;font-size:.85rem;padding:.25rem 0;transition:color .2s}
.footer-col a:hover{color:var(--text)}
.footer-bottom{text-align:center;color:var(--text2);font-size:.78rem;opacity:.6}
/* ANIMATIONS */
.fade-in{opacity:0;transform:translateY(24px);transition:opacity .6s ease,transform .6s ease}
.fade-in.visible{opacity:1;transform:translateY(0)}
/* RESPONSIVE */
@media(max-width:868px){
  .tool-wrap{grid-template-columns:1fr}
  .tool-sidebar{order:2}
  .nav-links{display:none;position:absolute;top:64px;left:0;right:0;background:rgba(5,5,8,.96);flex-direction:column;padding:1rem 1.5rem;gap:1rem;border-bottom:1px solid var(--border)}
  .nav-links.open{display:flex}
  .nav-toggle{display:block}
  .footer-grid{grid-template-columns:1fr;gap:1.5rem}
}
</style>
</head>
<body>

<!-- NAV -->
<nav class="nav">
  <div class="nav-inner">
    <a href="/" class="nav-logo">NexTool</a>
    <button class="nav-toggle" onclick="document.querySelector('.nav-links').classList.toggle('open')" aria-label="Menu">&#9776;</button>
    <div class="nav-links">
      <a href="/">Home</a>
      <a href="/#services">Services</a>
      <a href="/free-tools/">Free Tools</a>
      <a href="/blog/">Blog</a>
      <a href="/#contact" class="nav-cta">Start a Project</a>
    </div>
  </div>
</nav>

<!-- HERO -->
<section class="hero fade-in">
  <div class="hero-badge">Free Developer Tool</div>
  <h1><span>Regex</span> Tester &amp; Debugger</h1>
  <p>Test and debug regular expressions in real time. Match highlighting, group details, common patterns, cheat sheet, replace mode, and shareable URLs.</p>
</section>

<!-- TOOL -->
<div class="tool-wrap">
  <!-- MAIN -->
  <div class="tool-main">
    <!-- Pattern Input -->
    <div class="glass-card fade-in">
      <div class="pattern-row">
        <div class="pattern-field">
          <input type="text" id="patternInput" placeholder="Enter regex pattern..." oninput="run()" spellcheck="false" autocomplete="off">
        </div>
        <div class="flags-row">
          <button class="flag-btn active" data-flag="g" onclick="toggleFlag(this)" title="Global">g</button>
          <button class="flag-btn" data-flag="i" onclick="toggleFlag(this)" title="Case insensitive">i</button>
          <button class="flag-btn" data-flag="m" onclick="toggleFlag(this)" title="Multiline">m</button>
          <button class="flag-btn" data-flag="s" onclick="toggleFlag(this)" title="Dotall">s</button>
          <button class="flag-btn" data-flag="u" onclick="toggleFlag(this)" title="Unicode">u</button>
        </div>
      </div>

      <!-- Match bar -->
      <div class="match-bar">
        <div class="match-count" id="matchCount">Enter a pattern to start</div>
        <button class="share-btn" onclick="shareUrl()">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 12v8a2 2 0 002 2h12a2 2 0 002-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" y1="2" x2="12" y2="15"/></svg>
          Share
        </button>
      </div>

      <!-- Test string with highlight overlay -->
      <div class="highlight-wrap">
        <div class="highlight-backdrop" id="highlightBackdrop"></div>
        <textarea class="test-area" id="testArea" placeholder="Enter test string here..." oninput="run()" onscroll="syncScroll()"></textarea>
      </div>

      <!-- Replace mode -->
      <div class="replace-section">
        <label>Replace With</label>
        <div class="replace-row">
          <input type="text" id="replaceInput" placeholder="Replacement string ($1, $2 for groups)..." oninput="run()" spellcheck="false">
          <button class="btn btn-secondary" onclick="copyReplace()">Copy</button>
        </div>
        <div class="replace-result" id="replaceResult"></div>
      </div>
    </div>

    <!-- Match Details -->
    <div class="glass-card fade-in">
      <div class="matches-panel" id="matchesPanel">
        <h3>Match Details</h3>
        <div id="matchesList" class="no-matches">No matches yet</div>
      </div>
    </div>
  </div>

  <!-- SIDEBAR -->
  <div class="tool-sidebar">
    <!-- Common Patterns -->
    <div class="glass-card fade-in sidebar-section">
      <h3 onclick="toggleSection(this)">Common Patterns <span class="caret open">&#9654;</span></h3>
      <div class="sidebar-body" id="patternsBody"></div>
    </div>

    <!-- Cheat Sheet -->
    <div class="glass-card fade-in sidebar-section">
      <h3 onclick="toggleSection(this)">Cheat Sheet <span class="caret open">&#9654;</span></h3>
      <div class="sidebar-body" id="cheatBody">
        <table class="cheat-table">
          <tr><th>Token</th><th>Description</th></tr>
          <tr><td>.</td><td>Any character (except newline)</td></tr>
          <tr><td>\d</td><td>Digit [0-9]</td></tr>
          <tr><td>\D</td><td>Not a digit</td></tr>
          <tr><td>\w</td><td>Word character [a-zA-Z0-9_]</td></tr>
          <tr><td>\W</td><td>Not a word character</td></tr>
          <tr><td>\s</td><td>Whitespace</td></tr>
          <tr><td>\S</td><td>Not whitespace</td></tr>
          <tr><td>\b</td><td>Word boundary</td></tr>
          <tr><td>^</td><td>Start of string/line</td></tr>
          <tr><td>$</td><td>End of string/line</td></tr>
          <tr><td>*</td><td>0 or more</td></tr>
          <tr><td>+</td><td>1 or more</td></tr>
          <tr><td>?</td><td>0 or 1 (optional)</td></tr>
          <tr><td>{n}</td><td>Exactly n times</td></tr>
          <tr><td>{n,m}</td><td>Between n and m times</td></tr>
          <tr><td>[abc]</td><td>Character class</td></tr>
          <tr><td>[^abc]</td><td>Negated class</td></tr>
          <tr><td>(abc)</td><td>Capturing group</td></tr>
          <tr><td>(?:abc)</td><td>Non-capturing group</td></tr>
          <tr><td>(?=abc)</td><td>Positive lookahead</td></tr>
          <tr><td>(?!abc)</td><td>Negative lookahead</td></tr>
          <tr><td>(?&lt;=abc)</td><td>Positive lookbehind</td></tr>
          <tr><td>a|b</td><td>Alternation (a or b)</td></tr>
          <tr><td>\1</td><td>Backreference to group 1</td></tr>
          <tr><td>(?&lt;name&gt;)</td><td>Named capture group</td></tr>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- CTA -->
<section class="cta-section fade-in">
  <h2>Need something <span>more powerful?</span></h2>
  <p>Let us build custom automation, tools, and integrations tailored to your workflow.</p>
  <a href="/#contact" class="cta-big">Start a Project &rarr;</a>
</section>

<!-- FOOTER -->
<!-- Cross Promo -->
<section style="max-width:900px;margin:40px auto;padding:0 24px;">
<div style="background:linear-gradient(135deg,rgba(99,102,241,0.1),rgba(168,85,247,0.08));border:1px solid rgba(99,102,241,0.15);border-radius:20px;padding:32px 28px;text-align:center;">
<div style="font-size:13px;color:#818cf8;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Founding Member</div>
<h3 style="font-size:22px;font-weight:800;color:#fff;margin:0 0 8px;">Get NexTool Pro</h3>
<p style="color:#94a3b8;font-size:14px;margin:0 auto 20px;max-width:500px;">No banners, clean output, enhanced features on all 125+ tools. One-time payment.</p>
<div style="display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap;">
<a href="/pro.html" style="display:inline-block;padding:12px 28px;background:linear-gradient(135deg,#6366f1,#a855f7,#ec4899);color:#fff;border-radius:10px;font-weight:700;font-size:15px;text-decoration:none;">$29 — Get Pro</a>
<a href="/free-tools/" style="color:#94a3b8;font-size:14px;text-decoration:none;">Browse 125+ Free Tools &rarr;</a>
</div>
</div>
</section>
<footer class="footer fade-in">
  <div class="footer-grid">
    <div class="footer-col">
      <h4>Services</h4>
      <a href="/#services">Websites</a>
      <a href="/#services">Chatbots</a>
      <a href="/#services">Automation</a>
      <a href="/#services">Content</a>
      <a href="/#services">Video</a>
      <a href="/#services">Data</a>
    </div>
    <div class="footer-col">
      <h4>Explore</h4>
      <a href="/free-tools/">Free Tools</a>
      <a href="/blog/">Blog</a>
      <a href="/#pricing">Pricing</a>
      <a href="/#faq">FAQ</a>
    </div>
    <div class="footer-col">
      <h4>Ecosystem</h4>
      <a href="/#contact">Contact</a>
      <a href="https://github.com/nextool" target="_blank" rel="noopener">GitHub</a>
      <a href="https://discord.gg/nextool" target="_blank" rel="noopener">Discord</a>
      <a href="/privacy">Privacy</a>
    </div>
  </div>
  <div class="footer-bottom">&copy; 2026 NexTool. Built with AI. All rights reserved.</div>
</footer>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<script>
/* ── Common Patterns Library ── */
const PATTERNS = [
  { name: 'Email', pattern: '[\\w.+-]+@[\\w-]+\\.[\\w.]+' },
  { name: 'URL', pattern: 'https?:\\/\\/[\\w\\-._~:/?#\\[\\]@!$&\'()*+,;=%]+' },
  { name: 'Phone (Intl)', pattern: '\\+?\\d{1,4}[\\s.-]?\\(?\\d{1,4}\\)?[\\s.-]?\\d{1,4}[\\s.-]?\\d{1,9}' },
  { name: 'IPv4', pattern: '\\b(?:\\d{1,3}\\.){3}\\d{1,3}\\b' },
  { name: 'IPv6', pattern: '([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}' },
  { name: 'Date (YYYY-MM-DD)', pattern: '\\d{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[12]\\d|3[01])' },
  { name: 'Date (DD/MM/YYYY)', pattern: '(?:0[1-9]|[12]\\d|3[01])[/.-](?:0[1-9]|1[0-2])[/.-]\\d{4}' },
  { name: 'Time (HH:MM)', pattern: '(?:[01]\\d|2[0-3]):[0-5]\\d(?::[0-5]\\d)?' },
  { name: 'Hex Color', pattern: '#(?:[0-9a-fA-F]{3}){1,2}\\b' },
  { name: 'HTML Tag', pattern: '<\\/?[a-zA-Z][\\w]*(?:\\s[^>]*)?\\/?' },
  { name: 'Number (int/float)', pattern: '-?\\d+(?:\\.\\d+)?' },
  { name: 'Username', pattern: '[a-zA-Z][\\w]{2,29}' },
  { name: 'Slug', pattern: '[a-z0-9]+(?:-[a-z0-9]+)*' },
  { name: 'Credit Card', pattern: '\\b(?:\\d[ -]*?){13,19}\\b' },
  { name: 'UUID', pattern: '[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}' },
  { name: 'MAC Address', pattern: '([0-9a-fA-F]{2}[:-]){5}[0-9a-fA-F]{2}' },
  { name: 'File Path', pattern: '(?:\\/[\\w.-]+)+|(?:[A-Z]:\\\\[\\w.\\\\-]+)' },
  { name: 'JSON String', pattern: '"(?:[^"\\\\]|\\\\.)*"' },
];

/* ── Build Patterns List ── */
(function buildPatterns() {
  const container = document.getElementById('patternsBody');
  PATTERNS.forEach(p => {
    const el = document.createElement('div');
    el.className = 'pattern-lib-item';
    el.innerHTML = `<span class="pname">${p.name}</span><span class="pval" title="${escHtml(p.pattern)}">${escHtml(p.pattern)}</span>`;
    el.addEventListener('click', () => {
      document.getElementById('patternInput').value = p.pattern;
      run();
      showToast(`Loaded: ${p.name}`);
    });
    container.appendChild(el);
  });
})();

/* ── Flags ── */
function getFlags() {
  return Array.from(document.querySelectorAll('.flag-btn.active')).map(b => b.dataset.flag).join('');
}

function toggleFlag(btn) {
  btn.classList.toggle('active');
  run();
}

/* ── Main Run ── */
function run() {
  const pattern = document.getElementById('patternInput').value;
  const test = document.getElementById('testArea').value;
  const replaceStr = document.getElementById('replaceInput').value;
  const flags = getFlags();
  const countEl = document.getElementById('matchCount');
  const listEl = document.getElementById('matchesList');
  const backdrop = document.getElementById('highlightBackdrop');
  const replaceResult = document.getElementById('replaceResult');

  // No pattern
  if (!pattern) {
    countEl.className = 'match-count';
    countEl.innerHTML = 'Enter a pattern to start';
    listEl.className = 'no-matches';
    listEl.innerHTML = 'No matches yet';
    backdrop.innerHTML = escHtml(test);
    replaceResult.style.display = 'none';
    updateHash();
    return;
  }

  let regex;
  try {
    regex = new RegExp(pattern, flags);
  } catch(e) {
    countEl.className = 'match-count error';
    countEl.innerHTML = `<b>Error:</b> ${escHtml(e.message)}`;
    listEl.className = 'no-matches';
    listEl.innerHTML = 'Fix the pattern to see matches';
    backdrop.innerHTML = escHtml(test);
    replaceResult.style.display = 'none';
    return;
  }

  // Collect matches
  const matches = [];
  if (flags.includes('g')) {
    let m;
    let safety = 0;
    while ((m = regex.exec(test)) !== null && safety < 5000) {
      matches.push({ value: m[0], index: m.index, groups: [...m].slice(1), namedGroups: m.groups || {} });
      if (m[0].length === 0) regex.lastIndex++;
      safety++;
    }
  } else {
    const m = regex.exec(test);
    if (m) {
      matches.push({ value: m[0], index: m.index, groups: [...m].slice(1), namedGroups: m.groups || {} });
    }
  }

  // Count
  countEl.className = 'match-count';
  if (matches.length === 0) {
    countEl.innerHTML = '<b>0</b> matches';
  } else {
    countEl.innerHTML = `<b>${matches.length}</b> match${matches.length!==1?'es':''}`;
  }

  // Highlight
  if (matches.length === 0 || !test) {
    backdrop.innerHTML = escHtml(test);
  } else {
    let html = '';
    let lastIdx = 0;
    matches.forEach(m => {
      if (m.index >= lastIdx) {
        html += escHtml(test.slice(lastIdx, m.index));
        html += '<mark>' + escHtml(m.value) + '</mark>';
        lastIdx = m.index + m.value.length;
      }
    });
    html += escHtml(test.slice(lastIdx));
    backdrop.innerHTML = html;
  }

  // Match details
  if (matches.length === 0) {
    listEl.className = 'no-matches';
    listEl.innerHTML = 'No matches found';
  } else {
    listEl.className = '';
    listEl.innerHTML = matches.map((m, i) => {
      let groupHtml = '';
      if (m.groups.length > 0) {
        groupHtml = '<div class="match-groups">';
        m.groups.forEach((g, gi) => {
          const namedKey = Object.keys(m.namedGroups).find(k => m.namedGroups[k] === g);
          const label = namedKey ? `${namedKey} (Group ${gi+1})` : `Group ${gi+1}`;
          groupHtml += `<div class="group-row">${label}: <span>${g !== undefined ? escHtml(g) : 'undefined'}</span></div>`;
        });
        groupHtml += '</div>';
      }
      return `<div class="match-item">
        <div class="match-idx">Match ${i+1}</div>
        <div class="match-val">${escHtml(m.value)}</div>
        <div class="match-pos">Index ${m.index} &ndash; ${m.index + m.value.length} (${m.value.length} chars)</div>
        ${groupHtml}
      </div>`;
    }).join('');
  }

  // Replace
  if (replaceStr !== '') {
    try {
      const replaced = test.replace(regex, replaceStr);
      replaceResult.textContent = replaced;
      replaceResult.style.display = 'block';
    } catch(e) {
      replaceResult.textContent = 'Replace error: ' + e.message;
      replaceResult.style.display = 'block';
    }
  } else {
    replaceResult.style.display = 'none';
  }

  updateHash();
}

/* ── Scroll Sync ── */
function syncScroll() {
  const ta = document.getElementById('testArea');
  const bd = document.getElementById('highlightBackdrop');
  bd.scrollTop = ta.scrollTop;
  bd.scrollLeft = ta.scrollLeft;
}

/* ── Share via URL hash ── */
function updateHash() {
  const pattern = document.getElementById('patternInput').value;
  const flags = getFlags();
  const test = document.getElementById('testArea').value;
  if (pattern || test) {
    const data = { p: pattern, f: flags, t: test };
    try {
      history.replaceState(null, '', '#' + encodeURIComponent(JSON.stringify(data)));
    } catch(e) {}
  }
}

function loadFromHash() {
  if (!location.hash || location.hash.length < 2) return;
  try {
    const data = JSON.parse(decodeURIComponent(location.hash.slice(1)));
    if (data.p) document.getElementById('patternInput').value = data.p;
    if (data.t) document.getElementById('testArea').value = data.t;
    if (data.f) {
      document.querySelectorAll('.flag-btn').forEach(b => {
        b.classList.toggle('active', data.f.includes(b.dataset.flag));
      });
    }
    run();
  } catch(e) {}
}

function shareUrl() {
  const url = location.href;
  navigator.clipboard.writeText(url).then(() => showToast('URL copied to clipboard'));
}

/* ── Copy Replace ── */
function copyReplace() {
  const text = document.getElementById('replaceResult').textContent;
  if (!text) { showToast('Nothing to copy'); return; }
  navigator.clipboard.writeText(text).then(() => showToast('Replace result copied'));
}

/* ── Sidebar Toggle ── */
function toggleSection(h3) {
  const caret = h3.querySelector('.caret');
  const body = h3.nextElementSibling;
  const isOpen = caret.classList.contains('open');
  if (isOpen) {
    body.style.maxHeight = body.scrollHeight + 'px';
    requestAnimationFrame(() => { body.classList.add('collapsed'); body.style.maxHeight = '0'; });
  } else {
    body.classList.remove('collapsed');
    body.style.maxHeight = body.scrollHeight + 'px';
    setTimeout(() => body.style.maxHeight = 'none', 300);
  }
  caret.classList.toggle('open');
}

/* ── Utils ── */
function escHtml(s) {
  if (!s) return '';
  return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');
}

function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2000);
}

/* ── IntersectionObserver Fade-in ── */
const obs = new IntersectionObserver((entries) => {
  entries.forEach(e => { if(e.isIntersecting) { e.target.classList.add('visible'); obs.unobserve(e.target); }});
}, { threshold: 0.08 });
document.querySelectorAll('.fade-in').forEach(el => obs.observe(el));

/* ── Init ── */
loadFromHash();
</script>
<script src="/js/analytics-lite.js" defer></script>
<script src="/js/revenue.js" defer></script>
<script src="/js/lead-capture.js" defer></script>
</body>
</html>
