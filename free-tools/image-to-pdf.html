<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Free Image to PDF Converter — JPG PNG WebP to PDF | NexTool</title>
<meta name="description" content="Convert images to PDF online for free. Combine multiple JPG, PNG, WebP images into one PDF document. Drag & drop, reorder, adjust settings. No upload required.">
<meta name="keywords" content="image to pdf, jpg to pdf, png to pdf, convert image to pdf, photos to pdf, free image pdf converter, webp to pdf">
<meta property="og:title" content="Free Image to PDF Converter | NexTool">
<meta property="og:description" content="Convert JPG, PNG, WebP images to PDF instantly. Combine multiple images, reorder, adjust settings. 100% free, client-side.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://nextool.app/free-tools/image-to-pdf.html">
<meta property="og:image" content="https://nextool.app/assets/og-default.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<link rel="canonical" href="https://nextool.app/free-tools/image-to-pdf.html">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Free Image to PDF Converter | NexTool">
<meta name="twitter:description" content="Convert images to PDF online. Combine multiple images into one PDF. Free, no signup.">
<meta name="robots" content="index, follow">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"SoftwareApplication","name":"NexTool Image to PDF Converter","applicationCategory":"MultimediaApplication","operatingSystem":"Web","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"description":"Free online image to PDF converter. Combine multiple JPG, PNG, WebP images into one PDF document. 100% client-side."}
</script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--bg:#050508;--surface:#111118;--surface2:#1a1a24;--border:#2a2a3a;--text:#e4e4eb;--text2:#9494a8;--primary:#6366f1;--accent:#a855f7;--pink:#ec4899;--green:#22c55e;--red:#ef4444;--cyan:#22d3ee;--yellow:#eab308;--radius:12px;--glass:rgba(17,17,24,0.7)}
html{scroll-behavior:smooth}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;min-height:100vh;overflow-x:hidden}
/* NAV */
.nav{position:sticky;top:0;z-index:100;background:rgba(5,5,8,0.85);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:0 2rem;height:64px;display:flex;align-items:center;justify-content:space-between}
.nav-logo{font-size:1.4rem;font-weight:800;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-decoration:none}
.nav-links{display:flex;align-items:center;gap:1.5rem}
.nav-links a{color:var(--text2);text-decoration:none;font-size:.875rem;font-weight:500;transition:color .2s}
.nav-links a:hover{color:var(--text)}
.nav-cta{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff!important;padding:.5rem 1.2rem;border-radius:8px;font-weight:600;-webkit-text-fill-color:#fff!important}
.nav-cta:hover{opacity:.9}
.nav-toggle{display:none;background:none;border:none;color:var(--text);font-size:1.5rem;cursor:pointer}
/* HERO */
.hero{text-align:center;padding:3rem 1.5rem 2rem;max-width:700px;margin:0 auto}
.hero h1{font-size:2.2rem;font-weight:800;line-height:1.2;margin-bottom:.75rem}
.hero h1 span{background:linear-gradient(135deg,var(--primary),var(--accent),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{color:var(--text2);font-size:1rem}
/* TOOL */
.tool-container{max-width:1000px;margin:0 auto;padding:0 1.5rem 3rem}
/* DROP ZONE */
.drop-zone{border:2px dashed var(--border);border-radius:var(--radius);padding:3rem 2rem;text-align:center;cursor:pointer;transition:all .3s;background:var(--glass);backdrop-filter:blur(16px);margin-bottom:1.5rem}
.drop-zone:hover,.drop-zone.drag-over{border-color:var(--primary);background:rgba(99,102,241,.06)}
.drop-zone-icon{font-size:3rem;margin-bottom:.75rem;opacity:.6}
.drop-zone h3{font-size:1.1rem;font-weight:600;margin-bottom:.4rem}
.drop-zone p{color:var(--text2);font-size:.85rem}
.drop-zone input{display:none}
/* OPTIONS */
.options-bar{display:flex;flex-wrap:wrap;gap:.75rem;margin-bottom:1.5rem;align-items:center}
.option-group{display:flex;flex-direction:column;gap:.3rem}
.option-group label{font-size:.7rem;font-weight:600;color:var(--text2);text-transform:uppercase;letter-spacing:.5px}
.option-group select{background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.45rem .9rem;border-radius:8px;font-size:.8rem;font-weight:500;cursor:pointer;font-family:inherit;appearance:none;padding-right:1.8rem;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%239494a8' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right .6rem center}
/* STATUS BAR */
.status-bar{display:flex;align-items:center;gap:1rem;margin-bottom:1rem;font-size:.8rem;color:var(--text2);flex-wrap:wrap}
.status-bar .stat{display:flex;align-items:center;gap:.4rem}
.stat-num{color:var(--text);font-weight:600}
/* ACTIONS */
.actions{display:flex;gap:.5rem;margin-bottom:1.5rem;flex-wrap:wrap}
.btn{background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.5rem 1rem;border-radius:8px;font-size:.8rem;font-weight:600;cursor:pointer;transition:all .2s;font-family:inherit;display:inline-flex;align-items:center;gap:.4rem}
.btn:hover{border-color:var(--primary);background:rgba(99,102,241,.12)}
.btn:disabled{opacity:.4;cursor:not-allowed}
.btn-primary{background:linear-gradient(135deg,var(--primary),var(--accent));border-color:transparent;color:#fff}
.btn-primary:hover{opacity:.9;background:linear-gradient(135deg,var(--primary),var(--accent))}
.btn-danger{color:var(--red)}
.btn-danger:hover{border-color:var(--red);background:rgba(239,68,68,.08)}
/* IMAGE LIST */
.image-list{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:1rem;margin-bottom:1.5rem}
.image-item{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;position:relative;transition:all .2s}
.image-item:hover{border-color:var(--primary)}
.image-item.dragging{opacity:.4;border-color:var(--accent)}
.image-item.drag-target{border-color:var(--primary);box-shadow:0 0 0 2px rgba(99,102,241,.3)}
.image-thumb{width:100%;aspect-ratio:1;object-fit:cover;display:block;background:var(--surface2)}
.image-info{padding:.5rem .6rem;font-size:.7rem;color:var(--text2)}
.image-info .name{color:var(--text);font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;margin-bottom:.15rem}
.image-info .meta{display:flex;gap:.5rem}
.image-controls{position:absolute;top:.4rem;right:.4rem;display:flex;gap:.25rem;opacity:0;transition:opacity .2s}
.image-item:hover .image-controls{opacity:1}
.image-ctrl{width:26px;height:26px;border-radius:6px;background:rgba(0,0,0,.7);border:none;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:.75rem;transition:background .2s}
.image-ctrl:hover{background:var(--primary)}
.image-order{position:absolute;top:.4rem;left:.4rem;background:rgba(0,0,0,.7);color:#fff;font-size:.65rem;font-weight:700;width:22px;height:22px;border-radius:6px;display:flex;align-items:center;justify-content:center}
/* EMPTY STATE */
.empty-state{text-align:center;padding:3rem 1.5rem;color:var(--text2);font-size:.9rem}
/* PROGRESS */
.progress-bar{width:100%;height:6px;background:var(--surface2);border-radius:3px;overflow:hidden;margin-bottom:1rem;display:none}
.progress-fill{height:100%;background:linear-gradient(90deg,var(--primary),var(--accent));border-radius:3px;transition:width .3s;width:0}
/* CTA */
.cta-section{text-align:center;padding:4rem 1.5rem;max-width:700px;margin:0 auto}
.cta-section h2{font-size:1.8rem;font-weight:800;margin-bottom:.75rem}
.cta-section h2 span{background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.cta-section p{color:var(--text2);margin-bottom:1.5rem}
.cta-btn{display:inline-block;background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;padding:.75rem 2rem;border-radius:10px;font-weight:700;text-decoration:none;font-size:1rem;transition:transform .2s,box-shadow .2s}
.cta-btn:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(99,102,241,.3)}
/* FOOTER */
.footer{border-top:1px solid var(--border);padding:3rem 2rem 2rem;max-width:1200px;margin:0 auto}
.footer-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:2rem;margin-bottom:2rem}
.footer-col h4{font-size:.85rem;font-weight:700;margin-bottom:.75rem;color:var(--text)}
.footer-col a{display:block;color:var(--text2);text-decoration:none;font-size:.8rem;margin-bottom:.4rem;transition:color .2s}
.footer-col a:hover{color:var(--primary)}
.footer-bottom{text-align:center;color:var(--text2);font-size:.75rem;padding-top:1.5rem;border-top:1px solid var(--border)}
/* FADE IN */
.fade-in{opacity:0;transform:translateY(20px);transition:opacity .6s,transform .6s}
.fade-in.visible{opacity:1;transform:translateY(0)}
/* TOAST */
.toast{position:fixed;bottom:2rem;left:50%;transform:translateX(-50%) translateY(80px);background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.6rem 1.2rem;border-radius:10px;font-size:.85rem;font-weight:500;z-index:200;transition:transform .3s;pointer-events:none}
.toast.show{transform:translateX(-50%) translateY(0)}
/* RESPONSIVE */
@media(max-width:768px){
  .image-list{grid-template-columns:repeat(auto-fill,minmax(120px,1fr))}
  .nav-links{display:none;position:absolute;top:64px;left:0;right:0;background:var(--bg);border-bottom:1px solid var(--border);flex-direction:column;padding:1rem 2rem;gap:1rem}
  .nav-links.open{display:flex}
  .nav-toggle{display:block}
  .hero h1{font-size:1.6rem}
  .footer-grid{grid-template-columns:1fr}
  .options-bar{gap:.5rem}
  .drop-zone{padding:2rem 1rem}
  .image-controls{opacity:1}
}
</style>
</head>
<body>

<nav class="nav">
  <a href="/" class="nav-logo">NexTool</a>
  <button class="nav-toggle" onclick="document.querySelector('.nav-links').classList.toggle('open')" aria-label="Menu">&#9776;</button>
  <div class="nav-links">
    <a href="/">Home</a>
    <a href="/free-tools/">Tools</a>
    <a href="/free-tools/">Free Tools</a>
    <a href="/blog/">Blog</a>
    <a href="/pro.html" class="nav-cta">Get Pro — $29</a>
  </div>
</nav>

<section class="hero fade-in">
  <h1>Free <span>Image to PDF</span> Converter</h1>
  <p class="tool-summary" style="color:#94a3b8;font-size:15px;line-height:1.6;margin-bottom:24px;max-width:700px;margin-left:auto;margin-right:auto;">Convert images to PDF documents instantly in your browser. Combine multiple JPG, PNG, WebP, GIF, BMP, or SVG files into one PDF. Drag and drop, reorder pages, choose page size and orientation. 100% client-side -- your images never leave your device.</p>
</section>

<div class="tool-container fade-in">
  <!-- Drop Zone -->
  <div class="drop-zone" id="dropZone">
    <div class="drop-zone-icon">&#128444;</div>
    <h3>Drop images here or click to browse</h3>
    <p>Supports JPG, PNG, WebP, GIF, BMP, SVG</p>
    <input type="file" id="fileInput" multiple accept="image/jpeg,image/png,image/webp,image/gif,image/bmp,image/svg+xml">
  </div>

  <!-- Options -->
  <div class="options-bar">
    <div class="option-group">
      <label>Page Size</label>
      <select id="pageSize">
        <option value="a4">A4 (210 x 297 mm)</option>
        <option value="letter">Letter (8.5 x 11 in)</option>
        <option value="legal">Legal (8.5 x 14 in)</option>
        <option value="fit">Fit to Image</option>
      </select>
    </div>
    <div class="option-group">
      <label>Orientation</label>
      <select id="orientation">
        <option value="auto">Auto (per image)</option>
        <option value="portrait">Portrait</option>
        <option value="landscape">Landscape</option>
      </select>
    </div>
    <div class="option-group">
      <label>Image Quality</label>
      <select id="quality">
        <option value="high">High (0.95)</option>
        <option value="medium" selected>Medium (0.8)</option>
        <option value="low">Low (0.6)</option>
      </select>
    </div>
    <div class="option-group">
      <label>Margin</label>
      <select id="margin">
        <option value="none">None</option>
        <option value="small" selected>Small (10mm)</option>
        <option value="medium">Medium (20mm)</option>
      </select>
    </div>
  </div>

  <!-- Status Bar -->
  <div class="status-bar">
    <div class="stat"><span>Images:</span> <span class="stat-num" id="imageCount">0</span></div>
    <div class="stat"><span>Pages:</span> <span class="stat-num" id="pageCount">0</span></div>
    <div class="stat"><span>Total Size:</span> <span class="stat-num" id="totalSize">0 B</span></div>
    <div class="stat" style="margin-left:auto"><span>Est. PDF:</span> <span class="stat-num" id="estSize">--</span></div>
  </div>

  <!-- Actions -->
  <div class="actions">
    <button class="btn btn-primary" id="generateBtn" onclick="generatePDF()" disabled>
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="12" y1="18" x2="12" y2="12"/><polyline points="9 15 12 12 15 15"/></svg>
      Generate PDF
    </button>
    <button class="btn" id="addMoreBtn" onclick="document.getElementById('fileInput').click()" disabled>+ Add More</button>
    <button class="btn btn-danger" id="clearBtn" onclick="clearAll()" disabled>Clear All</button>
  </div>

  <!-- Progress -->
  <div class="progress-bar" id="progressBar">
    <div class="progress-fill" id="progressFill"></div>
  </div>

  <!-- Image List -->
  <div id="imageList" class="image-list"></div>
  <div id="emptyState" class="empty-state">No images added yet. Drop or select images above to get started.</div>
</div>

<section class="cta-section fade-in">
  <h2>Need something <span>more powerful</span>?</h2>
  <p>Let us build it for you. Custom APIs, dashboards, automations &mdash; whatever you need.</p>
  <a href="/#contact" class="cta-btn">Start a Project &rarr;</a>
</section>

<!-- Cross Promo -->
<section style="max-width:900px;margin:40px auto;padding:0 24px;">
<div style="background:linear-gradient(135deg,rgba(99,102,241,0.1),rgba(168,85,247,0.08));border:1px solid rgba(99,102,241,0.15);border-radius:20px;padding:32px 28px;text-align:center;">
<div style="font-size:13px;color:#818cf8;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Founding Member</div>
<h3 style="font-size:22px;font-weight:800;color:#fff;margin:0 0 8px;">Get NexTool Pro</h3>
<p style="color:#94a3b8;font-size:14px;margin:0 auto 20px;max-width:500px;">No banners, clean output, enhanced features on all 231+ tools. One-time payment.</p>
<div style="display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap;">
<a href="/pro.html" style="display:inline-block;padding:12px 28px;background:linear-gradient(135deg,#6366f1,#a855f7,#ec4899);color:#fff;border-radius:10px;font-weight:700;font-size:15px;text-decoration:none;">$29 — Get Pro</a>
<a href="/free-tools/" style="color:#94a3b8;font-size:14px;text-decoration:none;">Browse 231+ Free Tools &rarr;</a>
</div>
</div>
</section>

<footer class="footer fade-in">
  <div class="footer-grid">
    <div class="footer-col">
      <h4>Products</h4>
      <a href="/free-tools/">231+ Free Tools</a>
<a href="/pro.html">NexTool Pro</a>
<a href="/workspace.html">Workspace</a>
    </div>
    <div class="footer-col">
      <h4>Explore</h4>
      <a href="/free-tools/">Free Tools</a><a href="/blog/">Blog</a><a href="/pro.html">FAQ</a><a href="/pro.html">Pro — $29</a>
    </div>
    <div class="footer-col">
      <h4>Ecosystem</h4>
      <a href="/">NexTool Home</a><a href="/#contact">Contact</a><a href="https://github.com/christian140903-sudo/nextool" target="_blank">GitHub</a>
    </div>
  </div>
  <div class="footer-bottom">&copy; 2026 NexTool. AI-powered tools for everyone.</div>
</footer>

<div class="toast" id="toast"></div>

<script src="https://unpkg.com/jspdf@2.5.2/dist/jspdf.umd.min.js"></script>
<script>
const dropZone = document.getElementById('dropZone');
const fileInput = document.getElementById('fileInput');
const imageListEl = document.getElementById('imageList');
const emptyState = document.getElementById('emptyState');
const generateBtn = document.getElementById('generateBtn');
const addMoreBtn = document.getElementById('addMoreBtn');
const clearBtn = document.getElementById('clearBtn');
const progressBar = document.getElementById('progressBar');
const progressFill = document.getElementById('progressFill');
const imageCountEl = document.getElementById('imageCount');
const pageCountEl = document.getElementById('pageCount');
const totalSizeEl = document.getElementById('totalSize');
const estSizeEl = document.getElementById('estSize');

let images = []; // {file, url, width, height, name, size}
let dragSrcIndex = null;

// ---- Drop Zone ----
dropZone.addEventListener('click', () => fileInput.click());
dropZone.addEventListener('dragover', e => { e.preventDefault(); dropZone.classList.add('drag-over'); });
dropZone.addEventListener('dragleave', () => dropZone.classList.remove('drag-over'));
dropZone.addEventListener('drop', e => {
  e.preventDefault();
  dropZone.classList.remove('drag-over');
  handleFiles(e.dataTransfer.files);
});
fileInput.addEventListener('change', e => { handleFiles(e.target.files); e.target.value = ''; });

function handleFiles(files) {
  const validTypes = ['image/jpeg','image/png','image/webp','image/gif','image/bmp','image/svg+xml'];
  let added = 0;
  const promises = [];
  for (const file of files) {
    if (!validTypes.includes(file.type)) continue;
    promises.push(loadImage(file));
    added++;
  }
  if (added === 0 && files.length > 0) {
    showToast('No supported image files found');
    return;
  }
  Promise.all(promises).then(newImgs => {
    images = images.concat(newImgs);
    updateUI();
    showToast(added + ' image' + (added !== 1 ? 's' : '') + ' added');
  });
}

function loadImage(file) {
  return new Promise((resolve) => {
    const url = URL.createObjectURL(file);
    const img = new Image();
    img.onload = () => {
      resolve({ file, url, width: img.naturalWidth, height: img.naturalHeight, name: file.name, size: file.size });
    };
    img.onerror = () => {
      resolve({ file, url, width: 800, height: 600, name: file.name, size: file.size });
    };
    img.src = url;
  });
}

// ---- UI Update ----
function updateUI() {
  const hasImages = images.length > 0;
  emptyState.style.display = hasImages ? 'none' : '';
  generateBtn.disabled = !hasImages;
  addMoreBtn.disabled = !hasImages;
  clearBtn.disabled = !hasImages;

  imageCountEl.textContent = images.length;
  pageCountEl.textContent = images.length;
  totalSizeEl.textContent = formatBytes(images.reduce((s, i) => s + i.size, 0));

  // Estimate PDF size (rough: quality-adjusted image data + overhead)
  const qualityMap = { high: 0.95, medium: 0.8, low: 0.6 };
  const q = qualityMap[document.getElementById('quality').value] || 0.8;
  const rawTotal = images.reduce((s, i) => s + i.size, 0);
  const est = Math.round(rawTotal * q * 0.85);
  estSizeEl.textContent = est > 0 ? '~' + formatBytes(est) : '--';

  renderImageList();
}

function renderImageList() {
  imageListEl.innerHTML = '';
  images.forEach((img, idx) => {
    const div = document.createElement('div');
    div.className = 'image-item';
    div.draggable = true;
    div.dataset.index = idx;

    div.innerHTML = `
      <span class="image-order">${idx + 1}</span>
      <img class="image-thumb" src="${img.url}" alt="${escapeHtml(img.name)}" loading="lazy">
      <div class="image-info">
        <span class="name" title="${escapeHtml(img.name)}">${escapeHtml(img.name)}</span>
        <div class="meta">
          <span>${img.width}x${img.height}</span>
          <span>${formatBytes(img.size)}</span>
        </div>
      </div>
      <div class="image-controls">
        <button class="image-ctrl" onclick="moveImage(${idx},-1)" title="Move up" ${idx === 0 ? 'disabled' : ''}>&#9650;</button>
        <button class="image-ctrl" onclick="moveImage(${idx},1)" title="Move down" ${idx === images.length - 1 ? 'disabled' : ''}>&#9660;</button>
        <button class="image-ctrl" onclick="removeImage(${idx})" title="Remove" style="color:var(--red)">&#10005;</button>
      </div>
    `;

    // Drag & drop reorder
    div.addEventListener('dragstart', e => {
      dragSrcIndex = idx;
      div.classList.add('dragging');
      e.dataTransfer.effectAllowed = 'move';
    });
    div.addEventListener('dragend', () => {
      div.classList.remove('dragging');
      dragSrcIndex = null;
      document.querySelectorAll('.image-item').forEach(el => el.classList.remove('drag-target'));
    });
    div.addEventListener('dragover', e => {
      e.preventDefault();
      e.dataTransfer.dropEffect = 'move';
      if (dragSrcIndex !== null && dragSrcIndex !== idx) {
        div.classList.add('drag-target');
      }
    });
    div.addEventListener('dragleave', () => div.classList.remove('drag-target'));
    div.addEventListener('drop', e => {
      e.preventDefault();
      div.classList.remove('drag-target');
      if (dragSrcIndex !== null && dragSrcIndex !== idx) {
        const moved = images.splice(dragSrcIndex, 1)[0];
        images.splice(idx, 0, moved);
        dragSrcIndex = null;
        updateUI();
      }
    });

    imageListEl.appendChild(div);
  });
}

function moveImage(idx, dir) {
  const newIdx = idx + dir;
  if (newIdx < 0 || newIdx >= images.length) return;
  const temp = images[idx];
  images[idx] = images[newIdx];
  images[newIdx] = temp;
  updateUI();
}

function removeImage(idx) {
  URL.revokeObjectURL(images[idx].url);
  images.splice(idx, 1);
  updateUI();
}

function clearAll() {
  images.forEach(img => URL.revokeObjectURL(img.url));
  images = [];
  updateUI();
  showToast('All images cleared');
}

// ---- PDF Generation ----
async function generatePDF() {
  if (images.length === 0) return;

  const { jsPDF } = window.jspdf;
  const pageSizeVal = document.getElementById('pageSize').value;
  const orientationVal = document.getElementById('orientation').value;
  const qualityVal = document.getElementById('quality').value;
  const marginVal = document.getElementById('margin').value;

  const qualityMap = { high: 0.95, medium: 0.80, low: 0.60 };
  const jpegQuality = qualityMap[qualityVal] || 0.8;

  const marginMap = { none: 0, small: 10, medium: 20 };
  const marginMM = marginMap[marginVal] || 0;

  // Page dimensions in mm
  const pageSizes = {
    a4: [210, 297],
    letter: [215.9, 279.4],
    legal: [215.9, 355.6]
  };

  progressBar.style.display = 'block';
  progressFill.style.width = '0%';
  generateBtn.disabled = true;
  generateBtn.textContent = 'Generating...';

  try {
    let pdf = null;

    for (let i = 0; i < images.length; i++) {
      const img = images[i];
      const progress = ((i + 1) / images.length * 100).toFixed(0);
      progressFill.style.width = progress + '%';

      // Load image data as base64
      const imgData = await getImageData(img, jpegQuality);

      // Determine orientation for this page
      let orient = orientationVal;
      if (orient === 'auto') {
        orient = img.width > img.height ? 'landscape' : 'portrait';
      }

      let pageW, pageH;
      if (pageSizeVal === 'fit') {
        // Convert pixels to mm at 96 DPI
        const pxToMm = 25.4 / 96;
        pageW = img.width * pxToMm;
        pageH = img.height * pxToMm;
        // Ensure minimum reasonable size
        if (pageW < 50) { const scale = 50 / pageW; pageW *= scale; pageH *= scale; }
        if (pageH < 50) { const scale = 50 / pageH; pageW *= scale; pageH *= scale; }
      } else {
        const dims = pageSizes[pageSizeVal];
        if (orient === 'landscape') {
          pageW = Math.max(dims[0], dims[1]);
          pageH = Math.min(dims[0], dims[1]);
        } else {
          pageW = Math.min(dims[0], dims[1]);
          pageH = Math.max(dims[0], dims[1]);
        }
      }

      if (i === 0) {
        pdf = new jsPDF({
          orientation: orient === 'landscape' ? 'l' : 'p',
          unit: 'mm',
          format: pageSizeVal === 'fit' ? [pageW, pageH] : pageSizeVal
        });
        // Override the first page dimensions if needed
        if (pageSizeVal === 'fit') {
          // Already set by format
        }
      } else {
        if (pageSizeVal === 'fit') {
          pdf.addPage([pageW, pageH], orient === 'landscape' ? 'l' : 'p');
        } else {
          pdf.addPage(pageSizeVal, orient === 'landscape' ? 'l' : 'p');
        }
      }

      // Get actual page dimensions (jsPDF may adjust)
      const actualW = pdf.internal.pageSize.getWidth();
      const actualH = pdf.internal.pageSize.getHeight();

      // Calculate image placement with margin
      const availW = actualW - (marginMM * 2);
      const availH = actualH - (marginMM * 2);

      if (pageSizeVal === 'fit' && marginMM === 0) {
        // Fill entire page
        pdf.addImage(imgData.data, imgData.format, 0, 0, actualW, actualH, undefined, 'FAST');
      } else {
        // Scale to fit within available area, maintaining aspect ratio
        const imgRatio = img.width / img.height;
        const areaRatio = availW / availH;

        let drawW, drawH;
        if (imgRatio > areaRatio) {
          drawW = availW;
          drawH = availW / imgRatio;
        } else {
          drawH = availH;
          drawW = availH * imgRatio;
        }

        // Center on page
        const x = marginMM + (availW - drawW) / 2;
        const y = marginMM + (availH - drawH) / 2;

        pdf.addImage(imgData.data, imgData.format, x, y, drawW, drawH, undefined, 'FAST');
      }
    }

    // Download
    const filename = images.length === 1
      ? images[0].name.replace(/\.[^.]+$/, '') + '.pdf'
      : 'images-combined.pdf';
    pdf.save(filename);
    showToast('PDF downloaded: ' + filename);

  } catch (err) {
    console.error('PDF generation error:', err);
    showToast('Error generating PDF: ' + err.message);
  } finally {
    progressBar.style.display = 'none';
    progressFill.style.width = '0%';
    generateBtn.disabled = false;
    generateBtn.innerHTML = '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="12" y1="18" x2="12" y2="12"/><polyline points="9 15 12 12 15 15"/></svg> Generate PDF';
  }
}

function getImageData(img, quality) {
  return new Promise((resolve, reject) => {
    const image = new Image();
    image.crossOrigin = 'anonymous';
    image.onload = () => {
      const canvas = document.createElement('canvas');
      canvas.width = image.naturalWidth;
      canvas.height = image.naturalHeight;
      const ctx = canvas.getContext('2d');
      ctx.drawImage(image, 0, 0);

      // Use JPEG for photos (smaller), PNG for images with transparency
      const isPng = img.file.type === 'image/png' || img.file.type === 'image/svg+xml';
      let format, dataUrl;

      if (isPng && quality >= 0.9) {
        // Keep PNG for high quality + PNG/SVG source
        dataUrl = canvas.toDataURL('image/png');
        format = 'PNG';
      } else {
        dataUrl = canvas.toDataURL('image/jpeg', quality);
        format = 'JPEG';
      }

      resolve({ data: dataUrl, format });
    };
    image.onerror = () => reject(new Error('Failed to load image: ' + img.name));
    image.src = img.url;
  });
}

// ---- Utilities ----
function formatBytes(bytes) {
  if (bytes === 0) return '0 B';
  const k = 1024, sizes = ['B', 'KB', 'MB', 'GB'];
  const i = Math.floor(Math.log(bytes) / Math.log(k));
  return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
}

function escapeHtml(s) {
  return s.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
}

function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2500);
}

// Update estimates when options change
document.getElementById('quality').addEventListener('change', updateUI);

// IntersectionObserver fade-in
const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('visible'); observer.unobserve(entry.target); }});
}, { threshold: 0.1 });
document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));
</script>
<script src="/js/analytics-lite.js" defer></script>
<script src="/js/revenue.js" defer></script>
<script src="/js/lead-capture.js" defer></script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "How do I convert images to PDF?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Simply drag and drop your images (JPG, PNG, WebP, GIF, BMP, SVG) into the upload area, choose your preferred page size and orientation, then click Generate PDF. Your images will be combined into a single PDF document that downloads automatically."
      }
    },
    {
      "@type": "Question",
      "name": "Is this image to PDF converter free?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, NexTool's Image to PDF Converter is completely free. No signup, no watermarks, no file limits. Everything runs in your browser so your images never leave your device."
      }
    },
    {
      "@type": "Question",
      "name": "Can I combine multiple images into one PDF?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, you can add as many images as you want. Each image becomes its own page in the PDF. You can reorder them by dragging and dropping or using the up/down arrows before generating."
      }
    },
    {
      "@type": "Question",
      "name": "What image formats are supported?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "The converter supports JPEG, PNG, WebP, GIF, BMP, and SVG image formats. All common photo and graphics formats are covered."
      }
    }
  ]
}
</script>
</body>
</html>