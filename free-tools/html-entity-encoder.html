<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>HTML Entity Encoder/Decoder — Free Online Tool | NexTool</title>
<meta name="description" content="Encode text to HTML entities or decode HTML entities back to readable text. Supports named entities, numeric entities, and bulk conversion. Free, instant, no signup.">
<meta name="keywords" content="html entity encoder, html entity decoder, html entities, encode html, decode html, html special characters, free tool">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://nextool.app/free-tools/html-entity-encoder.html">
<meta property="og:type" content="website">
<meta property="og:url" content="https://nextool.app/free-tools/html-entity-encoder.html">
<meta property="og:title" content="HTML Entity Encoder/Decoder — Free Online Tool | NexTool">
<meta property="og:description" content="Encode text to HTML entities or decode HTML entities back to readable text. Supports named, numeric, and hex entities.">
<meta property="og:image" content="https://nextool.app/assets/og/html-entity-encoder.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="HTML Entity Encoder/Decoder — Free Online Tool | NexTool">
<meta name="twitter:description" content="Encode text to HTML entities or decode HTML entities back to readable text. Supports named, numeric, and hex entities.">
<meta name="twitter:image" content="https://nextool.app/assets/og/html-entity-encoder.png">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"BreadcrumbList",
  "itemListElement":[
    {"@type":"ListItem","position":1,"name":"Home","item":"https://nextool.app/"},
    {"@type":"ListItem","position":2,"name":"Free Tools","item":"https://nextool.app/free-tools/"},
    {"@type":"ListItem","position":3,"name":"HTML Entity Encoder/Decoder","item":"https://nextool.app/free-tools/html-entity-encoder.html"}
  ]
}
</script>
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"FAQPage",
  "mainEntity":[
    {
      "@type":"Question",
      "name":"What are HTML entities?",
      "acceptedAnswer":{"@type":"Answer","text":"HTML entities are special codes used to represent characters that have special meaning in HTML (like < > & \") or characters that are difficult to type. They start with & and end with ;. For example, &amp; represents &, &lt; represents <, and &gt; represents >."}
    },
    {
      "@type":"Question",
      "name":"What is the difference between named and numeric entities?",
      "acceptedAnswer":{"@type":"Answer","text":"Named entities use a descriptive name (like &amp; for &), while numeric entities use a number preceded by # (like &#38; for &). Hex entities use #x followed by a hex number (like &#x26; for &). All three forms are valid HTML."}
    },
    {
      "@type":"Question",
      "name":"When should I encode HTML entities?",
      "acceptedAnswer":{"@type":"Answer","text":"You should encode HTML entities when displaying user-generated content to prevent XSS attacks, when including special characters in HTML attributes, or when you need to display HTML code as text on a webpage."}
    },
    {
      "@type":"Question",
      "name":"Is this tool free to use?",
      "acceptedAnswer":{"@type":"Answer","text":"Yes, this HTML Entity Encoder/Decoder is completely free with no limits. All processing happens in your browser — no data is sent to any server."}
    }
  ]
}
</script>
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#050508;--surface:#111118;--surface2:#1a1a24;
  --primary:#6366f1;--accent:#a855f7;
  --text:#e2e8f0;--text2:#94a3b8;--text3:#64748b;
  --border:rgba(255,255,255,0.06);--border2:rgba(255,255,255,0.1);
  --radius:16px;--radius-sm:10px;
  --glow:0 0 20px rgba(99,102,241,0.15);
}
html{scroll-behavior:smooth}
body{font-family:'Inter',system-ui,-apple-system,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;min-height:100vh;-webkit-font-smoothing:antialiased}
a{color:var(--primary);text-decoration:none;transition:color .2s}
a:hover{color:var(--accent)}

/* NAV */
nav{position:sticky;top:0;z-index:100;background:rgba(5,5,8,0.85);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:0 24px}
.nav-inner{max-width:1100px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;height:60px}
.nav-logo{font-size:20px;font-weight:800;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;letter-spacing:-0.5px}
.nav-links{display:flex;gap:24px;align-items:center}
.nav-links a{color:var(--text2);font-size:14px;font-weight:500;transition:color .2s}
.nav-links a:hover{color:#fff}
.nav-badge{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;font-size:11px;font-weight:700;padding:4px 10px;border-radius:20px}

/* HERO */
.hero{text-align:center;padding:60px 24px 40px;max-width:750px;margin:0 auto}
.hero-badge{display:inline-block;background:rgba(99,102,241,0.1);border:1px solid rgba(99,102,241,0.2);color:var(--primary);font-size:12px;font-weight:600;padding:6px 16px;border-radius:20px;margin-bottom:16px;text-transform:uppercase;letter-spacing:1px}
.hero h1{font-size:clamp(28px,5vw,44px);font-weight:900;line-height:1.15;margin-bottom:12px;background:linear-gradient(135deg,#fff 40%,var(--text2));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{color:var(--text2);font-size:17px;max-width:560px;margin:0 auto}

/* TOOL CONTAINER */
.tool-wrap{max-width:1000px;margin:0 auto;padding:0 24px 40px}
.tool-card{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:28px;margin-bottom:20px}
.tool-card h2{font-size:16px;font-weight:700;margin-bottom:16px;color:#fff}

/* MODE TOGGLE */
.mode-toggle{display:flex;background:var(--bg);border-radius:var(--radius-sm);padding:4px;margin-bottom:20px;border:1px solid var(--border)}
.mode-btn{flex:1;padding:10px;text-align:center;font-size:14px;font-weight:600;color:var(--text2);cursor:pointer;border-radius:8px;transition:all .25s;border:none;background:none;font-family:inherit}
.mode-btn.active{background:var(--primary);color:#fff;box-shadow:var(--glow)}

/* TEXTAREA */
.textarea-wrap{position:relative;margin-bottom:16px}
.textarea-wrap label{display:block;font-size:13px;font-weight:600;color:var(--text2);margin-bottom:8px;text-transform:uppercase;letter-spacing:0.5px}
textarea{width:100%;min-height:160px;background:var(--bg);border:1px solid var(--border2);border-radius:var(--radius-sm);padding:16px;color:var(--text);font-family:'Inter',monospace;font-size:14px;line-height:1.6;resize:vertical;transition:border-color .2s}
textarea:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(99,102,241,0.15)}
textarea::placeholder{color:var(--text3)}

/* BUTTONS */
.btn-row{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:16px}
.btn{display:inline-flex;align-items:center;gap:8px;padding:10px 20px;border-radius:var(--radius-sm);font-size:14px;font-weight:600;cursor:pointer;border:none;transition:all .2s;font-family:inherit}
.btn-primary{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff}
.btn-primary:hover{transform:translateY(-1px);box-shadow:0 4px 20px rgba(99,102,241,0.3)}
.btn-secondary{background:var(--surface2);color:var(--text);border:1px solid var(--border2)}
.btn-secondary:hover{border-color:var(--primary);color:#fff}
.btn-icon{background:var(--surface2);color:var(--text2);border:1px solid var(--border);width:40px;height:40px;display:inline-flex;align-items:center;justify-content:center;border-radius:var(--radius-sm);cursor:pointer;transition:all .2s;font-size:16px}
.btn-icon:hover{border-color:var(--primary);color:#fff}

/* SWAP */
.swap-row{display:flex;justify-content:center;margin:8px 0}
.swap-btn{background:var(--surface2);border:1px solid var(--border2);color:var(--primary);width:44px;height:44px;border-radius:50%;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .3s;font-size:20px}
.swap-btn:hover{transform:rotate(180deg);border-color:var(--primary);box-shadow:var(--glow)}

/* OPTIONS */
.options-row{display:flex;gap:16px;flex-wrap:wrap;margin-bottom:16px}
.option-group{display:flex;align-items:center;gap:8px}
.option-group label{font-size:13px;color:var(--text2);font-weight:500}
select{background:var(--bg);border:1px solid var(--border2);color:var(--text);padding:8px 12px;border-radius:8px;font-size:13px;font-family:inherit;cursor:pointer}
select:focus{outline:none;border-color:var(--primary)}

/* OUTPUT */
.output-box{background:var(--bg);border:1px solid var(--border);border-radius:var(--radius-sm);padding:16px;min-height:100px;font-family:'Inter',monospace;font-size:14px;line-height:1.6;white-space:pre-wrap;word-break:break-all;color:var(--text);position:relative;max-height:400px;overflow-y:auto}
.output-box:empty::before{content:'Output will appear here...';color:var(--text3)}

/* ENTITY TABLE */
.entity-table-wrap{max-height:400px;overflow-y:auto;border-radius:var(--radius-sm)}
.entity-table{width:100%;border-collapse:collapse;font-size:13px}
.entity-table th{position:sticky;top:0;background:var(--surface2);color:var(--text2);font-weight:600;text-align:left;padding:10px 14px;border-bottom:1px solid var(--border);text-transform:uppercase;font-size:11px;letter-spacing:0.5px}
.entity-table td{padding:8px 14px;border-bottom:1px solid var(--border);color:var(--text);font-family:'Inter',monospace}
.entity-table tr:hover td{background:rgba(99,102,241,0.04)}
.entity-char{font-size:18px;text-align:center}

/* STATS */
.stats-bar{display:flex;gap:20px;padding:12px 0;border-top:1px solid var(--border);margin-top:12px}
.stat{font-size:12px;color:var(--text3)}
.stat span{color:var(--primary);font-weight:700}

/* TOAST */
.toast{position:fixed;bottom:24px;left:50%;transform:translateX(-50%) translateY(100px);background:var(--surface2);color:#fff;padding:12px 24px;border-radius:var(--radius-sm);font-size:14px;font-weight:600;border:1px solid var(--border2);z-index:999;transition:transform .3s cubic-bezier(.4,0,.2,1);pointer-events:none}
.toast.show{transform:translateX(-50%) translateY(0)}

/* FOOTER */
footer{border-top:1px solid var(--border);padding:40px 24px;text-align:center;margin-top:40px}
.footer-links{display:flex;gap:24px;justify-content:center;flex-wrap:wrap;margin-bottom:16px}
.footer-links a{color:var(--text3);font-size:14px;font-weight:500}
.footer-links a:hover{color:var(--primary)}
.footer-copy{color:var(--text3);font-size:13px}

/* RESPONSIVE */
@media(max-width:640px){
  .nav-links a:not(.nav-badge){display:none}
  .hero{padding:40px 20px 28px}
  .tool-card{padding:20px}
  .btn-row{flex-direction:column}
  .btn{justify-content:center}
  .options-row{flex-direction:column;gap:10px}
  .stats-bar{flex-wrap:wrap;gap:12px}
  .entity-table{font-size:12px}
}
</style>
</head>
<body>

<!-- NAV -->
<nav>
  <div class="nav-inner">
    <a href="/" class="nav-logo">NexTool</a>
    <div class="nav-links">
      <a href="/free-tools/">Free Tools</a>
      <a href="/products/">Products</a>
      <a href="/blog/">Blog</a>
      <a href="/products/ultimate-bundle.html" class="nav-badge">Get Bundle</a>
    </div>
  </div>
</nav>

<!-- HERO -->
<section class="hero">
  <div class="hero-badge">Free Tool</div>
  <h1>HTML Entity Encoder &amp; Decoder</h1>
  <p>Encode text to HTML entities or decode entities back to readable text. Supports named, numeric, and hex entities with real-time preview.</p>
</section>

<!-- TOOL -->
<div class="tool-wrap">

  <!-- MODE -->
  <div class="tool-card">
    <div class="mode-toggle" id="modeToggle">
      <button class="mode-btn active" data-mode="encode" onclick="setMode('encode')">Encode</button>
      <button class="mode-btn" data-mode="decode" onclick="setMode('decode')">Decode</button>
    </div>

    <!-- OPTIONS -->
    <div class="options-row">
      <div class="option-group">
        <label for="encodeType">Entity type:</label>
        <select id="encodeType" onchange="processInput()">
          <option value="named">Named (&amp;amp;)</option>
          <option value="decimal">Decimal (&amp;#38;)</option>
          <option value="hex">Hex (&amp;#x26;)</option>
          <option value="all-decimal">Encode All (Decimal)</option>
          <option value="all-hex">Encode All (Hex)</option>
        </select>
      </div>
      <div class="option-group">
        <label>
          <input type="checkbox" id="realtime" checked onchange="processInput()">
          Real-time
        </label>
      </div>
    </div>

    <!-- INPUT -->
    <div class="textarea-wrap">
      <label id="inputLabel">Text to encode</label>
      <textarea id="inputArea" placeholder="Paste your text or HTML entities here..." oninput="if(document.getElementById('realtime').checked) processInput()"></textarea>
    </div>

    <!-- SWAP -->
    <div class="swap-row">
      <button class="swap-btn" onclick="swapFields()" title="Swap input and output">&#8645;</button>
    </div>

    <!-- OUTPUT -->
    <div class="textarea-wrap">
      <label id="outputLabel">Encoded output</label>
      <div class="output-box" id="outputArea"></div>
    </div>

    <!-- BUTTONS -->
    <div class="btn-row">
      <button class="btn btn-primary" onclick="processInput()">
        <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
        <span id="actionLabel">Encode</span>
      </button>
      <button class="btn btn-secondary" onclick="copyOutput()">
        <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/></svg>
        Copy
      </button>
      <button class="btn btn-secondary" onclick="clearAll()">
        <svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"/></svg>
        Clear
      </button>
    </div>

    <!-- STATS -->
    <div class="stats-bar">
      <div class="stat">Input: <span id="statInputChars">0</span> chars</div>
      <div class="stat">Output: <span id="statOutputChars">0</span> chars</div>
      <div class="stat">Entities: <span id="statEntities">0</span></div>
    </div>
  </div>

  <!-- ENTITY REFERENCE -->
  <div class="tool-card">
    <h2>Common HTML Entity Reference</h2>
    <div class="entity-table-wrap">
      <table class="entity-table" id="entityTable">
        <thead>
          <tr><th>Character</th><th>Named</th><th>Decimal</th><th>Hex</th><th>Description</th></tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

</div>

<!-- BUNDLE PROMO -->
<section style="max-width:900px;margin:40px auto;padding:0 24px;">
<div style="background:linear-gradient(135deg,rgba(99,102,241,0.1),rgba(168,85,247,0.08));border:1px solid rgba(99,102,241,0.15);border-radius:20px;padding:32px 28px;text-align:center;">
<div style="font-size:13px;color:#818cf8;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Save 37%</div>
<h3 style="font-size:22px;font-weight:800;color:#fff;margin:0 0 8px;">Get the Ultimate Bundle</h3>
<p style="color:#94a3b8;font-size:14px;margin:0 auto 20px;max-width:500px;">Website Kit + Automation Bundle + Content Toolkit — everything you need to launch.</p>
<a href="/products/ultimate-bundle.html" style="display:inline-block;padding:12px 28px;background:linear-gradient(135deg,#6366f1,#a855f7);color:#fff;text-decoration:none;border-radius:12px;font-weight:700;font-size:15px;">$39 — Get Bundle</a>
<a href="/free-tools/" style="display:inline-block;margin-left:12px;color:#818cf8;text-decoration:none;font-size:14px;">Browse 59+ Free Tools &rarr;</a>
</div>
</section>

<!-- FOOTER -->
<footer>
  <div class="footer-links">
    <a href="/">Home</a>
    <a href="/free-tools/">Free Tools</a>
    <a href="/products/">Products</a>
    <a href="/blog/">Blog</a>
  </div>
  <p class="footer-copy">&copy; 2026 NexTool. All rights reserved.</p>
</footer>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<script>
// ── State ──
let currentMode = 'encode';

// ── Named entity maps ──
const charToEntity = {
  '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&apos;',
  '\u00A0':'&nbsp;','\u00A9':'&copy;','\u00AE':'&reg;','\u2122':'&trade;',
  '\u00D7':'&times;','\u00F7':'&divide;','\u2013':'&ndash;','\u2014':'&mdash;',
  '\u2018':'&lsquo;','\u2019':'&rsquo;','\u201C':'&ldquo;','\u201D':'&rdquo;',
  '\u2026':'&hellip;','\u00AB':'&laquo;','\u00BB':'&raquo;','\u00B0':'&deg;',
  '\u00B1':'&plusmn;','\u00B2':'&sup2;','\u00B3':'&sup3;','\u00BC':'&frac14;',
  '\u00BD':'&frac12;','\u00BE':'&frac34;','\u00BF':'&iquest;','\u00A1':'&iexcl;',
  '\u00A2':'&cent;','\u00A3':'&pound;','\u00A5':'&yen;','\u20AC':'&euro;',
  '\u00A7':'&sect;','\u00B6':'&para;','\u00B7':'&middot;','\u2022':'&bull;',
  '\u2190':'&larr;','\u2192':'&rarr;','\u2191':'&uarr;','\u2193':'&darr;',
  '\u2260':'&ne;','\u2264':'&le;','\u2265':'&ge;','\u221E':'&infin;',
};

const entityToChar = {};
for (const [ch, ent] of Object.entries(charToEntity)) entityToChar[ent] = ch;

// ── Reference table data ──
const refEntities = [
  ['&','&amp;','&#38;','&#x26;','Ampersand'],
  ['<','&lt;','&#60;','&#x3C;','Less than'],
  ['>','&gt;','&#62;','&#x3E;','Greater than'],
  ['"','&quot;','&#34;','&#x22;','Double quote'],
  ["'",'&apos;','&#39;','&#x27;','Single quote / Apostrophe'],
  ['\u00A0','&nbsp;','&#160;','&#xA0;','Non-breaking space'],
  ['\u00A9','&copy;','&#169;','&#xA9;','Copyright'],
  ['\u00AE','&reg;','&#174;','&#xAE;','Registered'],
  ['\u2122','&trade;','&#8482;','&#x2122;','Trademark'],
  ['\u20AC','&euro;','&#8364;','&#x20AC;','Euro sign'],
  ['\u00A3','&pound;','&#163;','&#xA3;','Pound sign'],
  ['\u00A5','&yen;','&#165;','&#xA5;','Yen sign'],
  ['\u00A2','&cent;','&#162;','&#xA2;','Cent sign'],
  ['\u00D7','&times;','&#215;','&#xD7;','Multiplication'],
  ['\u00F7','&divide;','&#247;','&#xF7;','Division'],
  ['\u00B0','&deg;','&#176;','&#xB0;','Degree'],
  ['\u00B1','&plusmn;','&#177;','&#xB1;','Plus-minus'],
  ['\u2013','&ndash;','&#8211;','&#x2013;','En dash'],
  ['\u2014','&mdash;','&#8212;','&#x2014;','Em dash'],
  ['\u2018','&lsquo;','&#8216;','&#x2018;','Left single quote'],
  ['\u2019','&rsquo;','&#8217;','&#x2019;','Right single quote'],
  ['\u201C','&ldquo;','&#8220;','&#x201C;','Left double quote'],
  ['\u201D','&rdquo;','&#8221;','&#x201D;','Right double quote'],
  ['\u2026','&hellip;','&#8230;','&#x2026;','Ellipsis'],
  ['\u00AB','&laquo;','&#171;','&#xAB;','Left guillemet'],
  ['\u00BB','&raquo;','&#187;','&#xBB;','Right guillemet'],
  ['\u2190','&larr;','&#8592;','&#x2190;','Left arrow'],
  ['\u2192','&rarr;','&#8594;','&#x2192;','Right arrow'],
  ['\u2191','&uarr;','&#8593;','&#x2191;','Up arrow'],
  ['\u2193','&darr;','&#8595;','&#x2193;','Down arrow'],
  ['\u221E','&infin;','&#8734;','&#x221E;','Infinity'],
  ['\u2022','&bull;','&#8226;','&#x2022;','Bullet'],
  ['\u00A7','&sect;','&#167;','&#xA7;','Section'],
  ['\u00B6','&para;','&#182;','&#xB6;','Pilcrow / Paragraph'],
];

// ── Build reference table ──
(function buildTable() {
  const tbody = document.querySelector('#entityTable tbody');
  let html = '';
  for (const [ch, named, dec, hex, desc] of refEntities) {
    const safe = ch === '<' ? '&lt;' : ch === '>' ? '&gt;' : ch === '&' ? '&amp;' : ch === '"' ? '&quot;' : ch;
    html += `<tr><td class="entity-char">${safe}</td><td>${named.replace(/&/g,'&amp;')}</td><td>${dec.replace(/&/g,'&amp;')}</td><td>${hex.replace(/&/g,'&amp;')}</td><td>${desc}</td></tr>`;
  }
  tbody.innerHTML = html;
})();

// ── Mode switching ──
function setMode(mode) {
  currentMode = mode;
  document.querySelectorAll('.mode-btn').forEach(b => b.classList.toggle('active', b.dataset.mode === mode));
  document.getElementById('inputLabel').textContent = mode === 'encode' ? 'Text to encode' : 'Entities to decode';
  document.getElementById('outputLabel').textContent = mode === 'encode' ? 'Encoded output' : 'Decoded output';
  document.getElementById('actionLabel').textContent = mode === 'encode' ? 'Encode' : 'Decode';
  document.getElementById('encodeType').closest('.option-group').style.display = mode === 'encode' ? '' : 'none';
  processInput();
}

// ── Encode ──
function encodeText(text, type) {
  let result = '';
  let entityCount = 0;
  for (const ch of text) {
    const code = ch.codePointAt(0);
    if (type === 'named' && charToEntity[ch]) {
      result += charToEntity[ch];
      entityCount++;
    } else if (type === 'decimal' && charToEntity[ch]) {
      result += '&#' + code + ';';
      entityCount++;
    } else if (type === 'hex' && charToEntity[ch]) {
      result += '&#x' + code.toString(16).toUpperCase() + ';';
      entityCount++;
    } else if (type === 'all-decimal') {
      result += '&#' + code + ';';
      entityCount++;
    } else if (type === 'all-hex') {
      result += '&#x' + code.toString(16).toUpperCase() + ';';
      entityCount++;
    } else {
      result += ch;
    }
  }
  return { result, entityCount };
}

// ── Decode ──
function decodeEntities(text) {
  let entityCount = 0;
  // Named entities
  let result = text.replace(/&([a-zA-Z][a-zA-Z0-9]*);/g, (match) => {
    if (entityToChar[match] !== undefined) {
      entityCount++;
      return entityToChar[match];
    }
    // Use browser's built-in decoder for others
    const el = document.createElement('textarea');
    el.innerHTML = match;
    if (el.value !== match) entityCount++;
    return el.value;
  });
  // Numeric decimal
  result = result.replace(/&#(\d+);/g, (match, num) => {
    entityCount++;
    return String.fromCodePoint(parseInt(num, 10));
  });
  // Numeric hex
  result = result.replace(/&#x([0-9a-fA-F]+);/g, (match, hex) => {
    entityCount++;
    return String.fromCodePoint(parseInt(hex, 16));
  });
  return { result, entityCount };
}

// ── Process ──
function processInput() {
  const input = document.getElementById('inputArea').value;
  const type = document.getElementById('encodeType').value;
  let output, entityCount;
  if (currentMode === 'encode') {
    const r = encodeText(input, type);
    output = r.result;
    entityCount = r.entityCount;
  } else {
    const r = decodeEntities(input);
    output = r.result;
    entityCount = r.entityCount;
  }
  document.getElementById('outputArea').textContent = output;
  document.getElementById('statInputChars').textContent = input.length;
  document.getElementById('statOutputChars').textContent = output.length;
  document.getElementById('statEntities').textContent = entityCount;
}

// ── Swap ──
function swapFields() {
  const inputEl = document.getElementById('inputArea');
  const outputEl = document.getElementById('outputArea');
  const outputText = outputEl.textContent;
  inputEl.value = outputText;
  // Toggle mode
  setMode(currentMode === 'encode' ? 'decode' : 'encode');
}

// ── Copy ──
function copyOutput() {
  const text = document.getElementById('outputArea').textContent;
  if (!text) return showToast('Nothing to copy');
  navigator.clipboard.writeText(text).then(() => showToast('Copied to clipboard!'));
}

// ── Clear ──
function clearAll() {
  document.getElementById('inputArea').value = '';
  document.getElementById('outputArea').textContent = '';
  document.getElementById('statInputChars').textContent = '0';
  document.getElementById('statOutputChars').textContent = '0';
  document.getElementById('statEntities').textContent = '0';
}

// ── Toast ──
function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2000);
}

// Init
setMode('encode');
</script>

<script defer src="/assets/js/revenue.js"></script>
<script defer src="/assets/js/lead-capture.js"></script>
<script defer src="/assets/js/analytics-lite.js"></script>
</body>
</html>
