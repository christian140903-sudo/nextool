<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Free Icon Generator — Create App Icons from Text | NexTool</title>
<meta name="description" content="Generate app icons from text, emoji, or initials. Multiple shapes, gradients, and sizes. Download as PNG or ZIP. Favicon and Apple Touch Icon ready. Free online tool.">
<meta name="keywords" content="icon generator, favicon generator, app icon maker, icon from text, emoji icon, free icon tool, NexTool">
<meta name="robots" content="index, follow">
<meta property="og:title" content="Free Icon Generator — App Icons from Text | NexTool">
<meta property="og:description" content="Create beautiful app icons from text, emoji, or initials. Multiple shapes and sizes. Download PNG or ZIP. 100% free.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://nextool.app/free-tools/icon-generator.html">
<meta property="og:image" content="https://nextool.app/assets/og-default.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<link rel="canonical" href="https://nextool.app/free-tools/icon-generator.html">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Free Icon Generator — App Icons from Text | NexTool">
<meta name="twitter:description" content="Create app icons from text, emoji, or initials. Multiple shapes and sizes. Free online tool by NexTool.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"SoftwareApplication","name":"NexTool Icon Generator","applicationCategory":"DesignApplication","operatingSystem":"Web","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"description":"Free online icon generator. Create app icons from text, emoji, or initials with customizable shapes, colors, and gradients."}
</script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--bg:#050508;--surface:#111118;--surface2:#1a1a24;--border:#2a2a3a;--text:#e4e4eb;--text2:#9494a8;--primary:#6366f1;--accent:#a855f7;--pink:#ec4899;--green:#22c55e;--red:#ef4444;--cyan:#22d3ee;--yellow:#eab308;--radius:12px;--glass:rgba(17,17,24,0.7)}
html{scroll-behavior:smooth}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;min-height:100vh;overflow-x:hidden}
/* NAV */
.nav{position:sticky;top:0;z-index:100;background:rgba(5,5,8,0.85);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:0 2rem;height:64px;display:flex;align-items:center;justify-content:space-between}
.nav-logo{font-size:1.4rem;font-weight:800;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-decoration:none}
.nav-links{display:flex;align-items:center;gap:1.5rem}
.nav-links a{color:var(--text2);text-decoration:none;font-size:.875rem;font-weight:500;transition:color .2s}
.nav-links a:hover{color:var(--text)}
.nav-cta{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff!important;padding:.5rem 1.2rem;border-radius:8px;font-weight:600;-webkit-text-fill-color:#fff!important}
.nav-cta:hover{opacity:.9}
.nav-toggle{display:none;background:none;border:none;color:var(--text);font-size:1.5rem;cursor:pointer}
/* HERO */
.hero{text-align:center;padding:3rem 1.5rem 2rem;max-width:700px;margin:0 auto}
.hero h1{font-size:2.2rem;font-weight:800;line-height:1.2;margin-bottom:.75rem}
.hero h1 span{background:linear-gradient(135deg,var(--primary),var(--accent),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{color:var(--text2);font-size:1rem}
/* TOOL */
.tool-container{max-width:1200px;margin:0 auto;padding:0 1.5rem 3rem}
.tool-grid{display:grid;grid-template-columns:340px 1fr;gap:1.5rem}
.panel{background:var(--glass);backdrop-filter:blur(16px);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;display:flex;flex-direction:column}
.panel-header{padding:.6rem 1rem;border-bottom:1px solid var(--border);font-size:.8rem;font-weight:600;color:var(--text2);display:flex;justify-content:space-between;align-items:center;background:rgba(26,26,36,0.5)}
.panel-body{flex:1;padding:1rem;overflow:auto}
/* CONTROLS */
.ctrl-group{margin-bottom:1.2rem}
.ctrl-group label{display:block;font-size:.78rem;font-weight:600;color:var(--text2);margin-bottom:.4rem;text-transform:uppercase;letter-spacing:.5px}
.ctrl-row{display:flex;gap:.5rem;align-items:center;flex-wrap:wrap}
input[type="text"],input[type="number"],select{background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.45rem .7rem;border-radius:8px;font-size:.85rem;font-family:inherit;width:100%;outline:none;transition:border-color .2s}
input[type="text"]:focus,input[type="number"]:focus,select:focus{border-color:var(--primary)}
input[type="color"]{width:40px;height:34px;border:1px solid var(--border);border-radius:8px;background:var(--surface2);cursor:pointer;padding:2px}
input[type="range"]{width:100%;accent-color:var(--primary)}
.range-row{display:flex;align-items:center;gap:.6rem}
.range-row input[type="range"]{flex:1}
.range-val{font-size:.78rem;color:var(--text2);min-width:36px;text-align:right;font-variant-numeric:tabular-nums}
.shape-btns{display:grid;grid-template-columns:repeat(4,1fr);gap:.4rem}
.shape-btn{background:var(--surface2);border:1px solid var(--border);color:var(--text2);padding:.5rem .3rem;border-radius:8px;font-size:.7rem;font-weight:500;cursor:pointer;transition:all .2s;text-align:center}
.shape-btn:hover{border-color:var(--primary);color:var(--text)}
.shape-btn.active{background:linear-gradient(135deg,var(--primary),var(--accent));border-color:transparent;color:#fff}
.bg-type-btns{display:grid;grid-template-columns:repeat(3,1fr);gap:.4rem;margin-bottom:.6rem}
.gradient-row{display:flex;gap:.4rem;align-items:center;margin-top:.4rem}
.gradient-row input[type="color"]{flex-shrink:0}
.gradient-row select{width:auto;flex:1}
.btn{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;border:none;padding:.55rem 1.2rem;border-radius:8px;font-size:.82rem;font-weight:600;cursor:pointer;transition:all .2s;font-family:inherit;width:100%;text-align:center}
.btn:hover{opacity:.9;transform:translateY(-1px)}
.btn-secondary{background:var(--surface2);border:1px solid var(--border);color:var(--text)}
.btn-secondary:hover{border-color:var(--primary);background:rgba(99,102,241,.12)}
.btn-row{display:grid;grid-template-columns:1fr 1fr;gap:.5rem;margin-top:1rem}
.checkbox-row{display:flex;align-items:center;gap:.5rem;margin-top:.3rem}
.checkbox-row input[type="checkbox"]{accent-color:var(--primary);width:16px;height:16px}
.checkbox-row label{font-size:.8rem;color:var(--text);text-transform:none;letter-spacing:0;margin-bottom:0}
/* PREVIEW */
.preview-area{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px;gap:1.5rem}
.main-preview{position:relative}
.main-preview canvas{border-radius:var(--radius);box-shadow:0 8px 32px rgba(0,0,0,.4)}
.checkerboard{background-image:linear-gradient(45deg,#1a1a24 25%,transparent 25%),linear-gradient(-45deg,#1a1a24 25%,transparent 25%),linear-gradient(45deg,transparent 75%,#1a1a24 75%),linear-gradient(-45deg,transparent 75%,#1a1a24 75%);background-size:16px 16px;background-position:0 0,0 8px,8px -8px,-8px 0}
.size-grid{display:flex;flex-wrap:wrap;gap:1rem;justify-content:center;align-items:flex-end;padding:1rem 0}
.size-item{display:flex;flex-direction:column;align-items:center;gap:.4rem;cursor:pointer;transition:transform .2s}
.size-item:hover{transform:scale(1.05)}
.size-item canvas{border-radius:4px;box-shadow:0 2px 8px rgba(0,0,0,.3)}
.size-label{font-size:.7rem;color:var(--text2);font-weight:500}
.size-dl{font-size:.65rem;color:var(--primary);opacity:0;transition:opacity .2s}
.size-item:hover .size-dl{opacity:1}
/* PRESETS */
.presets-row{display:flex;gap:.4rem;flex-wrap:wrap;margin-bottom:1rem}
.preset{width:36px;height:36px;border-radius:8px;border:2px solid var(--border);cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;font-size:.85rem}
.preset:hover{border-color:var(--primary);transform:scale(1.1)}
/* CTA */
.cta-section{text-align:center;padding:4rem 1.5rem;max-width:700px;margin:0 auto}
.cta-section h2{font-size:1.8rem;font-weight:800;margin-bottom:.75rem}
.cta-section h2 span{background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.cta-section p{color:var(--text2);margin-bottom:1.5rem}
.cta-btn{display:inline-block;background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;padding:.75rem 2rem;border-radius:10px;font-weight:700;text-decoration:none;font-size:1rem;transition:transform .2s,box-shadow .2s}
.cta-btn:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(99,102,241,.3)}
/* FOOTER */
.footer{border-top:1px solid var(--border);padding:3rem 2rem 2rem;max-width:1200px;margin:0 auto}
.footer-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:2rem;margin-bottom:2rem}
.footer-col h4{font-size:.85rem;font-weight:700;margin-bottom:.75rem;color:var(--text)}
.footer-col a{display:block;color:var(--text2);text-decoration:none;font-size:.8rem;margin-bottom:.4rem;transition:color .2s}
.footer-col a:hover{color:var(--primary)}
.footer-bottom{text-align:center;color:var(--text2);font-size:.75rem;padding-top:1.5rem;border-top:1px solid var(--border)}
/* FADE IN */
.fade-in{opacity:0;transform:translateY(20px);transition:opacity .6s,transform .6s}
.fade-in.visible{opacity:1;transform:translateY(0)}
/* TOAST */
.toast{position:fixed;bottom:2rem;left:50%;transform:translateX(-50%) translateY(80px);background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.6rem 1.2rem;border-radius:10px;font-size:.85rem;font-weight:500;z-index:200;transition:transform .3s;pointer-events:none}
.toast.show{transform:translateX(-50%) translateY(0)}
/* RESPONSIVE */
@media(max-width:768px){
  .tool-grid{grid-template-columns:1fr}
  .nav-links{display:none;position:absolute;top:64px;left:0;right:0;background:var(--bg);border-bottom:1px solid var(--border);flex-direction:column;padding:1rem 2rem;gap:1rem}
  .nav-links.open{display:flex}
  .nav-toggle{display:block}
  .hero h1{font-size:1.6rem}
  .footer-grid{grid-template-columns:1fr}
  .shape-btns{grid-template-columns:repeat(2,1fr)}
  .bg-type-btns{grid-template-columns:repeat(3,1fr)}
  .btn-row{grid-template-columns:1fr}
}
</style>
</head>
<body>

<nav class="nav">
  <a href="/" class="nav-logo">NexTool</a>
  <button class="nav-toggle" onclick="document.querySelector('.nav-links').classList.toggle('open')" aria-label="Menu">&#9776;</button>
  <div class="nav-links">
    <a href="/">Home</a>
    <a href="/free-tools/">Tools</a>
    <a href="/free-tools/">Free Tools</a>
    <a href="/blog/">Blog</a>
    <a href="/pro.html" class="nav-cta">Get Pro — $29</a>
  </div>
</nav>

<section class="hero fade-in">
  <h1>Free <span>Icon Generator</span></h1>
  <p class="tool-summary" style="color:#94a3b8;font-size:15px;line-height:1.6;margin-bottom:24px;max-width:700px;margin-left:auto;margin-right:auto;">Create beautiful app icons from text, emoji, or initials. Choose from multiple shapes, colors, and gradients. Generate all standard sizes at once and download as individual PNGs or a ZIP bundle. Favicon and Apple Touch Icon ready. 100% browser-based.</p>
</section>

<div class="tool-container fade-in">
  <div class="tool-grid">
    <!-- Left: Controls -->
    <div class="panel">
      <div class="panel-header"><span>Settings</span><span id="resetBtn" style="cursor:pointer;color:var(--primary);font-size:.75rem" onclick="resetAll()">Reset</span></div>
      <div class="panel-body">

        <div class="ctrl-group">
          <label>Quick Presets</label>
          <div class="presets-row" id="presetsRow"></div>
        </div>

        <div class="ctrl-group">
          <label>Icon Text / Emoji</label>
          <input type="text" id="iconText" value="N" placeholder="Text, emoji, or initials..." maxlength="6" oninput="render()">
        </div>

        <div class="ctrl-group">
          <label>Shape</label>
          <div class="shape-btns">
            <button class="shape-btn active" data-shape="rounded" onclick="setShape(this)">Rounded</button>
            <button class="shape-btn" data-shape="circle" onclick="setShape(this)">Circle</button>
            <button class="shape-btn" data-shape="square" onclick="setShape(this)">Square</button>
            <button class="shape-btn" data-shape="hexagon" onclick="setShape(this)">Hexagon</button>
          </div>
        </div>

        <div class="ctrl-group">
          <label>Corner Radius (Rounded Square)</label>
          <div class="range-row">
            <input type="range" id="cornerRadius" min="0" max="50" value="22" oninput="updateVal(this);render()">
            <span class="range-val" id="cornerRadiusVal">22%</span>
          </div>
        </div>

        <div class="ctrl-group">
          <label>Background Type</label>
          <div class="bg-type-btns">
            <button class="shape-btn active" data-bg="solid" onclick="setBgType(this)">Solid</button>
            <button class="shape-btn" data-bg="gradient" onclick="setBgType(this)">Gradient</button>
            <button class="shape-btn" data-bg="pattern" onclick="setBgType(this)">Pattern</button>
          </div>
          <div id="bgSolidCtrl">
            <div class="ctrl-row">
              <input type="color" id="bgColor" value="#6366f1" oninput="render()">
              <input type="text" id="bgColorHex" value="#6366f1" style="flex:1" oninput="syncColorFromHex(this,'bgColor');render()">
            </div>
          </div>
          <div id="bgGradientCtrl" style="display:none">
            <div class="gradient-row">
              <input type="color" id="gradColor1" value="#6366f1" oninput="render()">
              <input type="color" id="gradColor2" value="#ec4899" oninput="render()">
              <select id="gradDirection" onchange="render()">
                <option value="tb">Top to Bottom</option>
                <option value="bt">Bottom to Top</option>
                <option value="lr">Left to Right</option>
                <option value="rl">Right to Left</option>
                <option value="tlbr" selected>Diagonal TL-BR</option>
                <option value="trbl">Diagonal TR-BL</option>
                <option value="radial">Radial</option>
              </select>
            </div>
          </div>
          <div id="bgPatternCtrl" style="display:none">
            <div class="ctrl-row" style="margin-bottom:.4rem">
              <input type="color" id="patColor1" value="#6366f1" oninput="render()">
              <input type="color" id="patColor2" value="#4f46e5" oninput="render()">
            </div>
            <select id="patternType" onchange="render()" style="margin-top:.3rem">
              <option value="stripes">Diagonal Stripes</option>
              <option value="dots">Dots</option>
              <option value="grid">Grid</option>
              <option value="checkers">Checkerboard</option>
            </select>
          </div>
        </div>

        <div class="ctrl-group">
          <label>Text Color</label>
          <div class="ctrl-row">
            <input type="color" id="textColor" value="#ffffff" oninput="render()">
            <input type="text" id="textColorHex" value="#ffffff" style="flex:1" oninput="syncColorFromHex(this,'textColor');render()">
          </div>
        </div>

        <div class="ctrl-group">
          <label>Font Size</label>
          <div class="range-row">
            <input type="range" id="fontSize" min="10" max="90" value="50" oninput="updateVal(this);render()">
            <span class="range-val" id="fontSizeVal">50%</span>
          </div>
        </div>

        <div class="ctrl-group">
          <label>Font Weight</label>
          <select id="fontWeight" onchange="render()">
            <option value="400">Regular (400)</option>
            <option value="500">Medium (500)</option>
            <option value="600">Semibold (600)</option>
            <option value="700" selected>Bold (700)</option>
            <option value="800">Extra Bold (800)</option>
          </select>
        </div>

        <div class="ctrl-group">
          <label>Letter Spacing</label>
          <div class="range-row">
            <input type="range" id="letterSpacing" min="-10" max="20" value="0" oninput="updateVal(this);render()">
            <span class="range-val" id="letterSpacingVal">0px</span>
          </div>
        </div>

        <div class="ctrl-group">
          <label>Text Y Offset</label>
          <div class="range-row">
            <input type="range" id="textOffsetY" min="-20" max="20" value="0" oninput="updateVal(this);render()">
            <span class="range-val" id="textOffsetYVal">0px</span>
          </div>
        </div>

        <div class="ctrl-group">
          <label>Sizes to Generate</label>
          <div style="display:flex;flex-wrap:wrap;gap:.3rem">
            <label class="checkbox-row"><input type="checkbox" value="16" checked onchange="render()"><label>16</label></label>
            <label class="checkbox-row"><input type="checkbox" value="32" checked onchange="render()"><label>32</label></label>
            <label class="checkbox-row"><input type="checkbox" value="48" checked onchange="render()"><label>48</label></label>
            <label class="checkbox-row"><input type="checkbox" value="64" checked onchange="render()"><label>64</label></label>
            <label class="checkbox-row"><input type="checkbox" value="128" checked onchange="render()"><label>128</label></label>
            <label class="checkbox-row"><input type="checkbox" value="256" checked onchange="render()"><label>256</label></label>
            <label class="checkbox-row"><input type="checkbox" value="512" checked onchange="render()"><label>512</label></label>
          </div>
        </div>

        <div class="btn-row">
          <button class="btn" onclick="downloadAll()">Download ZIP</button>
          <button class="btn btn-secondary" onclick="downloadFavicon()">Download .ico</button>
        </div>
        <div style="margin-top:.5rem">
          <button class="btn btn-secondary" onclick="downloadAppleTouch()">Apple Touch Icon (180x180)</button>
        </div>

      </div>
    </div>

    <!-- Right: Preview -->
    <div class="panel">
      <div class="panel-header"><span>Preview</span><span id="previewInfo" style="font-size:.72rem">512 x 512</span></div>
      <div class="panel-body">
        <div class="preview-area">
          <div class="main-preview">
            <canvas id="mainCanvas" width="256" height="256"></canvas>
          </div>
          <div class="size-grid" id="sizeGrid"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<section class="cta-section fade-in">
  <h2>Need something <span>more powerful</span>?</h2>
  <p>Let us build it for you. Custom APIs, dashboards, automations &mdash; whatever you need.</p>
  <a href="/#contact" class="cta-btn">Start a Project &rarr;</a>
</section>

<!-- Cross Promo -->
<section style="max-width:900px;margin:40px auto;padding:0 24px;">
<div style="background:linear-gradient(135deg,rgba(99,102,241,0.1),rgba(168,85,247,0.08));border:1px solid rgba(99,102,241,0.15);border-radius:20px;padding:32px 28px;text-align:center;">
<div style="font-size:13px;color:#818cf8;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Founding Member</div>
<h3 style="font-size:22px;font-weight:800;color:#fff;margin:0 0 8px;">Get NexTool Pro</h3>
<p style="color:#94a3b8;font-size:14px;margin:0 auto 20px;max-width:500px;">No banners, clean output, enhanced features on all 220+ tools. One-time payment.</p>
<div style="display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap;">
<a href="/pro.html" style="display:inline-block;padding:12px 28px;background:linear-gradient(135deg,#6366f1,#a855f7,#ec4899);color:#fff;border-radius:10px;font-weight:700;font-size:15px;text-decoration:none;">$29 — Get Pro</a>
<a href="/free-tools/" style="color:#94a3b8;font-size:14px;text-decoration:none;">Browse 220+ Free Tools &rarr;</a>
</div>
</div>
</section>


<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/favicon-generator.html" style="color:var(--primary);text-decoration:none">Favicon Generator</a> · <a href="/free-tools/box-shadow-generator.html" style="color:var(--primary);text-decoration:none">CSS Box Shadow Generator</a> · <a href="/free-tools/emoji-picker.html" style="color:var(--primary);text-decoration:none">Emoji Picker & Search</a></p>
</div>
<footer class="footer fade-in">
  <div class="footer-grid">
    <div class="footer-col">
      <h4>Products</h4>
      <a href="/free-tools/">220+ Free Tools</a>
      <a href="/pro.html">NexTool Pro</a>
      <a href="/workspace.html">Workspace</a>
    </div>
    <div class="footer-col">
      <h4>Explore</h4>
      <a href="/free-tools/">Free Tools</a><a href="/blog/">Blog</a><a href="/pro.html">FAQ</a><a href="/pro.html">Pro — $29</a>
    </div>
    <div class="footer-col">
      <h4>Ecosystem</h4>
      <a href="/">NexTool Home</a><a href="/#contact">Contact</a><a href="https://github.com/christian140903-sudo/nextool" target="_blank">GitHub</a>
    </div>
  </div>
  <div class="footer-bottom">&copy; 2026 NexTool. AI-powered tools for everyone.</div>
</footer>

<div class="toast" id="toast"></div>

<script>
/* ============== STATE ============== */
let shape = 'rounded';
let bgType = 'solid';
const SIZES = [16,32,48,64,128,256,512];
const RENDER_SIZE = 512; // internal render resolution

/* ============== PRESETS ============== */
const PRESETS = [
  {text:'N',bg:'#6366f1',bg2:'#a855f7',tc:'#fff',shape:'rounded',type:'gradient'},
  {text:'A',bg:'#ef4444',bg2:'#f97316',tc:'#fff',shape:'circle',type:'gradient'},
  {text:'B',bg:'#22c55e',bg2:'#14b8a6',tc:'#fff',shape:'rounded',type:'gradient'},
  {text:'X',bg:'#000000',bg2:'#333333',tc:'#fff',shape:'square',type:'gradient'},
  {text:'M',bg:'#8b5cf6',bg2:'#ec4899',tc:'#fff',shape:'hexagon',type:'gradient'},
  {text:'D',bg:'#0ea5e9',bg2:'#6366f1',tc:'#fff',shape:'circle',type:'gradient'},
  {text:'W',bg:'#f59e0b',bg2:'#ef4444',tc:'#fff',shape:'rounded',type:'gradient'},
  {text:'Z',bg:'#1e1e2e',bg2:'#1e1e2e',tc:'#22d3ee',shape:'rounded',type:'solid'},
];
(function initPresets(){
  const row = document.getElementById('presetsRow');
  PRESETS.forEach((p,i) => {
    const el = document.createElement('div');
    el.className = 'preset';
    el.style.background = p.type==='gradient' ? 'linear-gradient(135deg,'+p.bg+','+p.bg2+')' : p.bg;
    el.style.color = p.tc;
    el.textContent = p.text;
    el.title = 'Preset '+(i+1);
    el.onclick = () => applyPreset(p);
    row.appendChild(el);
  });
})();

function applyPreset(p){
  document.getElementById('iconText').value = p.text;
  document.getElementById('textColor').value = p.tc;
  document.getElementById('textColorHex').value = p.tc;
  if(p.type==='gradient'){
    setBgTypeByName('gradient');
    document.getElementById('gradColor1').value = p.bg;
    document.getElementById('gradColor2').value = p.bg2;
  } else {
    setBgTypeByName('solid');
    document.getElementById('bgColor').value = p.bg;
    document.getElementById('bgColorHex').value = p.bg;
  }
  setShapeByName(p.shape);
  render();
}

/* ============== CONTROLS ============== */
function setShape(btn){
  document.querySelectorAll('.shape-btns .shape-btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  shape = btn.dataset.shape;
  render();
}
function setShapeByName(s){
  shape = s;
  document.querySelectorAll('.shape-btns .shape-btn').forEach(b=>{
    b.classList.toggle('active',b.dataset.shape===s);
  });
}

function setBgType(btn){
  document.querySelectorAll('.bg-type-btns .shape-btn').forEach(b=>b.classList.remove('active'));
  btn.classList.add('active');
  bgType = btn.dataset.bg;
  document.getElementById('bgSolidCtrl').style.display = bgType==='solid'?'':'none';
  document.getElementById('bgGradientCtrl').style.display = bgType==='gradient'?'':'none';
  document.getElementById('bgPatternCtrl').style.display = bgType==='pattern'?'':'none';
  render();
}
function setBgTypeByName(t){
  bgType = t;
  document.querySelectorAll('.bg-type-btns .shape-btn').forEach(b=>{
    b.classList.toggle('active',b.dataset.bg===t);
  });
  document.getElementById('bgSolidCtrl').style.display = t==='solid'?'':'none';
  document.getElementById('bgGradientCtrl').style.display = t==='gradient'?'':'none';
  document.getElementById('bgPatternCtrl').style.display = t==='pattern'?'':'none';
}

function updateVal(el){
  const unit = el.id==='cornerRadius'||el.id==='fontSize'?'%':'px';
  document.getElementById(el.id+'Val').textContent = el.value+unit;
}

function syncColorFromHex(hexInput, colorId){
  const v = hexInput.value;
  if(/^#[0-9a-fA-F]{6}$/.test(v)) document.getElementById(colorId).value = v;
}

function getCheckedSizes(){
  const boxes = document.querySelectorAll('.ctrl-group input[type="checkbox"]');
  const sizes = [];
  boxes.forEach(b => { if(b.checked) sizes.push(parseInt(b.value)); });
  return sizes.length ? sizes : [512];
}

function resetAll(){
  document.getElementById('iconText').value='N';
  setShapeByName('rounded');
  document.getElementById('cornerRadius').value=22;
  document.getElementById('cornerRadiusVal').textContent='22%';
  setBgTypeByName('solid');
  document.getElementById('bgColor').value='#6366f1';
  document.getElementById('bgColorHex').value='#6366f1';
  document.getElementById('gradColor1').value='#6366f1';
  document.getElementById('gradColor2').value='#ec4899';
  document.getElementById('textColor').value='#ffffff';
  document.getElementById('textColorHex').value='#ffffff';
  document.getElementById('fontSize').value=50;
  document.getElementById('fontSizeVal').textContent='50%';
  document.getElementById('fontWeight').value='700';
  document.getElementById('letterSpacing').value=0;
  document.getElementById('letterSpacingVal').textContent='0px';
  document.getElementById('textOffsetY').value=0;
  document.getElementById('textOffsetYVal').textContent='0px';
  document.querySelectorAll('.ctrl-group input[type="checkbox"]').forEach(b=>b.checked=true);
  render();
}

/* ============== RENDERING ============== */
function drawIcon(canvas, size){
  const ctx = canvas.getContext('2d');
  canvas.width = size;
  canvas.height = size;
  ctx.clearRect(0,0,size,size);

  // Clip to shape
  ctx.save();
  clipShape(ctx, size);

  // Background
  drawBackground(ctx, size);

  ctx.restore();

  // Text (drawn after restore so it's on top, but still clipped)
  ctx.save();
  clipShape(ctx, size);
  drawText(ctx, size);
  ctx.restore();
}

function clipShape(ctx, size){
  const r = size * (parseInt(document.getElementById('cornerRadius').value)/100);
  ctx.beginPath();
  switch(shape){
    case 'circle':
      ctx.arc(size/2, size/2, size/2, 0, Math.PI*2);
      break;
    case 'square':
      ctx.rect(0,0,size,size);
      break;
    case 'hexagon':
      hexPath(ctx, size/2, size/2, size/2);
      break;
    case 'rounded':
    default:
      roundRect(ctx, 0, 0, size, size, r);
      break;
  }
  ctx.clip();
}

function roundRect(ctx, x, y, w, h, r){
  r = Math.min(r, w/2, h/2);
  ctx.moveTo(x+r, y);
  ctx.lineTo(x+w-r, y);
  ctx.quadraticCurveTo(x+w, y, x+w, y+r);
  ctx.lineTo(x+w, y+h-r);
  ctx.quadraticCurveTo(x+w, y+h, x+w-r, y+h);
  ctx.lineTo(x+r, y+h);
  ctx.quadraticCurveTo(x, y+h, x, y+h-r);
  ctx.lineTo(x, y+r);
  ctx.quadraticCurveTo(x, y, x+r, y);
  ctx.closePath();
}

function hexPath(ctx, cx, cy, r){
  for(let i=0;i<6;i++){
    const angle = Math.PI/6 + i*Math.PI/3;
    const x = cx + r*Math.cos(angle);
    const y = cy + r*Math.sin(angle);
    if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
  }
  ctx.closePath();
}

function drawBackground(ctx, size){
  if(bgType==='solid'){
    ctx.fillStyle = document.getElementById('bgColor').value;
    ctx.fillRect(0,0,size,size);
  } else if(bgType==='gradient'){
    const c1 = document.getElementById('gradColor1').value;
    const c2 = document.getElementById('gradColor2').value;
    const dir = document.getElementById('gradDirection').value;
    let grad;
    switch(dir){
      case 'tb': grad = ctx.createLinearGradient(0,0,0,size); break;
      case 'bt': grad = ctx.createLinearGradient(0,size,0,0); break;
      case 'lr': grad = ctx.createLinearGradient(0,0,size,0); break;
      case 'rl': grad = ctx.createLinearGradient(size,0,0,0); break;
      case 'tlbr': grad = ctx.createLinearGradient(0,0,size,size); break;
      case 'trbl': grad = ctx.createLinearGradient(size,0,0,size); break;
      case 'radial': grad = ctx.createRadialGradient(size/2,size/2,0,size/2,size/2,size/2); break;
      default: grad = ctx.createLinearGradient(0,0,size,size);
    }
    grad.addColorStop(0, c1);
    grad.addColorStop(1, c2);
    ctx.fillStyle = grad;
    ctx.fillRect(0,0,size,size);
  } else if(bgType==='pattern'){
    const pc1 = document.getElementById('patColor1').value;
    const pc2 = document.getElementById('patColor2').value;
    const pt = document.getElementById('patternType').value;
    ctx.fillStyle = pc1;
    ctx.fillRect(0,0,size,size);
    ctx.strokeStyle = pc2;
    ctx.fillStyle = pc2;
    const step = Math.max(size/16, 4);
    switch(pt){
      case 'stripes':
        ctx.lineWidth = step/2;
        for(let i=-size;i<size*2;i+=step){
          ctx.beginPath();
          ctx.moveTo(i,0);
          ctx.lineTo(i+size,size);
          ctx.stroke();
        }
        break;
      case 'dots':
        const dotR = step/4;
        for(let x=step/2;x<size;x+=step){
          for(let y=step/2;y<size;y+=step){
            ctx.beginPath();
            ctx.arc(x,y,dotR,0,Math.PI*2);
            ctx.fill();
          }
        }
        break;
      case 'grid':
        ctx.lineWidth = Math.max(1, step/8);
        for(let i=0;i<size;i+=step){
          ctx.beginPath();ctx.moveTo(i,0);ctx.lineTo(i,size);ctx.stroke();
          ctx.beginPath();ctx.moveTo(0,i);ctx.lineTo(size,i);ctx.stroke();
        }
        break;
      case 'checkers':
        for(let x=0;x<size;x+=step){
          for(let y=0;y<size;y+=step){
            if(((x/step)+(y/step))%2===0){
              ctx.fillRect(x,y,step,step);
            }
          }
        }
        break;
    }
  }
}

function drawText(ctx, size){
  const text = document.getElementById('iconText').value || 'N';
  const color = document.getElementById('textColor').value;
  const fsPct = parseInt(document.getElementById('fontSize').value);
  const weight = document.getElementById('fontWeight').value;
  const ls = parseInt(document.getElementById('letterSpacing').value);
  const offsetY = parseInt(document.getElementById('textOffsetY').value);

  const fs = size * (fsPct/100);
  ctx.fillStyle = color;
  ctx.textAlign = 'center';
  ctx.textBaseline = 'middle';
  ctx.font = weight + ' ' + fs + 'px Inter, system-ui, sans-serif';

  if(ls !== 0 && text.length > 1){
    // Manual letter spacing
    const chars = [...text];
    const spacing = ls * (size/RENDER_SIZE);
    const totalWidth = chars.reduce((w,c) => w + ctx.measureText(c).width, 0) + spacing*(chars.length-1);
    let x = size/2 - totalWidth/2;
    const y = size/2 + (offsetY/100)*size;
    chars.forEach(c => {
      const cw = ctx.measureText(c).width;
      ctx.fillText(c, x + cw/2, y);
      x += cw + spacing;
    });
  } else {
    ctx.fillText(text, size/2, size/2 + (offsetY/100)*size);
  }
}

function render(){
  // Main preview
  const mainCanvas = document.getElementById('mainCanvas');
  drawIcon(mainCanvas, RENDER_SIZE);
  // Scale display
  mainCanvas.style.width = '256px';
  mainCanvas.style.height = '256px';

  // Size previews
  const grid = document.getElementById('sizeGrid');
  grid.innerHTML = '';
  const sizes = getCheckedSizes();
  sizes.forEach(sz => {
    const item = document.createElement('div');
    item.className = 'size-item';
    const c = document.createElement('canvas');
    drawIcon(c, sz);
    // Display at natural size, capped at 64px for layout
    const displaySize = Math.min(sz, 64);
    c.style.width = displaySize+'px';
    c.style.height = displaySize+'px';
    item.appendChild(c);
    const lbl = document.createElement('div');
    lbl.className = 'size-label';
    lbl.textContent = sz+'x'+sz;
    item.appendChild(lbl);
    const dl = document.createElement('div');
    dl.className = 'size-dl';
    dl.textContent = 'Click to download';
    item.appendChild(dl);
    item.onclick = () => downloadSingle(sz);
    grid.appendChild(item);
  });
}

/* ============== DOWNLOADS ============== */
function downloadSingle(size){
  const c = document.createElement('canvas');
  drawIcon(c, size);
  c.toBlob(blob => {
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = 'icon-'+size+'x'+size+'.png';
    a.click();
    URL.revokeObjectURL(a.href);
    showToast('Downloaded icon-'+size+'x'+size+'.png');
  }, 'image/png');
}

function downloadAll(){
  const sizes = getCheckedSizes();
  if(typeof JSZip === 'undefined'){
    // Load JSZip dynamically
    const s = document.createElement('script');
    s.src = 'https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js';
    s.onload = () => generateZip(sizes);
    s.onerror = () => {
      showToast('Failed to load JSZip. Downloading individually...');
      sizes.forEach(sz => downloadSingle(sz));
    };
    document.head.appendChild(s);
  } else {
    generateZip(sizes);
  }
}

function generateZip(sizes){
  const zip = new JSZip();
  const promises = sizes.map(sz => {
    return new Promise(resolve => {
      const c = document.createElement('canvas');
      drawIcon(c, sz);
      c.toBlob(blob => {
        zip.file('icon-'+sz+'x'+sz+'.png', blob);
        resolve();
      }, 'image/png');
    });
  });
  // Also add apple touch icon
  promises.push(new Promise(resolve => {
    const c = document.createElement('canvas');
    drawIcon(c, 180);
    c.toBlob(blob => {
      zip.file('apple-touch-icon.png', blob);
      resolve();
    }, 'image/png');
  }));

  Promise.all(promises).then(() => {
    zip.generateAsync({type:'blob'}).then(blob => {
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'icons.zip';
      a.click();
      URL.revokeObjectURL(a.href);
      showToast('Downloaded icons.zip with '+sizes.length+' sizes + Apple Touch Icon');
    });
  });
}

function downloadFavicon(){
  // Generate multi-size ICO (simplified: just 16, 32, 48 as PNGs embedded in ICO)
  const icoSizes = [16, 32, 48];
  const images = icoSizes.map(sz => {
    const c = document.createElement('canvas');
    drawIcon(c, sz);
    return {size:sz, canvas:c};
  });

  // Build ICO file
  const pngDatas = [];
  let loadedCount = 0;

  images.forEach((img, idx) => {
    img.canvas.toBlob(blob => {
      blob.arrayBuffer().then(buf => {
        pngDatas[idx] = {size:img.size, data:new Uint8Array(buf)};
        loadedCount++;
        if(loadedCount === images.length){
          buildICO(pngDatas);
        }
      });
    }, 'image/png');
  });
}

function buildICO(pngDatas){
  // ICO format: header (6 bytes) + entries (16 bytes each) + image data
  const numImages = pngDatas.length;
  const headerSize = 6;
  const entrySize = 16;
  const dataOffset = headerSize + entrySize * numImages;

  let totalSize = dataOffset;
  pngDatas.forEach(p => totalSize += p.data.length);

  const buffer = new ArrayBuffer(totalSize);
  const view = new DataView(buffer);
  const arr = new Uint8Array(buffer);

  // Header
  view.setUint16(0, 0, true); // reserved
  view.setUint16(2, 1, true); // type: ICO
  view.setUint16(4, numImages, true);

  let offset = dataOffset;
  pngDatas.forEach((p, i) => {
    const entryOffset = headerSize + i * entrySize;
    view.setUint8(entryOffset, p.size < 256 ? p.size : 0); // width
    view.setUint8(entryOffset+1, p.size < 256 ? p.size : 0); // height
    view.setUint8(entryOffset+2, 0); // palette
    view.setUint8(entryOffset+3, 0); // reserved
    view.setUint16(entryOffset+4, 1, true); // color planes
    view.setUint16(entryOffset+6, 32, true); // bits per pixel
    view.setUint32(entryOffset+8, p.data.length, true); // data size
    view.setUint32(entryOffset+12, offset, true); // data offset

    arr.set(p.data, offset);
    offset += p.data.length;
  });

  const blob = new Blob([buffer], {type:'image/x-icon'});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'favicon.ico';
  a.click();
  URL.revokeObjectURL(a.href);
  showToast('Downloaded favicon.ico (16, 32, 48px)');
}

function downloadAppleTouch(){
  const c = document.createElement('canvas');
  drawIcon(c, 180);
  c.toBlob(blob => {
    const a = document.createElement('a');
    a.href = URL.createObjectURL(blob);
    a.download = 'apple-touch-icon.png';
    a.click();
    URL.revokeObjectURL(a.href);
    showToast('Downloaded apple-touch-icon.png (180x180)');
  }, 'image/png');
}

/* ============== UTILITY ============== */
function showToast(msg){
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2500);
}

/* IntersectionObserver fade-in */
const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    if(entry.isIntersecting){
      entry.target.classList.add('visible');
      observer.unobserve(entry.target);
    }
  });
}, {threshold:0.1});
document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));

/* Initial render */
render();
</script>
<script src="/js/analytics-lite.js" defer></script>
<script src="/js/revenue.js" defer></script>
<script src="/js/lead-capture.js" defer></script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What sizes does the icon generator support?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "The icon generator supports all standard app icon sizes: 16x16, 32x32, 48x48, 64x64, 128x128, 256x256, and 512x512 pixels. It also generates 180x180 Apple Touch Icons and multi-size favicon.ico files."
      }
    },
    {
      "@type": "Question",
      "name": "Can I create a favicon.ico with this tool?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, the icon generator creates proper favicon.ico files containing 16x16, 32x32, and 48x48 pixel versions of your icon. The ICO file is generated entirely in your browser using the Canvas API."
      }
    },
    {
      "@type": "Question",
      "name": "Is the icon generator free to use?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, NexTool's Icon Generator is completely free with no signup required. All rendering happens in your browser using the HTML5 Canvas API, so your designs never leave your device."
      }
    },
    {
      "@type": "Question",
      "name": "What icon shapes are available?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "You can choose from four shapes: rounded square (with adjustable corner radius), circle, square, and hexagon. Each shape works with all background types including solid colors, gradients, and patterns."
      }
    }
  ]
}
</script>
</body>
</html>
