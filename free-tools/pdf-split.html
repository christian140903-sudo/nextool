<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Free PDF Split — Split PDF Into Pages Online | NexTool</title>
<meta name="description" content="Split PDF files into individual pages or custom page ranges. Free, client-side PDF splitter — no upload, no signup required. Download pages as ZIP.">
<meta name="keywords" content="pdf split, split pdf online, pdf splitter, pdf page extractor, separate pdf pages, free pdf split, NexTool">
<meta name="robots" content="index, follow">
<meta property="og:title" content="Free PDF Split — Split PDF Into Pages | NexTool">
<meta property="og:description" content="Split PDF files into individual pages or custom ranges. 100% client-side, no upload. Download as ZIP or individual PDFs.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://nextool.app/free-tools/pdf-split.html">
<meta property="og:image" content="https://nextool.app/assets/og-default.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<link rel="canonical" href="https://nextool.app/free-tools/pdf-split.html">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Free PDF Split — Split PDF Into Pages | NexTool">
<meta name="twitter:description" content="Split PDF files into individual pages or custom page ranges. Free online tool by NexTool.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"SoftwareApplication","name":"NexTool PDF Split","applicationCategory":"UtilitiesApplication","operatingSystem":"Web","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"description":"Free online tool to split PDF files into individual pages or custom page ranges. Drag and drop, choose ranges, download as ZIP — all in your browser."}
</script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--bg:#050508;--surface:#111118;--surface2:#1a1a24;--border:#2a2a3a;--text:#e4e4eb;--text2:#9494a8;--primary:#6366f1;--accent:#a855f7;--pink:#ec4899;--green:#22c55e;--red:#ef4444;--cyan:#22d3ee;--yellow:#eab308;--radius:12px;--glass:rgba(17,17,24,0.7)}
html{scroll-behavior:smooth}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;min-height:100vh;overflow-x:hidden}
/* NAV */
.nav{position:sticky;top:0;z-index:100;background:rgba(5,5,8,0.85);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:0 2rem;height:64px;display:flex;align-items:center;justify-content:space-between}
.nav-logo{font-size:1.4rem;font-weight:800;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-decoration:none}
.nav-links{display:flex;align-items:center;gap:1.5rem}
.nav-links a{color:var(--text2);text-decoration:none;font-size:.875rem;font-weight:500;transition:color .2s}
.nav-links a:hover{color:var(--text)}
.nav-cta{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff!important;padding:.5rem 1.2rem;border-radius:8px;font-weight:600;-webkit-text-fill-color:#fff!important}
.nav-cta:hover{opacity:.9}
.nav-toggle{display:none;background:none;border:none;color:var(--text);font-size:1.5rem;cursor:pointer}
/* HERO */
.hero{text-align:center;padding:3rem 1.5rem 2rem;max-width:700px;margin:0 auto}
.hero h1{font-size:2.2rem;font-weight:800;line-height:1.2;margin-bottom:.75rem}
.hero h1 span{background:linear-gradient(135deg,var(--primary),var(--accent),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{color:var(--text2);font-size:1rem}
/* TOOL */
.tool-container{max-width:900px;margin:0 auto;padding:0 1.5rem 3rem}
/* DROP ZONE */
.drop-zone{border:2px dashed var(--border);border-radius:var(--radius);padding:3rem 2rem;text-align:center;cursor:pointer;transition:all .3s;background:var(--glass);backdrop-filter:blur(16px);position:relative}
.drop-zone:hover,.drop-zone.dragover{border-color:var(--primary);background:rgba(99,102,241,.06)}
.drop-zone.has-file{border-style:solid;border-color:var(--green);background:rgba(34,197,94,.04)}
.drop-zone-icon{font-size:3rem;margin-bottom:.75rem;opacity:.6}
.drop-zone h3{font-size:1.1rem;font-weight:700;margin-bottom:.4rem;color:var(--text)}
.drop-zone p{font-size:.85rem;color:var(--text2)}
.drop-zone input{position:absolute;inset:0;opacity:0;cursor:pointer}
/* FILE INFO */
.file-info-bar{margin-top:1.5rem;display:none;background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:1rem 1.25rem;gap:.75rem;align-items:center}
.file-info-bar.active{display:flex}
.file-icon{width:42px;height:42px;border-radius:10px;background:rgba(239,68,68,.12);display:flex;align-items:center;justify-content:center;flex-shrink:0;font-size:.85rem;font-weight:700;color:var(--red)}
.file-details{flex:1;min-width:0}
.file-name{font-size:.9rem;font-weight:600;color:var(--text);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.file-meta{font-size:.78rem;color:var(--text2);margin-top:2px;display:flex;gap:1rem;flex-wrap:wrap}
.file-remove{background:none;border:none;color:var(--text2);font-size:1.3rem;cursor:pointer;padding:4px 8px;border-radius:6px;transition:all .2s;flex-shrink:0}
.file-remove:hover{color:var(--red);background:rgba(239,68,68,.1)}
/* SPLIT OPTIONS */
.split-options{margin-top:1.5rem;display:none}
.split-options.active{display:block}
.split-options h3{font-size:1rem;font-weight:700;margin-bottom:1rem;color:var(--text)}
.mode-tabs{display:flex;gap:.5rem;margin-bottom:1.25rem;flex-wrap:wrap}
.mode-tab{background:var(--surface2);border:1px solid var(--border);color:var(--text2);padding:.5rem 1rem;border-radius:8px;font-size:.82rem;font-weight:600;cursor:pointer;transition:all .2s;font-family:inherit}
.mode-tab:hover{border-color:var(--primary);color:var(--text)}
.mode-tab.active{background:linear-gradient(135deg,var(--primary),var(--accent));border-color:transparent;color:#fff}
.mode-panel{display:none;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:1.25rem}
.mode-panel.active{display:block}
.mode-panel p{font-size:.85rem;color:var(--text2);margin-bottom:.75rem}
.mode-panel input[type="text"],.mode-panel input[type="number"]{background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.5rem .75rem;border-radius:8px;font-size:.85rem;font-family:inherit;width:100%;max-width:400px;outline:none;transition:border-color .2s}
.mode-panel input:focus{border-color:var(--primary)}
.range-preview{margin-top:.75rem;font-size:.8rem;color:var(--text2);min-height:1.2em}
.range-preview .valid{color:var(--green)}
.range-preview .invalid{color:var(--red)}
/* SPLIT BUTTON + CONTROLS */
.action-bar{margin-top:1.5rem;display:none;flex-wrap:wrap;gap:.75rem;align-items:center}
.action-bar.active{display:flex}
.split-btn{background:linear-gradient(135deg,var(--primary),var(--accent))!important;border:none!important;color:#fff!important;padding:.6rem 2rem;border-radius:8px;font-size:.9rem;font-weight:700;cursor:pointer;font-family:inherit;transition:all .2s}
.split-btn:hover:not(:disabled){opacity:.9;transform:translateY(-1px);box-shadow:0 6px 24px rgba(99,102,241,.3)}
.split-btn:disabled{opacity:.4;cursor:not-allowed;transform:none;box-shadow:none}
.secondary-btn{background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.55rem 1.2rem;border-radius:8px;font-size:.85rem;font-weight:600;cursor:pointer;font-family:inherit;transition:all .2s}
.secondary-btn:hover{border-color:var(--primary);background:rgba(99,102,241,.12)}
/* PROGRESS */
.progress-wrap{margin-top:1rem;display:none}
.progress-wrap.active{display:block}
.progress-bar{width:100%;height:6px;background:var(--surface2);border-radius:3px;overflow:hidden}
.progress-fill{height:100%;width:0%;background:linear-gradient(90deg,var(--primary),var(--accent));border-radius:3px;transition:width .3s}
.progress-text{font-size:.75rem;color:var(--text2);margin-top:.4rem;text-align:center}
/* RESULTS */
.results{margin-top:1.5rem;display:none}
.results.active{display:block}
.results h3{font-size:1rem;font-weight:700;margin-bottom:1rem;color:var(--text)}
.result-list{display:flex;flex-direction:column;gap:.4rem;max-height:400px;overflow-y:auto}
.result-item{background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:.6rem 1rem;display:flex;align-items:center;gap:.75rem;font-size:.85rem}
.result-item .ri-name{flex:1;color:var(--text);font-weight:500}
.result-item .ri-meta{color:var(--text2);font-size:.78rem}
.result-item .ri-download{background:none;border:1px solid var(--border);color:var(--primary);padding:.3rem .7rem;border-radius:6px;font-size:.78rem;font-weight:600;cursor:pointer;font-family:inherit;transition:all .2s}
.result-item .ri-download:hover{background:rgba(99,102,241,.12);border-color:var(--primary)}
.download-all-bar{margin-top:1rem;display:flex;gap:.75rem;flex-wrap:wrap}
/* CTA */
.cta-section{text-align:center;padding:4rem 1.5rem;max-width:700px;margin:0 auto}
.cta-section h2{font-size:1.8rem;font-weight:800;margin-bottom:.75rem}
.cta-section h2 span{background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.cta-section p{color:var(--text2);margin-bottom:1.5rem}
.cta-btn{display:inline-block;background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;padding:.75rem 2rem;border-radius:10px;font-weight:700;text-decoration:none;font-size:1rem;transition:transform .2s,box-shadow .2s}
.cta-btn:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(99,102,241,.3)}
/* FOOTER */
.footer{border-top:1px solid var(--border);padding:3rem 2rem 2rem;max-width:1200px;margin:0 auto}
.footer-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:2rem;margin-bottom:2rem}
.footer-col h4{font-size:.85rem;font-weight:700;margin-bottom:.75rem;color:var(--text)}
.footer-col a{display:block;color:var(--text2);text-decoration:none;font-size:.8rem;margin-bottom:.4rem;transition:color .2s}
.footer-col a:hover{color:var(--primary)}
.footer-bottom{text-align:center;color:var(--text2);font-size:.75rem;padding-top:1.5rem;border-top:1px solid var(--border)}
/* FADE IN */
.fade-in{opacity:0;transform:translateY(20px);transition:opacity .6s,transform .6s}
.fade-in.visible{opacity:1;transform:translateY(0)}
/* TOAST */
.toast{position:fixed;bottom:2rem;left:50%;transform:translateX(-50%) translateY(80px);background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.6rem 1.2rem;border-radius:10px;font-size:.85rem;font-weight:500;z-index:200;transition:transform .3s;pointer-events:none}
.toast.show{transform:translateX(-50%) translateY(0)}
/* RESPONSIVE */
@media(max-width:768px){
  .nav-links{display:none;position:absolute;top:64px;left:0;right:0;background:var(--bg);border-bottom:1px solid var(--border);flex-direction:column;padding:1rem 2rem;gap:1rem}
  .nav-links.open{display:flex}
  .nav-toggle{display:block}
  .hero h1{font-size:1.6rem}
  .footer-grid{grid-template-columns:1fr}
  .drop-zone{padding:2rem 1rem}
  .mode-tabs{flex-direction:column}
  .action-bar{flex-direction:column}
  .action-bar button{width:100%}
  .file-info-bar{flex-direction:column;text-align:center}
  .file-meta{justify-content:center}
  .download-all-bar{flex-direction:column}
  .download-all-bar button{width:100%}
}
</style>
</head>
<body>

<nav class="nav">
  <a href="/" class="nav-logo">NexTool</a>
  <button class="nav-toggle" onclick="document.querySelector('.nav-links').classList.toggle('open')" aria-label="Menu">&#9776;</button>
  <div class="nav-links">
    <a href="/">Home</a>
    <a href="/free-tools/">Tools</a>
    <a href="/free-tools/">Free Tools</a>
    <a href="/blog/">Blog</a>
    <a href="/pro.html" class="nav-cta">Get Pro &mdash; $29</a>
  </div>
</nav>

<section class="hero fade-in">
  <h1>Free <span>PDF Split</span> Tool</h1>
  <p class="tool-summary" style="color:#94a3b8;font-size:15px;line-height:1.6;margin-bottom:24px;max-width:700px;margin-left:auto;margin-right:auto;">Split PDF files into individual pages or custom page ranges. Extract specific pages, split every N pages, or get each page as a separate PDF. Runs 100% in your browser &mdash; your files never leave your device. No signup, no upload limits.</p>
</section>

<div class="tool-container fade-in">
  <div class="drop-zone" id="dropZone">
    <input type="file" id="fileInput" accept=".pdf,application/pdf">
    <div class="drop-zone-icon">&#9986;</div>
    <h3>Drop a PDF file here</h3>
    <p>or click to browse &mdash; select a single PDF to split</p>
  </div>

  <div class="file-info-bar" id="fileInfoBar">
    <div class="file-icon">PDF</div>
    <div class="file-details">
      <div class="file-name" id="fileName">document.pdf</div>
      <div class="file-meta">
        <span id="pageCount">0 pages</span>
        <span id="fileSize">0 KB</span>
      </div>
    </div>
    <button class="file-remove" id="removeBtn" title="Remove file">&times;</button>
  </div>

  <div class="split-options" id="splitOptions">
    <h3>Split Mode</h3>
    <div class="mode-tabs">
      <button class="mode-tab active" data-mode="all" onclick="setMode('all')">Extract All Pages</button>
      <button class="mode-tab" data-mode="ranges" onclick="setMode('ranges')">Custom Ranges</button>
      <button class="mode-tab" data-mode="every" onclick="setMode('every')">Split Every N Pages</button>
    </div>

    <div class="mode-panel active" id="panel-all">
      <p>Each page will be extracted as a separate PDF file. You can download them individually or all at once as a ZIP.</p>
      <div class="range-preview" id="previewAll"></div>
    </div>

    <div class="mode-panel" id="panel-ranges">
      <p>Enter page numbers and/or ranges separated by commas. Example: <strong>1-3, 5, 7-10</strong></p>
      <input type="text" id="rangeInput" placeholder="e.g. 1-3, 5, 7-10" oninput="parseRanges()">
      <div class="range-preview" id="previewRanges"></div>
    </div>

    <div class="mode-panel" id="panel-every">
      <p>Split the PDF into chunks of N pages each. The last chunk may have fewer pages.</p>
      <input type="number" id="everyInput" placeholder="e.g. 5" min="1" value="1" oninput="parseEvery()">
      <div class="range-preview" id="previewEvery"></div>
    </div>
  </div>

  <div class="action-bar" id="actionBar">
    <button class="split-btn" id="splitBtn" onclick="splitPDF()">Split PDF</button>
    <button class="secondary-btn" onclick="resetTool()">Start Over</button>
  </div>

  <div class="progress-wrap" id="progressWrap">
    <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
    <div class="progress-text" id="progressText">Preparing split...</div>
  </div>

  <div class="results" id="results">
    <h3 id="resultsTitle">Split Results</h3>
    <div class="result-list" id="resultList"></div>
    <div class="download-all-bar">
      <button class="split-btn" id="downloadAllBtn" onclick="downloadAllAsZip()">Download All as ZIP</button>
      <button class="secondary-btn" onclick="resetTool()">Split Another PDF</button>
    </div>
  </div>
</div>

<section class="cta-section fade-in">
  <h2>Need something <span>more powerful</span>?</h2>
  <p>Let us build it for you. Custom APIs, dashboards, automations &mdash; whatever you need.</p>
  <a href="/#contact" class="cta-btn">Start a Project &rarr;</a>
</section>

<!-- Cross Promo -->
<section style="max-width:900px;margin:40px auto;padding:0 24px;">
<div style="background:linear-gradient(135deg,rgba(99,102,241,0.1),rgba(168,85,247,0.08));border:1px solid rgba(99,102,241,0.15);border-radius:20px;padding:32px 28px;text-align:center;">
<div style="font-size:13px;color:#818cf8;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Founding Member</div>
<h3 style="font-size:22px;font-weight:800;color:#fff;margin:0 0 8px;">Get NexTool Pro</h3>
<p style="color:#94a3b8;font-size:14px;margin:0 auto 20px;max-width:500px;">No banners, clean output, enhanced features on all 240+ tools. One-time payment.</p>
<div style="display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap;">
<a href="/pro.html" style="display:inline-block;padding:12px 28px;background:linear-gradient(135deg,#6366f1,#a855f7,#ec4899);color:#fff;border-radius:10px;font-weight:700;font-size:15px;text-decoration:none;">$29 &mdash; Get Pro</a>
<a href="/free-tools/" style="color:#94a3b8;font-size:14px;text-decoration:none;">Browse 240+ Free Tools &rarr;</a>
</div>
</div>
</section>

<footer class="footer fade-in">
  <div class="footer-grid">
    <div class="footer-col">
      <h4>Products</h4>
      <a href="/free-tools/">240+ Free Tools</a>
<a href="/pro.html">NexTool Pro</a>
<a href="/workspace.html">Workspace</a>
    </div>
    <div class="footer-col">
      <h4>Explore</h4>
      <a href="/free-tools/">Free Tools</a><a href="/blog/">Blog</a><a href="/pro.html">FAQ</a><a href="/pro.html">Pro &mdash; $29</a>
    </div>
    <div class="footer-col">
      <h4>Ecosystem</h4>
      <a href="/">NexTool Home</a><a href="/#contact">Contact</a><a href="https://github.com/christian140903-sudo/nextool" target="_blank">GitHub</a>
    </div>
  </div>
  <div class="footer-bottom">&copy; 2026 NexTool. AI-powered tools for everyone.</div>
</footer>

<div class="toast" id="toast"></div>

<script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
<script src="https://unpkg.com/jszip@3.10.1/dist/jszip.min.js"></script>
<script>
var dropZone = document.getElementById('dropZone');
var fileInput = document.getElementById('fileInput');
var fileInfoBar = document.getElementById('fileInfoBar');
var splitOptions = document.getElementById('splitOptions');
var actionBar = document.getElementById('actionBar');
var splitBtn = document.getElementById('splitBtn');
var progressWrap = document.getElementById('progressWrap');
var progressFill = document.getElementById('progressFill');
var progressText = document.getElementById('progressText');
var resultsDiv = document.getElementById('results');
var resultList = document.getElementById('resultList');

var currentFile = null;
var currentArrayBuffer = null;
var currentPageCount = 0;
var currentMode = 'all';
var splitResults = []; // [{name, bytes}]

/* ---- Drop Zone ---- */
dropZone.addEventListener('dragover', function(e) {
  e.preventDefault();
  dropZone.classList.add('dragover');
});
dropZone.addEventListener('dragleave', function() {
  dropZone.classList.remove('dragover');
});
dropZone.addEventListener('drop', function(e) {
  e.preventDefault();
  dropZone.classList.remove('dragover');
  var files = e.dataTransfer.files;
  if (files.length > 0) handleFile(files[0]);
});
fileInput.addEventListener('change', function() {
  if (fileInput.files.length > 0) handleFile(fileInput.files[0]);
  fileInput.value = '';
});

document.getElementById('removeBtn').addEventListener('click', function() {
  resetTool();
});

async function handleFile(file) {
  if (file.type !== 'application/pdf' && !file.name.toLowerCase().endsWith('.pdf')) {
    showToast('Please select a PDF file');
    return;
  }
  try {
    var ab = await file.arrayBuffer();
    var doc = await PDFLib.PDFDocument.load(ab, { ignoreEncryption: true });
    currentPageCount = doc.getPageCount();
    currentFile = file;
    currentArrayBuffer = ab;

    document.getElementById('fileName').textContent = file.name;
    document.getElementById('pageCount').textContent = currentPageCount + ' page' + (currentPageCount !== 1 ? 's' : '');
    document.getElementById('fileSize').textContent = formatBytes(file.size);

    dropZone.classList.add('has-file');
    dropZone.querySelector('h3').textContent = 'File loaded';
    dropZone.querySelector('p').textContent = 'Drop another file to replace';
    fileInfoBar.classList.add('active');
    splitOptions.classList.add('active');
    actionBar.classList.add('active');
    resultsDiv.classList.remove('active');
    splitResults = [];

    updatePreview();
  } catch (err) {
    showToast('Could not read PDF: ' + err.message);
  }
}

/* ---- Mode switching ---- */
function setMode(mode) {
  currentMode = mode;
  document.querySelectorAll('.mode-tab').forEach(function(t) {
    t.classList.toggle('active', t.dataset.mode === mode);
  });
  document.querySelectorAll('.mode-panel').forEach(function(p) {
    p.classList.toggle('active', p.id === 'panel-' + mode);
  });
  updatePreview();
}

function updatePreview() {
  if (currentMode === 'all') updatePreviewAll();
  else if (currentMode === 'ranges') parseRanges();
  else if (currentMode === 'every') parseEvery();
}

function updatePreviewAll() {
  if (!currentPageCount) return;
  var el = document.getElementById('previewAll');
  el.innerHTML = '<span class="valid">Will extract ' + currentPageCount + ' individual page' + (currentPageCount !== 1 ? 's' : '') + '</span>';
}

/* ---- Parse custom ranges ---- */
function parseRanges() {
  var el = document.getElementById('previewRanges');
  if (!currentPageCount) { el.innerHTML = ''; return; }
  var raw = document.getElementById('rangeInput').value.trim();
  if (!raw) { el.innerHTML = 'Enter page numbers or ranges above'; return; }

  var result = parseRangeString(raw, currentPageCount);
  if (result.error) {
    el.innerHTML = '<span class="invalid">' + escHtml(result.error) + '</span>';
  } else {
    var totalPages = 0;
    result.ranges.forEach(function(r) { totalPages += r.pages.length; });
    el.innerHTML = '<span class="valid">' + result.ranges.length + ' output file' + (result.ranges.length !== 1 ? 's' : '') + ' (' + totalPages + ' page' + (totalPages !== 1 ? 's' : '') + ' total)</span>';
  }
}

function parseRangeString(str, maxPages) {
  var parts = str.split(',').map(function(s) { return s.trim(); }).filter(function(s) { return s.length > 0; });
  var ranges = [];
  for (var i = 0; i < parts.length; i++) {
    var part = parts[i];
    var dashMatch = part.match(/^(\d+)\s*-\s*(\d+)$/);
    var singleMatch = part.match(/^(\d+)$/);
    if (dashMatch) {
      var start = parseInt(dashMatch[1]);
      var end = parseInt(dashMatch[2]);
      if (start < 1 || end < 1) return { error: 'Page numbers must be at least 1' };
      if (start > maxPages || end > maxPages) return { error: 'Page ' + Math.max(start, end) + ' exceeds document length (' + maxPages + ' pages)' };
      if (start > end) return { error: 'Invalid range: ' + start + '-' + end + ' (start > end)' };
      var pages = [];
      for (var p = start; p <= end; p++) pages.push(p - 1); // 0-indexed
      ranges.push({ label: start + '-' + end, pages: pages });
    } else if (singleMatch) {
      var pg = parseInt(singleMatch[1]);
      if (pg < 1) return { error: 'Page numbers must be at least 1' };
      if (pg > maxPages) return { error: 'Page ' + pg + ' exceeds document length (' + maxPages + ' pages)' };
      ranges.push({ label: String(pg), pages: [pg - 1] });
    } else {
      return { error: 'Invalid entry: "' + part + '". Use numbers or ranges like 1-3' };
    }
  }
  if (ranges.length === 0) return { error: 'No valid ranges entered' };
  return { ranges: ranges };
}

/* ---- Parse every N ---- */
function parseEvery() {
  var el = document.getElementById('previewEvery');
  if (!currentPageCount) { el.innerHTML = ''; return; }
  var n = parseInt(document.getElementById('everyInput').value);
  if (!n || n < 1) { el.innerHTML = '<span class="invalid">Enter a number greater than 0</span>'; return; }
  var chunks = Math.ceil(currentPageCount / n);
  el.innerHTML = '<span class="valid">Will create ' + chunks + ' file' + (chunks !== 1 ? 's' : '') + ' (' + n + ' page' + (n !== 1 ? 's' : '') + ' each' + (currentPageCount % n !== 0 ? ', last file: ' + (currentPageCount % n) + ' page' + ((currentPageCount % n) !== 1 ? 's' : '') : '') + ')</span>';
}

/* ---- Split PDF ---- */
async function splitPDF() {
  if (!currentArrayBuffer || !currentPageCount) {
    showToast('Please load a PDF first');
    return;
  }
  splitBtn.disabled = true;
  progressWrap.classList.add('active');
  progressFill.style.width = '0%';
  progressText.textContent = 'Starting split...';
  splitResults = [];
  resultList.innerHTML = '';
  resultsDiv.classList.remove('active');

  try {
    var baseName = currentFile.name.replace(/\.pdf$/i, '');
    var ranges = getRangesForMode();
    if (!ranges || ranges.length === 0) {
      showToast('No valid pages to extract');
      splitBtn.disabled = false;
      progressWrap.classList.remove('active');
      return;
    }

    var srcDoc = await PDFLib.PDFDocument.load(currentArrayBuffer, { ignoreEncryption: true });

    for (var i = 0; i < ranges.length; i++) {
      var pct = Math.round((i / ranges.length) * 90);
      progressFill.style.width = pct + '%';
      progressText.textContent = 'Splitting ' + (i + 1) + ' of ' + ranges.length + '...';

      var newDoc = await PDFLib.PDFDocument.create();
      var copiedPages = await newDoc.copyPages(srcDoc, ranges[i].pages);
      copiedPages.forEach(function(page) { newDoc.addPage(page); });
      var pdfBytes = await newDoc.save();

      var outputName = baseName + '_' + ranges[i].label + '.pdf';
      splitResults.push({ name: outputName, bytes: pdfBytes });
    }

    progressFill.style.width = '100%';
    progressText.textContent = 'Done! ' + splitResults.length + ' file' + (splitResults.length !== 1 ? 's' : '') + ' created.';

    renderResults();
    resultsDiv.classList.add('active');
    document.getElementById('resultsTitle').textContent = 'Split Results (' + splitResults.length + ' file' + (splitResults.length !== 1 ? 's' : '') + ')';

    showToast('Split complete: ' + splitResults.length + ' file' + (splitResults.length !== 1 ? 's' : ''));

    setTimeout(function() {
      progressWrap.classList.remove('active');
    }, 2000);
  } catch (err) {
    showToast('Split failed: ' + err.message);
    progressWrap.classList.remove('active');
  }
  splitBtn.disabled = false;
}

function getRangesForMode() {
  if (currentMode === 'all') {
    var ranges = [];
    for (var i = 0; i < currentPageCount; i++) {
      ranges.push({ label: 'page' + (i + 1), pages: [i] });
    }
    return ranges;
  } else if (currentMode === 'ranges') {
    var raw = document.getElementById('rangeInput').value.trim();
    var result = parseRangeString(raw, currentPageCount);
    if (result.error) {
      showToast(result.error);
      return null;
    }
    return result.ranges;
  } else if (currentMode === 'every') {
    var n = parseInt(document.getElementById('everyInput').value);
    if (!n || n < 1) {
      showToast('Enter a valid number of pages');
      return null;
    }
    var chunks = [];
    for (var i = 0; i < currentPageCount; i += n) {
      var pages = [];
      var end = Math.min(i + n, currentPageCount);
      for (var j = i; j < end; j++) pages.push(j);
      chunks.push({ label: 'pages' + (i + 1) + '-' + end, pages: pages });
    }
    return chunks;
  }
  return null;
}

/* ---- Render results ---- */
function renderResults() {
  resultList.innerHTML = '';
  splitResults.forEach(function(sr, idx) {
    var div = document.createElement('div');
    div.className = 'result-item';
    div.innerHTML =
      '<div class="file-icon" style="width:32px;height:32px;font-size:.7rem;">PDF</div>' +
      '<span class="ri-name">' + escHtml(sr.name) + '</span>' +
      '<span class="ri-meta">' + formatBytes(sr.bytes.length) + '</span>' +
      '<button class="ri-download" data-idx="' + idx + '">Download</button>';
    div.querySelector('.ri-download').addEventListener('click', function() {
      downloadSingle(idx);
    });
    resultList.appendChild(div);
  });
}

function downloadSingle(idx) {
  var sr = splitResults[idx];
  var blob = new Blob([sr.bytes], { type: 'application/pdf' });
  var url = URL.createObjectURL(blob);
  var a = document.createElement('a');
  a.href = url;
  a.download = sr.name;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}

async function downloadAllAsZip() {
  if (splitResults.length === 0) {
    showToast('No files to download');
    return;
  }
  var btn = document.getElementById('downloadAllBtn');
  btn.disabled = true;
  btn.textContent = 'Creating ZIP...';

  try {
    var zip = new JSZip();
    splitResults.forEach(function(sr) {
      zip.file(sr.name, sr.bytes);
    });
    var content = await zip.generateAsync({ type: 'blob' });
    var baseName = currentFile ? currentFile.name.replace(/\.pdf$/i, '') : 'split';
    var url = URL.createObjectURL(content);
    var a = document.createElement('a');
    a.href = url;
    a.download = baseName + '_split.zip';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(url);
    showToast('ZIP downloaded with ' + splitResults.length + ' files');
  } catch (err) {
    showToast('ZIP creation failed: ' + err.message);
  }
  btn.disabled = false;
  btn.textContent = 'Download All as ZIP';
}

/* ---- Reset ---- */
function resetTool() {
  currentFile = null;
  currentArrayBuffer = null;
  currentPageCount = 0;
  splitResults = [];
  resultList.innerHTML = '';

  dropZone.classList.remove('has-file');
  dropZone.querySelector('h3').textContent = 'Drop a PDF file here';
  dropZone.querySelector('p').textContent = 'or click to browse \u2014 select a single PDF to split';
  fileInfoBar.classList.remove('active');
  splitOptions.classList.remove('active');
  actionBar.classList.remove('active');
  resultsDiv.classList.remove('active');
  progressWrap.classList.remove('active');
  progressFill.style.width = '0%';

  document.getElementById('rangeInput').value = '';
  document.getElementById('everyInput').value = '1';
  document.getElementById('previewAll').innerHTML = '';
  document.getElementById('previewRanges').innerHTML = '';
  document.getElementById('previewEvery').innerHTML = '';

  setMode('all');
}

/* ---- Helpers ---- */
function formatBytes(bytes) {
  if (bytes === 0) return '0 B';
  var k = 1024, sizes = ['B', 'KB', 'MB', 'GB'];
  var i = Math.floor(Math.log(bytes) / Math.log(k));
  return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
}

function escHtml(s) {
  return s.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
}

function showToast(msg) {
  var t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(function() { t.classList.remove('show'); }, 2500);
}

/* IntersectionObserver fade-in */
var observer = new IntersectionObserver(function(entries) {
  entries.forEach(function(entry) {
    if (entry.isIntersecting) {
      entry.target.classList.add('visible');
      observer.unobserve(entry.target);
    }
  });
}, { threshold: 0.1 });
document.querySelectorAll('.fade-in').forEach(function(el) { observer.observe(el); });
</script>
<script src="/js/analytics-lite.js" defer></script>
<script src="/js/revenue.js" defer></script>
<script src="/js/lead-capture.js" defer></script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "How do I split a PDF online for free?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Simply drag and drop your PDF file into NexTool's PDF Split tool, choose your split mode (all pages, custom ranges, or every N pages), and click Split PDF. Download individual pages or all at once as a ZIP file. No signup or upload to any server is required."
      }
    },
    {
      "@type": "Question",
      "name": "Is it safe to split PDFs with this tool?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes. NexTool's PDF Split runs 100% in your browser using pdf-lib. Your files are never uploaded to any server. All processing happens locally on your device, ensuring complete privacy."
      }
    },
    {
      "@type": "Question",
      "name": "Can I extract specific pages from a PDF?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes. Use the Custom Ranges mode to specify exactly which pages you want. Enter page numbers and ranges separated by commas, for example: 1-3, 5, 7-10. Each range becomes a separate PDF file."
      }
    },
    {
      "@type": "Question",
      "name": "Can I download all split pages at once?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes. After splitting, you can download each page individually or click Download All as ZIP to get all split files in a single ZIP archive for convenience."
      }
    }
  ]
}
</script>
</body>
</html>
