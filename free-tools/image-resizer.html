<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Free Image Resizer — Resize Images With Presets | NexTool</title>
<meta name="description" content="Free online image resizer with social media presets, bulk resize, format conversion (PNG, JPG, WebP), aspect ratio lock, and quality control. 100% client-side.">
<meta name="keywords" content="image resizer, resize image, bulk resize, social media image sizes, image converter, free image tool, NexTool">
<meta name="robots" content="index, follow">
<meta property="og:title" content="Free Image Resizer — Resize Images With Presets | NexTool">
<meta property="og:description" content="Resize images with social media presets, bulk processing, format conversion, and quality control. Free, private, no upload.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://nextool.app/free-tools/image-resizer.html">
<meta property="og:image" content="https://nextool.app/assets/og-default.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<link rel="canonical" href="https://nextool.app/free-tools/image-resizer.html">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Free Image Resizer — Resize Images With Presets | NexTool">
<meta name="twitter:description" content="Resize images with social media presets, bulk processing, and format conversion. Free online tool by NexTool.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"SoftwareApplication","name":"NexTool Image Resizer","applicationCategory":"MultimediaApplication","operatingSystem":"Web","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"description":"Free online image resizer with social media presets, bulk resize, format conversion, aspect ratio lock, and quality control. Runs entirely in the browser."}
</script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--bg:#050508;--surface:#111118;--surface2:#1a1a24;--border:#2a2a3a;--text:#e4e4eb;--text2:#9494a8;--primary:#6366f1;--accent:#a855f7;--pink:#ec4899;--green:#22c55e;--red:#ef4444;--cyan:#22d3ee;--yellow:#eab308;--radius:12px;--glass:rgba(17,17,24,0.7)}
html{scroll-behavior:smooth}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;min-height:100vh;overflow-x:hidden}
/* NAV */
.nav{position:sticky;top:0;z-index:100;background:rgba(5,5,8,0.85);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:0 2rem;height:64px;display:flex;align-items:center;justify-content:space-between}
.nav-logo{font-size:1.4rem;font-weight:800;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-decoration:none}
.nav-links{display:flex;align-items:center;gap:1.5rem}
.nav-links a{color:var(--text2);text-decoration:none;font-size:.875rem;font-weight:500;transition:color .2s}
.nav-links a:hover{color:var(--text)}
.nav-cta{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff!important;padding:.5rem 1.2rem;border-radius:8px;font-weight:600;-webkit-text-fill-color:#fff!important}
.nav-cta:hover{opacity:.9}
.nav-toggle{display:none;background:none;border:none;color:var(--text);font-size:1.5rem;cursor:pointer}
/* HERO */
.hero{text-align:center;padding:3rem 1.5rem 2rem;max-width:700px;margin:0 auto}
.hero h1{font-size:2.2rem;font-weight:800;line-height:1.2;margin-bottom:.75rem}
.hero h1 span{background:linear-gradient(135deg,var(--primary),var(--accent),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{color:var(--text2);font-size:1rem}
/* TOOL */
.tool-container{max-width:1100px;margin:0 auto;padding:0 1.5rem 3rem}
/* DROP ZONE */
.drop-zone{border:2px dashed var(--border);border-radius:var(--radius);padding:3rem 2rem;text-align:center;cursor:pointer;transition:all .3s;position:relative;margin-bottom:1.5rem}
.drop-zone:hover,.drop-zone.dragover{border-color:var(--primary);background:rgba(99,102,241,.06)}
.drop-zone .dz-icon{font-size:3rem;margin-bottom:.75rem;display:block}
.drop-zone p{color:var(--text2);font-size:.95rem;margin-bottom:.25rem}
.drop-zone .hint{color:var(--text2);font-size:.78rem;opacity:.6}
.drop-zone input[type="file"]{position:absolute;inset:0;opacity:0;cursor:pointer}
/* PANELS */
.panel{background:var(--glass);backdrop-filter:blur(16px);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;margin-bottom:1.25rem}
.panel-header{padding:.65rem 1rem;border-bottom:1px solid var(--border);font-size:.8rem;font-weight:600;color:var(--text2);display:flex;justify-content:space-between;align-items:center;background:rgba(26,26,36,0.5)}
.panel-body{padding:1rem}
/* IMAGE LIST */
.image-list{display:flex;flex-direction:column;gap:.75rem;margin-bottom:1rem}
.image-item{display:flex;align-items:center;gap:.85rem;padding:.65rem .85rem;background:var(--surface2);border:1px solid var(--border);border-radius:10px;transition:border-color .2s}
.image-item:hover{border-color:var(--primary)}
.image-item .thumb{width:56px;height:56px;border-radius:8px;object-fit:cover;flex-shrink:0;background:var(--surface)}
.image-item .meta{flex:1;min-width:0}
.image-item .fname{font-size:.85rem;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.image-item .fdetail{font-size:.75rem;color:var(--text2)}
.image-item .remove-btn{background:none;border:none;color:var(--text2);cursor:pointer;font-size:1.1rem;padding:4px 8px;transition:color .2s;flex-shrink:0}
.image-item .remove-btn:hover{color:var(--red)}
/* PRESETS */
.preset-section{margin-bottom:1.25rem}
.preset-section label{font-size:.8rem;font-weight:600;color:var(--text2);display:block;margin-bottom:.5rem}
.presets{display:flex;gap:.4rem;flex-wrap:wrap}
.preset-btn{padding:.38rem .75rem;border-radius:7px;border:1px solid var(--border);background:var(--surface2);color:var(--text2);font-size:.75rem;font-weight:600;cursor:pointer;font-family:inherit;transition:all .2s;white-space:nowrap}
.preset-btn:hover,.preset-btn.active{border-color:var(--primary);color:var(--text);background:rgba(99,102,241,.12)}
.preset-btn .pdim{font-size:.65rem;color:var(--text2);opacity:.7;margin-left:.2rem}
/* CONTROLS */
.controls-row{display:grid;grid-template-columns:1fr auto 1fr;gap:.75rem;align-items:end;margin-bottom:1.25rem}
.form-group{display:flex;flex-direction:column;gap:.3rem}
.form-group label{font-size:.78rem;font-weight:600;color:var(--text2)}
.form-input{padding:.5rem .7rem;border-radius:8px;border:1px solid var(--border);background:var(--surface2);color:var(--text);font-family:inherit;font-size:.875rem;outline:none;transition:border-color .2s;width:100%}
.form-input:focus{border-color:var(--primary)}
select.form-input{appearance:none;padding-right:1.8rem;cursor:pointer;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%239494a8' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right .6rem center}
.lock-btn{width:40px;height:40px;border-radius:8px;border:1px solid var(--border);background:var(--surface2);color:var(--text2);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s;flex-shrink:0;margin-bottom:2px;font-size:1.1rem}
.lock-btn:hover,.lock-btn.locked{border-color:var(--primary);color:var(--primary);background:rgba(99,102,241,.12)}
.settings-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1.25rem}
/* SLIDER */
.slider-group{display:flex;flex-direction:column;gap:.4rem}
.slider-group .slider-label{display:flex;justify-content:space-between;font-size:.78rem;font-weight:600;color:var(--text2)}
.slider-group .slider-label span{color:var(--text);font-weight:700}
.slider{-webkit-appearance:none;appearance:none;width:100%;height:6px;border-radius:3px;background:var(--border);outline:none;cursor:pointer}
.slider::-webkit-slider-thumb{-webkit-appearance:none;width:18px;height:18px;border-radius:50%;background:linear-gradient(135deg,var(--primary),var(--accent));cursor:pointer;border:none;box-shadow:0 2px 8px rgba(99,102,241,.4)}
.slider::-moz-range-thumb{width:18px;height:18px;border-radius:50%;background:var(--primary);cursor:pointer;border:none}
/* TOGGLE */
.toggle-row{display:flex;align-items:center;gap:.6rem;margin-bottom:1.25rem}
.toggle-row label{font-size:.8rem;font-weight:600;color:var(--text2);cursor:pointer}
.toggle{position:relative;width:40px;height:22px;flex-shrink:0}
.toggle input{opacity:0;width:0;height:0}
.toggle .track{position:absolute;inset:0;background:var(--border);border-radius:11px;transition:background .2s;cursor:pointer}
.toggle .track::after{content:'';position:absolute;top:3px;left:3px;width:16px;height:16px;border-radius:50%;background:#fff;transition:transform .2s}
.toggle input:checked+.track{background:var(--primary)}
.toggle input:checked+.track::after{transform:translateX(18px)}
/* PREVIEW */
.preview-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1.25rem}
.preview-box{background:var(--surface2);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;position:relative;aspect-ratio:16/10;display:flex;align-items:center;justify-content:center}
.preview-box img{max-width:100%;max-height:100%;object-fit:contain}
.preview-box .plabel{position:absolute;top:.5rem;left:.5rem;padding:.2rem .55rem;border-radius:5px;background:rgba(0,0,0,.75);font-size:.65rem;font-weight:600;color:var(--text2);text-transform:uppercase;letter-spacing:.04em}
/* BUTTONS */
.btn-row{display:flex;gap:.6rem;flex-wrap:wrap;margin-bottom:.5rem}
.btn-primary{display:inline-flex;align-items:center;gap:.35rem;background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;padding:.55rem 1.3rem;border-radius:8px;border:none;font-weight:700;font-size:.85rem;cursor:pointer;font-family:inherit;transition:transform .2s,box-shadow .2s}
.btn-primary:hover{transform:translateY(-2px);box-shadow:0 6px 24px rgba(99,102,241,.35)}
.btn-primary:disabled{opacity:.4;cursor:not-allowed;transform:none;box-shadow:none}
.btn-secondary{display:inline-flex;align-items:center;gap:.35rem;background:var(--surface2);border:1px solid var(--border);color:var(--text2);padding:.55rem 1.3rem;border-radius:8px;font-weight:600;font-size:.85rem;cursor:pointer;font-family:inherit;transition:all .2s}
.btn-secondary:hover{border-color:var(--primary);color:var(--text)}
.btn-secondary:disabled{opacity:.4;cursor:not-allowed}
/* INFO BAR */
.info-bar{display:flex;align-items:center;gap:.6rem;padding:.65rem 1rem;border-radius:8px;font-size:.82rem;margin-bottom:1rem}
.info-bar.success{background:rgba(34,197,94,.08);border:1px solid rgba(34,197,94,.2);color:var(--green)}
/* CTA */
.cta-section{text-align:center;padding:4rem 1.5rem;max-width:700px;margin:0 auto}
.cta-section h2{font-size:1.8rem;font-weight:800;margin-bottom:.75rem}
.cta-section h2 span{background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.cta-section p{color:var(--text2);margin-bottom:1.5rem}
.cta-btn{display:inline-block;background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;padding:.75rem 2rem;border-radius:10px;font-weight:700;text-decoration:none;font-size:1rem;transition:transform .2s,box-shadow .2s}
.cta-btn:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(99,102,241,.3)}
/* FOOTER */
.footer{border-top:1px solid var(--border);padding:3rem 2rem 2rem;max-width:1200px;margin:0 auto}
.footer-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:2rem;margin-bottom:2rem}
.footer-col h4{font-size:.85rem;font-weight:700;margin-bottom:.75rem;color:var(--text)}
.footer-col a{display:block;color:var(--text2);text-decoration:none;font-size:.8rem;margin-bottom:.4rem;transition:color .2s}
.footer-col a:hover{color:var(--primary)}
.footer-bottom{text-align:center;color:var(--text2);font-size:.75rem;padding-top:1.5rem;border-top:1px solid var(--border)}
/* FADE */
.fade-in{opacity:0;transform:translateY(20px);transition:opacity .6s,transform .6s}
.fade-in.visible{opacity:1;transform:translateY(0)}
/* TOAST */
.toast{position:fixed;bottom:2rem;left:50%;transform:translateX(-50%) translateY(80px);background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.6rem 1.2rem;border-radius:10px;font-size:.85rem;font-weight:500;z-index:200;transition:transform .3s;pointer-events:none}
.toast.show{transform:translateX(-50%) translateY(0)}
.hidden{display:none!important}
/* RESPONSIVE */
@media(max-width:768px){
  .nav-links{display:none;position:absolute;top:64px;left:0;right:0;background:var(--bg);border-bottom:1px solid var(--border);flex-direction:column;padding:1rem 2rem;gap:1rem}
  .nav-links.open{display:flex}
  .nav-toggle{display:block}
  .hero h1{font-size:1.6rem}
  .controls-row{grid-template-columns:1fr}
  .settings-grid{grid-template-columns:1fr}
  .preview-grid{grid-template-columns:1fr}
  .presets{gap:.3rem}
  .preset-btn{font-size:.7rem;padding:.32rem .55rem}
  .footer-grid{grid-template-columns:1fr}
}
</style>
</head>
<body>

<nav class="nav">
  <a href="/" class="nav-logo">NexTool</a>
  <button class="nav-toggle" onclick="document.querySelector('.nav-links').classList.toggle('open')" aria-label="Menu">&#9776;</button>
  <div class="nav-links">
    <a href="/">Home</a>
    <a href="/free-tools/">Tools</a>
    <a href="/free-tools/">Free Tools</a>
    <a href="/blog/">Blog</a>
    <a href="/pro.html" class="nav-cta">Get Pro &mdash; $29</a>
  </div>
</nav>

<section class="hero fade-in">
  <h1>Free <span>Image Resizer</span></h1>
  <p class="tool-summary" style="color:#94a3b8;font-size:15px;line-height:1.6;margin-bottom:24px;max-width:700px;margin-left:auto;margin-right:auto;">Resize single or multiple images with social media presets, custom dimensions, format conversion (PNG, JPG, WebP), quality control, and aspect ratio lock. Everything runs in your browser -- nothing is uploaded to any server.</p>
</section>

<div class="tool-container fade-in">

  <!-- UPLOAD PANEL -->
  <div class="panel" id="uploadPanel">
    <div class="panel-header"><span>Upload Images</span><span id="fileCount"></span></div>
    <div class="panel-body">
      <div class="drop-zone" id="dropZone">
        <span class="dz-icon">&#128444;</span>
        <p>Drag and drop images here, or click to browse</p>
        <p class="hint">Supports PNG, JPG, WebP, GIF &mdash; multiple files allowed</p>
        <input type="file" id="fileInput" accept="image/png,image/jpeg,image/webp,image/gif" multiple>
      </div>
      <div class="image-list hidden" id="imageList"></div>
    </div>
  </div>

  <!-- SETTINGS PANEL -->
  <div class="panel hidden" id="settingsPanel">
    <div class="panel-header"><span>Resize Settings</span><span id="originalDims"></span></div>
    <div class="panel-body">

      <!-- Presets -->
      <div class="preset-section">
        <label>Social Media Presets</label>
        <div class="presets" id="presetContainer">
          <button class="preset-btn" data-w="1080" data-h="1080">Instagram Post <span class="pdim">1080x1080</span></button>
          <button class="preset-btn" data-w="1080" data-h="1920">IG Story <span class="pdim">1080x1920</span></button>
          <button class="preset-btn" data-w="820" data-h="312">FB Cover <span class="pdim">820x312</span></button>
          <button class="preset-btn" data-w="1500" data-h="500">Twitter Header <span class="pdim">1500x500</span></button>
          <button class="preset-btn" data-w="1280" data-h="720">YT Thumbnail <span class="pdim">1280x720</span></button>
          <button class="preset-btn" data-w="1584" data-h="396">LinkedIn Banner <span class="pdim">1584x396</span></button>
          <button class="preset-btn" data-w="1000" data-h="1500">Pinterest Pin <span class="pdim">1000x1500</span></button>
          <button class="preset-btn" data-w="1200" data-h="630">OG Image <span class="pdim">1200x630</span></button>
        </div>
      </div>

      <!-- Custom Dimensions -->
      <div class="controls-row">
        <div class="form-group">
          <label for="inputWidth">Width (px)</label>
          <input class="form-input" type="number" id="inputWidth" min="1" max="10000" value="800">
        </div>
        <button class="lock-btn locked" id="lockBtn" title="Maintain aspect ratio">&#128279;</button>
        <div class="form-group">
          <label for="inputHeight">Height (px)</label>
          <input class="form-input" type="number" id="inputHeight" min="1" max="10000" value="600">
        </div>
      </div>

      <!-- Format & Quality -->
      <div class="settings-grid">
        <div class="form-group">
          <label for="formatSelect">Output Format</label>
          <select class="form-input" id="formatSelect">
            <option value="image/png">PNG</option>
            <option value="image/jpeg" selected>JPG</option>
            <option value="image/webp">WebP</option>
          </select>
        </div>
        <div class="slider-group" id="qualityGroup">
          <div class="slider-label"><label for="qualitySlider">Quality</label><span id="qualityVal">85%</span></div>
          <input type="range" class="slider" id="qualitySlider" min="10" max="100" value="85" step="1">
        </div>
      </div>

      <!-- Aspect Ratio Toggle -->
      <div class="toggle-row">
        <div class="toggle">
          <input type="checkbox" id="aspectToggle" checked>
          <span class="track"></span>
        </div>
        <label for="aspectToggle">Maintain aspect ratio</label>
      </div>

      <div class="btn-row">
        <button class="btn-primary" id="resizeBtn" onclick="resizeAll()">Resize Image(s)</button>
        <button class="btn-secondary" onclick="resetAll()">Clear All</button>
      </div>
    </div>
  </div>

  <!-- PREVIEW / OUTPUT PANEL -->
  <div class="panel hidden" id="outputPanel">
    <div class="panel-header"><span>Result</span><span id="resultCount"></span></div>
    <div class="panel-body">
      <div id="outputInfo"></div>
      <div class="preview-grid" id="previewGrid"></div>
      <div class="btn-row" id="downloadRow">
        <button class="btn-primary" id="downloadSingleBtn" onclick="downloadSingle(0)">Download</button>
        <button class="btn-primary hidden" id="downloadAllBtn" onclick="downloadAllFiles()">Download All</button>
        <button class="btn-secondary" onclick="resizeAll()">Re-resize</button>
      </div>
    </div>
  </div>

</div>

<section class="cta-section fade-in">
  <h2>Need something <span>more powerful</span>?</h2>
  <p>Let us build it for you. Custom APIs, dashboards, automations &mdash; whatever you need.</p>
  <a href="/#contact" class="cta-btn">Start a Project &rarr;</a>
</section>

<!-- Cross Promo -->
<section style="max-width:900px;margin:40px auto;padding:0 24px;">
<div style="background:linear-gradient(135deg,rgba(99,102,241,0.1),rgba(168,85,247,0.08));border:1px solid rgba(99,102,241,0.15);border-radius:20px;padding:32px 28px;text-align:center;">
<div style="font-size:13px;color:#818cf8;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Founding Member</div>
<h3 style="font-size:22px;font-weight:800;color:#fff;margin:0 0 8px;">Get NexTool Pro</h3>
<p style="color:#94a3b8;font-size:14px;margin:0 auto 20px;max-width:500px;">No banners, clean output, enhanced features on all 228+ tools. One-time payment.</p>
<div style="display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap;">
<a href="/pro.html" style="display:inline-block;padding:12px 28px;background:linear-gradient(135deg,#6366f1,#a855f7,#ec4899);color:#fff;border-radius:10px;font-weight:700;font-size:15px;text-decoration:none;">$29 &mdash; Get Pro</a>
<a href="/free-tools/" style="color:#94a3b8;font-size:14px;text-decoration:none;">Browse 228+ Free Tools &rarr;</a>
</div>
</div>
</section>

<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/box-shadow-generator.html" style="color:var(--primary);text-decoration:none">CSS Box Shadow Generator</a> · <a href="/free-tools/emoji-picker.html" style="color:var(--primary);text-decoration:none">Emoji Picker & Search</a> · <a href="/free-tools/meta-tag-generator.html" style="color:var(--primary);text-decoration:none">Meta Tag Generator</a></p>
</div>

<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/json-to-yaml-converter.html" style="color:var(--primary);text-decoration:none">Free JSON to YAML Converter</a> · <a href="/free-tools/image-compressor.html" style="color:var(--primary);text-decoration:none">Free Image Compressor</a> · <a href="/free-tools/og-image-generator.html" style="color:var(--primary);text-decoration:none">Free OG Image Generator</a></p>
</div>
<footer class="footer fade-in">
  <div class="footer-grid">
    <div class="footer-col">
      <h4>Products</h4>
      <a href="/free-tools/">228+ Free Tools</a>
<a href="/pro.html">NexTool Pro</a>
<a href="/workspace.html">Workspace</a>
    </div>
    <div class="footer-col">
      <h4>Explore</h4>
      <a href="/free-tools/">Free Tools</a><a href="/blog/">Blog</a><a href="/pro.html">FAQ</a><a href="/pro.html">Pro &mdash; $29</a>
    </div>
    <div class="footer-col">
      <h4>Ecosystem</h4>
      <a href="/">NexTool Home</a><a href="/#contact">Contact</a><a href="https://github.com/christian140903-sudo/nextool" target="_blank">GitHub</a>
    </div>
  </div>
  <div class="footer-bottom">&copy; 2026 NexTool. AI-powered tools for everyone.</div>
</footer>

<div class="toast" id="toast"></div>

<script>
/* ===== STATE ===== */
let files = [];
let results = [];
let lockAspect = true;
let aspectRatio = 1;

/* ===== DOM REFS ===== */
const dropZone = document.getElementById('dropZone');
const fileInput = document.getElementById('fileInput');
const imageList = document.getElementById('imageList');
const fileCount = document.getElementById('fileCount');
const settingsPanel = document.getElementById('settingsPanel');
const outputPanel = document.getElementById('outputPanel');
const inputWidth = document.getElementById('inputWidth');
const inputHeight = document.getElementById('inputHeight');
const lockBtnEl = document.getElementById('lockBtn');
const formatSelect = document.getElementById('formatSelect');
const qualitySlider = document.getElementById('qualitySlider');
const qualityVal = document.getElementById('qualityVal');
const qualityGroup = document.getElementById('qualityGroup');
const aspectToggle = document.getElementById('aspectToggle');
const originalDims = document.getElementById('originalDims');
const previewGrid = document.getElementById('previewGrid');
const outputInfo = document.getElementById('outputInfo');
const resultCount = document.getElementById('resultCount');
const downloadSingleBtn = document.getElementById('downloadSingleBtn');
const downloadAllBtn = document.getElementById('downloadAllBtn');

/* ===== UPLOAD HANDLING ===== */
dropZone.addEventListener('dragover', e => { e.preventDefault(); dropZone.classList.add('dragover'); });
dropZone.addEventListener('dragleave', () => dropZone.classList.remove('dragover'));
dropZone.addEventListener('drop', e => {
  e.preventDefault();
  dropZone.classList.remove('dragover');
  handleFiles(e.dataTransfer.files);
});
fileInput.addEventListener('change', e => handleFiles(e.target.files));

function handleFiles(fileList) {
  const newFiles = Array.from(fileList).filter(f => f.type.startsWith('image/'));
  if (!newFiles.length) { showToast('No valid image files found'); return; }
  let loaded = 0;
  newFiles.forEach(f => {
    const reader = new FileReader();
    reader.onload = ev => {
      const img = new Image();
      img.onload = () => {
        files.push({ file: f, img: img, dataUrl: ev.target.result });
        loaded++;
        if (loaded === newFiles.length) onFilesReady();
      };
      img.onerror = () => { loaded++; if (loaded === newFiles.length) onFilesReady(); };
      img.src = ev.target.result;
    };
    reader.readAsDataURL(f);
  });
}

function onFilesReady() {
  renderImageList();
  if (files.length > 0) {
    settingsPanel.classList.remove('hidden');
    const first = files[0];
    aspectRatio = first.img.width / first.img.height;
    inputWidth.value = first.img.width;
    inputHeight.value = first.img.height;
    originalDims.textContent = first.img.width + ' x ' + first.img.height;
    outputPanel.classList.add('hidden');
  }
  fileInput.value = '';
}

function renderImageList() {
  if (!files.length) { imageList.classList.add('hidden'); fileCount.textContent = ''; return; }
  imageList.classList.remove('hidden');
  fileCount.textContent = files.length + ' image' + (files.length !== 1 ? 's' : '');
  imageList.innerHTML = files.map(function(f, i) {
    return '<div class="image-item">' +
      '<img class="thumb" src="' + f.dataUrl + '" alt="' + esc(f.file.name) + '">' +
      '<div class="meta">' +
        '<div class="fname">' + esc(f.file.name) + '</div>' +
        '<div class="fdetail">' + f.img.width + ' x ' + f.img.height + ' &mdash; ' + fmtBytes(f.file.size) + ' &mdash; ' + f.file.type.split('/')[1].toUpperCase() + '</div>' +
      '</div>' +
      '<button class="remove-btn" onclick="removeFile(' + i + ')" title="Remove">&times;</button>' +
    '</div>';
  }).join('');
}

function removeFile(i) {
  files.splice(i, 1);
  renderImageList();
  if (!files.length) {
    settingsPanel.classList.add('hidden');
    outputPanel.classList.add('hidden');
    fileCount.textContent = '';
  } else {
    var first = files[0];
    aspectRatio = first.img.width / first.img.height;
    originalDims.textContent = first.img.width + ' x ' + first.img.height;
  }
}

/* ===== PRESETS ===== */
document.querySelectorAll('.preset-btn').forEach(function(btn) {
  btn.addEventListener('click', function() {
    document.querySelectorAll('.preset-btn').forEach(function(b) { b.classList.remove('active'); });
    btn.classList.add('active');
    var w = parseInt(btn.dataset.w);
    var h = parseInt(btn.dataset.h);
    inputWidth.value = w;
    inputHeight.value = h;
    lockAspect = false;
    aspectToggle.checked = false;
    lockBtnEl.classList.remove('locked');
  });
});

/* ===== DIMENSION INPUTS ===== */
inputWidth.addEventListener('input', function() {
  clearActivePreset();
  if (lockAspect && files.length) {
    var w = parseInt(inputWidth.value) || 1;
    inputHeight.value = Math.round(w / aspectRatio) || 1;
  }
});
inputHeight.addEventListener('input', function() {
  clearActivePreset();
  if (lockAspect && files.length) {
    var h = parseInt(inputHeight.value) || 1;
    inputWidth.value = Math.round(h * aspectRatio) || 1;
  }
});

function clearActivePreset() {
  document.querySelectorAll('.preset-btn').forEach(function(b) { b.classList.remove('active'); });
}

/* ===== ASPECT RATIO ===== */
lockBtnEl.addEventListener('click', function() {
  lockAspect = !lockAspect;
  aspectToggle.checked = lockAspect;
  lockBtnEl.classList.toggle('locked', lockAspect);
  if (lockAspect && files.length) {
    aspectRatio = files[0].img.width / files[0].img.height;
    var w = parseInt(inputWidth.value) || 1;
    inputHeight.value = Math.round(w / aspectRatio) || 1;
  }
});

aspectToggle.addEventListener('change', function() {
  lockAspect = aspectToggle.checked;
  lockBtnEl.classList.toggle('locked', lockAspect);
  if (lockAspect && files.length) {
    aspectRatio = files[0].img.width / files[0].img.height;
    var w = parseInt(inputWidth.value) || 1;
    inputHeight.value = Math.round(w / aspectRatio) || 1;
  }
});

/* ===== QUALITY SLIDER ===== */
qualitySlider.addEventListener('input', function() {
  qualityVal.textContent = qualitySlider.value + '%';
});

formatSelect.addEventListener('change', function() {
  var isPng = formatSelect.value === 'image/png';
  qualityGroup.style.opacity = isPng ? '.4' : '1';
  qualitySlider.disabled = isPng;
});

/* ===== RESIZE ===== */
function resizeAll() {
  if (!files.length) { showToast('Upload at least one image first'); return; }
  var tw = parseInt(inputWidth.value) || 1;
  var th = parseInt(inputHeight.value) || 1;
  var fmt = formatSelect.value;
  var q = parseInt(qualitySlider.value) / 100;

  results = [];
  var processed = 0;

  files.forEach(function(f, idx) {
    var canvas = document.createElement('canvas');
    canvas.width = tw;
    canvas.height = th;
    var ctx = canvas.getContext('2d');
    ctx.imageSmoothingEnabled = true;
    ctx.imageSmoothingQuality = 'high';

    if (tw < f.img.width / 2 || th < f.img.height / 2) {
      stepDown(ctx, f.img, tw, th);
    } else {
      ctx.drawImage(f.img, 0, 0, tw, th);
    }

    canvas.toBlob(function(blob) {
      results[idx] = {
        blob: blob,
        w: tw,
        h: th,
        origW: f.img.width,
        origH: f.img.height,
        origSize: f.file.size,
        name: f.file.name
      };
      processed++;
      if (processed === files.length) showResults();
    }, fmt, fmt === 'image/png' ? undefined : q);
  });
}

function stepDown(ctx, img, tw, th) {
  var cw = img.width, ch = img.height;
  var tmp = document.createElement('canvas');
  var tc = tmp.getContext('2d');
  tmp.width = cw; tmp.height = ch;
  tc.drawImage(img, 0, 0);
  while (cw / 2 > tw && ch / 2 > th) {
    cw = Math.round(cw / 2);
    ch = Math.round(ch / 2);
    var s = document.createElement('canvas');
    s.width = cw; s.height = ch;
    var sc = s.getContext('2d');
    sc.imageSmoothingEnabled = true;
    sc.imageSmoothingQuality = 'high';
    sc.drawImage(tmp, 0, 0, cw, ch);
    tmp.width = cw; tmp.height = ch;
    tc.drawImage(s, 0, 0);
  }
  ctx.drawImage(tmp, 0, 0, tw, th);
}

function showResults() {
  outputPanel.classList.remove('hidden');
  resultCount.textContent = results.length + ' resized';

  if (results.length === 1) {
    var r = results[0];
    var pct = ((1 - r.blob.size / r.origSize) * 100).toFixed(1);
    var arrow = pct > 0 ? 'Saved ' + pct + '%' : Math.abs(pct) + '% larger';
    outputInfo.innerHTML = '<div class="info-bar success">' +
      r.origW + 'x' + r.origH + ' (' + fmtBytes(r.origSize) + ') &rarr; ' +
      r.w + 'x' + r.h + ' (' + fmtBytes(r.blob.size) + ') &mdash; ' + arrow +
      '</div>';
  } else {
    var totalOrig = 0, totalNew = 0;
    results.forEach(function(r) { totalOrig += r.origSize; totalNew += r.blob.size; });
    var pctAll = ((1 - totalNew / totalOrig) * 100).toFixed(1);
    outputInfo.innerHTML = '<div class="info-bar success">' +
      results.length + ' images resized to ' + results[0].w + 'x' + results[0].h +
      ' &mdash; Total: ' + fmtBytes(totalOrig) + ' &rarr; ' + fmtBytes(totalNew) +
      ' (' + (pctAll > 0 ? pctAll + '% saved' : Math.abs(pctAll) + '% larger') + ')' +
      '</div>';
  }

  previewGrid.innerHTML = '';
  if (results.length === 1) {
    previewGrid.innerHTML =
      '<div class="preview-box"><span class="plabel">Original</span><img src="' + files[0].dataUrl + '" alt="Original"></div>' +
      '<div class="preview-box"><span class="plabel">Resized</span><img src="' + URL.createObjectURL(results[0].blob) + '" alt="Resized"></div>';
  } else {
    results.forEach(function(r, i) {
      previewGrid.innerHTML +=
        '<div class="preview-box"><span class="plabel">' + esc(shortName(r.name)) + ' &mdash; ' + fmtBytes(r.blob.size) + '</span>' +
        '<img src="' + URL.createObjectURL(r.blob) + '" alt="Resized ' + (i+1) + '"></div>';
    });
  }

  if (results.length === 1) {
    downloadSingleBtn.classList.remove('hidden');
    downloadSingleBtn.textContent = 'Download';
    downloadAllBtn.classList.add('hidden');
  } else {
    downloadSingleBtn.classList.add('hidden');
    downloadAllBtn.classList.remove('hidden');
    downloadAllBtn.textContent = 'Download All (' + results.length + ')';
  }

  outputPanel.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

/* ===== DOWNLOAD ===== */
function downloadSingle(i) {
  if (!results[i]) return;
  triggerDownload(results[i].blob, makeFileName(results[i].name));
  showToast('Downloaded!');
}

function downloadAllFiles() {
  results.forEach(function(r, i) {
    setTimeout(function() { triggerDownload(r.blob, makeFileName(r.name)); }, i * 150);
  });
  showToast('Downloading ' + results.length + ' files...');
}

function triggerDownload(blob, name) {
  var a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = name;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  setTimeout(function() { URL.revokeObjectURL(a.href); }, 1000);
}

function makeFileName(origName) {
  var ext = formatSelect.value.split('/')[1];
  var extStr = ext === 'jpeg' ? 'jpg' : ext;
  var base = origName.replace(/\.[^.]+$/, '') || 'image';
  return base + '-resized.' + extStr;
}

/* ===== RESET ===== */
function resetAll() {
  files = [];
  results = [];
  imageList.innerHTML = '';
  imageList.classList.add('hidden');
  fileCount.textContent = '';
  settingsPanel.classList.add('hidden');
  outputPanel.classList.add('hidden');
  previewGrid.innerHTML = '';
  outputInfo.innerHTML = '';
  fileInput.value = '';
  clearActivePreset();
  showToast('Cleared');
}

/* ===== HELPERS ===== */
function fmtBytes(b) {
  if (b === 0) return '0 B';
  var k = 1024, s = ['B','KB','MB','GB'];
  var i = Math.floor(Math.log(b) / Math.log(k));
  return parseFloat((b / Math.pow(k, i)).toFixed(1)) + ' ' + s[i];
}

function esc(s) { return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'); }

function shortName(n) { return n.length > 20 ? n.slice(0, 17) + '...' : n; }

function showToast(msg) {
  var t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(function() { t.classList.remove('show'); }, 2200);
}

/* IntersectionObserver fade-in */
var observer = new IntersectionObserver(function(entries) {
  entries.forEach(function(entry) { if (entry.isIntersecting) { entry.target.classList.add('visible'); observer.unobserve(entry.target); }});
}, { threshold: 0.1 });
document.querySelectorAll('.fade-in').forEach(function(el) { observer.observe(el); });
</script>
<script src="/js/analytics-lite.js" defer></script>
<script src="/js/revenue.js" defer></script>
<script src="/js/lead-capture.js" defer></script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "How does the NexTool Image Resizer work?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "The NexTool Image Resizer uses the HTML5 Canvas API to resize images entirely in your browser. No images are uploaded to any server. You select or drag images, choose a target size (preset or custom), pick an output format, and download the results instantly."
      }
    },
    {
      "@type": "Question",
      "name": "Can I resize multiple images at once?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes. The bulk resize feature lets you upload multiple images simultaneously and apply the same dimensions, format, and quality settings to all of them. You can then download each resized image individually."
      }
    },
    {
      "@type": "Question",
      "name": "What social media image sizes are supported?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "The tool includes presets for Instagram Post (1080x1080), Instagram Story (1080x1920), Facebook Cover (820x312), Twitter/X Header (1500x500), YouTube Thumbnail (1280x720), LinkedIn Banner (1584x396), Pinterest Pin (1000x1500), and Open Graph Image (1200x630)."
      }
    },
    {
      "@type": "Question",
      "name": "Is the Image Resizer really free and private?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Absolutely. The tool is 100% free with no signup required. All processing happens locally in your browser using the Canvas API. Your images never leave your device, ensuring complete privacy."
      }
    }
  ]
}
</script>
</body>
</html>
