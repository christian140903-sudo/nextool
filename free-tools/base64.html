<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Free Base64 Encoder/Decoder — Encode &amp; Decode Text and Files | NexTool</title>
<meta name="description" content="Free online Base64 encoder and decoder. Encode text or files to Base64, decode Base64 to text. Supports drag & drop, image preview, URL-safe mode, and clipboard copy.">
<meta name="keywords" content="base64 encoder, base64 decoder, encode base64, decode base64, file to base64, image to base64, online tool, free">
<meta name="robots" content="index, follow">
<meta property="og:title" content="Free Base64 Encoder/Decoder | NexTool">
<meta property="og:description" content="Encode and decode Base64 online. Supports text, files, drag & drop, image preview, and URL-safe mode.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://nextool.app/free-tools/base64.html">
<meta property="og:image" content="https://nextool.app/assets/og-default.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Free Base64 Encoder/Decoder | NexTool">
<meta name="twitter:description" content="Encode and decode Base64 online for free. Text & file support.">
<link rel="canonical" href="https://nextool.app/free-tools/base64.html">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "NexTool Base64 Encoder/Decoder",
  "applicationCategory": "DeveloperApplication",
  "operatingSystem": "Web",
  "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
  "description": "Free online Base64 encoder and decoder with file support, image preview, and URL-safe mode.",
  "url": "https://nextool.app/free-tools/base64.html"
}
</script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--bg:#050508;--surface:#111118;--surface2:#1a1a24;--border:#252535;--text:#e4e4ed;--text2:#9999aa;--primary:#6366f1;--accent:#a855f7;--pink:#ec4899;--green:#22c55e;--red:#ef4444;--radius:12px;--glass:rgba(17,17,24,.72);--glass-border:rgba(99,102,241,.15)}
html{scroll-behavior:smooth}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;min-height:100vh;overflow-x:hidden}
::selection{background:var(--primary);color:#fff}
/* NAV */
.nav{position:sticky;top:0;z-index:100;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);background:rgba(5,5,8,.82);border-bottom:1px solid var(--glass-border);padding:0 1.5rem}
.nav-inner{max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;height:64px}
.nav-logo{font-size:1.35rem;font-weight:800;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-decoration:none}
.nav-links{display:flex;align-items:center;gap:1.75rem}
.nav-links a{color:var(--text2);text-decoration:none;font-size:.875rem;font-weight:500;transition:color .2s}
.nav-links a:hover{color:var(--text)}
.nav-cta{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff!important;padding:.5rem 1.15rem;border-radius:8px;font-weight:600;font-size:.85rem;-webkit-text-fill-color:#fff!important}
.nav-cta:hover{opacity:.9}
.nav-toggle{display:none;background:none;border:none;color:var(--text);font-size:1.5rem;cursor:pointer}
/* HERO */
.hero{text-align:center;padding:3.5rem 1.5rem 2rem;max-width:720px;margin:0 auto}
.hero-badge{display:inline-block;font-size:.75rem;font-weight:600;color:var(--accent);background:rgba(168,85,247,.1);border:1px solid rgba(168,85,247,.2);border-radius:99px;padding:.3rem .9rem;margin-bottom:1rem;letter-spacing:.03em}
.hero h1{font-size:clamp(1.75rem,4.5vw,2.5rem);font-weight:800;line-height:1.15;margin-bottom:.75rem}
.hero h1 span{background:linear-gradient(135deg,var(--primary),var(--accent),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{color:var(--text2);font-size:1.05rem;max-width:560px;margin:0 auto}
/* TOOL CARD */
.tool-wrap{max-width:960px;margin:0 auto;padding:0 1.5rem 3rem}
.glass-card{background:var(--glass);border:1px solid var(--glass-border);border-radius:var(--radius);backdrop-filter:blur(12px);padding:1.5rem;margin-bottom:1.25rem}
/* MODE TOGGLE */
.mode-bar{display:flex;gap:.5rem;margin-bottom:1.25rem;background:var(--surface);border-radius:10px;padding:4px}
.mode-btn{flex:1;padding:.6rem;border:none;border-radius:8px;background:transparent;color:var(--text2);font-family:inherit;font-size:.875rem;font-weight:600;cursor:pointer;transition:all .2s}
.mode-btn.active{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff}
/* OPTIONS */
.options-row{display:flex;flex-wrap:wrap;gap:.75rem;align-items:center;margin-bottom:1rem}
.opt-label{display:flex;align-items:center;gap:.4rem;font-size:.8rem;color:var(--text2);cursor:pointer;user-select:none}
.opt-label input[type=checkbox]{accent-color:var(--primary);width:15px;height:15px;cursor:pointer}
.swap-btn{margin-left:auto;background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.45rem .9rem;border-radius:8px;font-family:inherit;font-size:.8rem;font-weight:600;cursor:pointer;display:flex;align-items:center;gap:.35rem;transition:all .2s}
.swap-btn:hover{border-color:var(--primary);color:var(--primary)}
.swap-btn svg{width:16px;height:16px}
/* TEXTAREAS */
.editor-grid{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1rem}
.editor-col label{display:flex;justify-content:space-between;font-size:.78rem;font-weight:600;color:var(--text2);margin-bottom:.4rem;text-transform:uppercase;letter-spacing:.04em}
.editor-col label .count{font-weight:500;color:var(--text2);opacity:.7}
.editor-col textarea{width:100%;min-height:200px;resize:vertical;background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:.85rem;color:var(--text);font-family:'Inter',monospace;font-size:.85rem;line-height:1.55;transition:border-color .2s}
.editor-col textarea:focus{outline:none;border-color:var(--primary)}
.editor-col textarea::placeholder{color:var(--text2);opacity:.5}
/* BUTTONS */
.action-row{display:flex;flex-wrap:wrap;gap:.6rem;margin-bottom:1rem}
.btn{padding:.6rem 1.2rem;border:none;border-radius:8px;font-family:inherit;font-size:.85rem;font-weight:600;cursor:pointer;transition:all .2s;display:inline-flex;align-items:center;gap:.35rem}
.btn-primary{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff}
.btn-primary:hover{opacity:.88;transform:translateY(-1px)}
.btn-secondary{background:var(--surface2);border:1px solid var(--border);color:var(--text)}
.btn-secondary:hover{border-color:var(--primary);color:var(--primary)}
.btn-copy.copied{background:var(--green);color:#fff;border-color:var(--green)}
/* DROP ZONE */
.drop-zone{border:2px dashed var(--border);border-radius:10px;padding:2rem;text-align:center;transition:all .25s;cursor:pointer;margin-bottom:1rem;position:relative}
.drop-zone.dragover{border-color:var(--primary);background:rgba(99,102,241,.06)}
.drop-zone p{color:var(--text2);font-size:.88rem}
.drop-zone p strong{color:var(--text)}
.drop-zone input{position:absolute;inset:0;opacity:0;cursor:pointer}
.file-info{font-size:.78rem;color:var(--accent);margin-top:.5rem}
/* IMAGE PREVIEW */
.preview-section{text-align:center;margin-bottom:1rem;display:none}
.preview-section img{max-width:100%;max-height:260px;border-radius:10px;border:1px solid var(--border)}
.preview-label{font-size:.78rem;color:var(--text2);margin-bottom:.5rem;text-transform:uppercase;letter-spacing:.04em;font-weight:600}
/* DETECT BADGE */
.detect-badge{display:inline-block;font-size:.72rem;font-weight:600;padding:.2rem .6rem;border-radius:6px;margin-left:.5rem}
.detect-badge.is-b64{background:rgba(34,197,94,.12);color:var(--green)}
.detect-badge.not-b64{background:rgba(239,68,68,.1);color:var(--red)}
/* TOAST */
.toast{position:fixed;bottom:1.5rem;left:50%;transform:translateX(-50%) translateY(80px);background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.7rem 1.2rem;border-radius:10px;font-size:.85rem;font-weight:500;z-index:999;transition:transform .3s ease,opacity .3s ease;opacity:0;pointer-events:none}
.toast.show{transform:translateX(-50%) translateY(0);opacity:1}
/* CTA */
.cta-section{text-align:center;padding:4rem 1.5rem;max-width:700px;margin:0 auto}
.cta-section h2{font-size:clamp(1.5rem,3.5vw,2rem);font-weight:800;margin-bottom:.6rem}
.cta-section h2 span{background:linear-gradient(135deg,var(--primary),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.cta-section p{color:var(--text2);margin-bottom:1.5rem;font-size:1rem}
.cta-big{display:inline-block;background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;padding:.75rem 2rem;border-radius:10px;font-weight:700;font-size:1rem;text-decoration:none;transition:opacity .2s}
.cta-big:hover{opacity:.88}
/* FOOTER */
.footer{border-top:1px solid var(--border);padding:3rem 1.5rem 2rem;max-width:1200px;margin:0 auto}
.footer-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:2rem;margin-bottom:2rem}
.footer-col h4{font-size:.8rem;text-transform:uppercase;letter-spacing:.06em;color:var(--text2);margin-bottom:.75rem;font-weight:700}
.footer-col a{display:block;color:var(--text2);text-decoration:none;font-size:.85rem;padding:.25rem 0;transition:color .2s}
.footer-col a:hover{color:var(--text)}
.footer-bottom{text-align:center;color:var(--text2);font-size:.78rem;opacity:.6}
/* ANIMATIONS */
.fade-in{opacity:0;transform:translateY(24px);transition:opacity .6s ease,transform .6s ease}
.fade-in.visible{opacity:1;transform:translateY(0)}
/* RESPONSIVE */
@media(max-width:768px){
  .nav-links{display:none;position:absolute;top:64px;left:0;right:0;background:rgba(5,5,8,.96);flex-direction:column;padding:1rem 1.5rem;gap:1rem;border-bottom:1px solid var(--border)}
  .nav-links.open{display:flex}
  .nav-toggle{display:block}
  .editor-grid{grid-template-columns:1fr}
  .footer-grid{grid-template-columns:1fr;gap:1.5rem}
}
</style>
</head>
<body>

<!-- NAV -->
<nav class="nav">
  <div class="nav-inner">
    <a href="/" class="nav-logo">NexTool</a>
    <button class="nav-toggle" onclick="document.querySelector('.nav-links').classList.toggle('open')" aria-label="Menu">&#9776;</button>
    <div class="nav-links">
      <a href="/">Home</a>
      <a href="/free-tools/">Tools</a>
      <a href="/free-tools/">Free Tools</a>
      <a href="/blog/">Blog</a>
      <a href="/pro.html" class="nav-cta">Get Pro — $29</a>
    </div>
  </div>
</nav>

<!-- HERO -->
<section class="hero fade-in">
  <div class="hero-badge">Free Developer Tool</div>
  <h1><span>Base64</span> Encoder / Decoder</h1>
  <p class="tool-summary" style="color:#94a3b8;font-size:15px;line-height:1.6;margin-bottom:24px;max-width:700px;margin-left:auto;margin-right:auto;">NexTool's Base64 Encoder/Decoder converts text and files to and from Base64 encoding instantly. Supports drag-and-drop file upload, automatic image preview, URL-safe Base64 mode, and one-click clipboard copy. Runs entirely in your browser with no data sent to any server. Free, no signup.</p>
</section>

<!-- TOOL -->
<div class="tool-wrap">
  <div class="glass-card fade-in">
    <!-- Mode -->
    <div class="mode-bar">
      <button class="mode-btn active" data-mode="encode" onclick="setMode('encode')">Encode</button>
      <button class="mode-btn" data-mode="decode" onclick="setMode('decode')">Decode</button>
    </div>

    <!-- Options -->
    <div class="options-row">
      <label class="opt-label"><input type="checkbox" id="urlSafe"> URL-safe Base64</label>
      <span id="detectBadge"></span>
      <button class="swap-btn" onclick="swapFields()" title="Swap input and output">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M7 16V4m0 0L3 8m4-4l4 4m6 4v12m0 0l4-4m-4 4l-4-4"/></svg>
        Swap
      </button>
    </div>

    <!-- Editors -->
    <div class="editor-grid">
      <div class="editor-col">
        <label>Input <span class="count" id="inputCount">0 chars</span></label>
        <textarea id="inputArea" placeholder="Type or paste text here..." oninput="handleInput()"></textarea>
      </div>
      <div class="editor-col">
        <label>Output <span class="count" id="outputCount">0 chars</span></label>
        <textarea id="outputArea" placeholder="Result appears here..." readonly></textarea>
      </div>
    </div>

    <!-- Actions -->
    <div class="action-row">
      <button class="btn btn-primary" onclick="convert()">Convert</button>
      <button class="btn btn-secondary btn-copy" id="copyBtn" onclick="copyOutput()">Copy Result</button>
      <button class="btn btn-secondary" onclick="clearAll()">Clear</button>
    </div>
  </div>

  <!-- Drop Zone -->
  <div class="glass-card fade-in">
    <div class="drop-zone" id="dropZone">
      <input type="file" id="fileInput" onchange="handleFile(this.files[0])">
      <p><strong>Drag &amp; drop a file</strong> or click to browse</p>
      <p style="font-size:.78rem;color:var(--text2);margin-top:.35rem">Any file type supported — images, documents, binaries</p>
      <div class="file-info" id="fileInfo"></div>
    </div>
  </div>

  <!-- Image Preview -->
  <div class="glass-card preview-section fade-in" id="previewSection">
    <div class="preview-label">Image Preview</div>
    <img id="previewImg" alt="Base64 image preview">
  </div>
</div>

<!-- CTA -->
<section class="cta-section fade-in">
  <h2>Need something <span>more powerful?</span></h2>
  <p>Let us build custom automation, tools, and integrations tailored to your workflow.</p>
  <a href="/#contact" class="cta-big">Start a Project &rarr;</a>
</section>

<!-- FOOTER -->
<!-- Cross Promo -->
<section style="max-width:900px;margin:40px auto;padding:0 24px;">
<div style="background:linear-gradient(135deg,rgba(99,102,241,0.1),rgba(168,85,247,0.08));border:1px solid rgba(99,102,241,0.15);border-radius:20px;padding:32px 28px;text-align:center;">
<div style="font-size:13px;color:#818cf8;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Founding Member</div>
<h3 style="font-size:22px;font-weight:800;color:#fff;margin:0 0 8px;">Get NexTool Pro</h3>
<p style="color:#94a3b8;font-size:14px;margin:0 auto 20px;max-width:500px;">No banners, clean output, enhanced features on all 231+ tools. One-time payment.</p>
<div style="display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap;">
<a href="/pro.html" style="display:inline-block;padding:12px 28px;background:linear-gradient(135deg,#6366f1,#a855f7,#ec4899);color:#fff;border-radius:10px;font-weight:700;font-size:15px;text-decoration:none;">$29 — Get Pro</a>
<a href="/free-tools/" style="color:#94a3b8;font-size:14px;text-decoration:none;">Browse 231+ Free Tools &rarr;</a>
</div>
</div>
</section>

<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/box-shadow-generator.html" style="color:var(--primary);text-decoration:none">CSS Box Shadow Generator</a> · <a href="/free-tools/emoji-picker.html" style="color:var(--primary);text-decoration:none">Emoji Picker & Search</a> · <a href="/free-tools/meta-tag-generator.html" style="color:var(--primary);text-decoration:none">Meta Tag Generator</a> · <a href="/free-tools/favicon-generator.html" style="color:var(--primary);text-decoration:none">Favicon Generator</a> · <a href="/free-tools/color-palette.html" style="color:var(--primary);text-decoration:none">Free Color Palette Generator</a></p>
</div>

<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/icon-generator.html" style="color:var(--primary);text-decoration:none">Free Icon Generator</a> · <a href="/free-tools/api-mock-server.html" style="color:var(--primary);text-decoration:none">Free API Mock Server</a> · <a href="/free-tools/css-animation-generator.html" style="color:var(--primary);text-decoration:none">CSS Animation Generator - Free Tool</a></p>
</div>

<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/color-palette-generator.html" style="color:var(--primary);text-decoration:none">Free Color Palette Generator</a> · <a href="/free-tools/json-to-yaml-converter.html" style="color:var(--primary);text-decoration:none">Free JSON to YAML Converter</a> · <a href="/free-tools/base64-image-encoder.html" style="color:var(--primary);text-decoration:none">Free Base64 Image Encoder</a></p>
</div>
<footer class="footer fade-in">
  <div class="footer-grid">
    <div class="footer-col">
      <h4>Products</h4>
      <a href="/free-tools/">231+ Free Tools</a>
<a href="/pro.html">NexTool Pro</a>
<a href="/workspace.html">Workspace</a>
    </div>
    <div class="footer-col">
      <h4>Explore</h4>
      <a href="/free-tools/">Free Tools</a>
      <a href="/blog/">Blog</a>
      <a href="/pro.html">Pro — $29</a>
      <a href="/pro.html">FAQ</a>
    </div>
    <div class="footer-col">
      <h4>Ecosystem</h4>
      <a href="/#contact">Contact</a>
      <a href="https://github.com/nextool" target="_blank" rel="noopener">GitHub</a>
      <a href="https://discord.gg/nextool" target="_blank" rel="noopener">Discord</a>
      <a href="/terms.html">Privacy</a>
    </div>
  </div>
  <div class="footer-bottom">&copy; 2026 NexTool. Built with AI. All rights reserved.</div>
</footer>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<script>
/* ── State ── */
let mode = 'encode';

/* ── Mode Toggle ── */
function setMode(m) {
  mode = m;
  document.querySelectorAll('.mode-btn').forEach(b => b.classList.toggle('active', b.dataset.mode === m));
  handleInput();
}

/* ── Core Conversion ── */
function encode(text) {
  const urlSafe = document.getElementById('urlSafe').checked;
  try {
    // Handle Unicode properly
    const bytes = new TextEncoder().encode(text);
    let binary = '';
    bytes.forEach(b => binary += String.fromCharCode(b));
    let result = btoa(binary);
    if (urlSafe) {
      result = result.replace(/\+/g, '-').replace(/\//g, '_').replace(/=+$/, '');
    }
    return result;
  } catch (e) {
    return '// Error encoding: ' + e.message;
  }
}

function decode(b64) {
  const urlSafe = document.getElementById('urlSafe').checked;
  try {
    let input = b64.trim();
    if (urlSafe) {
      input = input.replace(/-/g, '+').replace(/_/g, '/');
      while (input.length % 4) input += '=';
    }
    const binary = atob(input);
    const bytes = new Uint8Array(binary.length);
    for (let i = 0; i < binary.length; i++) bytes[i] = binary.charCodeAt(i);
    return new TextDecoder().decode(bytes);
  } catch (e) {
    return '// Error decoding: ' + e.message;
  }
}

/* ── Live Handling ── */
function handleInput() {
  const input = document.getElementById('inputArea').value;
  updateCount('inputCount', input);
  detectBase64(input);

  if (!input.trim()) {
    document.getElementById('outputArea').value = '';
    updateCount('outputCount', '');
    tryImagePreview('');
    return;
  }

  let output;
  if (mode === 'encode') {
    output = encode(input);
  } else {
    output = decode(input);
    tryImagePreview(input);
  }
  document.getElementById('outputArea').value = output;
  updateCount('outputCount', output);
}

function convert() {
  handleInput();
  showToast(mode === 'encode' ? 'Encoded successfully' : 'Decoded successfully');
}

/* ── Character Counts ── */
function updateCount(id, text) {
  const len = text.length;
  const kb = (new TextEncoder().encode(text).length / 1024).toFixed(1);
  document.getElementById(id).textContent = len > 1024 ? `${len.toLocaleString()} chars (${kb} KB)` : `${len.toLocaleString()} chars`;
}

/* ── Base64 Detection ── */
function detectBase64(text) {
  const badge = document.getElementById('detectBadge');
  if (!text.trim()) { badge.innerHTML = ''; return; }
  const clean = text.trim();
  const isB64 = /^[A-Za-z0-9+/\-_\r\n]+=*[\r\n]*$/.test(clean) && clean.length >= 4 && clean.length % 4 <= 2;
  let valid = false;
  if (isB64) {
    try {
      let t = clean.replace(/-/g,'+').replace(/_/g,'/');
      while(t.length%4) t+='=';
      atob(t);
      valid = true;
    } catch(e){}
  }
  if (valid) {
    badge.innerHTML = '<span class="detect-badge is-b64">Base64 detected</span>';
  } else {
    badge.innerHTML = '<span class="detect-badge not-b64">Plain text</span>';
  }
}

/* ── Swap ── */
function swapFields() {
  const inp = document.getElementById('inputArea');
  const out = document.getElementById('outputArea');
  const tmp = inp.value;
  inp.value = out.value;
  out.value = tmp;
  // Flip mode
  setMode(mode === 'encode' ? 'decode' : 'encode');
  showToast('Swapped input and output');
}

/* ── Copy ── */
function copyOutput() {
  const text = document.getElementById('outputArea').value;
  if (!text) { showToast('Nothing to copy'); return; }
  navigator.clipboard.writeText(text).then(() => {
    const btn = document.getElementById('copyBtn');
    btn.classList.add('copied');
    btn.textContent = 'Copied!';
    setTimeout(() => { btn.classList.remove('copied'); btn.textContent = 'Copy Result'; }, 1500);
    showToast('Copied to clipboard');
  });
}

/* ── Clear ── */
function clearAll() {
  document.getElementById('inputArea').value = '';
  document.getElementById('outputArea').value = '';
  document.getElementById('fileInfo').textContent = '';
  updateCount('inputCount', '');
  updateCount('outputCount', '');
  document.getElementById('detectBadge').innerHTML = '';
  document.getElementById('previewSection').style.display = 'none';
  showToast('Cleared');
}

/* ── File Handling ── */
function handleFile(file) {
  if (!file) return;
  const info = document.getElementById('fileInfo');
  info.textContent = `${file.name} (${(file.size/1024).toFixed(1)} KB)`;

  const reader = new FileReader();
  reader.onload = function(e) {
    const b64Full = e.target.result; // data:mime;base64,XXXX
    const b64Data = b64Full.split(',')[1] || b64Full;
    setMode('encode');
    document.getElementById('inputArea').value = `[File: ${file.name}]`;
    const urlSafe = document.getElementById('urlSafe').checked;
    let output = b64Data;
    if (urlSafe) {
      output = output.replace(/\+/g,'-').replace(/\//g,'_').replace(/=+$/,'');
    }
    document.getElementById('outputArea').value = output;
    updateCount('inputCount', file.name);
    updateCount('outputCount', output);

    // Image preview
    if (file.type.startsWith('image/')) {
      const ps = document.getElementById('previewSection');
      ps.style.display = 'block';
      document.getElementById('previewImg').src = b64Full;
    }

    showToast(`File "${file.name}" encoded`);
  };
  reader.readAsDataURL(file);
}

/* ── Image Preview for Decode ── */
function tryImagePreview(b64) {
  const ps = document.getElementById('previewSection');
  if (!b64 || !b64.trim()) { ps.style.display = 'none'; return; }
  // Check if it looks like base64 image data
  let src = b64.trim();
  if (!src.startsWith('data:')) {
    // Try common image signatures
    try {
      let t = src.replace(/-/g,'+').replace(/_/g,'/');
      while(t.length%4) t+='=';
      const bin = atob(t.substring(0,16));
      const isImg = (bin.charCodeAt(0)===0x89 && bin.charCodeAt(1)===0x50) || // PNG
                    (bin.charCodeAt(0)===0xFF && bin.charCodeAt(1)===0xD8) || // JPEG
                    (bin.substring(0,4)==='GIF8') || // GIF
                    (bin.substring(0,4)==='RIFF');    // WEBP
      if (isImg) {
        const mime = (bin.charCodeAt(0)===0x89) ? 'image/png' :
                     (bin.charCodeAt(0)===0xFF) ? 'image/jpeg' :
                     (bin.substring(0,3)==='GIF') ? 'image/gif' : 'image/webp';
        src = `data:${mime};base64,${t}`;
      } else {
        ps.style.display = 'none'; return;
      }
    } catch(e) { ps.style.display = 'none'; return; }
  }
  const img = document.getElementById('previewImg');
  img.onload = () => { ps.style.display = 'block'; };
  img.onerror = () => { ps.style.display = 'none'; };
  img.src = src;
}

/* ── Drag & Drop ── */
const dz = document.getElementById('dropZone');
['dragenter','dragover'].forEach(ev => dz.addEventListener(ev, e => { e.preventDefault(); dz.classList.add('dragover'); }));
['dragleave','drop'].forEach(ev => dz.addEventListener(ev, e => { e.preventDefault(); dz.classList.remove('dragover'); }));
dz.addEventListener('drop', e => { if(e.dataTransfer.files.length) handleFile(e.dataTransfer.files[0]); });

/* ── URL-safe checkbox triggers reconvert ── */
document.getElementById('urlSafe').addEventListener('change', handleInput);

/* ── Toast ── */
function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2000);
}

/* ── IntersectionObserver Fade-in ── */
const obs = new IntersectionObserver((entries) => {
  entries.forEach(e => { if(e.isIntersecting) { e.target.classList.add('visible'); obs.unobserve(e.target); }});
}, { threshold: 0.08 });
document.querySelectorAll('.fade-in').forEach(el => obs.observe(el));
</script>
<script src="/js/analytics-lite.js" defer></script>
<script src="/js/revenue.js" defer></script>
<script src="/js/lead-capture.js" defer></script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What is Base64 encoding?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Base64 is a binary-to-text encoding scheme that converts binary data into a string of ASCII characters. It is commonly used to embed images in HTML/CSS, transmit binary data in JSON or XML, and encode email attachments."
      }
    },
    {
      "@type": "Question",
      "name": "What is URL-safe Base64?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "URL-safe Base64 replaces the '+' and '/' characters with '-' and '_' respectively, and removes trailing '=' padding. This makes the encoded string safe to use in URLs and filenames without additional encoding."
      }
    },
    {
      "@type": "Question",
      "name": "Can I encode files to Base64?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, NexTool's Base64 tool supports any file type. Simply drag and drop a file or click to browse. Images will also show a preview. The entire process happens in your browser — no files are uploaded to any server."
      }
    },
    {
      "@type": "Question",
      "name": "Is NexTool's Base64 encoder free?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, it is completely free with no signup, no limits, and no ads. It supports Unicode text, binary files, URL-safe mode, automatic Base64 detection, image preview for decoded images, and one-click copy."
      }
    }
  ]
}
</script>
</body>
</html>
