<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Free JSON Validator — Validate & Fix JSON Online | NexTool</title>
<meta name="description" content="Validate JSON with detailed error messages including line number and position. Auto-fix trailing commas and single quotes. Pretty print, stats, and schema validation.">
<meta name="keywords" content="JSON validator, validate JSON, JSON checker, JSON lint, fix JSON errors, JSON pretty print, free tool, NexTool">
<meta name="robots" content="index, follow">
<meta property="og:title" content="Free JSON Validator & Fixer | NexTool">
<meta property="og:description" content="Validate JSON instantly with detailed errors, auto-fix common issues, pretty print. Free online tool by NexTool.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://nextool.app/free-tools/json-validator.html">
<meta property="og:image" content="https://nextool.app/assets/og-default.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<link rel="canonical" href="https://nextool.app/free-tools/json-validator.html">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Free JSON Validator & Fixer | NexTool">
<meta name="twitter:description" content="Validate, fix, and pretty-print JSON. Detailed error messages with line numbers.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"SoftwareApplication","name":"NexTool JSON Validator","applicationCategory":"DeveloperApplication","operatingSystem":"Web","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"description":"Validate JSON with detailed error messages, auto-fix common errors, pretty print, and view JSON statistics."}
</script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--bg:#050508;--surface:#111118;--surface2:#1a1a24;--border:#2a2a3a;--text:#e4e4eb;--text2:#9494a8;--primary:#6366f1;--accent:#a855f7;--pink:#ec4899;--green:#22c55e;--red:#ef4444;--cyan:#22d3ee;--yellow:#eab308;--radius:12px;--glass:rgba(17,17,24,0.7)}
html{scroll-behavior:smooth}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;min-height:100vh;overflow-x:hidden}
.nav{position:sticky;top:0;z-index:100;background:rgba(5,5,8,0.85);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:0 2rem;height:64px;display:flex;align-items:center;justify-content:space-between}
.nav-logo{font-size:1.4rem;font-weight:800;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-decoration:none}
.nav-links{display:flex;align-items:center;gap:1.5rem}
.nav-links a{color:var(--text2);text-decoration:none;font-size:.875rem;font-weight:500;transition:color .2s}
.nav-links a:hover{color:var(--text)}
.nav-cta{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff!important;padding:.5rem 1.2rem;border-radius:8px;font-weight:600;-webkit-text-fill-color:#fff!important}
.nav-cta:hover{opacity:.9}
.nav-toggle{display:none;background:none;border:none;color:var(--text);font-size:1.5rem;cursor:pointer}
.hero{text-align:center;padding:3rem 1.5rem 2rem;max-width:700px;margin:0 auto}
.hero h1{font-size:2.2rem;font-weight:800;line-height:1.2;margin-bottom:.75rem}
.hero h1 span{background:linear-gradient(135deg,var(--primary),var(--accent),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{color:var(--text2);font-size:1rem}
.tool-container{max-width:1100px;margin:0 auto;padding:0 1.5rem 3rem}
.controls{display:flex;flex-wrap:wrap;gap:.75rem;margin-bottom:1rem;align-items:center}
.btn{background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.45rem .9rem;border-radius:8px;font-size:.8rem;font-weight:500;cursor:pointer;transition:all .2s;font-family:inherit}
.btn:hover{border-color:var(--primary);background:rgba(99,102,241,.12)}
.btn-primary{background:linear-gradient(135deg,var(--primary),var(--accent));border:none;color:#fff;font-weight:600;padding:.5rem 1.2rem}
.btn-primary:hover{opacity:.9}
.btn-green{background:var(--green);border:none;color:#000;font-weight:600}
.btn-green:hover{opacity:.9}
.editor-wrapper{position:relative;margin-bottom:1rem}
.editor{width:100%;min-height:320px;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:1rem;font-family:'JetBrains Mono','Courier New',monospace;font-size:.82rem;line-height:1.7;color:var(--text);resize:vertical;outline:none;tab-size:2;white-space:pre;overflow:auto}
.editor:focus{border-color:var(--primary)}
.editor.valid{border-color:var(--green)}
.editor.invalid{border-color:var(--red)}
.status-bar{display:flex;flex-wrap:wrap;gap:1rem;padding:.75rem 1rem;background:var(--glass);backdrop-filter:blur(16px);border:1px solid var(--border);border-radius:var(--radius);margin-bottom:1rem;align-items:center}
.status-indicator{display:flex;align-items:center;gap:.4rem;font-size:.82rem;font-weight:600}
.status-dot{width:10px;height:10px;border-radius:50%}
.status-dot.valid{background:var(--green);box-shadow:0 0 8px rgba(34,197,94,.4)}
.status-dot.invalid{background:var(--red);box-shadow:0 0 8px rgba(239,68,68,.4)}
.status-dot.idle{background:var(--text2)}
.error-box{background:rgba(239,68,68,.08);border:1px solid rgba(239,68,68,.2);border-radius:var(--radius);padding:1rem;margin-bottom:1rem;display:none}
.error-title{color:var(--red);font-weight:700;font-size:.85rem;margin-bottom:.4rem}
.error-detail{font-family:'JetBrains Mono',monospace;font-size:.78rem;color:var(--text2);line-height:1.6}
.error-line{color:var(--yellow);font-weight:600}
.stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(130px,1fr));gap:.75rem;margin-bottom:1.5rem}
.stat-card{background:var(--glass);backdrop-filter:blur(16px);border:1px solid var(--border);border-radius:var(--radius);padding:.75rem 1rem;text-align:center}
.stat-value{font-size:1.5rem;font-weight:800;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.stat-label{font-size:.7rem;color:var(--text2);font-weight:500;margin-top:.2rem}
.output-section{background:var(--glass);backdrop-filter:blur(16px);border:1px solid var(--border);border-radius:var(--radius);padding:1.5rem;margin-bottom:1.5rem;display:none}
.output-section h3{font-size:.9rem;font-weight:700;margin-bottom:.75rem}
.output-code{background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:1rem;font-family:'JetBrains Mono',monospace;font-size:.78rem;line-height:1.7;color:var(--text);white-space:pre-wrap;word-break:break-all;max-height:400px;overflow:auto;position:relative}
.output-copy{position:absolute;top:.5rem;right:.5rem;background:var(--surface2);border:1px solid var(--border);color:var(--text2);padding:4px 10px;border-radius:6px;font-size:.7rem;cursor:pointer;transition:all .2s;font-family:inherit}
.output-copy:hover{border-color:var(--primary);color:var(--text)}
.drop-zone{border:2px dashed var(--border);border-radius:var(--radius);padding:2rem;text-align:center;color:var(--text2);font-size:.85rem;cursor:pointer;transition:all .2s;margin-bottom:1rem}
.drop-zone:hover,.drop-zone.dragover{border-color:var(--primary);background:rgba(99,102,241,.05);color:var(--text)}
.schema-section{background:var(--glass);backdrop-filter:blur(16px);border:1px solid var(--border);border-radius:var(--radius);padding:1.5rem;margin-bottom:1.5rem}
.schema-section h3{font-size:.9rem;font-weight:700;margin-bottom:.75rem}
.schema-editor{width:100%;min-height:120px;background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:.75rem;font-family:'JetBrains Mono',monospace;font-size:.78rem;line-height:1.6;color:var(--text);resize:vertical;outline:none;tab-size:2}
.schema-editor:focus{border-color:var(--primary)}
.schema-result{margin-top:.75rem;padding:.75rem;border-radius:8px;font-size:.82rem;display:none}
.schema-result.pass{background:rgba(34,197,94,.1);border:1px solid rgba(34,197,94,.2);color:var(--green)}
.schema-result.fail{background:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.2);color:var(--red)}
.cta-section{text-align:center;padding:4rem 1.5rem;max-width:700px;margin:0 auto}
.cta-section h2{font-size:1.8rem;font-weight:800;margin-bottom:.75rem}
.cta-section h2 span{background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.cta-section p{color:var(--text2);margin-bottom:1.5rem}
.cta-btn{display:inline-block;background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;padding:.75rem 2rem;border-radius:10px;font-weight:700;text-decoration:none;font-size:1rem;transition:transform .2s,box-shadow .2s}
.cta-btn:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(99,102,241,.3)}
.footer{border-top:1px solid var(--border);padding:3rem 2rem 2rem;max-width:1200px;margin:0 auto}
.footer-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:2rem;margin-bottom:2rem}
.footer-col h4{font-size:.85rem;font-weight:700;margin-bottom:.75rem;color:var(--text)}
.footer-col a{display:block;color:var(--text2);text-decoration:none;font-size:.8rem;margin-bottom:.4rem;transition:color .2s}
.footer-col a:hover{color:var(--primary)}
.footer-bottom{text-align:center;color:var(--text2);font-size:.75rem;padding-top:1.5rem;border-top:1px solid var(--border)}
.fade-in{opacity:0;transform:translateY(20px);transition:opacity .6s,transform .6s}
.fade-in.visible{opacity:1;transform:translateY(0)}
.toast{position:fixed;bottom:2rem;left:50%;transform:translateX(-50%) translateY(80px);background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.6rem 1.2rem;border-radius:10px;font-size:.85rem;font-weight:500;z-index:200;transition:transform .3s;pointer-events:none}
.toast.show{transform:translateX(-50%) translateY(0)}
@media(max-width:768px){
  .nav-links{display:none;position:absolute;top:64px;left:0;right:0;background:var(--bg);border-bottom:1px solid var(--border);flex-direction:column;padding:1rem 2rem;gap:1rem}
  .nav-links.open{display:flex}
  .nav-toggle{display:block}
  .hero h1{font-size:1.6rem}
  .footer-grid{grid-template-columns:1fr}
  .stats-grid{grid-template-columns:repeat(2,1fr)}
  .controls{gap:.4rem}
}
</style>
</head>
<body>

<nav class="nav">
  <a href="/" class="nav-logo">NexTool</a>
  <button class="nav-toggle" onclick="document.querySelector('.nav-links').classList.toggle('open')" aria-label="Menu">&#9776;</button>
  <div class="nav-links">
    <a href="/">Home</a>
    <a href="/free-tools/">Tools</a>
    <a href="/free-tools/">Free Tools</a>
    <a href="/blog/">Blog</a>
    <a href="/pro.html" class="nav-cta">Get Pro — $29</a>
  </div>
</nav>

<section class="hero fade-in">
  <h1>Free <span>JSON Validator</span></h1>
  <p class="tool-summary" style="color:#94a3b8;font-size:15px;line-height:1.6;margin-bottom:24px;max-width:700px;margin-left:auto;margin-right:auto;">Validate JSON with detailed error messages showing exact line and position. Auto-fix trailing commas, single quotes, and other common mistakes. Pretty print, view stats, and optionally validate against a JSON Schema.</p>
</section>

<div class="tool-container fade-in">
  <!-- Drop zone -->
  <div class="drop-zone" id="dropZone" onclick="document.getElementById('fileInput').click()">
    Drop a JSON file here or click to upload
    <input type="file" id="fileInput" accept=".json,.txt" style="display:none" onchange="loadFile(event)">
  </div>

  <!-- Controls -->
  <div class="controls">
    <button class="btn btn-primary" onclick="validateJSON()">Validate</button>
    <button class="btn btn-green" onclick="fixJSON()">Auto-Fix</button>
    <button class="btn" onclick="prettyPrint()">Pretty Print</button>
    <button class="btn" onclick="minifyJSON()">Minify</button>
    <button class="btn" onclick="clearAll()">Clear</button>
    <button class="btn" onclick="loadSample()">Load Sample</button>
    <button class="btn" onclick="copyOutput()">Copy</button>
  </div>

  <!-- Status bar -->
  <div class="status-bar">
    <div class="status-indicator">
      <div class="status-dot idle" id="statusDot"></div>
      <span id="statusText">Paste or upload JSON to validate</span>
    </div>
  </div>

  <!-- Error box -->
  <div class="error-box" id="errorBox">
    <div class="error-title" id="errorTitle">Error</div>
    <div class="error-detail" id="errorDetail"></div>
  </div>

  <!-- Editor -->
  <div class="editor-wrapper">
    <textarea class="editor" id="editor" placeholder='Paste your JSON here...&#10;&#10;Example:&#10;{&#10;  "name": "NexTool",&#10;  "version": "1.0"&#10;}' spellcheck="false" oninput="liveValidate()"></textarea>
  </div>

  <!-- Stats -->
  <div class="stats-grid" id="statsGrid" style="display:none">
    <div class="stat-card"><div class="stat-value" id="statDepth">0</div><div class="stat-label">Max Depth</div></div>
    <div class="stat-card"><div class="stat-value" id="statKeys">0</div><div class="stat-label">Total Keys</div></div>
    <div class="stat-card"><div class="stat-value" id="statObjects">0</div><div class="stat-label">Objects</div></div>
    <div class="stat-card"><div class="stat-value" id="statArrays">0</div><div class="stat-label">Arrays</div></div>
    <div class="stat-card"><div class="stat-value" id="statStrings">0</div><div class="stat-label">Strings</div></div>
    <div class="stat-card"><div class="stat-value" id="statNumbers">0</div><div class="stat-label">Numbers</div></div>
  </div>

  <!-- Output -->
  <div class="output-section" id="outputSection">
    <h3>Formatted Output</h3>
    <div style="position:relative">
      <pre class="output-code" id="outputCode"></pre>
      <button class="output-copy" onclick="copyFormatted()">Copy</button>
    </div>
  </div>

  <!-- Schema Validation -->
  <div class="schema-section">
    <h3>Schema Validation (Optional)</h3>
    <p style="font-size:.78rem;color:var(--text2);margin-bottom:.75rem">Paste a JSON Schema to validate your data against it. Supports basic JSON Schema draft-07 properties: type, required, properties, items, enum, minimum, maximum, minLength, maxLength, pattern.</p>
    <textarea class="schema-editor" id="schemaEditor" placeholder='Paste JSON Schema here (optional)...&#10;&#10;Example:&#10;{&#10;  "type": "object",&#10;  "required": ["name"],&#10;  "properties": {&#10;    "name": { "type": "string" }&#10;  }&#10;}' spellcheck="false"></textarea>
    <button class="btn" style="margin-top:.75rem" onclick="validateSchema()">Validate Against Schema</button>
    <div class="schema-result" id="schemaResult"></div>
  </div>
</div>

<section class="cta-section fade-in">
  <h2>Need something <span>more powerful</span>?</h2>
  <p>Let us build it for you. Custom APIs, dashboards, automations &mdash; whatever you need.</p>
  <a href="/#contact" class="cta-btn">Start a Project &rarr;</a>
</section>

<section style="max-width:900px;margin:40px auto;padding:0 24px;">
<div style="background:linear-gradient(135deg,rgba(99,102,241,0.1),rgba(168,85,247,0.08));border:1px solid rgba(99,102,241,0.15);border-radius:20px;padding:32px 28px;text-align:center;">
<div style="font-size:13px;color:#818cf8;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Founding Member</div>
<h3 style="font-size:22px;font-weight:800;color:#fff;margin:0 0 8px;">Get NexTool Pro</h3>
<p style="color:#94a3b8;font-size:14px;margin:0 auto 20px;max-width:500px;">No banners, clean output, enhanced features on all 240+ tools. One-time payment.</p>
<div style="display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap;">
<a href="/pro.html" style="display:inline-block;padding:12px 28px;background:linear-gradient(135deg,#6366f1,#a855f7,#ec4899);color:#fff;border-radius:10px;font-weight:700;font-size:15px;text-decoration:none;">$29 — Get Pro</a>
<a href="/free-tools/" style="color:#94a3b8;font-size:14px;text-decoration:none;">Browse 240+ Free Tools &rarr;</a>
</div>
</div>
</section>


<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/box-shadow-generator.html" style="color:var(--primary);text-decoration:none">CSS Box Shadow Generator</a> · <a href="/free-tools/emoji-picker.html" style="color:var(--primary);text-decoration:none">Emoji Picker & Search</a> · <a href="/free-tools/json-schema-validator.html" style="color:var(--primary);text-decoration:none">Free JSON Schema Validator</a></p>
</div>
<footer class="footer fade-in">
  <div class="footer-grid">
    <div class="footer-col">
      <h4>Products</h4>
      <a href="/free-tools/">240+ Free Tools</a>
      <a href="/pro.html">NexTool Pro</a>
      <a href="/workspace.html">Workspace</a>
    </div>
    <div class="footer-col">
      <h4>Explore</h4>
      <a href="/free-tools/">Free Tools</a><a href="/blog/">Blog</a><a href="/pro.html">FAQ</a><a href="/pro.html">Pro — $29</a>
    </div>
    <div class="footer-col">
      <h4>Ecosystem</h4>
      <a href="/">NexTool Home</a><a href="/#contact">Contact</a><a href="https://github.com/christian140903-sudo/nextool" target="_blank">GitHub</a>
    </div>
  </div>
  <div class="footer-bottom">&copy; 2026 NexTool. AI-powered tools for everyone.</div>
</footer>

<div class="toast" id="toast"></div>

<script>
const editor = document.getElementById('editor');
const dropZone = document.getElementById('dropZone');

/* Drag and drop */
dropZone.addEventListener('dragover', e => { e.preventDefault(); dropZone.classList.add('dragover'); });
dropZone.addEventListener('dragleave', () => dropZone.classList.remove('dragover'));
dropZone.addEventListener('drop', e => {
  e.preventDefault(); dropZone.classList.remove('dragover');
  const file = e.dataTransfer.files[0];
  if (file) readFile(file);
});

function loadFile(e) {
  const file = e.target.files[0];
  if (file) readFile(file);
}

function readFile(file) {
  const reader = new FileReader();
  reader.onload = e => { editor.value = e.target.result; validateJSON(); };
  reader.readAsText(file);
}

function loadSample() {
  editor.value = `{
  "name": "NexTool",
  "version": "2.0.0",
  "description": "AI-powered developer tools",
  "features": ["JSON Validator", "CSS Generator", "Code Formatter"],
  "pricing": {
    "free": true,
    "pro": {
      "price": 29,
      "currency": "USD",
      "billing": "one-time"
    }
  },
  "stats": {
    "tools": 220,
    "users": 15000,
    "uptime": 99.9
  },
  "active": true,
  "tags": null
}`;
  validateJSON();
}

function clearAll() {
  editor.value = '';
  editor.className = 'editor';
  document.getElementById('statusDot').className = 'status-dot idle';
  document.getElementById('statusText').textContent = 'Paste or upload JSON to validate';
  document.getElementById('errorBox').style.display = 'none';
  document.getElementById('statsGrid').style.display = 'none';
  document.getElementById('outputSection').style.display = 'none';
}

/* Core validation */
function validateJSON() {
  const input = editor.value.trim();
  if (!input) { clearAll(); return; }

  try {
    const parsed = JSON.parse(input);
    setValid();
    showStats(parsed);
    showOutput(JSON.stringify(parsed, null, 2));
    return true;
  } catch (e) {
    setInvalid(e);
    document.getElementById('statsGrid').style.display = 'none';
    document.getElementById('outputSection').style.display = 'none';
    return false;
  }
}

function liveValidate() {
  const input = editor.value.trim();
  if (!input) {
    editor.className = 'editor';
    document.getElementById('statusDot').className = 'status-dot idle';
    document.getElementById('statusText').textContent = 'Paste or upload JSON to validate';
    document.getElementById('errorBox').style.display = 'none';
    return;
  }
  try {
    JSON.parse(input);
    editor.className = 'editor valid';
    document.getElementById('statusDot').className = 'status-dot valid';
    document.getElementById('statusText').textContent = 'Valid JSON';
    document.getElementById('statusText').style.color = '#22c55e';
    document.getElementById('errorBox').style.display = 'none';
  } catch (e) {
    editor.className = 'editor invalid';
    document.getElementById('statusDot').className = 'status-dot invalid';
    document.getElementById('statusText').textContent = 'Invalid JSON';
    document.getElementById('statusText').style.color = '#ef4444';
  }
}

function setValid() {
  editor.className = 'editor valid';
  document.getElementById('statusDot').className = 'status-dot valid';
  document.getElementById('statusText').textContent = 'Valid JSON';
  document.getElementById('statusText').style.color = '#22c55e';
  document.getElementById('errorBox').style.display = 'none';
}

function setInvalid(e) {
  editor.className = 'editor invalid';
  document.getElementById('statusDot').className = 'status-dot invalid';
  document.getElementById('statusText').textContent = 'Invalid JSON';
  document.getElementById('statusText').style.color = '#ef4444';

  const errBox = document.getElementById('errorBox');
  errBox.style.display = 'block';
  document.getElementById('errorTitle').textContent = 'JSON Parse Error';

  const msg = e.message;
  let detail = msg;

  // Extract line and position from error message
  const posMatch = msg.match(/position\s+(\d+)/i);
  if (posMatch) {
    const pos = parseInt(posMatch[1]);
    const lines = editor.value.substring(0, pos).split('\n');
    const lineNum = lines.length;
    const colNum = lines[lines.length - 1].length + 1;
    const contextLine = editor.value.split('\n')[lineNum - 1] || '';
    detail = `<span class="error-line">Line ${lineNum}, Column ${colNum}</span>\n${msg}\n\n` +
      `${lineNum}: ${escapeHtml(contextLine)}\n${' '.repeat(String(lineNum).length + 1 + colNum)}^`;
  } else {
    const lineMatch = msg.match(/line\s+(\d+)/i);
    const colMatch = msg.match(/column\s+(\d+)/i);
    if (lineMatch) {
      detail = `<span class="error-line">Line ${lineMatch[1]}${colMatch ? ', Column ' + colMatch[1] : ''}</span>\n${msg}`;
    }
  }

  document.getElementById('errorDetail').innerHTML = detail;
}

function escapeHtml(str) {
  return str.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
}

/* Auto-fix common JSON errors */
function fixJSON() {
  let input = editor.value.trim();
  if (!input) { showToast('Nothing to fix'); return; }

  let fixed = input;
  let fixes = [];

  // Fix single quotes to double quotes (careful with content)
  if (/^[\s]*[\{\[]/.test(fixed)) {
    // Replace single-quoted keys and simple string values
    let prev = fixed;
    fixed = fixed.replace(/'/g, '"');
    // More careful approach: only replace quotes around keys/values
    // Revert if this breaks things, use smarter replacement
    try { JSON.parse(fixed); }
    catch(e) { fixed = prev; }

    if (fixed !== prev) fixes.push('Replaced single quotes with double quotes');
  }

  // Remove trailing commas before } or ]
  let prev = fixed;
  fixed = fixed.replace(/,\s*([\}\]])/g, '$1');
  if (fixed !== prev) fixes.push('Removed trailing commas');

  // Add missing quotes around unquoted keys
  prev = fixed;
  fixed = fixed.replace(/(\{|,)\s*([a-zA-Z_$][a-zA-Z0-9_$]*)\s*:/g, '$1"$2":');
  if (fixed !== prev) fixes.push('Added quotes around unquoted keys');

  // Fix missing commas between elements (simple heuristic)
  prev = fixed;
  fixed = fixed.replace(/"\s*\n\s*"/g, '",\n"');
  fixed = fixed.replace(/(\d)\s*\n\s*"/g, '$1,\n"');
  fixed = fixed.replace(/}\s*\n\s*"/g, '},\n"');
  fixed = fixed.replace(/]\s*\n\s*"/g, '],\n"');
  fixed = fixed.replace(/(true|false|null)\s*\n\s*"/g, '$1,\n"');
  if (fixed !== prev) fixes.push('Added missing commas between elements');

  // Try to parse
  try {
    const parsed = JSON.parse(fixed);
    editor.value = JSON.stringify(parsed, null, 2);
    validateJSON();
    showToast(fixes.length ? 'Fixed: ' + fixes.join(', ') : 'JSON is already valid');
  } catch (e) {
    // Try one more thing: wrap in array or object
    try {
      JSON.parse('[' + fixed + ']');
      fixed = '[' + fixed + ']';
      const parsed = JSON.parse(fixed);
      editor.value = JSON.stringify(parsed, null, 2);
      validateJSON();
      showToast('Wrapped in array to fix structure');
    } catch (e2) {
      editor.value = fixed;
      validateJSON();
      showToast('Could not auto-fix all errors. ' + (fixes.length ? 'Applied: ' + fixes.join(', ') : 'Manual fix needed.'));
    }
  }
}

function prettyPrint() {
  const input = editor.value.trim();
  if (!input) { showToast('Nothing to format'); return; }
  try {
    const parsed = JSON.parse(input);
    const formatted = JSON.stringify(parsed, null, 2);
    editor.value = formatted;
    showOutput(formatted);
    setValid();
    showStats(parsed);
    showToast('JSON pretty-printed');
  } catch (e) {
    showToast('Fix JSON errors before formatting');
  }
}

function minifyJSON() {
  const input = editor.value.trim();
  if (!input) { showToast('Nothing to minify'); return; }
  try {
    const parsed = JSON.parse(input);
    editor.value = JSON.stringify(parsed);
    setValid();
    showToast('JSON minified');
  } catch (e) {
    showToast('Fix JSON errors before minifying');
  }
}

/* JSON Stats */
function showStats(data) {
  const stats = { depth: 0, keys: 0, objects: 0, arrays: 0, strings: 0, numbers: 0 };

  function walk(val, depth) {
    if (depth > stats.depth) stats.depth = depth;
    if (val === null || val === undefined) return;
    if (typeof val === 'string') { stats.strings++; return; }
    if (typeof val === 'number') { stats.numbers++; return; }
    if (typeof val === 'boolean') return;
    if (Array.isArray(val)) {
      stats.arrays++;
      val.forEach(item => walk(item, depth + 1));
    } else if (typeof val === 'object') {
      stats.objects++;
      const keys = Object.keys(val);
      stats.keys += keys.length;
      keys.forEach(k => walk(val[k], depth + 1));
    }
  }

  walk(data, 0);
  document.getElementById('statDepth').textContent = stats.depth;
  document.getElementById('statKeys').textContent = stats.keys;
  document.getElementById('statObjects').textContent = stats.objects;
  document.getElementById('statArrays').textContent = stats.arrays;
  document.getElementById('statStrings').textContent = stats.strings;
  document.getElementById('statNumbers').textContent = stats.numbers;
  document.getElementById('statsGrid').style.display = '';
}

function showOutput(code) {
  document.getElementById('outputCode').textContent = code;
  document.getElementById('outputSection').style.display = '';
}

/* Schema validation (basic subset) */
function validateSchema() {
  const jsonInput = editor.value.trim();
  const schemaInput = document.getElementById('schemaEditor').value.trim();
  const result = document.getElementById('schemaResult');

  if (!jsonInput) { showToast('Enter JSON data first'); return; }
  if (!schemaInput) { showToast('Enter a JSON Schema'); return; }

  let data, schema;
  try { data = JSON.parse(jsonInput); } catch(e) { showToast('JSON data is invalid'); return; }
  try { schema = JSON.parse(schemaInput); } catch(e) { showToast('JSON Schema is invalid'); return; }

  const errors = validateAgainstSchema(data, schema, '');
  result.style.display = '';
  if (errors.length === 0) {
    result.className = 'schema-result pass';
    result.textContent = 'Validation passed. JSON matches the schema.';
  } else {
    result.className = 'schema-result fail';
    result.innerHTML = 'Validation failed:\n' + errors.map(e => '  - ' + escapeHtml(e)).join('\n');
  }
}

function validateAgainstSchema(data, schema, path) {
  const errors = [];
  const p = path || 'root';

  // Type check
  if (schema.type) {
    const types = Array.isArray(schema.type) ? schema.type : [schema.type];
    const actualType = data === null ? 'null' : Array.isArray(data) ? 'array' : typeof data;
    if (actualType === 'number' && Number.isInteger(data) && types.includes('integer')) {
      // integer matches
    } else if (!types.includes(actualType)) {
      errors.push(`${p}: expected type "${schema.type}" but got "${actualType}"`);
      return errors;
    }
  }

  // Enum
  if (schema.enum) {
    if (!schema.enum.some(v => JSON.stringify(v) === JSON.stringify(data))) {
      errors.push(`${p}: value must be one of [${schema.enum.map(v => JSON.stringify(v)).join(', ')}]`);
    }
  }

  // String validations
  if (typeof data === 'string') {
    if (schema.minLength !== undefined && data.length < schema.minLength) {
      errors.push(`${p}: string length ${data.length} is less than minLength ${schema.minLength}`);
    }
    if (schema.maxLength !== undefined && data.length > schema.maxLength) {
      errors.push(`${p}: string length ${data.length} exceeds maxLength ${schema.maxLength}`);
    }
    if (schema.pattern) {
      try { if (!new RegExp(schema.pattern).test(data)) errors.push(`${p}: string does not match pattern "${schema.pattern}"`); }
      catch(e) { errors.push(`${p}: invalid pattern "${schema.pattern}"`); }
    }
  }

  // Number validations
  if (typeof data === 'number') {
    if (schema.minimum !== undefined && data < schema.minimum) errors.push(`${p}: ${data} < minimum ${schema.minimum}`);
    if (schema.maximum !== undefined && data > schema.maximum) errors.push(`${p}: ${data} > maximum ${schema.maximum}`);
    if (schema.exclusiveMinimum !== undefined && data <= schema.exclusiveMinimum) errors.push(`${p}: ${data} <= exclusiveMinimum ${schema.exclusiveMinimum}`);
    if (schema.exclusiveMaximum !== undefined && data >= schema.exclusiveMaximum) errors.push(`${p}: ${data} >= exclusiveMaximum ${schema.exclusiveMaximum}`);
  }

  // Object validations
  if (typeof data === 'object' && data !== null && !Array.isArray(data)) {
    if (schema.required) {
      schema.required.forEach(key => {
        if (!(key in data)) errors.push(`${p}: missing required property "${key}"`);
      });
    }
    if (schema.properties) {
      Object.keys(schema.properties).forEach(key => {
        if (key in data) {
          errors.push(...validateAgainstSchema(data[key], schema.properties[key], `${p}.${key}`));
        }
      });
    }
    if (schema.additionalProperties === false) {
      const allowed = schema.properties ? Object.keys(schema.properties) : [];
      Object.keys(data).forEach(key => {
        if (!allowed.includes(key)) errors.push(`${p}: unexpected additional property "${key}"`);
      });
    }
  }

  // Array validations
  if (Array.isArray(data)) {
    if (schema.minItems !== undefined && data.length < schema.minItems) errors.push(`${p}: array length ${data.length} < minItems ${schema.minItems}`);
    if (schema.maxItems !== undefined && data.length > schema.maxItems) errors.push(`${p}: array length ${data.length} > maxItems ${schema.maxItems}`);
    if (schema.items) {
      data.forEach((item, i) => {
        errors.push(...validateAgainstSchema(item, schema.items, `${p}[${i}]`));
      });
    }
  }

  return errors;
}

/* Copy functions */
function copyOutput() {
  navigator.clipboard.writeText(editor.value).then(() => showToast('JSON copied to clipboard'));
}

function copyFormatted() {
  const code = document.getElementById('outputCode').textContent;
  navigator.clipboard.writeText(code).then(() => showToast('Formatted JSON copied'));
}

function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2000);
}

/* IntersectionObserver fade-in */
const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('visible'); observer.unobserve(entry.target); }});
}, { threshold: 0.1 });
document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));
</script>
<script src="/js/analytics-lite.js" defer></script>
<script src="/js/revenue.js" defer></script>
<script src="/js/lead-capture.js" defer></script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What does a JSON validator do?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "A JSON validator checks whether your JSON data follows the correct syntax. It identifies errors like missing brackets, unclosed strings, trailing commas, and invalid data types, showing exact line numbers and positions to help you fix issues quickly."
      }
    },
    {
      "@type": "Question",
      "name": "What common JSON errors can this tool auto-fix?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "The auto-fix feature handles trailing commas before closing brackets, single quotes (converts to double quotes), unquoted property keys, and missing commas between elements. Click 'Auto-Fix' and the tool will attempt to repair these common issues automatically."
      }
    },
    {
      "@type": "Question",
      "name": "Does this JSON validator support schema validation?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes. You can paste a JSON Schema in the schema section and validate your data against it. The tool supports basic JSON Schema draft-07 properties including type, required, properties, items, enum, minimum, maximum, minLength, maxLength, and pattern."
      }
    },
    {
      "@type": "Question",
      "name": "Is my JSON data sent to any server?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "No. All validation and processing happens entirely in your browser using JavaScript. Your JSON data never leaves your device, making this tool completely private and safe for sensitive data."
      }
    }
  ]
}
</script>
</body>
</html>