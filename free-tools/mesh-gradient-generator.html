<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Free CSS Mesh Gradient Generator — Beautiful Gradient Backgrounds | NexTool</title>
<meta name="description" content="Generate stunning CSS mesh gradients with draggable color stops, presets, and live preview. Copy production-ready CSS instantly. No signup required.">
<meta name="keywords" content="mesh gradient generator, CSS gradient, mesh gradient CSS, gradient background, CSS background generator, radial gradient, free online tool, NexTool">
<meta property="og:title" content="Free CSS Mesh Gradient Generator | NexTool">
<meta property="og:description" content="Create beautiful CSS mesh gradients with draggable color stops, presets, and one-click copy. 100% free.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://nextool.app/free-tools/mesh-gradient-generator.html">
<meta property="og:image" content="https://nextool.app/assets/og-default.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<link rel="canonical" href="https://nextool.app/free-tools/mesh-gradient-generator.html">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Free CSS Mesh Gradient Generator | NexTool">
<meta name="twitter:description" content="Generate stunning CSS mesh gradients with draggable color stops. Free online tool by NexTool.">
<meta name="robots" content="index, follow">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"SoftwareApplication","name":"NexTool CSS Mesh Gradient Generator","applicationCategory":"DesignApplication","operatingSystem":"Web","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"description":"Free online CSS mesh gradient generator with draggable color stops, beautiful presets, and live preview."}
</script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--bg:#050508;--surface:#111118;--surface2:#1a1a24;--border:#2a2a3a;--text:#e4e4eb;--text2:#9494a8;--primary:#6366f1;--accent:#a855f7;--pink:#ec4899;--green:#22c55e;--red:#ef4444;--cyan:#22d3ee;--yellow:#eab308;--radius:12px;--glass:rgba(17,17,24,0.7)}
html{scroll-behavior:smooth}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;min-height:100vh;overflow-x:hidden}
/* NAV */
.nav{position:sticky;top:0;z-index:100;background:rgba(5,5,8,0.85);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:0 2rem;height:64px;display:flex;align-items:center;justify-content:space-between}
.nav-logo{font-size:1.4rem;font-weight:800;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-decoration:none}
.nav-links{display:flex;align-items:center;gap:1.5rem}
.nav-links a{color:var(--text2);text-decoration:none;font-size:.875rem;font-weight:500;transition:color .2s}
.nav-links a:hover{color:var(--text)}
.nav-cta{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff!important;padding:.5rem 1.2rem;border-radius:8px;font-weight:600;-webkit-text-fill-color:#fff!important}
.nav-cta:hover{opacity:.9}
.nav-toggle{display:none;background:none;border:none;color:var(--text);font-size:1.5rem;cursor:pointer}
/* HERO */
.hero{text-align:center;padding:3rem 1.5rem 2rem;max-width:700px;margin:0 auto}
.hero h1{font-size:2.2rem;font-weight:800;line-height:1.2;margin-bottom:.75rem}
.hero h1 span{background:linear-gradient(135deg,var(--primary),var(--accent),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{color:var(--text2);font-size:1rem}
/* TOOL */
.tool-container{max-width:1200px;margin:0 auto;padding:0 1.5rem 3rem}
.toolbar{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:1rem;align-items:center}
.toolbar button,.toolbar select{background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.45rem .9rem;border-radius:8px;font-size:.8rem;font-weight:500;cursor:pointer;transition:all .2s;font-family:inherit}
.toolbar button:hover{border-color:var(--primary);background:rgba(99,102,241,.12)}
.toolbar button.active{background:linear-gradient(135deg,var(--primary),var(--accent));border-color:transparent;color:#fff}
.toolbar select{appearance:none;padding-right:1.8rem;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%239494a8' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right .6rem center}
.toolbar .sep{width:1px;height:24px;background:var(--border);margin:0 .25rem}
/* LAYOUT */
.main-grid{display:grid;grid-template-columns:1fr 320px;gap:1.5rem;min-height:500px}
.panel{background:var(--glass);backdrop-filter:blur(16px);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;display:flex;flex-direction:column}
.panel-header{padding:.6rem 1rem;border-bottom:1px solid var(--border);font-size:.8rem;font-weight:600;color:var(--text2);display:flex;justify-content:space-between;align-items:center;background:rgba(26,26,36,0.5)}
.panel-body{flex:1;position:relative;overflow:auto;padding:1rem}
/* PREVIEW */
.preview-wrap{position:relative;width:100%;aspect-ratio:4/3;border-radius:10px;overflow:hidden;cursor:crosshair}
.preview-canvas{width:100%;height:100%;border-radius:10px}
/* DRAGGABLE DOTS */
.color-dot{position:absolute;width:28px;height:28px;border-radius:50%;border:3px solid #fff;box-shadow:0 2px 8px rgba(0,0,0,.5),inset 0 0 0 2px rgba(0,0,0,.3);cursor:grab;z-index:10;transform:translate(-50%,-50%);transition:box-shadow .15s}
.color-dot:hover{box-shadow:0 2px 12px rgba(99,102,241,.5),inset 0 0 0 2px rgba(0,0,0,.3)}
.color-dot.dragging{cursor:grabbing;box-shadow:0 4px 20px rgba(99,102,241,.6),inset 0 0 0 2px rgba(0,0,0,.3)}
.color-dot .dot-label{position:absolute;top:-22px;left:50%;transform:translateX(-50%);font-size:10px;font-weight:700;color:#fff;background:rgba(0,0,0,.7);padding:1px 6px;border-radius:4px;white-space:nowrap;pointer-events:none}
/* CONTROLS */
.controls-panel{display:flex;flex-direction:column;gap:.75rem}
.control-group{background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:.75rem}
.control-group-title{font-size:.75rem;font-weight:700;color:var(--text2);text-transform:uppercase;letter-spacing:.5px;margin-bottom:.5rem}
.stop-row{display:flex;align-items:center;gap:.5rem;padding:.4rem 0;border-bottom:1px solid rgba(42,42,58,.5)}
.stop-row:last-child{border-bottom:none}
.stop-color-input{width:32px;height:32px;border:2px solid var(--border);border-radius:8px;cursor:pointer;padding:0;background:none;overflow:hidden}
.stop-color-input::-webkit-color-swatch-wrapper{padding:0}
.stop-color-input::-webkit-color-swatch{border:none;border-radius:6px}
.stop-color-input::-moz-color-swatch{border:none;border-radius:6px}
.stop-info{flex:1;display:flex;flex-direction:column;gap:2px}
.stop-label{font-size:.7rem;font-weight:600;color:var(--text2)}
.stop-hex{font-size:.75rem;font-family:'Courier New',monospace;color:var(--text)}
.stop-pos{font-size:.65rem;color:var(--text2)}
.stop-remove{background:none;border:none;color:var(--text2);cursor:pointer;font-size:1rem;padding:2px 6px;border-radius:6px;transition:all .15s}
.stop-remove:hover{color:var(--red);background:rgba(239,68,68,.1)}
/* SIZE SLIDER */
.slider-row{display:flex;align-items:center;gap:.5rem}
.slider-row label{font-size:.75rem;font-weight:600;color:var(--text2);min-width:50px}
.slider-row input[type="range"]{flex:1;accent-color:var(--primary);height:4px}
.slider-row .slider-val{font-size:.75rem;font-weight:600;color:var(--text);min-width:40px;text-align:right}
/* BG COLOR */
.bg-color-row{display:flex;align-items:center;gap:.5rem}
.bg-color-row label{font-size:.75rem;font-weight:600;color:var(--text2)}
.bg-color-row input[type="color"]{width:32px;height:28px;border:2px solid var(--border);border-radius:6px;cursor:pointer;padding:0;background:none}
.bg-color-row input[type="color"]::-webkit-color-swatch-wrapper{padding:0}
.bg-color-row input[type="color"]::-webkit-color-swatch{border:none;border-radius:4px}
.bg-color-row .hex-display{font-size:.75rem;font-family:'Courier New',monospace;color:var(--text)}
/* CODE OUTPUT */
.code-panel{margin-top:1.5rem}
.code-output{background:var(--surface);border:1px solid var(--border);border-radius:10px;padding:1rem;font-family:'Courier New',monospace;font-size:.8rem;line-height:1.7;color:var(--text);white-space:pre-wrap;word-break:break-all;max-height:300px;overflow:auto;position:relative}
.code-output .hl-prop{color:#c084fc}
.code-output .hl-val{color:#4ade80}
.code-output .hl-func{color:var(--cyan)}
.code-output .hl-paren{color:var(--text2)}
/* CTA */
.cta-section{text-align:center;padding:4rem 1.5rem;max-width:700px;margin:0 auto}
.cta-section h2{font-size:1.8rem;font-weight:800;margin-bottom:.75rem}
.cta-section h2 span{background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.cta-section p{color:var(--text2);margin-bottom:1.5rem}
.cta-btn{display:inline-block;background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;padding:.75rem 2rem;border-radius:10px;font-weight:700;text-decoration:none;font-size:1rem;transition:transform .2s,box-shadow .2s}
.cta-btn:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(99,102,241,.3)}
/* FOOTER */
.footer{border-top:1px solid var(--border);padding:3rem 2rem 2rem;max-width:1200px;margin:0 auto}
.footer-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:2rem;margin-bottom:2rem}
.footer-col h4{font-size:.85rem;font-weight:700;margin-bottom:.75rem;color:var(--text)}
.footer-col a{display:block;color:var(--text2);text-decoration:none;font-size:.8rem;margin-bottom:.4rem;transition:color .2s}
.footer-col a:hover{color:var(--primary)}
.footer-bottom{text-align:center;color:var(--text2);font-size:.75rem;padding-top:1.5rem;border-top:1px solid var(--border)}
/* FADE IN */
.fade-in{opacity:0;transform:translateY(20px);transition:opacity .6s,transform .6s}
.fade-in.visible{opacity:1;transform:translateY(0)}
/* TOAST */
.toast{position:fixed;bottom:2rem;left:50%;transform:translateX(-50%) translateY(80px);background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.6rem 1.2rem;border-radius:10px;font-size:.85rem;font-weight:500;z-index:200;transition:transform .3s;pointer-events:none}
.toast.show{transform:translateX(-50%) translateY(0)}
/* RESPONSIVE */
@media(max-width:768px){
  .main-grid{grid-template-columns:1fr}
  .nav-links{display:none;position:absolute;top:64px;left:0;right:0;background:var(--bg);border-bottom:1px solid var(--border);flex-direction:column;padding:1rem 2rem;gap:1rem}
  .nav-links.open{display:flex}
  .nav-toggle{display:block}
  .hero h1{font-size:1.6rem}
  .footer-grid{grid-template-columns:1fr}
  .toolbar{gap:.35rem}
  .preview-wrap{aspect-ratio:1/1}
}
</style>
</head>
<body>

<nav class="nav">
  <a href="/" class="nav-logo">NexTool</a>
  <button class="nav-toggle" onclick="document.querySelector('.nav-links').classList.toggle('open')" aria-label="Menu">&#9776;</button>
  <div class="nav-links">
    <a href="/">Home</a>
    <a href="/free-tools/">Tools</a>
    <a href="/free-tools/">Free Tools</a>
    <a href="/blog/">Blog</a>
    <a href="/pro.html" class="nav-cta">Get Pro &mdash; $29</a>
  </div>
</nav>

<section class="hero fade-in">
  <h1>Free <span>CSS Mesh Gradient</span> Generator</h1>
  <p class="tool-summary" style="color:#94a3b8;font-size:15px;line-height:1.6;margin-bottom:24px;max-width:700px;margin-left:auto;margin-right:auto;">Create beautiful CSS mesh gradients with draggable color stops, gorgeous presets, and a live preview. Drag the dots to position colors, tweak the background, adjust spread size, and copy production-ready CSS. Runs entirely in your browser.</p>
</section>

<div class="tool-container fade-in">
  <div class="toolbar">
    <button onclick="randomizeColors()" title="Generate random colors">Randomize</button>
    <select id="presetSelect" onchange="applyPreset(this.value)" title="Choose a preset">
      <option value="">Presets...</option>
      <option value="aurora">Aurora</option>
      <option value="sunset">Sunset</option>
      <option value="ocean">Ocean</option>
      <option value="forest">Forest</option>
      <option value="neon">Neon</option>
    </select>
    <div class="sep"></div>
    <button onclick="addStop()" id="addBtn" title="Add a color stop">Add Color</button>
    <button onclick="resetToDefault()" title="Reset to defaults">Reset</button>
    <div class="sep"></div>
    <button onclick="copyCSS()" title="Copy CSS to clipboard">Copy CSS</button>
  </div>

  <div class="main-grid">
    <div class="panel">
      <div class="panel-header"><span>Live Preview</span><span id="previewInfo">4 color stops</span></div>
      <div class="panel-body" style="padding:0">
        <div class="preview-wrap" id="previewWrap">
          <div class="preview-canvas" id="previewCanvas"></div>
        </div>
      </div>
    </div>

    <div class="controls-panel">
      <div class="control-group">
        <div class="control-group-title">Color Stops</div>
        <div id="stopsContainer"></div>
      </div>

      <div class="control-group">
        <div class="control-group-title">Background Color</div>
        <div class="bg-color-row">
          <input type="color" id="bgColor" value="#1a1a2e" onchange="updateGradient()">
          <label>Base</label>
          <span class="hex-display" id="bgHex">#1a1a2e</span>
        </div>
      </div>

      <div class="control-group">
        <div class="control-group-title">Spread Size</div>
        <div class="slider-row">
          <label>Size</label>
          <input type="range" id="spreadSize" min="30" max="80" value="50" oninput="updateGradient()">
          <span class="slider-val" id="spreadVal">50%</span>
        </div>
      </div>
    </div>
  </div>

  <div class="code-panel">
    <div class="panel">
      <div class="panel-header"><span>Generated CSS</span><span style="cursor:pointer" onclick="copyCSS()">Copy</span></div>
      <div class="code-output" id="codeOutput"></div>
    </div>
  </div>
</div>

<section class="cta-section fade-in">
  <h2>Need something <span>more powerful</span>?</h2>
  <p>Let us build it for you. Custom APIs, dashboards, automations &mdash; whatever you need.</p>
  <a href="/#contact" class="cta-btn">Start a Project &rarr;</a>
</section>

<!-- Cross Promo -->
<section style="max-width:900px;margin:40px auto;padding:0 24px;">
<div style="background:linear-gradient(135deg,rgba(99,102,241,0.1),rgba(168,85,247,0.08));border:1px solid rgba(99,102,241,0.15);border-radius:20px;padding:32px 28px;text-align:center;">
<div style="font-size:13px;color:#818cf8;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Founding Member</div>
<h3 style="font-size:22px;font-weight:800;color:#fff;margin:0 0 8px;">Get NexTool Pro</h3>
<p style="color:#94a3b8;font-size:14px;margin:0 auto 20px;max-width:500px;">No banners, clean output, enhanced features on all 240+ tools. One-time payment.</p>
<div style="display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap;">
<a href="/pro.html" style="display:inline-block;padding:12px 28px;background:linear-gradient(135deg,#6366f1,#a855f7,#ec4899);color:#fff;border-radius:10px;font-weight:700;font-size:15px;text-decoration:none;">$29 &mdash; Get Pro</a>
<a href="/free-tools/" style="color:#94a3b8;font-size:14px;text-decoration:none;">Browse 240+ Free Tools &rarr;</a>
</div>
</div>
</section>


<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/box-shadow-generator.html" style="color:var(--primary);text-decoration:none">CSS Box Shadow Generator</a> · <a href="/free-tools/emoji-picker.html" style="color:var(--primary);text-decoration:none">Emoji Picker & Search</a> · <a href="/free-tools/favicon-generator.html" style="color:var(--primary);text-decoration:none">Favicon Generator</a> · <a href="/free-tools/meta-tag-generator.html" style="color:var(--primary);text-decoration:none">Meta Tag Generator</a> · <a href="/free-tools/css-animation-generator.html" style="color:var(--primary);text-decoration:none">CSS Animation Generator - Free Tool</a></p>
</div>

<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/icon-generator.html" style="color:var(--primary);text-decoration:none">Free Icon Generator</a> · <a href="/free-tools/color-mixer.html" style="color:var(--primary);text-decoration:none">Free Color Mixer</a> · <a href="/free-tools/gradient-generator.html" style="color:var(--primary);text-decoration:none">Free CSS Gradient Generator</a></p>
</div>

<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/css-gradient-generator.html" style="color:var(--primary);text-decoration:none">Free CSS Gradient Generator</a> · <a href="/free-tools/color-gradient-generator.html" style="color:var(--primary);text-decoration:none">Free CSS Gradient Generator</a> · <a href="/free-tools/json-to-yaml-converter.html" style="color:var(--primary);text-decoration:none">Free JSON to YAML Converter</a></p>
</div>
<footer class="footer fade-in">
  <div class="footer-grid">
    <div class="footer-col">
      <h4>Products</h4>
      <a href="/free-tools/">240+ Free Tools</a>
<a href="/pro.html">NexTool Pro</a>
<a href="/workspace.html">Workspace</a>
    </div>
    <div class="footer-col">
      <h4>Explore</h4>
      <a href="/free-tools/">Free Tools</a><a href="/blog/">Blog</a><a href="/pro.html">FAQ</a><a href="/pro.html">Pro &mdash; $29</a>
    </div>
    <div class="footer-col">
      <h4>Ecosystem</h4>
      <a href="/">NexTool Home</a><a href="/#contact">Contact</a><a href="https://github.com/christian140903-sudo/nextool" target="_blank">GitHub</a>
    </div>
  </div>
  <div class="footer-bottom">&copy; 2026 NexTool. AI-powered tools for everyone.</div>
</footer>

<div class="toast" id="toast"></div>

<script>
/* =========================================================
   CSS MESH GRADIENT GENERATOR — NexTool
   ========================================================= */

const previewWrap = document.getElementById('previewWrap');
const previewCanvas = document.getElementById('previewCanvas');
const stopsContainer = document.getElementById('stopsContainer');
const codeOutput = document.getElementById('codeOutput');
const bgColorInput = document.getElementById('bgColor');
const bgHex = document.getElementById('bgHex');
const spreadSlider = document.getElementById('spreadSize');
const spreadVal = document.getElementById('spreadVal');
const previewInfo = document.getElementById('previewInfo');
const addBtn = document.getElementById('addBtn');

const MAX_STOPS = 6;
const MIN_STOPS = 2;

/* Default 4 color stops */
let stops = [
  { color: '#6366f1', x: 20, y: 25 },
  { color: '#a855f7', x: 75, y: 15 },
  { color: '#ec4899', x: 35, y: 75 },
  { color: '#22d3ee', x: 80, y: 70 }
];

/* Preset definitions */
const presets = {
  aurora: {
    bg: '#0a0a2e',
    stops: [
      { color: '#00ff87', x: 15, y: 20 },
      { color: '#60efff', x: 70, y: 10 },
      { color: '#b366ff', x: 40, y: 65 },
      { color: '#00ccff', x: 85, y: 80 }
    ]
  },
  sunset: {
    bg: '#1a0a1e',
    stops: [
      { color: '#ff6b35', x: 20, y: 15 },
      { color: '#f7c948', x: 75, y: 25 },
      { color: '#e84393', x: 50, y: 70 },
      { color: '#fd79a8', x: 85, y: 60 }
    ]
  },
  ocean: {
    bg: '#0a1628',
    stops: [
      { color: '#0077b6', x: 15, y: 30 },
      { color: '#00b4d8', x: 65, y: 15 },
      { color: '#90e0ef', x: 40, y: 75 },
      { color: '#023e8a', x: 85, y: 65 }
    ]
  },
  forest: {
    bg: '#0a1a0a',
    stops: [
      { color: '#2d6a4f', x: 20, y: 20 },
      { color: '#52b788', x: 70, y: 30 },
      { color: '#95d5b2', x: 35, y: 70 },
      { color: '#1b4332', x: 80, y: 75 }
    ]
  },
  neon: {
    bg: '#0a0a14',
    stops: [
      { color: '#ff00ff', x: 15, y: 25 },
      { color: '#00ffff', x: 80, y: 15 },
      { color: '#ffff00', x: 50, y: 80 },
      { color: '#ff0080', x: 85, y: 65 }
    ]
  }
};

/* ---- INITIALIZATION ---- */
function init() {
  renderStops();
  renderDots();
  updateGradient();
}

/* ---- RENDER STOP LIST IN SIDEBAR ---- */
function renderStops() {
  stopsContainer.innerHTML = '';
  stops.forEach(function(stop, i) {
    const row = document.createElement('div');
    row.className = 'stop-row';
    row.innerHTML =
      '<input type="color" class="stop-color-input" value="' + stop.color + '" data-idx="' + i + '">' +
      '<div class="stop-info">' +
        '<span class="stop-label">Stop ' + (i + 1) + '</span>' +
        '<span class="stop-hex">' + stop.color + '</span>' +
        '<span class="stop-pos">' + stop.x + '% , ' + stop.y + '%</span>' +
      '</div>' +
      (stops.length > MIN_STOPS
        ? '<button class="stop-remove" data-idx="' + i + '" title="Remove this stop">&times;</button>'
        : '');
    stopsContainer.appendChild(row);
  });

  /* Color input change */
  stopsContainer.querySelectorAll('.stop-color-input').forEach(function(el) {
    el.addEventListener('input', function() {
      var idx = parseInt(this.dataset.idx);
      stops[idx].color = this.value;
      renderDots();
      updateGradient();
      renderStops();
    });
  });

  /* Remove buttons */
  stopsContainer.querySelectorAll('.stop-remove').forEach(function(el) {
    el.addEventListener('click', function() {
      var idx = parseInt(this.dataset.idx);
      stops.splice(idx, 1);
      renderStops();
      renderDots();
      updateGradient();
    });
  });

  /* Update add button state */
  addBtn.disabled = stops.length >= MAX_STOPS;
  addBtn.style.opacity = stops.length >= MAX_STOPS ? '0.4' : '1';
  previewInfo.textContent = stops.length + ' color stop' + (stops.length !== 1 ? 's' : '');
}

/* ---- RENDER DRAGGABLE DOTS ON PREVIEW ---- */
function renderDots() {
  /* Remove existing dots */
  previewWrap.querySelectorAll('.color-dot').forEach(function(d) { d.remove(); });

  stops.forEach(function(stop, i) {
    var dot = document.createElement('div');
    dot.className = 'color-dot';
    dot.style.left = stop.x + '%';
    dot.style.top = stop.y + '%';
    dot.style.backgroundColor = stop.color;
    dot.dataset.idx = i;
    dot.innerHTML = '<span class="dot-label">' + (i + 1) + '</span>';
    previewWrap.appendChild(dot);
    enableDrag(dot, i);
  });
}

/* ---- DRAG HANDLING ---- */
function enableDrag(dot, idx) {
  var dragging = false;
  var rect;

  function startDrag(e) {
    e.preventDefault();
    dragging = true;
    dot.classList.add('dragging');
    rect = previewWrap.getBoundingClientRect();
    document.addEventListener('mousemove', onDrag);
    document.addEventListener('mouseup', endDrag);
    document.addEventListener('touchmove', onDrag, { passive: false });
    document.addEventListener('touchend', endDrag);
  }

  function onDrag(e) {
    if (!dragging) return;
    e.preventDefault();
    var clientX, clientY;
    if (e.touches) {
      clientX = e.touches[0].clientX;
      clientY = e.touches[0].clientY;
    } else {
      clientX = e.clientX;
      clientY = e.clientY;
    }
    var x = ((clientX - rect.left) / rect.width) * 100;
    var y = ((clientY - rect.top) / rect.height) * 100;
    x = Math.max(0, Math.min(100, x));
    y = Math.max(0, Math.min(100, y));
    stops[idx].x = Math.round(x);
    stops[idx].y = Math.round(y);
    dot.style.left = stops[idx].x + '%';
    dot.style.top = stops[idx].y + '%';
    updateGradient();
    updateStopInfo(idx);
  }

  function endDrag() {
    dragging = false;
    dot.classList.remove('dragging');
    document.removeEventListener('mousemove', onDrag);
    document.removeEventListener('mouseup', endDrag);
    document.removeEventListener('touchmove', onDrag);
    document.removeEventListener('touchend', endDrag);
  }

  dot.addEventListener('mousedown', startDrag);
  dot.addEventListener('touchstart', startDrag, { passive: false });
}

/* Update a single stop's info display without full re-render */
function updateStopInfo(idx) {
  var rows = stopsContainer.querySelectorAll('.stop-row');
  if (rows[idx]) {
    var pos = rows[idx].querySelector('.stop-pos');
    if (pos) pos.textContent = stops[idx].x + '% , ' + stops[idx].y + '%';
  }
}

/* ---- GENERATE & APPLY GRADIENT ---- */
function updateGradient() {
  var bg = bgColorInput.value;
  var spread = parseInt(spreadSlider.value);
  spreadVal.textContent = spread + '%';
  bgHex.textContent = bg;

  var layers = stops.map(function(s) {
    return 'radial-gradient(at ' + s.x + '% ' + s.y + '%, ' + s.color + ' 0px, transparent ' + spread + '%)';
  });

  previewCanvas.style.backgroundColor = bg;
  previewCanvas.style.backgroundImage = layers.join(', ');

  renderCode(bg, stops, spread);
}

/* ---- RENDER CSS CODE OUTPUT ---- */
function renderCode(bg, stops, spread) {
  var lines = [];
  lines.push('<span class="hl-prop">background-color</span>: <span class="hl-val">' + bg + '</span>;');
  lines.push('<span class="hl-prop">background-image</span>:');
  stops.forEach(function(s, i) {
    var comma = i < stops.length - 1 ? ',' : ';';
    lines.push('  <span class="hl-func">radial-gradient</span><span class="hl-paren">(</span>at ' + s.x + '% ' + s.y + '%, <span class="hl-val">' + s.color + '</span> 0px, transparent ' + spread + '%<span class="hl-paren">)</span>' + comma);
  });
  codeOutput.innerHTML = lines.join('\n');
}

/* ---- GET RAW CSS (for copy) ---- */
function getRawCSS() {
  var bg = bgColorInput.value;
  var spread = parseInt(spreadSlider.value);
  var lines = [];
  lines.push('background-color: ' + bg + ';');
  lines.push('background-image:');
  stops.forEach(function(s, i) {
    var comma = i < stops.length - 1 ? ',' : ';';
    lines.push('  radial-gradient(at ' + s.x + '% ' + s.y + '%, ' + s.color + ' 0px, transparent ' + spread + '%)' + comma);
  });
  return lines.join('\n');
}

/* ---- TOOLBAR ACTIONS ---- */

function addStop() {
  if (stops.length >= MAX_STOPS) return;
  stops.push({
    color: randomColor(),
    x: Math.round(Math.random() * 80 + 10),
    y: Math.round(Math.random() * 80 + 10)
  });
  renderStops();
  renderDots();
  updateGradient();
}

function randomizeColors() {
  /* Pick a random harmonious palette via HSL */
  var baseHue = Math.random() * 360;
  var bgLightness = 5 + Math.random() * 10;
  bgColorInput.value = hslToHex(baseHue, 40, bgLightness);

  stops.forEach(function(s) {
    var hue = (baseHue + Math.random() * 180) % 360;
    var sat = 60 + Math.random() * 40;
    var lit = 45 + Math.random() * 35;
    s.color = hslToHex(hue, sat, lit);
    s.x = Math.round(Math.random() * 80 + 10);
    s.y = Math.round(Math.random() * 80 + 10);
  });

  document.getElementById('presetSelect').value = '';
  renderStops();
  renderDots();
  updateGradient();
}

function applyPreset(name) {
  if (!name || !presets[name]) return;
  var p = presets[name];
  bgColorInput.value = p.bg;
  stops = p.stops.map(function(s) { return { color: s.color, x: s.x, y: s.y }; });
  renderStops();
  renderDots();
  updateGradient();
}

function resetToDefault() {
  stops = [
    { color: '#6366f1', x: 20, y: 25 },
    { color: '#a855f7', x: 75, y: 15 },
    { color: '#ec4899', x: 35, y: 75 },
    { color: '#22d3ee', x: 80, y: 70 }
  ];
  bgColorInput.value = '#1a1a2e';
  spreadSlider.value = 50;
  document.getElementById('presetSelect').value = '';
  renderStops();
  renderDots();
  updateGradient();
}

function copyCSS() {
  var css = getRawCSS();
  navigator.clipboard.writeText(css).then(function() {
    showToast('CSS copied to clipboard');
  }).catch(function() {
    /* Fallback */
    var ta = document.createElement('textarea');
    ta.value = css;
    document.body.appendChild(ta);
    ta.select();
    document.execCommand('copy');
    document.body.removeChild(ta);
    showToast('CSS copied to clipboard');
  });
}

/* ---- HELPERS ---- */

function randomColor() {
  var hue = Math.random() * 360;
  var sat = 60 + Math.random() * 40;
  var lit = 45 + Math.random() * 35;
  return hslToHex(hue, sat, lit);
}

function hslToHex(h, s, l) {
  s /= 100;
  l /= 100;
  var c = (1 - Math.abs(2 * l - 1)) * s;
  var x = c * (1 - Math.abs((h / 60) % 2 - 1));
  var m = l - c / 2;
  var r, g, b;
  if (h < 60) { r = c; g = x; b = 0; }
  else if (h < 120) { r = x; g = c; b = 0; }
  else if (h < 180) { r = 0; g = c; b = x; }
  else if (h < 240) { r = 0; g = x; b = c; }
  else if (h < 300) { r = x; g = 0; b = c; }
  else { r = c; g = 0; b = x; }
  r = Math.round((r + m) * 255);
  g = Math.round((g + m) * 255);
  b = Math.round((b + m) * 255);
  return '#' + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
}

function showToast(msg) {
  var t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(function() { t.classList.remove('show'); }, 2000);
}

/* IntersectionObserver fade-in */
var observer = new IntersectionObserver(function(entries) {
  entries.forEach(function(entry) {
    if (entry.isIntersecting) {
      entry.target.classList.add('visible');
      observer.unobserve(entry.target);
    }
  });
}, { threshold: 0.1 });
document.querySelectorAll('.fade-in').forEach(function(el) { observer.observe(el); });

/* Boot */
init();
</script>
<script src="/js/analytics-lite.js" defer></script>
<script src="/js/revenue.js" defer></script>
<script src="/js/lead-capture.js" defer></script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What is a CSS mesh gradient?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "A CSS mesh gradient simulates a multi-point gradient by overlapping several radial-gradient layers at different positions. Each color bleeds into its neighbors, creating a smooth, organic gradient effect similar to those found in design tools like Figma or Adobe Illustrator."
      }
    },
    {
      "@type": "Question",
      "name": "How do I use a mesh gradient on my website?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Copy the generated CSS from NexTool's Mesh Gradient Generator and paste it into your stylesheet. Apply it to any element using background-color and background-image properties. It works on all modern browsers without any JavaScript or external libraries."
      }
    },
    {
      "@type": "Question",
      "name": "Can I drag color stops to reposition them?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes! NexTool's generator features draggable color dots directly on the live preview. Click and drag any dot to move its position. The CSS output updates in real time so you can fine-tune the gradient visually before copying the code."
      }
    },
    {
      "@type": "Question",
      "name": "Is the CSS Mesh Gradient Generator free?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Absolutely. NexTool's CSS Mesh Gradient Generator is 100% free, requires no signup, and runs entirely in your browser. Your data never leaves your device. You can generate unlimited gradients and copy the CSS with one click."
      }
    }
  ]
}
</script>
</body>
</html>
