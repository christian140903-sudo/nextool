<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Free Image Watermark Tool — Add Watermarks to Photos Online | NexTool</title>
<meta name="description" content="Add text watermarks to images online for free. Custom fonts, colors, opacity, tiled mode, rotation. Download as PNG or JPG. No signup, 100% client-side.">
<meta name="keywords" content="add watermark to image online, image watermark tool free, watermark photos online, text watermark generator, photo watermark, free watermark tool">
<meta name="robots" content="index, follow">
<meta property="og:title" content="Free Image Watermark Tool — Add Watermarks to Photos | NexTool">
<meta property="og:description" content="Add text watermarks to your images for free. Custom fonts, colors, opacity, tiled mode, and rotation. 100% browser-based.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://nextool.app/free-tools/image-watermark.html">
<meta property="og:image" content="https://nextool.app/assets/og-default.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<link rel="canonical" href="https://nextool.app/free-tools/image-watermark.html">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Free Image Watermark Tool — Add Watermarks to Photos | NexTool">
<meta name="twitter:description" content="Add text watermarks to images online. Custom fonts, tiled mode, rotation. Free tool by NexTool.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"SoftwareApplication","name":"NexTool Image Watermark Tool","applicationCategory":"MultimediaApplication","operatingSystem":"Web","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"description":"Free online image watermark tool. Add custom text watermarks to photos with adjustable font, color, opacity, position, rotation, and tiled mode."}
</script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--bg:#050508;--surface:#111118;--surface2:#1a1a24;--border:#2a2a3a;--text:#e4e4eb;--text2:#9494a8;--primary:#6366f1;--accent:#a855f7;--pink:#ec4899;--green:#22c55e;--red:#ef4444;--cyan:#22d3ee;--yellow:#eab308;--radius:12px;--glass:rgba(17,17,24,0.7)}
html{scroll-behavior:smooth}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;min-height:100vh;overflow-x:hidden}
/* NAV */
.nav{position:sticky;top:0;z-index:100;background:rgba(5,5,8,0.85);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:0 2rem;height:64px;display:flex;align-items:center;justify-content:space-between}
.nav-logo{font-size:1.4rem;font-weight:800;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-decoration:none}
.nav-links{display:flex;align-items:center;gap:1.5rem}
.nav-links a{color:var(--text2);text-decoration:none;font-size:.875rem;font-weight:500;transition:color .2s}
.nav-links a:hover{color:var(--text)}
.nav-cta{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff!important;padding:.5rem 1.2rem;border-radius:8px;font-weight:600;-webkit-text-fill-color:#fff!important}
.nav-cta:hover{opacity:.9}
.nav-toggle{display:none;background:none;border:none;color:var(--text);font-size:1.5rem;cursor:pointer}
/* HERO */
.hero{text-align:center;padding:3rem 1.5rem 2rem;max-width:700px;margin:0 auto}
.hero h1{font-size:2.2rem;font-weight:800;line-height:1.2;margin-bottom:.75rem}
.hero h1 span{background:linear-gradient(135deg,var(--primary),var(--accent),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{color:var(--text2);font-size:1rem}
/* TOOL */
.tool-container{max-width:1200px;margin:0 auto;padding:0 1.5rem 3rem}
.tool-layout{display:grid;grid-template-columns:320px 1fr;gap:1.5rem;min-height:500px}
.panel{background:var(--glass);backdrop-filter:blur(16px);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;display:flex;flex-direction:column}
.panel-header{padding:.6rem 1rem;border-bottom:1px solid var(--border);font-size:.8rem;font-weight:600;color:var(--text2);display:flex;justify-content:space-between;align-items:center;background:rgba(26,26,36,0.5)}
.panel-body{flex:1;padding:1rem;overflow-y:auto}
/* CONTROLS */
.ctrl-group{margin-bottom:1rem}
.ctrl-group label{display:block;font-size:.75rem;font-weight:600;color:var(--text2);margin-bottom:.35rem;text-transform:uppercase;letter-spacing:.5px}
.ctrl-group input[type="text"],.ctrl-group select,.ctrl-group textarea{width:100%;background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.45rem .7rem;border-radius:8px;font-size:.85rem;font-family:inherit;outline:none;transition:border-color .2s}
.ctrl-group input[type="text"]:focus,.ctrl-group select:focus{border-color:var(--primary)}
.ctrl-group select{appearance:none;padding-right:1.8rem;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%239494a8' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right .6rem center}
.range-row{display:flex;align-items:center;gap:.5rem}
.range-row input[type="range"]{flex:1;-webkit-appearance:none;appearance:none;height:6px;background:var(--surface2);border-radius:3px;outline:none}
.range-row input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none;width:16px;height:16px;border-radius:50%;background:var(--primary);cursor:pointer;border:2px solid var(--bg)}
.range-row input[type="range"]::-moz-range-thumb{width:16px;height:16px;border-radius:50%;background:var(--primary);cursor:pointer;border:2px solid var(--bg)}
.range-val{min-width:36px;text-align:right;font-size:.8rem;color:var(--text2);font-variant-numeric:tabular-nums}
.color-row{display:flex;align-items:center;gap:.5rem}
.color-row input[type="color"]{-webkit-appearance:none;appearance:none;width:36px;height:30px;border:1px solid var(--border);border-radius:6px;background:transparent;cursor:pointer;padding:2px}
.color-row input[type="color"]::-webkit-color-swatch-wrapper{padding:0}
.color-row input[type="color"]::-webkit-color-swatch{border:none;border-radius:4px}
.color-row .hex-display{font-size:.8rem;color:var(--text2);font-family:'Courier New',monospace}
/* POSITION GRID */
.pos-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:4px}
.pos-grid button{background:var(--surface2);border:1px solid var(--border);color:var(--text2);padding:.35rem;border-radius:6px;font-size:.65rem;font-weight:500;cursor:pointer;transition:all .2s;font-family:inherit}
.pos-grid button:hover{border-color:var(--primary);color:var(--text)}
.pos-grid button.active{background:linear-gradient(135deg,var(--primary),var(--accent));border-color:transparent;color:#fff}
/* CHECKBOX */
.check-row{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem}
.check-row input[type="checkbox"]{-webkit-appearance:none;appearance:none;width:18px;height:18px;border:1px solid var(--border);border-radius:5px;background:var(--surface2);cursor:pointer;position:relative;flex-shrink:0}
.check-row input[type="checkbox"]:checked{background:var(--primary);border-color:var(--primary)}
.check-row input[type="checkbox"]:checked::after{content:'';position:absolute;top:3px;left:6px;width:4px;height:8px;border:solid #fff;border-width:0 2px 2px 0;transform:rotate(45deg)}
.check-row label{font-size:.8rem;color:var(--text);cursor:pointer}
/* BUTTONS */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:.4rem;background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.5rem 1rem;border-radius:8px;font-size:.8rem;font-weight:600;cursor:pointer;transition:all .2s;font-family:inherit}
.btn:hover{border-color:var(--primary);background:rgba(99,102,241,.12)}
.btn-primary{background:linear-gradient(135deg,var(--primary),var(--accent));border-color:transparent;color:#fff}
.btn-primary:hover{opacity:.9;border-color:transparent;background:linear-gradient(135deg,var(--primary),var(--accent))}
.btn-row{display:flex;flex-wrap:wrap;gap:.5rem;margin-top:1rem}
/* DROPZONE */
.dropzone{border:2px dashed var(--border);border-radius:var(--radius);padding:2rem 1rem;text-align:center;cursor:pointer;transition:all .3s;background:rgba(99,102,241,.03);min-height:200px;display:flex;flex-direction:column;align-items:center;justify-content:center}
.dropzone:hover,.dropzone.drag-over{border-color:var(--primary);background:rgba(99,102,241,.08)}
.dropzone-icon{font-size:2.5rem;margin-bottom:.75rem;opacity:.6}
.dropzone-text{color:var(--text2);font-size:.85rem;margin-bottom:.3rem}
.dropzone-sub{color:var(--text2);font-size:.7rem;opacity:.6}
/* CANVAS PREVIEW */
.canvas-wrap{position:relative;width:100%;display:flex;align-items:center;justify-content:center;min-height:400px;background:repeating-conic-gradient(var(--surface2) 0% 25%, var(--surface) 0% 50%) 50%/20px 20px;border-radius:8px;overflow:hidden}
.canvas-wrap canvas{max-width:100%;max-height:600px;display:block}
.no-image-msg{color:var(--text2);font-size:.9rem;text-align:center}
/* DOWNLOAD SECTION */
.dl-section{margin-top:1rem;padding-top:1rem;border-top:1px solid var(--border)}
/* CTA */
.cta-section{text-align:center;padding:4rem 1.5rem;max-width:700px;margin:0 auto}
.cta-section h2{font-size:1.8rem;font-weight:800;margin-bottom:.75rem}
.cta-section h2 span{background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.cta-section p{color:var(--text2);margin-bottom:1.5rem}
.cta-btn{display:inline-block;background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;padding:.75rem 2rem;border-radius:10px;font-weight:700;text-decoration:none;font-size:1rem;transition:transform .2s,box-shadow .2s}
.cta-btn:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(99,102,241,.3)}
/* FOOTER */
.footer{border-top:1px solid var(--border);padding:3rem 2rem 2rem;max-width:1200px;margin:0 auto}
.footer-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:2rem;margin-bottom:2rem}
.footer-col h4{font-size:.85rem;font-weight:700;margin-bottom:.75rem;color:var(--text)}
.footer-col a{display:block;color:var(--text2);text-decoration:none;font-size:.8rem;margin-bottom:.4rem;transition:color .2s}
.footer-col a:hover{color:var(--primary)}
.footer-bottom{text-align:center;color:var(--text2);font-size:.75rem;padding-top:1.5rem;border-top:1px solid var(--border)}
/* FADE IN */
.fade-in{opacity:0;transform:translateY(20px);transition:opacity .6s,transform .6s}
.fade-in.visible{opacity:1;transform:translateY(0)}
/* TOAST */
.toast{position:fixed;bottom:2rem;left:50%;transform:translateX(-50%) translateY(80px);background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.6rem 1.2rem;border-radius:10px;font-size:.85rem;font-weight:500;z-index:200;transition:transform .3s;pointer-events:none}
.toast.show{transform:translateX(-50%) translateY(0)}
/* RESPONSIVE */
@media(max-width:900px){
  .tool-layout{grid-template-columns:1fr}
}
@media(max-width:768px){
  .nav-links{display:none;position:absolute;top:64px;left:0;right:0;background:var(--bg);border-bottom:1px solid var(--border);flex-direction:column;padding:1rem 2rem;gap:1rem}
  .nav-links.open{display:flex}
  .nav-toggle{display:block}
  .hero h1{font-size:1.6rem}
  .footer-grid{grid-template-columns:1fr}
}
</style>
</head>
<body>

<nav class="nav">
  <a href="/" class="nav-logo">NexTool</a>
  <button class="nav-toggle" onclick="document.querySelector('.nav-links').classList.toggle('open')" aria-label="Menu">&#9776;</button>
  <div class="nav-links">
    <a href="/">Home</a>
    <a href="/free-tools/">Tools</a>
    <a href="/free-tools/">Free Tools</a>
    <a href="/blog/">Blog</a>
    <a href="/pro.html" class="nav-cta">Get Pro — $29</a>
  </div>
</nav>

<section class="hero fade-in">
  <h1>Free <span>Image Watermark</span> Tool</h1>
  <p class="tool-summary" style="color:#94a3b8;font-size:15px;line-height:1.6;margin-bottom:24px;max-width:700px;margin-left:auto;margin-right:auto;">Add custom text watermarks to your images directly in the browser. Choose font, size, color, opacity, position, rotation, and tiled mode. Download as PNG or JPG. No upload to any server — 100% private and free.</p>
</section>

<div class="tool-container fade-in">
  <div class="tool-layout">
    <!-- CONTROLS PANEL -->
    <div class="panel">
      <div class="panel-header"><span>Watermark Settings</span></div>
      <div class="panel-body" id="controlsBody">

        <div class="ctrl-group">
          <label>Watermark Text</label>
          <input type="text" id="wmText" value="Sample Watermark" placeholder="Enter watermark text..." maxlength="200">
        </div>

        <div class="ctrl-group">
          <label>Font Family</label>
          <select id="wmFont">
            <option value="Inter">Inter</option>
            <option value="Arial">Arial</option>
            <option value="Georgia">Georgia</option>
            <option value="Courier New">Courier New</option>
            <option value="Times New Roman">Times New Roman</option>
          </select>
        </div>

        <div class="ctrl-group">
          <label>Font Size: <span id="fontSizeVal">36</span>px</label>
          <div class="range-row">
            <input type="range" id="wmFontSize" min="12" max="120" value="36">
          </div>
        </div>

        <div class="ctrl-group">
          <label>Color</label>
          <div class="color-row">
            <input type="color" id="wmColor" value="#ffffff">
            <span class="hex-display" id="colorHex">#ffffff</span>
          </div>
        </div>

        <div class="ctrl-group">
          <label>Opacity: <span id="opacityVal">50</span>%</label>
          <div class="range-row">
            <input type="range" id="wmOpacity" min="0" max="100" value="50">
          </div>
        </div>

        <div class="ctrl-group">
          <label>Position</label>
          <div class="pos-grid">
            <button data-pos="top-left">Top Left</button>
            <button data-pos="top-center">Top</button>
            <button data-pos="top-right">Top Right</button>
            <button data-pos="middle-left">Left</button>
            <button data-pos="center" class="active">Center</button>
            <button data-pos="middle-right">Right</button>
            <button data-pos="bottom-left">Btm Left</button>
            <button data-pos="bottom-center">Bottom</button>
            <button data-pos="bottom-right">Btm Right</button>
          </div>
        </div>

        <div class="ctrl-group">
          <label>Rotation: <span id="rotationVal">0</span> deg</label>
          <div class="range-row">
            <input type="range" id="wmRotation" min="0" max="360" value="0">
          </div>
        </div>

        <div class="ctrl-group">
          <div class="check-row">
            <input type="checkbox" id="wmTiled">
            <label for="wmTiled">Tiled / Diagonal mode (repeat across image)</label>
          </div>
        </div>

        <div class="ctrl-group">
          <label>Tile Spacing: <span id="tileSpacingVal">150</span>px</label>
          <div class="range-row">
            <input type="range" id="wmTileSpacing" min="50" max="500" value="150">
          </div>
        </div>

        <div class="ctrl-group">
          <div class="check-row">
            <input type="checkbox" id="wmStroke">
            <label for="wmStroke">Text outline / stroke</label>
          </div>
        </div>

        <div class="ctrl-group">
          <label>Stroke Color</label>
          <div class="color-row">
            <input type="color" id="wmStrokeColor" value="#000000">
            <span class="hex-display" id="strokeHex">#000000</span>
          </div>
        </div>

        <div class="ctrl-group">
          <label>Stroke Width: <span id="strokeWidthVal">2</span>px</label>
          <div class="range-row">
            <input type="range" id="wmStrokeWidth" min="1" max="10" value="2">
          </div>
        </div>

        <div class="dl-section">
          <div class="ctrl-group">
            <label>Format</label>
            <select id="dlFormat">
              <option value="png">PNG (lossless)</option>
              <option value="jpeg">JPG (smaller file)</option>
            </select>
          </div>
          <div class="ctrl-group" id="qualityGroup">
            <label>JPG Quality: <span id="qualityVal">92</span>%</label>
            <div class="range-row">
              <input type="range" id="dlQuality" min="10" max="100" value="92">
            </div>
          </div>
          <div class="btn-row">
            <button class="btn btn-primary" id="btnDownload" disabled>Download Image</button>
            <button class="btn" id="btnReset">Reset</button>
          </div>
        </div>
      </div>
    </div>

    <!-- PREVIEW PANEL -->
    <div class="panel">
      <div class="panel-header"><span>Preview</span><span id="imgInfo"></span></div>
      <div class="panel-body" style="padding:0;display:flex;flex-direction:column;align-items:stretch">
        <div id="dropzone" class="dropzone" style="margin:1rem">
          <div class="dropzone-icon">&#128444;</div>
          <div class="dropzone-text">Drop an image here or click to upload</div>
          <div class="dropzone-sub">Supports PNG, JPG, WEBP, BMP, GIF</div>
          <input type="file" id="fileInput" accept="image/*" style="display:none">
        </div>
        <div class="canvas-wrap" id="canvasWrap" style="display:none">
          <canvas id="previewCanvas"></canvas>
        </div>
        <div style="padding:.5rem 1rem;text-align:center" id="changeWrap" style="display:none">
          <button class="btn" id="btnChange" style="display:none;margin:.5rem auto">Change Image</button>
        </div>
      </div>
    </div>
  </div>
</div>

<section class="cta-section fade-in">
  <h2>Need something <span>more powerful</span>?</h2>
  <p>Let us build it for you. Custom APIs, dashboards, automations &mdash; whatever you need.</p>
  <a href="/#contact" class="cta-btn">Start a Project &rarr;</a>
</section>

<!-- Cross Promo -->
<section style="max-width:900px;margin:40px auto;padding:0 24px;">
<div style="background:linear-gradient(135deg,rgba(99,102,241,0.1),rgba(168,85,247,0.08));border:1px solid rgba(99,102,241,0.15);border-radius:20px;padding:32px 28px;text-align:center;">
<div style="font-size:13px;color:#818cf8;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Founding Member</div>
<h3 style="font-size:22px;font-weight:800;color:#fff;margin:0 0 8px;">Get NexTool Pro</h3>
<p style="color:#94a3b8;font-size:14px;margin:0 auto 20px;max-width:500px;">No banners, clean output, enhanced features on all 231+ tools. One-time payment.</p>
<div style="display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap;">
<a href="/pro.html" style="display:inline-block;padding:12px 28px;background:linear-gradient(135deg,#6366f1,#a855f7,#ec4899);color:#fff;border-radius:10px;font-weight:700;font-size:15px;text-decoration:none;">$29 — Get Pro</a>
<a href="/free-tools/" style="color:#94a3b8;font-size:14px;text-decoration:none;">Browse 231+ Free Tools &rarr;</a>
</div>
</div>
</section>


<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/box-shadow-generator.html" style="color:var(--primary);text-decoration:none">CSS Box Shadow Generator</a> · <a href="/free-tools/css-animation-generator.html" style="color:var(--primary);text-decoration:none">CSS Animation Generator - Free Tool</a> · <a href="/free-tools/emoji-picker.html" style="color:var(--primary);text-decoration:none">Emoji Picker & Search</a></p>
</div>

<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/color-palette-generator.html" style="color:var(--primary);text-decoration:none">Free Color Palette Generator</a> · <a href="/free-tools/color-palette.html" style="color:var(--primary);text-decoration:none">Free Color Palette Generator</a> · <a href="/free-tools/css-gradient-generator.html" style="color:var(--primary);text-decoration:none">Free CSS Gradient Generator</a></p>
</div>
<footer class="footer fade-in">
  <div class="footer-grid">
    <div class="footer-col">
      <h4>Products</h4>
      <a href="/free-tools/">231+ Free Tools</a>
<a href="/pro.html">NexTool Pro</a>
<a href="/workspace.html">Workspace</a>
    </div>
    <div class="footer-col">
      <h4>Explore</h4>
      <a href="/free-tools/">Free Tools</a><a href="/blog/">Blog</a><a href="/pro.html">FAQ</a><a href="/pro.html">Pro — $29</a>
    </div>
    <div class="footer-col">
      <h4>Ecosystem</h4>
      <a href="/">NexTool Home</a><a href="/#contact">Contact</a><a href="https://github.com/christian140903-sudo/nextool" target="_blank">GitHub</a>
    </div>
  </div>
  <div class="footer-bottom">&copy; 2026 NexTool. AI-powered tools for everyone.</div>
</footer>

<div class="toast" id="toast"></div>

<script>
/* ======= STATE ======= */
let sourceImg = null;
const canvas = document.getElementById('previewCanvas');
const ctx = canvas.getContext('2d');
let currentPosition = 'center';

/* ======= DOM REFS ======= */
const dropzone = document.getElementById('dropzone');
const fileInput = document.getElementById('fileInput');
const canvasWrap = document.getElementById('canvasWrap');
const btnChange = document.getElementById('btnChange');
const btnDownload = document.getElementById('btnDownload');
const btnReset = document.getElementById('btnReset');
const imgInfo = document.getElementById('imgInfo');
const qualityGroup = document.getElementById('qualityGroup');

const wmText = document.getElementById('wmText');
const wmFont = document.getElementById('wmFont');
const wmFontSize = document.getElementById('wmFontSize');
const wmColor = document.getElementById('wmColor');
const wmOpacity = document.getElementById('wmOpacity');
const wmRotation = document.getElementById('wmRotation');
const wmTiled = document.getElementById('wmTiled');
const wmTileSpacing = document.getElementById('wmTileSpacing');
const wmStroke = document.getElementById('wmStroke');
const wmStrokeColor = document.getElementById('wmStrokeColor');
const wmStrokeWidth = document.getElementById('wmStrokeWidth');
const dlFormat = document.getElementById('dlFormat');
const dlQuality = document.getElementById('dlQuality');

const fontSizeVal = document.getElementById('fontSizeVal');
const opacityVal = document.getElementById('opacityVal');
const rotationVal = document.getElementById('rotationVal');
const tileSpacingVal = document.getElementById('tileSpacingVal');
const strokeWidthVal = document.getElementById('strokeWidthVal');
const qualityVal = document.getElementById('qualityVal');
const colorHex = document.getElementById('colorHex');
const strokeHex = document.getElementById('strokeHex');

/* ======= FILE UPLOAD ======= */
dropzone.addEventListener('click', () => fileInput.click());
dropzone.addEventListener('dragover', e => { e.preventDefault(); dropzone.classList.add('drag-over'); });
dropzone.addEventListener('dragleave', () => dropzone.classList.remove('drag-over'));
dropzone.addEventListener('drop', e => {
  e.preventDefault();
  dropzone.classList.remove('drag-over');
  const file = e.dataTransfer.files[0];
  if (file && file.type.startsWith('image/')) loadImage(file);
});
fileInput.addEventListener('change', e => {
  if (e.target.files[0]) loadImage(e.target.files[0]);
});
btnChange.addEventListener('click', () => fileInput.click());

function loadImage(file) {
  const reader = new FileReader();
  reader.onload = e => {
    const img = new Image();
    img.onload = () => {
      sourceImg = img;
      dropzone.style.display = 'none';
      canvasWrap.style.display = 'flex';
      btnChange.style.display = 'inline-flex';
      btnDownload.disabled = false;
      imgInfo.textContent = img.naturalWidth + ' x ' + img.naturalHeight + 'px';
      renderPreview();
    };
    img.src = e.target.result;
  };
  reader.readAsDataURL(file);
}

/* ======= POSITION GRID ======= */
document.querySelectorAll('.pos-grid button').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.pos-grid button').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    currentPosition = btn.dataset.pos;
    renderPreview();
  });
});

/* ======= LIVE CONTROLS ======= */
function bindRange(input, display, suffix) {
  input.addEventListener('input', () => { display.textContent = input.value; renderPreview(); });
}
bindRange(wmFontSize, fontSizeVal);
bindRange(wmOpacity, opacityVal);
bindRange(wmRotation, rotationVal);
bindRange(wmTileSpacing, tileSpacingVal);
bindRange(wmStrokeWidth, strokeWidthVal);
bindRange(dlQuality, qualityVal);

wmText.addEventListener('input', renderPreview);
wmFont.addEventListener('change', renderPreview);
wmColor.addEventListener('input', () => { colorHex.textContent = wmColor.value; renderPreview(); });
wmStrokeColor.addEventListener('input', () => { strokeHex.textContent = wmStrokeColor.value; renderPreview(); });
wmTiled.addEventListener('change', renderPreview);
wmStroke.addEventListener('change', renderPreview);
dlFormat.addEventListener('change', () => {
  qualityGroup.style.display = dlFormat.value === 'jpeg' ? '' : 'none';
});
qualityGroup.style.display = 'none';

/* ======= RENDER ======= */
function renderPreview() {
  if (!sourceImg) return;
  const w = sourceImg.naturalWidth;
  const h = sourceImg.naturalHeight;
  canvas.width = w;
  canvas.height = h;

  // Draw source image
  ctx.clearRect(0, 0, w, h);
  ctx.drawImage(sourceImg, 0, 0, w, h);

  // Watermark settings
  const text = wmText.value || 'Watermark';
  const fontSize = parseInt(wmFontSize.value);
  const font = wmFont.value;
  const color = wmColor.value;
  const opacity = parseInt(wmOpacity.value) / 100;
  const rotation = parseInt(wmRotation.value) * Math.PI / 180;
  const tiled = wmTiled.checked;
  const tileSpace = parseInt(wmTileSpacing.value);
  const hasStroke = wmStroke.checked;
  const sColor = wmStrokeColor.value;
  const sWidth = parseInt(wmStrokeWidth.value);

  ctx.globalAlpha = opacity;
  ctx.font = fontSize + 'px "' + font + '"';
  ctx.fillStyle = color;
  ctx.textBaseline = 'middle';
  ctx.textAlign = 'center';

  if (hasStroke) {
    ctx.strokeStyle = sColor;
    ctx.lineWidth = sWidth;
    ctx.lineJoin = 'round';
  }

  if (tiled) {
    // Tiled / diagonal watermark
    const metrics = ctx.measureText(text);
    const tw = metrics.width;
    const th = fontSize * 1.2;
    const spacing = tileSpace + tw;
    const spacingY = tileSpace + th;

    // Calculate how many repetitions we need (generous to cover rotation)
    const diag = Math.sqrt(w * w + h * h);
    const cols = Math.ceil(diag / spacing) + 2;
    const rows = Math.ceil(diag / spacingY) + 2;

    ctx.save();
    ctx.translate(w / 2, h / 2);
    ctx.rotate(rotation);

    for (let r = -rows; r <= rows; r++) {
      for (let c = -cols; c <= cols; c++) {
        const x = c * spacing;
        const y = r * spacingY;
        if (hasStroke) ctx.strokeText(text, x, y);
        ctx.fillText(text, x, y);
      }
    }
    ctx.restore();
  } else {
    // Single watermark at position
    const padding = fontSize * 0.8;
    let x, y;

    switch (currentPosition) {
      case 'top-left':      x = padding; y = padding; break;
      case 'top-center':    x = w / 2; y = padding; break;
      case 'top-right':     x = w - padding; y = padding; break;
      case 'middle-left':   x = padding; y = h / 2; break;
      case 'center':        x = w / 2; y = h / 2; break;
      case 'middle-right':  x = w - padding; y = h / 2; break;
      case 'bottom-left':   x = padding; y = h - padding; break;
      case 'bottom-center': x = w / 2; y = h - padding; break;
      case 'bottom-right':  x = w - padding; y = h - padding; break;
      default:              x = w / 2; y = h / 2;
    }

    // Adjust text alignment based on horizontal position
    if (currentPosition.includes('left')) ctx.textAlign = 'left';
    else if (currentPosition.includes('right')) ctx.textAlign = 'right';
    else ctx.textAlign = 'center';

    ctx.save();
    ctx.translate(x, y);
    ctx.rotate(rotation);
    if (hasStroke) ctx.strokeText(text, 0, 0);
    ctx.fillText(text, 0, 0);
    ctx.restore();
  }

  ctx.globalAlpha = 1;
}

/* ======= DOWNLOAD ======= */
btnDownload.addEventListener('click', () => {
  if (!sourceImg) return;
  renderPreview(); // ensure latest settings
  const format = dlFormat.value;
  const mime = format === 'jpeg' ? 'image/jpeg' : 'image/png';
  const quality = format === 'jpeg' ? parseInt(dlQuality.value) / 100 : undefined;
  const ext = format === 'jpeg' ? 'jpg' : 'png';

  canvas.toBlob(blob => {
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'watermarked-image.' + ext;
    a.click();
    URL.revokeObjectURL(url);
    showToast('Downloaded watermarked-image.' + ext);
  }, mime, quality);
});

/* ======= RESET ======= */
btnReset.addEventListener('click', () => {
  sourceImg = null;
  canvas.width = 0;
  canvas.height = 0;
  dropzone.style.display = '';
  canvasWrap.style.display = 'none';
  btnChange.style.display = 'none';
  btnDownload.disabled = true;
  imgInfo.textContent = '';
  fileInput.value = '';
  wmText.value = 'Sample Watermark';
  wmFont.value = 'Inter';
  wmFontSize.value = 36; fontSizeVal.textContent = '36';
  wmColor.value = '#ffffff'; colorHex.textContent = '#ffffff';
  wmOpacity.value = 50; opacityVal.textContent = '50';
  wmRotation.value = 0; rotationVal.textContent = '0';
  wmTiled.checked = false;
  wmTileSpacing.value = 150; tileSpacingVal.textContent = '150';
  wmStroke.checked = false;
  wmStrokeColor.value = '#000000'; strokeHex.textContent = '#000000';
  wmStrokeWidth.value = 2; strokeWidthVal.textContent = '2';
  dlFormat.value = 'png';
  qualityGroup.style.display = 'none';
  dlQuality.value = 92; qualityVal.textContent = '92';
  currentPosition = 'center';
  document.querySelectorAll('.pos-grid button').forEach(b => {
    b.classList.toggle('active', b.dataset.pos === 'center');
  });
  showToast('Reset to defaults');
});

/* ======= TOAST ======= */
function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2000);
}

/* ======= INTERSECTION OBSERVER ======= */
const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('visible'); observer.unobserve(entry.target); }});
}, { threshold: 0.1 });
document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));
</script>
<script src="/js/analytics-lite.js" defer></script>
<script src="/js/revenue.js" defer></script>
<script src="/js/lead-capture.js" defer></script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "How do I add a watermark to an image online?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Upload your image to NexTool's Image Watermark Tool by dragging and dropping or clicking to browse. Enter your watermark text, adjust the font, size, color, opacity, and position, then click Download to save the watermarked image. Everything runs in your browser — no files are uploaded to any server."
      }
    },
    {
      "@type": "Question",
      "name": "Is this image watermark tool free?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, NexTool's Image Watermark Tool is completely free. No signup, no download, no file size limits. Your images stay private because all processing happens locally in your browser."
      }
    },
    {
      "@type": "Question",
      "name": "Can I tile a watermark across the entire image?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes. Enable the Tiled / Diagonal mode checkbox to repeat the watermark text across the entire image. You can adjust the tile spacing and rotation to create the exact pattern you need for maximum protection."
      }
    },
    {
      "@type": "Question",
      "name": "What image formats are supported for download?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "You can download your watermarked image as PNG (lossless quality) or JPG (smaller file size with adjustable quality slider from 10% to 100%). The tool accepts PNG, JPG, WEBP, BMP, and GIF images as input."
      }
    }
  ]
}
</script>
</body>
</html>