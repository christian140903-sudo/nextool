<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS Filter Effects Generator — Free Tool | ANIMA</title>
    <meta name="description" content="Generate CSS filter effects visually with live preview. Combine blur, brightness, contrast, grayscale, hue-rotate, and more with one-click presets.">
    <meta property="og:title" content="CSS Filter Effects Generator — ANIMA">
    <meta property="og:description" content="Free visual CSS filter generator with live preview, presets, and instant code output.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://nextool.app/free-tools/css-filter-generator.html">
    <meta property="og:image" content="https://nextool.app/img/og-image.png">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="CSS Filter Effects Generator — ANIMA">
    <meta name="twitter:description" content="Free visual CSS filter generator with live preview, presets, and instant code output.">
    <link rel="canonical" href="https://nextool.app/free-tools/css-filter-generator.html">
    <script type="application/ld+json">
    {"@context":"https://schema.org","@type":"SoftwareApplication","name":"CSS Filter Effects Generator","applicationCategory":"DeveloperApplication","operatingSystem":"Web","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"description":"Generate CSS filter effects visually with live preview and presets."}
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
        :root {
            --bg: #050508; --surface: #111118; --surface2: #1a1a24;
            --primary: #00d4ff; --accent: #a855f7; --pink: #ec4899;
            --text: #e2e8f0; --text-dim: #94a3b8;
            --gradient: linear-gradient(135deg, #00d4ff, #a855f7, #ec4899);
            --radius: 12px; --radius-lg: 20px;
        }
        body { font-family: 'Inter', sans-serif; background: var(--bg); color: var(--text); line-height: 1.6; min-height: 100vh; }
        a { color: var(--primary); text-decoration: none; }
        a:hover { color: var(--accent); }
        nav { position: fixed; top: 0; left: 0; right: 0; z-index: 100; background: rgba(5,5,8,0.85); backdrop-filter: blur(20px); border-bottom: 1px solid rgba(0,212,255,0.1); padding: 0 24px; height: 60px; display: flex; align-items: center; justify-content: space-between; }
        .nav-logo { display: flex; align-items: center; gap: 10px; font-weight: 800; font-size: 1.2rem; }
        .nav-logo-icon { width: 32px; height: 32px; background: var(--gradient); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-weight: 800; color: #fff; }
        .nav-links { display: flex; align-items: center; gap: 20px; }
        .nav-links a { color: var(--text-dim); font-size: 0.9rem; font-weight: 500; }
        .nav-links a:hover { color: var(--text); }
        .nav-badge { background: var(--gradient); color: #fff !important; padding: 6px 14px; border-radius: 20px; font-size: 0.8rem; font-weight: 600; }
        main { max-width: 1040px; margin: 0 auto; padding: 100px 20px 40px; }
        h1 { font-size: 2.2rem; font-weight: 800; margin-bottom: 8px; background: var(--gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .subtitle { color: var(--text-dim); font-size: 1.05rem; margin-bottom: 32px; }
        .card { background: var(--surface); border: 1px solid rgba(0,212,255,0.15); border-radius: var(--radius-lg); padding: 24px; margin-bottom: 24px; }
        .card h3 { font-size: 1rem; font-weight: 600; margin-bottom: 16px; }
        .layout { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
        .preview-card { position: sticky; top: 84px; }
        .preview-area { width: 100%; aspect-ratio: 4/3; border-radius: var(--radius); overflow: hidden; background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #4facfe 75%, #00f2fe 100%); background-size: 200% 200%; position: relative; }
        .preview-area::before { content: ''; position: absolute; inset: 0; background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 300'%3E%3Crect x='40' y='30' width='120' height='80' rx='12' fill='%23fff3' /%3E%3Ccircle cx='280' cy='80' r='50' fill='%23fff2' /%3E%3Crect x='180' y='160' width='180' height='60' rx='8' fill='%23fff2' /%3E%3Ccircle cx='80' cy='200' r='35' fill='%23fff1' /%3E%3Ctext x='200' y='260' text-anchor='middle' font-family='Inter' font-size='18' font-weight='700' fill='%23fffc'%3ESample Preview%3C/text%3E%3C/svg%3E") center/contain no-repeat; }
        .preview-label { text-align: center; margin-top: 12px; font-size: 0.85rem; color: var(--text-dim); }
        .preview-toggle { display: flex; gap: 6px; margin-bottom: 12px; }
        .preview-toggle button { background: var(--surface2); border: 1px solid rgba(0,212,255,0.15); border-radius: 8px; padding: 6px 14px; color: var(--text-dim); cursor: pointer; font-size: 0.8rem; }
        .preview-toggle button.active { border-color: var(--primary); background: rgba(0,212,255,0.15); color: var(--text); }
        .slider-group { margin-bottom: 16px; }
        .slider-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; }
        .slider-name { font-size: 0.85rem; font-weight: 500; }
        .slider-value { font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; color: var(--accent); min-width: 60px; text-align: right; }
        .slider-row { display: flex; gap: 8px; align-items: center; }
        input[type="range"] { -webkit-appearance: none; flex: 1; height: 6px; border-radius: 3px; background: var(--surface2); outline: none; }
        input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; width: 18px; height: 18px; border-radius: 50%; background: var(--gradient); cursor: pointer; border: 2px solid var(--bg); }
        .reset-one { background: none; border: 1px solid rgba(0,212,255,0.2); border-radius: 6px; padding: 2px 8px; color: var(--text-dim); cursor: pointer; font-size: 0.7rem; }
        .reset-one:hover { border-color: var(--pink); color: var(--pink); }
        .presets-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; margin-bottom: 16px; }
        .preset-btn { background: var(--surface2); border: 1px solid rgba(0,212,255,0.15); border-radius: 10px; padding: 10px 8px; color: var(--text); cursor: pointer; font-size: 0.85rem; font-weight: 500; text-align: center; transition: all 0.2s; }
        .preset-btn:hover { border-color: var(--primary); background: rgba(0,212,255,0.1); }
        .preset-btn.active { border-color: var(--primary); background: rgba(0,212,255,0.15); }
        .code-output { background: var(--surface2); border-radius: var(--radius); padding: 16px; font-family: 'JetBrains Mono', monospace; font-size: 0.85rem; white-space: pre-wrap; word-break: break-all; position: relative; }
        .copy-btn { position: absolute; top: 8px; right: 8px; background: var(--surface); border: 1px solid rgba(0,212,255,0.2); border-radius: 8px; padding: 6px 12px; color: var(--text-dim); cursor: pointer; font-size: 0.75rem; }
        .copy-btn:hover { background: var(--primary); color: #fff; }
        .actions { display: flex; gap: 12px; margin-top: 16px; flex-wrap: wrap; }
        .btn-reset { background: rgba(239,68,68,0.1); border: 1px solid rgba(239,68,68,0.3); border-radius: 10px; padding: 10px 20px; color: #f87171; cursor: pointer; font-weight: 600; font-size: 0.9rem; }
        .btn-reset:hover { background: rgba(239,68,68,0.2); }
        .btn-save { background: rgba(0,212,255,0.1); border: 1px solid rgba(0,212,255,0.3); border-radius: 10px; padding: 10px 20px; color: #818cf8; cursor: pointer; font-weight: 600; font-size: 0.9rem; }
        .btn-save:hover { background: rgba(0,212,255,0.2); }
        .saved-list { display: grid; gap: 8px; margin-top: 12px; }
        .saved-item { display: flex; align-items: center; gap: 12px; background: var(--surface2); border-radius: 10px; padding: 12px 16px; cursor: pointer; border: 1px solid transparent; transition: border-color 0.2s; }
        .saved-item:hover { border-color: var(--primary); }
        .saved-name { font-weight: 600; font-size: 0.9rem; flex: 1; }
        .saved-preview { width: 48px; height: 36px; border-radius: 6px; background: linear-gradient(135deg, #667eea, #764ba2, #f093fb); flex-shrink: 0; }
        .saved-delete { background: none; border: none; color: var(--text-dim); cursor: pointer; font-size: 0.9rem; padding: 4px 8px; }
        .saved-delete:hover { color: #f87171; }
        .filter-ref { display: grid; gap: 8px; }
        .filter-ref-item { background: var(--surface2); border-radius: var(--radius); padding: 14px 16px; }
        .filter-ref-name { font-family: 'JetBrains Mono', monospace; font-weight: 600; font-size: 0.85rem; color: var(--accent); margin-bottom: 4px; }
        .filter-ref-desc { font-size: 0.8rem; color: var(--text-dim); }
        .backdrop-toggle { display: flex; align-items: center; gap: 8px; margin-top: 12px; font-size: 0.85rem; color: var(--text-dim); }
        .backdrop-toggle input[type="checkbox"] { accent-color: var(--primary); width: 16px; height: 16px; }
        .toast { position: fixed; bottom: 24px; left: 50%; transform: translateX(-50%); background: var(--primary); color: #fff; padding: 10px 24px; border-radius: 10px; font-size: 0.85rem; font-weight: 500; opacity: 0; transition: opacity 0.3s; pointer-events: none; z-index: 200; }
        .toast.show { opacity: 1; }
        .cta-section { background: var(--surface); border: 1px solid rgba(0,212,255,0.15); border-radius: var(--radius-lg); padding: 48px 32px; text-align: center; margin: 48px 0; }
        .cta-section h2 { font-size: 1.8rem; font-weight: 800; margin-bottom: 12px; }
        .cta-section p { color: var(--text-dim); margin-bottom: 24px; max-width: 500px; margin-left: auto; margin-right: auto; }
        .cta-buttons { display: flex; gap: 16px; justify-content: center; flex-wrap: wrap; }
        .btn-primary { background: var(--gradient); color: #fff; padding: 12px 28px; border-radius: 10px; font-weight: 600; font-size: 0.95rem; border: none; cursor: pointer; text-decoration: none; display: inline-block; }
        .btn-secondary { background: var(--surface2); color: var(--text); padding: 12px 28px; border-radius: 10px; font-weight: 600; font-size: 0.95rem; border: 1px solid rgba(0,212,255,0.2); text-decoration: none; display: inline-block; }
        footer { border-top: 1px solid rgba(0,212,255,0.1); padding: 32px 20px; text-align: center; color: var(--text-dim); font-size: 0.85rem; }
        .footer-links { display: flex; gap: 24px; justify-content: center; margin-bottom: 16px; flex-wrap: wrap; }
        .footer-links a { color: var(--text-dim); }
        @media (max-width: 600px) {
            .layout { grid-template-columns: 1fr; }
            .preview-card { position: static; }
            .presets-grid { grid-template-columns: repeat(2, 1fr); }
            h1 { font-size: 1.6rem; }
            .nav-links a:not(.nav-badge) { display: none; }
        }
    </style>
</head>
<body>
    <nav>
        <a href="/" class="nav-logo"><span class="nav-logo-icon">N</span> ANIMA</a>
        <div class="nav-links"><a href="/">Home</a><a href="/free-tools/">Free Tools</a><a href="https://github.com/christian140903-sudo/nextool" class="nav-badge" target="_blank" rel="noopener">GitHub</a></div>
    </nav>
    <main>
        <h1>CSS Filter Effects Generator</h1>
        <p class="subtitle">Visually build CSS filter effects with live preview, presets, and instant code output.</p>

        <div class="layout">
            <div>
                <div class="card">
                    <h3>Presets</h3>
                    <div class="presets-grid" id="presetsGrid"></div>
                </div>
                <div class="card" id="slidersCard">
                    <h3>Filters</h3>
                    <div id="slidersContainer"></div>
                    <div class="actions">
                        <button class="btn-reset" id="resetAll">Reset All</button>
                        <button class="btn-save" id="savePreset">Save Custom Preset</button>
                    </div>
                </div>
                <div class="card">
                    <h3>Generated CSS</h3>
                    <div class="code-output" id="codeOutput"><button class="copy-btn" id="copyCode">Copy</button></div>
                    <div class="backdrop-toggle">
                        <input type="checkbox" id="backdropToggle">
                        <label for="backdropToggle">Also generate backdrop-filter (for glass effects)</label>
                    </div>
                </div>
                <div class="card" id="savedCard" style="display:none;">
                    <h3>Saved Presets</h3>
                    <div class="saved-list" id="savedList"></div>
                </div>
            </div>
            <div class="preview-card">
                <div class="card">
                    <h3>Live Preview</h3>
                    <div class="preview-toggle">
                        <button class="active" id="toggleFiltered">Filtered</button>
                        <button id="toggleOriginal">Original</button>
                        <button id="toggleSplit">Split View</button>
                    </div>
                    <div style="position:relative;overflow:hidden;border-radius:var(--radius);">
                        <div class="preview-area" id="previewArea"></div>
                        <div class="preview-area" id="previewOriginal" style="position:absolute;top:0;left:0;width:50%;height:100%;display:none;border-right:2px solid #fff;"></div>
                    </div>
                    <div class="preview-label" id="previewLabel">Gradient + shapes preview</div>
                </div>
            </div>
        </div>

        <div class="card">
            <h3>Filter Property Reference</h3>
            <div class="filter-ref">
                <div class="filter-ref-item">
                    <div class="filter-ref-name">blur(px)</div>
                    <div class="filter-ref-desc">Applies a Gaussian blur. Value is the radius in pixels. Larger values create more blur. Default: 0.</div>
                </div>
                <div class="filter-ref-item">
                    <div class="filter-ref-name">brightness(%)</div>
                    <div class="filter-ref-desc">Adjusts image brightness. 0% is completely black, 100% is normal, 200%+ makes it brighter. Default: 100%.</div>
                </div>
                <div class="filter-ref-item">
                    <div class="filter-ref-name">contrast(%)</div>
                    <div class="filter-ref-desc">Adjusts contrast. 0% is completely gray, 100% is normal, 200%+ increases contrast. Default: 100%.</div>
                </div>
                <div class="filter-ref-item">
                    <div class="filter-ref-name">grayscale(%)</div>
                    <div class="filter-ref-desc">Converts to grayscale. 0% is unchanged, 100% is fully grayscale. Default: 0%.</div>
                </div>
                <div class="filter-ref-item">
                    <div class="filter-ref-name">hue-rotate(deg)</div>
                    <div class="filter-ref-desc">Rotates hue on the color wheel. 0deg is unchanged, 180deg shifts all colors to their complement. Default: 0deg.</div>
                </div>
                <div class="filter-ref-item">
                    <div class="filter-ref-name">invert(%)</div>
                    <div class="filter-ref-desc">Inverts colors. 0% is unchanged, 100% is fully inverted. 50% produces a mid-gray. Default: 0%.</div>
                </div>
                <div class="filter-ref-item">
                    <div class="filter-ref-name">opacity(%)</div>
                    <div class="filter-ref-desc">Sets transparency. 0% is fully transparent, 100% is fully opaque. Hardware-accelerated unlike the opacity property. Default: 100%.</div>
                </div>
                <div class="filter-ref-item">
                    <div class="filter-ref-name">saturate(%)</div>
                    <div class="filter-ref-desc">Adjusts color saturation. 0% is desaturated, 100% is normal, 200%+ is super-saturated. Default: 100%.</div>
                </div>
                <div class="filter-ref-item">
                    <div class="filter-ref-name">sepia(%)</div>
                    <div class="filter-ref-desc">Applies a sepia tone. 0% is unchanged, 100% is fully sepia-toned (yellowish-brown). Default: 0%.</div>
                </div>
            </div>
            <div style="background:rgba(0,212,255,0.08);border-left:3px solid var(--primary);border-radius:0 var(--radius) var(--radius) 0;padding:16px;margin-top:16px;font-size:0.9rem;color:var(--text-dim);">
                <strong>Pro Tips:</strong> CSS filters can be combined in any order. The order matters: <code>blur(5px) brightness(150%)</code> gives a different result than <code>brightness(150%) blur(5px)</code>. Use <code>backdrop-filter</code> instead of <code>filter</code> to apply effects to the area behind an element (great for frosted glass effects). Filters trigger GPU acceleration for smoother animations.
            </div>
        </div>

        <section class="cta-section">
            <h2>Unlock 100+ Premium Tools</h2>
            <p>Get the About with templates, workflows, and AI prompts completely free.</p>
            <div class="cta-buttons">
                <a href="/about/" class="btn-primary">GitHub</a>
                <a href="/free-tools/" class="btn-secondary">Browse 100+ Free Tools &rarr;</a>
            </div>
        </section>
    </main>
    
<!-- AUTO-LINKED by ANIMA Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/box-shadow-generator.html" style="color:var(--primary);text-decoration:none">CSS Box Shadow Generator</a> · <a href="/free-tools/emoji-picker.html" style="color:var(--primary);text-decoration:none">Emoji Picker & Search</a> · <a href="/free-tools/meta-tag-generator.html" style="color:var(--primary);text-decoration:none">Meta Tag Generator</a> · <a href="/free-tools/color-palette.html" style="color:var(--primary);text-decoration:none">Free Color Palette Generator</a> · <a href="/free-tools/css-animation-generator.html" style="color:var(--primary);text-decoration:none">CSS Animation Generator - Free Tool</a></p>
</div>

<!-- AUTO-LINKED by ANIMA Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/favicon-generator.html" style="color:var(--primary);text-decoration:none">Favicon Generator</a> · <a href="/free-tools/git-diff-viewer.html" style="color:var(--primary);text-decoration:none">Free Git Diff Viewer</a> · <a href="/free-tools/http-status-codes.html" style="color:var(--primary);text-decoration:none">HTTP Status Code Reference</a></p>
</div>

<!-- AUTO-LINKED by ANIMA Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/color-palette-generator.html" style="color:var(--primary);text-decoration:none">Free Color Palette Generator</a> · <a href="/free-tools/icon-generator.html" style="color:var(--primary);text-decoration:none">Free Icon Generator</a> · <a href="/free-tools/css-gradient-generator.html" style="color:var(--primary);text-decoration:none">Free CSS Gradient Generator</a></p>
</div>

<!-- AUTO-LINKED by ANIMA Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/gradient-generator.html" style="color:var(--primary);text-decoration:none">Free CSS Gradient Generator</a> · <a href="/free-tools/color-mixer.html" style="color:var(--primary);text-decoration:none">Free Color Mixer</a> · <a href="/free-tools/json-to-yaml-converter.html" style="color:var(--primary);text-decoration:none">Free JSON to YAML Converter</a></p>
</div>
<footer>
        <div class="footer-links"><a href="/">Home</a><a href="/free-tools/">Tools</a><a href="/blog/">Blog</a><a href="/about/">Pro</a><a href="/#contact">Contact</a></div>
        <p>&copy; 2026 ANIMA. All rights reserved.</p>
    </footer>
    <div class="toast" id="toast">Copied!</div>

    <script>
        const filters = [
            { name: 'blur', unit: 'px', min: 0, max: 20, step: 0.5, def: 0 },
            { name: 'brightness', unit: '%', min: 0, max: 300, step: 1, def: 100 },
            { name: 'contrast', unit: '%', min: 0, max: 300, step: 1, def: 100 },
            { name: 'grayscale', unit: '%', min: 0, max: 100, step: 1, def: 0 },
            { name: 'hue-rotate', unit: 'deg', min: 0, max: 360, step: 1, def: 0 },
            { name: 'invert', unit: '%', min: 0, max: 100, step: 1, def: 0 },
            { name: 'opacity', unit: '%', min: 0, max: 100, step: 1, def: 100 },
            { name: 'saturate', unit: '%', min: 0, max: 300, step: 1, def: 100 },
            { name: 'sepia', unit: '%', min: 0, max: 100, step: 1, def: 0 },
        ];

        const presets = {
            'None': {},
            'Vintage': { brightness: 110, contrast: 85, saturate: 75, sepia: 30, 'hue-rotate': 5 },
            'Noir': { grayscale: 100, contrast: 130, brightness: 90 },
            'Warm': { sepia: 20, saturate: 140, brightness: 105, 'hue-rotate': 350 },
            'Cool': { saturate: 80, brightness: 105, 'hue-rotate': 190, contrast: 110 },
            'Dramatic': { contrast: 160, brightness: 80, saturate: 140 },
            'Pastel': { brightness: 120, contrast: 80, saturate: 60, sepia: 10 },
            'High Contrast': { contrast: 200, brightness: 95 },
            'Dreamy': { blur: 2, brightness: 115, saturate: 130, contrast: 90 },
            'Sunset': { sepia: 40, brightness: 110, saturate: 160, 'hue-rotate': 340 },
            'Midnight': { brightness: 60, contrast: 150, saturate: 70, 'hue-rotate': 220 },
            'Frosted': { blur: 4, brightness: 105, saturate: 90 },
        };

        const state = {};
        filters.forEach(f => state[f.name] = f.def);

        let savedPresets = JSON.parse(localStorage.getItem('ntool-filter-presets') || '[]');
        let viewMode = 'filtered';

        const container = document.getElementById('slidersContainer');
        const preview = document.getElementById('previewArea');
        const previewOrig = document.getElementById('previewOriginal');
        const codeOut = document.getElementById('codeOutput');
        const presetsGrid = document.getElementById('presetsGrid');

        function showToast(msg) {
            const t = document.getElementById('toast');
            t.textContent = msg || 'Copied!';
            t.classList.add('show');
            setTimeout(() => t.classList.remove('show'), 1500);
        }

        // Build sliders
        filters.forEach(f => {
            const div = document.createElement('div');
            div.className = 'slider-group';
            div.innerHTML =
                '<div class="slider-header">' +
                    '<span class="slider-name">' + f.name + '</span>' +
                    '<span class="slider-value" id="val-' + f.name + '">' + f.def + f.unit + '</span>' +
                '</div>' +
                '<div class="slider-row">' +
                    '<input type="range" id="slider-' + f.name + '" min="' + f.min + '" max="' + f.max + '" step="' + f.step + '" value="' + f.def + '">' +
                    '<button class="reset-one" data-filter="' + f.name + '">Reset</button>' +
                '</div>';
            container.appendChild(div);
            const slider = div.querySelector('input[type="range"]');
            slider.addEventListener('input', () => {
                state[f.name] = parseFloat(slider.value);
                update();
            });
            div.querySelector('.reset-one').addEventListener('click', () => {
                state[f.name] = f.def;
                slider.value = f.def;
                update();
            });
        });

        // Build presets
        Object.keys(presets).forEach(name => {
            const btn = document.createElement('button');
            btn.className = 'preset-btn';
            btn.textContent = name;
            btn.addEventListener('click', () => {
                filters.forEach(f => { state[f.name] = f.def; });
                const p = presets[name];
                Object.keys(p).forEach(k => { state[k] = p[k]; });
                filters.forEach(f => {
                    document.getElementById('slider-' + f.name).value = state[f.name];
                });
                document.querySelectorAll('.preset-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                update();
            });
            presetsGrid.appendChild(btn);
        });

        function buildFilterString() {
            const parts = [];
            filters.forEach(f => {
                if (state[f.name] !== f.def) {
                    parts.push(f.name + '(' + state[f.name] + f.unit + ')');
                }
            });
            return parts.length ? parts.join(' ') : 'none';
        }

        function update() {
            const filterStr = buildFilterString();
            if (viewMode === 'filtered' || viewMode === 'split') {
                preview.style.filter = filterStr === 'none' ? '' : filterStr;
            }
            filters.forEach(f => {
                document.getElementById('val-' + f.name).textContent = state[f.name] + f.unit;
            });
            const includeBackdrop = document.getElementById('backdropToggle').checked;
            let code;
            if (filterStr === 'none') {
                code = 'filter: none;';
            } else {
                code = 'filter: ' + filterStr + ';\n-webkit-filter: ' + filterStr + ';';
                if (includeBackdrop) {
                    code += '\nbackdrop-filter: ' + filterStr + ';\n-webkit-backdrop-filter: ' + filterStr + ';';
                }
            }
            const copyBtn = document.getElementById('copyCode');
            codeOut.textContent = code;
            codeOut.appendChild(copyBtn);
            document.getElementById('previewLabel').textContent = filterStr === 'none' ? 'No filters applied' : filterStr;
        }

        // Preview toggle buttons
        document.getElementById('toggleFiltered').addEventListener('click', () => {
            viewMode = 'filtered';
            preview.style.display = '';
            previewOrig.style.display = 'none';
            document.querySelectorAll('.preview-toggle button').forEach(b => b.classList.remove('active'));
            document.getElementById('toggleFiltered').classList.add('active');
            update();
        });
        document.getElementById('toggleOriginal').addEventListener('click', () => {
            viewMode = 'original';
            preview.style.filter = '';
            previewOrig.style.display = 'none';
            document.querySelectorAll('.preview-toggle button').forEach(b => b.classList.remove('active'));
            document.getElementById('toggleOriginal').classList.add('active');
        });
        document.getElementById('toggleSplit').addEventListener('click', () => {
            viewMode = 'split';
            previewOrig.style.display = '';
            document.querySelectorAll('.preview-toggle button').forEach(b => b.classList.remove('active'));
            document.getElementById('toggleSplit').classList.add('active');
            update();
        });

        // Backdrop-filter toggle
        document.getElementById('backdropToggle').addEventListener('change', update);

        // Reset all filters
        document.getElementById('resetAll').addEventListener('click', () => {
            filters.forEach(f => {
                state[f.name] = f.def;
                document.getElementById('slider-' + f.name).value = f.def;
            });
            document.querySelectorAll('.preset-btn').forEach(b => b.classList.remove('active'));
            update();
        });

        // Copy generated code
        document.getElementById('copyCode').addEventListener('click', () => {
            const text = codeOut.textContent.replace('Copy', '').trim();
            navigator.clipboard.writeText(text);
            const btn = document.getElementById('copyCode');
            btn.textContent = 'Copied!';
            setTimeout(() => btn.textContent = 'Copy', 1500);
        });

        // Save custom preset to localStorage
        document.getElementById('savePreset').addEventListener('click', () => {
            const name = prompt('Name for this preset:');
            if (!name) return;
            const snapshot = {};
            filters.forEach(f => { snapshot[f.name] = state[f.name]; });
            savedPresets.push({ name: name, state: snapshot });
            localStorage.setItem('ntool-filter-presets', JSON.stringify(savedPresets));
            renderSaved();
            showToast('Preset "' + name + '" saved!');
        });

        function renderSaved() {
            const card = document.getElementById('savedCard');
            const list = document.getElementById('savedList');
            if (savedPresets.length === 0) {
                card.style.display = 'none';
                return;
            }
            card.style.display = '';
            list.innerHTML = savedPresets.map((p, i) =>
                '<div class="saved-item" data-idx="' + i + '">' +
                    '<div class="saved-preview" id="saved-preview-' + i + '"></div>' +
                    '<div class="saved-name">' + p.name + '</div>' +
                    '<button class="saved-delete" data-idx="' + i + '">&times;</button>' +
                '</div>'
            ).join('');
            // Apply filter previews to saved preset thumbnails
            savedPresets.forEach((p, i) => {
                const el = document.getElementById('saved-preview-' + i);
                if (el) {
                    const parts = [];
                    filters.forEach(f => {
                        const val = p.state[f.name];
                        if (val !== undefined && val !== f.def) {
                            parts.push(f.name + '(' + val + f.unit + ')');
                        }
                    });
                    el.style.filter = parts.length ? parts.join(' ') : '';
                }
            });
            // Click to load saved preset
            list.querySelectorAll('.saved-item').forEach(item => {
                item.addEventListener('click', (e) => {
                    if (e.target.classList.contains('saved-delete')) return;
                    const idx = parseInt(item.dataset.idx);
                    const p = savedPresets[idx];
                    filters.forEach(f => {
                        state[f.name] = p.state[f.name] !== undefined ? p.state[f.name] : f.def;
                        document.getElementById('slider-' + f.name).value = state[f.name];
                    });
                    update();
                    showToast('Loaded "' + p.name + '"');
                });
            });
            // Delete saved preset
            list.querySelectorAll('.saved-delete').forEach(btn => {
                btn.addEventListener('click', () => {
                    const idx = parseInt(btn.dataset.idx);
                    savedPresets.splice(idx, 1);
                    localStorage.setItem('ntool-filter-presets', JSON.stringify(savedPresets));
                    renderSaved();
                    showToast('Preset deleted');
                });
            });
        }

        renderSaved();
        update();
    </script>
    <script src="/js/revenue.js" defer></script>
    <script src="/js/lead-capture.js" defer></script>
    <script src="/js/analytics-lite.js" defer></script>
</body>
</html>
