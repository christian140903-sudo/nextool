<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Free Image Compressor — Reduce Image Size Online | ANIMA</title>
<meta name="description" content="Compress JPEG, PNG, and WebP images in your browser. Adjust quality, compare before/after, download instantly. Free, private, no upload needed.">
<meta name="keywords" content="image compressor, compress image, reduce image size, JPEG compressor, PNG compressor, WebP, free image tool, ANIMA">
<meta property="og:title" content="Free Image Compressor | ANIMA">
<meta property="og:description" content="Compress images client-side. Adjust quality, compare sizes, download instantly. No upload required.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://nextool.app/free-tools/image-compressor.html">
<meta property="og:image" content="https://nextool.app/img/og-image.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<link rel="canonical" href="https://nextool.app/free-tools/image-compressor.html">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Free Image Compressor | ANIMA">
<meta name="twitter:description" content="Client-side image compression. Free online tool by ANIMA.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"SoftwareApplication","name":"Image Compressor","applicationCategory":"UtilityApplication","operatingSystem":"Web","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"description":"Compress JPEG, PNG, and WebP images in your browser with adjustable quality."}
</script>
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#050508;--surface:#111118;--surface2:#1a1a24;--border:#252533;--primary:#00d4ff;--accent:#a855f7;--pink:#ec4899;--text:#e2e8f0;--text2:#94a3b8;--radius:12px;--glass:rgba(17,17,24,.7)}
html{scroll-behavior:smooth}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;overflow-x:hidden}
a{color:var(--primary);text-decoration:none}
.nav{position:sticky;top:0;z-index:100;backdrop-filter:blur(20px);background:rgba(5,5,8,.85);border-bottom:1px solid var(--border);padding:0 24px}
.nav-inner{max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;height:64px}
.logo{font-weight:800;font-size:1.35rem;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.nav-links{display:flex;gap:28px;align-items:center}
.nav-links a{color:var(--text2);font-size:.9rem;font-weight:500;transition:color .2s}
.nav-links a:hover,.nav-links a.active{color:var(--text)}
.btn-cta{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;padding:9px 22px;border-radius:8px;font-weight:600;font-size:.85rem;border:none;cursor:pointer;transition:transform .2s,box-shadow .2s}
.btn-cta:hover{transform:translateY(-1px);box-shadow:0 4px 20px rgba(0,212,255,.4)}
.mobile-toggle{display:none;background:none;border:none;color:var(--text);font-size:1.5rem;cursor:pointer}
.hero{text-align:center;padding:80px 24px 40px;max-width:800px;margin:0 auto}
.hero .badge{display:inline-block;padding:6px 16px;border-radius:20px;background:var(--surface);border:1px solid var(--border);font-size:.8rem;color:var(--accent);font-weight:600;margin-bottom:20px}
.hero h1{font-size:clamp(2rem,5vw,3rem);font-weight:800;line-height:1.15;margin-bottom:16px}
.hero h1 .grad{background:linear-gradient(135deg,var(--primary),var(--accent),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{color:var(--text2);font-size:1.05rem;max-width:560px;margin:0 auto}
.tool-section{max-width:900px;margin:0 auto;padding:0 24px 60px}
.glass-card{background:var(--glass);backdrop-filter:blur(16px);border:1px solid var(--border);border-radius:var(--radius);padding:32px;transition:transform .3s,box-shadow .3s}
.glass-card:hover{box-shadow:0 8px 40px rgba(0,212,255,.1)}
/* Drop Zone */
.drop-zone{border:2px dashed var(--border);border-radius:var(--radius);padding:60px 24px;text-align:center;cursor:pointer;transition:all .3s;position:relative}
.drop-zone:hover,.drop-zone.dragover{border-color:var(--primary);background:rgba(0,212,255,.05)}
.drop-zone .icon{font-size:3rem;margin-bottom:16px;display:block}
.drop-zone h3{font-size:1.1rem;font-weight:700;margin-bottom:8px}
.drop-zone p{color:var(--text2);font-size:.85rem}
.drop-zone input[type="file"]{position:absolute;inset:0;opacity:0;cursor:pointer}
/* Controls */
.controls{margin-top:28px;display:none}
.controls.active{display:block}
.control-row{display:flex;align-items:center;gap:16px;margin-bottom:20px;flex-wrap:wrap}
.control-row label{font-weight:600;font-size:.85rem;color:var(--text2);min-width:90px}
.slider-wrap{flex:1;display:flex;align-items:center;gap:12px}
.slider-wrap input[type="range"]{flex:1;-webkit-appearance:none;height:6px;border-radius:3px;background:var(--surface2);outline:none}
.slider-wrap input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none;width:20px;height:20px;border-radius:50%;background:linear-gradient(135deg,var(--primary),var(--accent));cursor:pointer}
.slider-val{min-width:48px;text-align:center;font-weight:700;font-size:.9rem;color:var(--primary)}
.format-btns{display:flex;gap:8px}
.format-btn{padding:8px 16px;border-radius:8px;background:var(--surface2);border:1px solid transparent;color:var(--text2);font-size:.82rem;font-weight:600;cursor:pointer;transition:all .2s;font-family:inherit}
.format-btn.active{background:var(--primary);color:#fff;border-color:var(--primary)}
.format-btn:hover:not(.active){border-color:var(--border)}
/* Comparison */
.comparison{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-top:28px;display:none}
.comparison.active{display:grid}
.compare-panel{text-align:center}
.compare-panel h4{font-size:.82rem;font-weight:700;color:var(--text2);text-transform:uppercase;letter-spacing:.05em;margin-bottom:12px}
.compare-img-wrap{background:var(--surface2);border:1px solid var(--border);border-radius:8px;padding:12px;margin-bottom:12px;aspect-ratio:1;display:flex;align-items:center;justify-content:center;overflow:hidden}
.compare-img-wrap img{max-width:100%;max-height:100%;object-fit:contain;border-radius:4px}
.stat{display:flex;justify-content:center;gap:20px}
.stat-item{text-align:center}
.stat-item .val{font-size:1.1rem;font-weight:800;color:var(--text)}
.stat-item .label{font-size:.75rem;color:var(--text2);margin-top:2px}
.saved-badge{display:inline-block;padding:6px 16px;border-radius:20px;font-size:.85rem;font-weight:700;margin-top:16px}
.saved-badge.good{background:rgba(34,197,94,.15);color:#22c55e}
.saved-badge.warn{background:rgba(234,179,8,.15);color:#eab308}
/* Buttons */
.action-btns{display:flex;gap:10px;justify-content:center;margin-top:24px;flex-wrap:wrap}
.action-btn{padding:10px 24px;border-radius:8px;font-weight:600;font-size:.85rem;cursor:pointer;border:1px solid var(--border);background:var(--surface2);color:var(--text);transition:all .2s;font-family:inherit}
.action-btn:hover{border-color:var(--primary);color:var(--primary)}
.action-btn.primary{background:linear-gradient(135deg,var(--primary),var(--accent));border:none;color:#fff}
.action-btn.primary:hover{transform:translateY(-1px);box-shadow:0 4px 16px rgba(0,212,255,.35)}
.action-btn:disabled{opacity:.4;cursor:not-allowed;transform:none!important;box-shadow:none!important}
.toast{position:fixed;bottom:24px;right:24px;background:var(--primary);color:#fff;padding:12px 24px;border-radius:8px;font-weight:600;font-size:.85rem;transform:translateY(100px);opacity:0;transition:all .3s;z-index:200}
.toast.show{transform:translateY(0);opacity:1}
/* CTA */
.cta-bottom{text-align:center;padding:80px 24px;max-width:700px;margin:0 auto}
.cta-bottom h2{font-size:clamp(1.5rem,3.5vw,2.2rem);font-weight:800;margin-bottom:14px}
.cta-bottom h2 .grad{background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.cta-bottom p{color:var(--text2);margin-bottom:28px;font-size:1rem}
/* FOOTER */
footer{border-top:1px solid var(--border);padding:60px 24px 32px;max-width:1200px;margin:0 auto}
.footer-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:40px;margin-bottom:40px}
.footer-col h4{font-size:.85rem;font-weight:700;margin-bottom:16px;color:var(--text)}
.footer-col a{display:block;color:var(--text2);font-size:.85rem;margin-bottom:10px;transition:color .2s}
.footer-col a:hover{color:var(--primary)}
.footer-bottom{text-align:center;color:var(--text2);font-size:.8rem;padding-top:24px;border-top:1px solid var(--border)}
@keyframes fadeUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
.fade-in{opacity:0;transform:translateY(24px);transition:opacity .6s,transform .6s}.fade-in.visible{opacity:1;transform:translateY(0)}
@media(max-width:768px){
  .nav-links{display:none;position:absolute;top:64px;left:0;right:0;background:var(--surface);flex-direction:column;padding:20px;gap:16px;border-bottom:1px solid var(--border)}
  .nav-links.open{display:flex}
  .mobile-toggle{display:block}
  .comparison{grid-template-columns:1fr}
  .footer-grid{grid-template-columns:1fr 1fr}
  .glass-card{padding:24px 18px}
  .control-row{flex-direction:column;align-items:flex-start}
}
@media(max-width:480px){
  .footer-grid{grid-template-columns:1fr}
}
</style>
</head>
<body>
<nav class="nav"><div class="nav-inner">
  <a href="/" class="logo">ANIMA</a>
  <button class="mobile-toggle" onclick="document.querySelector('.nav-links').classList.toggle('open')" aria-label="Menu">&#9776;</button>
  <div class="nav-links">
    <a href="/">Home</a><a href="/free-tools/">Tools</a><a href="/free-tools/" class="active">Free Tools</a><a href="/blog/">Blog</a>
    <a href="#contact" class="btn-cta">GitHub</a>
  </div>
</div></nav>

<section class="hero fade-in">
  <div class="badge">Free Tool</div>
  <h1>Image <span class="grad">Compressor</span></h1>
  <p class="tool-summary" style="color:#94a3b8;font-size:15px;line-height:1.6;margin-bottom:24px;max-width:700px;margin-left:auto;margin-right:auto;">ANIMA's Image Compressor reduces JPEG, PNG, and WebP file sizes directly in your browser. Adjust quality, resize dimensions, convert between formats, and compare before/after results with exact size savings. 100% private — no files are uploaded to any server. Free, no signup required.</p>
</section>

<section class="tool-section">
  <div class="glass-card fade-in">
    <div class="drop-zone" id="drop-zone">
      <input type="file" id="file-input" accept="image/jpeg,image/png,image/webp">
      <span class="icon">&#128247;</span>
      <h3>Drop an image here or click to browse</h3>
      <p>Supports JPEG, PNG, WebP &mdash; up to 50 MB</p>
    </div>

    <div class="controls" id="controls">
      <div class="control-row">
        <label>Quality</label>
        <div class="slider-wrap">
          <input type="range" id="quality-slider" min="1" max="100" value="75">
          <span class="slider-val" id="quality-val">75%</span>
        </div>
      </div>
      <div class="control-row">
        <label>Format</label>
        <div class="format-btns" id="format-btns">
          <button class="format-btn active" data-fmt="jpeg">JPEG</button>
          <button class="format-btn" data-fmt="png">PNG</button>
          <button class="format-btn" data-fmt="webp">WebP</button>
        </div>
      </div>
      <div class="control-row">
        <label>Max Width</label>
        <div class="slider-wrap">
          <input type="range" id="width-slider" min="100" max="4000" value="4000" step="100">
          <span class="slider-val" id="width-val">Original</span>
        </div>
      </div>
    </div>

    <div class="comparison" id="comparison">
      <div class="compare-panel">
        <h4>Original</h4>
        <div class="compare-img-wrap"><img id="img-original" alt="Original"></div>
        <div class="stat">
          <div class="stat-item"><div class="val" id="orig-size">-</div><div class="label">Size</div></div>
          <div class="stat-item"><div class="val" id="orig-dims">-</div><div class="label">Dimensions</div></div>
        </div>
      </div>
      <div class="compare-panel">
        <h4>Compressed</h4>
        <div class="compare-img-wrap"><img id="img-compressed" alt="Compressed"></div>
        <div class="stat">
          <div class="stat-item"><div class="val" id="comp-size">-</div><div class="label">Size</div></div>
          <div class="stat-item"><div class="val" id="comp-dims">-</div><div class="label">Dimensions</div></div>
        </div>
      </div>
    </div>

    <div id="saved-wrap" style="text-align:center;display:none">
      <span class="saved-badge good" id="saved-badge">-</span>
    </div>

    <div class="action-btns" id="action-btns" style="display:none">
      <button class="action-btn primary" id="btn-download" disabled>Download Compressed</button>
      <button class="action-btn" id="btn-reset">Upload New Image</button>
    </div>
  </div>
</section>

<div class="toast" id="toast"></div>

<section class="cta-bottom fade-in">
  <h2>Need something <span class="grad">more powerful</span>?</h2>
  <p>Let us build custom automation, bots, websites, and AI tools tailored to your business.</p>
  <a href="#contact" class="btn-cta" style="display:inline-block;padding:14px 36px;font-size:1rem">GitHub</a>
</section>

<!-- Cross Promo -->n<section style="max-width:900px;margin:40px auto;padding:0 24px;">n<div style="background:linear-gradient(135deg,rgba(0,212,255,0.1),rgba(168,85,247,0.08));border:1px solid rgba(0,212,255,0.15);border-radius:20px;padding:32px 28px;text-align:center;">n<div style="font-size:13px;color:#818cf8;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Founding Member</div>n<h3 style="font-size:22px;font-weight:800;color:#fff;margin:0 0 8px;">ANIMA on GitHub</h3>n<p style="color:#94a3b8;font-size:14px;margin:0 auto 20px;max-width:500px;">248+ free tools. No signup. Open source. Built by Christian Bucher.</p>n<div style="display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap;">n<a href="/about/" style="display:inline-block;padding:12px 28px;background:linear-gradient(135deg,#00d4ff,#a855f7,#ec4899);color:#fff;border-radius:10px;font-weight:700;font-size:15px;text-decoration:none;transition:transform 0.2s;" onmouseenter="this.style.transform='translateY(-2px)'" onmouseleave="this.style.transform='translateY(0)'">GitHub</a>n<a href="/free-tools/" style="color:#94a3b8;font-size:14px;text-decoration:none;transition:color 0.2s;" onmouseenter="this.style.color='#e2e8f0'" onmouseleave="this.style.color='#94a3b8'">Browse 250+ Free Tools →</a>n</div>n</div>n</section>

<!-- AUTO-LINKED by ANIMA Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/box-shadow-generator.html" style="color:var(--primary);text-decoration:none">CSS Box Shadow Generator</a> · <a href="/free-tools/emoji-picker.html" style="color:var(--primary);text-decoration:none">Emoji Picker & Search</a> · <a href="/free-tools/meta-tag-generator.html" style="color:var(--primary);text-decoration:none">Meta Tag Generator</a> · <a href="/free-tools/css-animation-generator.html" style="color:var(--primary);text-decoration:none">CSS Animation Generator - Free Tool</a> · <a href="/free-tools/favicon-generator.html" style="color:var(--primary);text-decoration:none">Favicon Generator</a></p>
</div>

<!-- AUTO-LINKED by ANIMA Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/icon-generator.html" style="color:var(--primary);text-decoration:none">Free Icon Generator</a> · <a href="/free-tools/markdown-to-pdf.html" style="color:var(--primary);text-decoration:none">Free Markdown to PDF Converter</a> · <a href="/free-tools/accessibility-checker.html" style="color:var(--primary);text-decoration:none">Free Accessibility Checker</a></p>
</div>

<!-- AUTO-LINKED by ANIMA Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/json-to-yaml-converter.html" style="color:var(--primary);text-decoration:none">Free JSON to YAML Converter</a> · <a href="/free-tools/markdown-editor.html" style="color:var(--primary);text-decoration:none">Free Markdown Editor</a> · <a href="/free-tools/api-request-builder.html" style="color:var(--primary);text-decoration:none">Free API Request Builder</a></p>
</div>

<!-- AUTO-LINKED by ANIMA Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/json-to-yaml.html" style="color:var(--primary);text-decoration:none">Free JSON to YAML Converter</a> · <a href="/free-tools/yaml-to-json.html" style="color:var(--primary);text-decoration:none">YAML to JSON Converter</a> · <a href="/free-tools/ascii-art-generator.html" style="color:var(--primary);text-decoration:none">Free ASCII Art Generator</a></p>
</div>
<footer>
  <div class="footer-grid">
    <div class="footer-col"><h4>Products</h4>
      <a href="/free-tools/">250+ Free Tools</a><a href="/about/">About — free</a><a href="/docs/">Documentation</a><a href="/free-tools/">Video</a><a href="/free-tools/">Data</a>
    </div>
    <div class="footer-col"><h4>Free Tools</h4>
      <a href="/free-tools/qr-generator.html">QR Generator</a><a href="/free-tools/markdown-preview.html">Markdown Preview</a><a href="/free-tools/image-compressor.html">Image Compressor</a><a href="/free-tools/unit-converter.html">Unit Converter</a><a href="/free-tools/lorem-generator.html">Lorem Generator</a>
    </div>
    <div class="footer-col"><h4>Explore</h4>
      <a href="/free-tools/">All Free Tools</a><a href="/blog/">Blog</a><a href="#contact">Contact</a>
    </div>
    <div class="footer-col"><h4>Legal</h4>
      <a href="/terms.html">Privacy Policy</a><a href="/terms.html">Terms of Service</a><a href="/imprint.html">Imprint</a>
    </div>
  </div>
  <div class="footer-bottom">&copy; 2026 ANIMA. All rights reserved.</div>
</footer>

<script>
// ====== STATE ======
let originalFile = null;
let originalImg = null;
let compressedBlob = null;
let currentFormat = 'jpeg';

const dropZone = document.getElementById('drop-zone');
const fileInput = document.getElementById('file-input');
const controls = document.getElementById('controls');
const comparison = document.getElementById('comparison');
const actionBtns = document.getElementById('action-btns');
const savedWrap = document.getElementById('saved-wrap');
const qualitySlider = document.getElementById('quality-slider');
const qualityVal = document.getElementById('quality-val');
const widthSlider = document.getElementById('width-slider');
const widthVal = document.getElementById('width-val');

// ====== UTILITY ======
function formatBytes(bytes) {
  if (bytes < 1024) return bytes + ' B';
  if (bytes < 1048576) return (bytes / 1024).toFixed(1) + ' KB';
  return (bytes / 1048576).toFixed(2) + ' MB';
}

function showToast(msg) {
  const toast = document.getElementById('toast');
  toast.textContent = msg;
  toast.classList.add('show');
  setTimeout(() => toast.classList.remove('show'), 2000);
}

// ====== DRAG & DROP ======
dropZone.addEventListener('dragover', (e) => {
  e.preventDefault();
  dropZone.classList.add('dragover');
});
dropZone.addEventListener('dragleave', () => dropZone.classList.remove('dragover'));
dropZone.addEventListener('drop', (e) => {
  e.preventDefault();
  dropZone.classList.remove('dragover');
  const files = e.dataTransfer.files;
  if (files.length > 0) handleFile(files[0]);
});
fileInput.addEventListener('change', () => {
  if (fileInput.files.length > 0) handleFile(fileInput.files[0]);
});

// ====== FILE HANDLING ======
function handleFile(file) {
  if (!file.type.match(/^image\/(jpeg|png|webp)$/)) {
    showToast('Please select a JPEG, PNG, or WebP image.');
    return;
  }
  if (file.size > 50 * 1024 * 1024) {
    showToast('File is too large. Maximum 50 MB.');
    return;
  }
  originalFile = file;

  // Auto-select format based on input
  if (file.type === 'image/png') setFormat('png');
  else if (file.type === 'image/webp') setFormat('webp');
  else setFormat('jpeg');

  const reader = new FileReader();
  reader.onload = (e) => {
    const img = new Image();
    img.onload = () => {
      originalImg = img;
      document.getElementById('img-original').src = e.target.result;
      document.getElementById('orig-size').textContent = formatBytes(file.size);
      document.getElementById('orig-dims').textContent = img.naturalWidth + ' x ' + img.naturalHeight;

      // Set max width slider to original width
      widthSlider.max = img.naturalWidth;
      widthSlider.value = img.naturalWidth;
      widthVal.textContent = 'Original';

      // Show UI
      controls.classList.add('active');
      comparison.classList.add('active');
      actionBtns.style.display = 'flex';
      savedWrap.style.display = 'block';
      dropZone.style.display = 'none';

      compress();
    };
    img.src = e.target.result;
  };
  reader.readAsDataURL(file);
}

// ====== FORMAT BUTTONS ======
function setFormat(fmt) {
  currentFormat = fmt;
  document.querySelectorAll('.format-btn').forEach(b => b.classList.toggle('active', b.dataset.fmt === fmt));
}

document.getElementById('format-btns').addEventListener('click', (e) => {
  if (!e.target.classList.contains('format-btn')) return;
  setFormat(e.target.dataset.fmt);
  compress();
});

// ====== SLIDERS ======
qualitySlider.addEventListener('input', () => {
  qualityVal.textContent = qualitySlider.value + '%';
  debounceCompress();
});

widthSlider.addEventListener('input', () => {
  const v = parseInt(widthSlider.value);
  if (originalImg && v >= originalImg.naturalWidth) {
    widthVal.textContent = 'Original';
  } else {
    widthVal.textContent = v + 'px';
  }
  debounceCompress();
});

let compressTimer;
function debounceCompress() {
  clearTimeout(compressTimer);
  compressTimer = setTimeout(compress, 150);
}

// ====== COMPRESSION ======
function compress() {
  if (!originalImg) return;

  const quality = parseInt(qualitySlider.value) / 100;
  const maxW = parseInt(widthSlider.value);
  let w = originalImg.naturalWidth;
  let h = originalImg.naturalHeight;

  if (maxW < w) {
    const ratio = maxW / w;
    w = maxW;
    h = Math.round(h * ratio);
  }

  const canvas = document.createElement('canvas');
  canvas.width = w;
  canvas.height = h;
  const ctx = canvas.getContext('2d');

  // White background for JPEG (no alpha)
  if (currentFormat === 'jpeg') {
    ctx.fillStyle = '#ffffff';
    ctx.fillRect(0, 0, w, h);
  }

  ctx.drawImage(originalImg, 0, 0, w, h);

  const mimeType = 'image/' + (currentFormat === 'jpg' ? 'jpeg' : currentFormat);
  canvas.toBlob((blob) => {
    if (!blob) return;
    compressedBlob = blob;

    const url = URL.createObjectURL(blob);
    document.getElementById('img-compressed').src = url;
    document.getElementById('comp-size').textContent = formatBytes(blob.size);
    document.getElementById('comp-dims').textContent = w + ' x ' + h;

    // Savings
    const saved = originalFile.size - blob.size;
    const pct = ((saved / originalFile.size) * 100).toFixed(1);
    const badge = document.getElementById('saved-badge');

    if (saved > 0) {
      badge.textContent = 'Saved ' + formatBytes(saved) + ' (' + pct + '% smaller)';
      badge.className = 'saved-badge good';
    } else {
      badge.textContent = 'Output is ' + formatBytes(Math.abs(saved)) + ' larger';
      badge.className = 'saved-badge warn';
    }

    document.getElementById('btn-download').disabled = false;
  }, mimeType, quality);
}

// ====== DOWNLOAD ======
document.getElementById('btn-download').addEventListener('click', () => {
  if (!compressedBlob) return;
  const ext = currentFormat === 'jpeg' ? 'jpg' : currentFormat;
  const name = (originalFile ? originalFile.name.replace(/\.[^.]+$/, '') : 'image') + '-compressed.' + ext;
  const url = URL.createObjectURL(compressedBlob);
  const a = document.createElement('a');
  a.href = url;
  a.download = name;
  a.click();
  URL.revokeObjectURL(url);
  showToast('Image downloaded!');
});

// ====== RESET ======
document.getElementById('btn-reset').addEventListener('click', () => {
  originalFile = null;
  originalImg = null;
  compressedBlob = null;
  fileInput.value = '';
  controls.classList.remove('active');
  comparison.classList.remove('active');
  actionBtns.style.display = 'none';
  savedWrap.style.display = 'none';
  dropZone.style.display = 'block';
  document.getElementById('btn-download').disabled = true;
  qualitySlider.value = 75;
  qualityVal.textContent = '75%';
});

// ====== OBSERVERS ======
const obs = new IntersectionObserver(entries => { entries.forEach(e => { if (e.isIntersecting) { e.target.classList.add('visible'); obs.unobserve(e.target) } }) }, { threshold: .15 });
document.querySelectorAll('.fade-in').forEach(el => obs.observe(el));
</script>
<script src="/js/analytics-lite.js" defer></script>
<script src="/js/revenue.js" defer></script>
<script src="/js/lead-capture.js" defer></script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "How does browser-based image compression work?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "ANIMA's Image Compressor uses your browser's built-in Canvas API to re-encode images at a lower quality setting. Your images are processed entirely on your device — nothing is uploaded to any server, ensuring complete privacy."
      }
    },
    {
      "@type": "Question",
      "name": "What image formats are supported?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "ANIMA supports JPEG, PNG, and WebP formats. You can also convert between these formats during compression. For example, you can upload a PNG and download it as a compressed JPEG or WebP for smaller file sizes."
      }
    },
    {
      "@type": "Question",
      "name": "Is there a file size limit?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "ANIMA supports images up to 50 MB. Since all processing happens in your browser, very large images may take a moment to process depending on your device's capabilities."
      }
    },
    {
      "@type": "Question",
      "name": "Will compression reduce image quality?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "You have full control over the quality slider (1-100%). At 75-80% quality, most JPEG images look nearly identical to the original while being significantly smaller. ANIMA shows a side-by-side comparison so you can verify the result before downloading."
      }
    }
  ]
}
</script>
</body>
</html>