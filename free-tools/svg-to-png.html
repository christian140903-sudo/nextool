<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Free SVG to PNG Converter — Convert SVG to PNG Online | NexTool</title>
<meta name="description" content="Free online SVG to PNG converter. Upload SVG files or paste SVG code, set custom dimensions, scale factor, and background. Batch convert. No signup required.">
<meta name="keywords" content="SVG to PNG, convert SVG, SVG converter, SVG to PNG online, batch SVG converter, free SVG tool, NexTool">
<meta property="og:title" content="Free SVG to PNG Converter | NexTool">
<meta property="og:description" content="Convert SVG to PNG instantly. Custom dimensions, retina scale, transparent or custom backgrounds. 100% free, runs in your browser.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://nextool.app/free-tools/svg-to-png.html">
<meta property="og:image" content="https://nextool.app/assets/og-default.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<link rel="canonical" href="https://nextool.app/free-tools/svg-to-png.html">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Free SVG to PNG Converter | NexTool">
<meta name="twitter:description" content="Convert SVG to PNG instantly. Custom dimensions, retina scale, backgrounds. Free online tool by NexTool.">
<meta name="robots" content="index, follow">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"SoftwareApplication","name":"NexTool SVG to PNG Converter","applicationCategory":"DesignApplication","operatingSystem":"Web","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"description":"Free online SVG to PNG converter with custom dimensions, retina scaling, and batch conversion. Runs entirely in the browser."}
</script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--bg:#050508;--surface:#111118;--surface2:#1a1a24;--border:#2a2a3a;--text:#e4e4eb;--text2:#9494a8;--primary:#6366f1;--accent:#a855f7;--pink:#ec4899;--green:#22c55e;--red:#ef4444;--cyan:#22d3ee;--yellow:#eab308;--radius:12px;--glass:rgba(17,17,24,0.7)}
html{scroll-behavior:smooth}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;min-height:100vh;overflow-x:hidden}
/* NAV */
.nav{position:sticky;top:0;z-index:100;background:rgba(5,5,8,0.85);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:0 2rem;height:64px;display:flex;align-items:center;justify-content:space-between}
.nav-logo{font-size:1.4rem;font-weight:800;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-decoration:none}
.nav-links{display:flex;align-items:center;gap:1.5rem}
.nav-links a{color:var(--text2);text-decoration:none;font-size:.875rem;font-weight:500;transition:color .2s}
.nav-links a:hover{color:var(--text)}
.nav-cta{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff!important;padding:.5rem 1.2rem;border-radius:8px;font-weight:600;-webkit-text-fill-color:#fff!important}
.nav-cta:hover{opacity:.9}
.nav-toggle{display:none;background:none;border:none;color:var(--text);font-size:1.5rem;cursor:pointer}
/* HERO */
.hero{text-align:center;padding:3rem 1.5rem 2rem;max-width:700px;margin:0 auto}
.hero h1{font-size:2.2rem;font-weight:800;line-height:1.2;margin-bottom:.75rem}
.hero h1 span{background:linear-gradient(135deg,var(--primary),var(--accent),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{color:var(--text2);font-size:1rem}
/* TOOL */
.tool-container{max-width:1200px;margin:0 auto;padding:0 1.5rem 3rem}
/* UPLOAD ZONE */
.upload-zone{border:2px dashed var(--border);border-radius:var(--radius);padding:3rem 2rem;text-align:center;cursor:pointer;transition:all .3s;background:var(--glass);backdrop-filter:blur(16px);margin-bottom:1.5rem;position:relative}
.upload-zone:hover,.upload-zone.dragover{border-color:var(--primary);background:rgba(99,102,241,.06)}
.upload-zone .icon{font-size:2.5rem;margin-bottom:.75rem;opacity:.6}
.upload-zone h3{font-size:1rem;font-weight:600;margin-bottom:.3rem}
.upload-zone p{font-size:.85rem;color:var(--text2)}
.upload-zone input[type=file]{position:absolute;inset:0;opacity:0;cursor:pointer}
/* TABS */
.tabs{display:flex;gap:.5rem;margin-bottom:1rem}
.tab-btn{background:var(--surface2);border:1px solid var(--border);color:var(--text2);padding:.5rem 1rem;border-radius:8px;font-size:.85rem;font-weight:500;cursor:pointer;transition:all .2s;font-family:inherit}
.tab-btn:hover{border-color:var(--primary);color:var(--text)}
.tab-btn.active{background:linear-gradient(135deg,var(--primary),var(--accent));border-color:transparent;color:#fff}
.tab-content{display:none}
.tab-content.active{display:block}
/* TEXTAREA */
.svg-input{width:100%;min-height:200px;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);color:var(--text);font-family:'Courier New',monospace;font-size:.85rem;padding:1rem;resize:vertical;outline:none;line-height:1.6}
.svg-input:focus{border-color:var(--primary)}
.svg-input::placeholder{color:var(--text2);opacity:.5}
/* SETTINGS */
.settings-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;margin:1.5rem 0}
.setting-group{background:var(--glass);backdrop-filter:blur(16px);border:1px solid var(--border);border-radius:var(--radius);padding:1rem}
.setting-group label{display:block;font-size:.8rem;font-weight:600;color:var(--text2);margin-bottom:.5rem;text-transform:uppercase;letter-spacing:.5px}
.setting-group input[type=number],.setting-group input[type=color],.setting-group select{width:100%;background:var(--surface2);border:1px solid var(--border);border-radius:8px;color:var(--text);padding:.45rem .7rem;font-size:.85rem;font-family:inherit;outline:none;transition:border-color .2s}
.setting-group input:focus,.setting-group select:focus{border-color:var(--primary)}
.setting-group select{appearance:none;padding-right:1.8rem;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%239494a8' viewBox='0 0 16 16'%3E%3Cpath d='M8 11L3 6h10z'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right .6rem center}
.setting-group input[type=color]{height:38px;padding:4px;cursor:pointer}
.setting-row{display:flex;align-items:center;gap:.5rem}
.setting-row input[type=number]{flex:1}
.setting-row .times{color:var(--text2);font-weight:600;font-size:.9rem}
/* SCALE BUTTONS */
.scale-btns{display:flex;gap:.35rem;flex-wrap:wrap}
.scale-btn{background:var(--surface2);border:1px solid var(--border);color:var(--text2);padding:.35rem .7rem;border-radius:6px;font-size:.8rem;font-weight:500;cursor:pointer;transition:all .2s;font-family:inherit}
.scale-btn:hover{border-color:var(--primary);color:var(--text)}
.scale-btn.active{background:var(--primary);border-color:var(--primary);color:#fff}
/* BG OPTIONS */
.bg-options{display:flex;gap:.5rem;align-items:center;flex-wrap:wrap}
.bg-opt{width:32px;height:32px;border-radius:8px;border:2px solid var(--border);cursor:pointer;transition:all .2s;position:relative;overflow:hidden}
.bg-opt:hover{border-color:var(--primary)}
.bg-opt.active{border-color:var(--primary);box-shadow:0 0 0 2px rgba(99,102,241,.3)}
.bg-opt.transparent{background:repeating-conic-gradient(#333 0% 25%,#555 0% 50%) 0/12px 12px}
.bg-opt.white{background:#fff}
.bg-opt.custom{background:var(--primary);display:flex;align-items:center;justify-content:center;font-size:.7rem;color:#fff;font-weight:700}
/* QUALITY SLIDER */
.quality-wrap{display:flex;align-items:center;gap:.75rem}
.quality-wrap input[type=range]{flex:1;-webkit-appearance:none;height:6px;border-radius:3px;background:var(--surface2);outline:none}
.quality-wrap input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:18px;height:18px;border-radius:50%;background:var(--primary);cursor:pointer;border:2px solid var(--surface)}
.quality-wrap input[type=range]::-moz-range-thumb{width:18px;height:18px;border-radius:50%;background:var(--primary);cursor:pointer;border:2px solid var(--surface)}
.quality-val{font-size:.85rem;font-weight:600;min-width:36px;text-align:right;color:var(--primary)}
/* PREVIEW & OUTPUT */
.preview-section{margin-top:1.5rem}
.preview-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:1rem}
.preview-header h2{font-size:1.1rem;font-weight:700}
.preview-actions{display:flex;gap:.5rem;flex-wrap:wrap}
.btn{background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.5rem 1rem;border-radius:8px;font-size:.8rem;font-weight:600;cursor:pointer;transition:all .2s;font-family:inherit}
.btn:hover{border-color:var(--primary);background:rgba(99,102,241,.12)}
.btn-primary{background:linear-gradient(135deg,var(--primary),var(--accent));border:none;color:#fff}
.btn-primary:hover{opacity:.9;transform:translateY(-1px)}
.btn-success{background:var(--green);border:none;color:#fff}
.btn-success:hover{opacity:.9}
/* BATCH GRID */
.batch-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1rem}
.batch-item{background:var(--glass);backdrop-filter:blur(16px);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;transition:border-color .2s}
.batch-item:hover{border-color:rgba(99,102,241,.3)}
.batch-preview{width:100%;aspect-ratio:4/3;display:flex;align-items:center;justify-content:center;padding:1rem;position:relative;overflow:hidden}
.batch-preview.transparent-bg{background:repeating-conic-gradient(#222 0% 25%,#333 0% 50%) 0/16px 16px}
.batch-preview.white-bg{background:#fff}
.batch-preview img,.batch-preview svg{max-width:100%;max-height:100%;object-fit:contain}
.batch-info{padding:.75rem 1rem;border-top:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;gap:.5rem}
.batch-name{font-size:.8rem;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1}
.batch-size{font-size:.75rem;color:var(--text2)}
.batch-actions{display:flex;gap:.3rem}
.batch-actions button{background:none;border:1px solid var(--border);color:var(--text2);width:30px;height:30px;border-radius:6px;cursor:pointer;font-size:.85rem;transition:all .2s;display:flex;align-items:center;justify-content:center}
.batch-actions button:hover{border-color:var(--primary);color:var(--primary)}
.batch-actions button.remove:hover{border-color:var(--red);color:var(--red)}
/* STATUS */
.status-bar{display:flex;align-items:center;gap:1rem;margin-bottom:1rem;font-size:.8rem;color:var(--text2)}
.file-count{background:rgba(99,102,241,.1);color:var(--primary);padding:2px 8px;border-radius:4px;font-weight:600;font-size:.75rem}
/* EMPTY STATE */
.empty-state{text-align:center;padding:3rem 1rem;color:var(--text2)}
.empty-state .icon{font-size:3rem;opacity:.3;margin-bottom:1rem}
.empty-state p{font-size:.9rem}
/* CTA */
.cta-section{text-align:center;padding:4rem 1.5rem;max-width:700px;margin:0 auto}
.cta-section h2{font-size:1.8rem;font-weight:800;margin-bottom:.75rem}
.cta-section h2 span{background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.cta-section p{color:var(--text2);margin-bottom:1.5rem}
.cta-btn{display:inline-block;background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;padding:.75rem 2rem;border-radius:10px;font-weight:700;text-decoration:none;font-size:1rem;transition:transform .2s,box-shadow .2s}
.cta-btn:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(99,102,241,.3)}
/* FOOTER */
.footer{border-top:1px solid var(--border);padding:3rem 2rem 2rem;max-width:1200px;margin:0 auto}
.footer-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:2rem;margin-bottom:2rem}
.footer-col h4{font-size:.85rem;font-weight:700;margin-bottom:.75rem;color:var(--text)}
.footer-col a{display:block;color:var(--text2);text-decoration:none;font-size:.8rem;margin-bottom:.4rem;transition:color .2s}
.footer-col a:hover{color:var(--primary)}
.footer-bottom{text-align:center;color:var(--text2);font-size:.75rem;padding-top:1.5rem;border-top:1px solid var(--border)}
/* FADE IN */
.fade-in{opacity:0;transform:translateY(20px);transition:opacity .6s,transform .6s}
.fade-in.visible{opacity:1;transform:translateY(0)}
/* TOAST */
.toast{position:fixed;bottom:2rem;left:50%;transform:translateX(-50%) translateY(80px);background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.6rem 1.2rem;border-radius:10px;font-size:.85rem;font-weight:500;z-index:200;transition:transform .3s;pointer-events:none}
.toast.show{transform:translateX(-50%) translateY(0)}
/* RESPONSIVE */
@media(max-width:768px){
  .nav-links{display:none;position:absolute;top:64px;left:0;right:0;background:var(--bg);border-bottom:1px solid var(--border);flex-direction:column;padding:1rem 2rem;gap:1rem}
  .nav-links.open{display:flex}
  .nav-toggle{display:block}
  .hero h1{font-size:1.6rem}
  .footer-grid{grid-template-columns:1fr}
  .settings-grid{grid-template-columns:1fr}
  .batch-grid{grid-template-columns:1fr}
  .preview-header{flex-direction:column;gap:.75rem;align-items:flex-start}
}
</style>
</head>
<body>

<nav class="nav">
  <a href="/" class="nav-logo">NexTool</a>
  <button class="nav-toggle" onclick="document.querySelector('.nav-links').classList.toggle('open')" aria-label="Menu">&#9776;</button>
  <div class="nav-links">
    <a href="/">Home</a>
    <a href="/free-tools/">Tools</a>
    <a href="/free-tools/">Free Tools</a>
    <a href="/blog/">Blog</a>
    <a href="/#contact" class="nav-cta">Get Pro &mdash; $29</a>
  </div>
</nav>

<section class="hero fade-in">
  <h1>Free <span>SVG to PNG</span> Converter</h1>
  <p class="tool-summary" style="color:#94a3b8;font-size:15px;line-height:1.6;margin-bottom:24px;max-width:700px;margin-left:auto;margin-right:auto;">Convert SVG files to high-quality PNG images entirely in your browser. Upload files or paste SVG code, set custom dimensions, choose retina scale factors, and pick transparent or custom backgrounds. Supports batch conversion. No signup, no uploads to any server.</p>
</section>

<div class="tool-container fade-in">
  <!-- Input Tabs -->
  <div class="tabs">
    <button class="tab-btn active" data-tab="upload" onclick="switchTab('upload')">Upload Files</button>
    <button class="tab-btn" data-tab="paste" onclick="switchTab('paste')">Paste SVG Code</button>
  </div>

  <!-- Upload Tab -->
  <div class="tab-content active" id="tab-upload">
    <div class="upload-zone" id="uploadZone">
      <input type="file" id="fileInput" accept=".svg,image/svg+xml" multiple>
      <div class="icon">&#128196;</div>
      <h3>Drop SVG files here or click to browse</h3>
      <p>Supports multiple files for batch conversion</p>
    </div>
  </div>

  <!-- Paste Tab -->
  <div class="tab-content" id="tab-paste">
    <textarea class="svg-input" id="svgCodeInput" placeholder='Paste your SVG code here...&#10;&#10;Example:&#10;<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">&#10;  <circle cx="50" cy="50" r="40" fill="#6366f1"/>&#10;</svg>' spellcheck="false"></textarea>
    <div style="margin-top:.75rem">
      <button class="btn btn-primary" onclick="addFromCode()">Add SVG</button>
      <button class="btn" onclick="document.getElementById('svgCodeInput').value=''" style="margin-left:.25rem">Clear</button>
    </div>
  </div>

  <!-- Conversion Settings -->
  <div class="settings-grid">
    <div class="setting-group">
      <label>Output Dimensions</label>
      <div class="setting-row">
        <input type="number" id="outputWidth" placeholder="Auto" min="1" max="8192" title="Width in pixels">
        <span class="times">&times;</span>
        <input type="number" id="outputHeight" placeholder="Auto" min="1" max="8192" title="Height in pixels">
      </div>
      <div style="font-size:.7rem;color:var(--text2);margin-top:.35rem">Leave empty for original size</div>
    </div>

    <div class="setting-group">
      <label>Scale Factor</label>
      <div class="scale-btns" id="scaleButtons">
        <button class="scale-btn active" data-scale="1" onclick="setScale(1)">1x</button>
        <button class="scale-btn" data-scale="2" onclick="setScale(2)">2x</button>
        <button class="scale-btn" data-scale="3" onclick="setScale(3)">3x</button>
        <button class="scale-btn" data-scale="4" onclick="setScale(4)">4x</button>
      </div>
      <div style="font-size:.7rem;color:var(--text2);margin-top:.35rem">Higher = larger PNG for retina displays</div>
    </div>

    <div class="setting-group">
      <label>Background</label>
      <div class="bg-options">
        <div class="bg-opt transparent active" data-bg="transparent" onclick="setBg('transparent')" title="Transparent"></div>
        <div class="bg-opt white" data-bg="white" onclick="setBg('white')" title="White"></div>
        <div class="bg-opt custom" data-bg="custom" onclick="setBg('custom')" title="Custom color">+</div>
        <input type="color" id="customBgColor" value="#000000" style="display:none;width:40px;height:32px" onchange="updateCustomBg()">
      </div>
    </div>

    <div class="setting-group">
      <label>PNG Quality</label>
      <div class="quality-wrap">
        <input type="range" id="qualitySlider" min="10" max="100" value="100" oninput="updateQualityLabel()">
        <span class="quality-val" id="qualityLabel">100%</span>
      </div>
      <div style="font-size:.7rem;color:var(--text2);margin-top:.35rem">100% = lossless PNG</div>
    </div>
  </div>

  <!-- Preview Section -->
  <div class="preview-section">
    <div class="preview-header">
      <div>
        <h2>SVG Files</h2>
        <div class="status-bar" id="statusBar" style="display:none">
          <span class="file-count" id="fileCount">0 files</span>
          <span id="statusText">Ready to convert</span>
        </div>
      </div>
      <div class="preview-actions" id="batchActions" style="display:none">
        <button class="btn btn-primary" onclick="convertAll()">Convert All to PNG</button>
        <button class="btn btn-success" onclick="downloadAll()">Download All</button>
        <button class="btn" onclick="clearAll()">Clear All</button>
      </div>
    </div>

    <div id="batchContainer">
      <div class="empty-state" id="emptyState">
        <div class="icon">&#127912;</div>
        <p>Upload SVG files or paste SVG code to get started</p>
      </div>
      <div class="batch-grid" id="batchGrid" style="display:none"></div>
    </div>
  </div>
</div>

<section class="cta-section fade-in">
  <h2>Need something <span>more powerful</span>?</h2>
  <p>Let us build it for you. Custom APIs, dashboards, automations &mdash; whatever you need.</p>
  <a href="/#contact" class="cta-btn">Start a Project &rarr;</a>
</section>

<!-- Cross Promo -->
<section style="max-width:900px;margin:40px auto;padding:0 24px;">
<div style="background:linear-gradient(135deg,rgba(99,102,241,0.1),rgba(168,85,247,0.08));border:1px solid rgba(99,102,241,0.15);border-radius:20px;padding:32px 28px;text-align:center;">
<div style="font-size:13px;color:#818cf8;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Founding Member</div>
<h3 style="font-size:22px;font-weight:800;color:#fff;margin:0 0 8px;">Get NexTool Pro</h3>
<p style="color:#94a3b8;font-size:14px;margin:0 auto 20px;max-width:500px;">No banners, clean output, enhanced features on all 150+ tools. One-time payment.</p>
<div style="display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap;">
<a href="/pro.html" style="display:inline-block;padding:12px 28px;background:linear-gradient(135deg,#6366f1,#a855f7,#ec4899);color:#fff;border-radius:10px;font-weight:700;font-size:15px;text-decoration:none;">$29 &mdash; Get Pro</a>
<a href="/free-tools/" style="color:#94a3b8;font-size:14px;text-decoration:none;">Browse 150+ Free Tools &rarr;</a>
</div>
</div>
</section>


<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/box-shadow-generator.html" style="color:var(--primary);text-decoration:none">CSS Box Shadow Generator</a> · <a href="/free-tools/emoji-picker.html" style="color:var(--primary);text-decoration:none">Emoji Picker & Search</a> · <a href="/free-tools/favicon-generator.html" style="color:var(--primary);text-decoration:none">Favicon Generator</a></p>
</div>
<footer class="footer fade-in">
  <div class="footer-grid">
    <div class="footer-col">
      <h4>Products</h4>
      <a href="/free-tools/">150+ Free Tools</a>
<a href="/pro.html">NexTool Pro</a>
<a href="/workspace.html">Workspace</a>
    </div>
    <div class="footer-col">
      <h4>Explore</h4>
      <a href="/free-tools/">Free Tools</a><a href="/blog/">Blog</a><a href="/pro.html">FAQ</a><a href="/pro.html">Pro &mdash; $29</a>
    </div>
    <div class="footer-col">
      <h4>Ecosystem</h4>
      <a href="/">NexTool Home</a><a href="/#contact">Contact</a><a href="https://github.com/christian140903-sudo/nextool" target="_blank">GitHub</a>
    </div>
  </div>
  <div class="footer-bottom">&copy; 2026 NexTool. AI-powered tools for everyone.</div>
</footer>

<div class="toast" id="toast"></div>

<!-- Hidden canvas for rendering -->
<canvas id="renderCanvas" style="display:none"></canvas>

<script>
/* State */
let svgItems = [];
let currentScale = 1;
let currentBg = 'transparent';
let customBgColor = '#000000';
let itemIdCounter = 0;

/* Tab Switching */
function switchTab(tab) {
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.toggle('active', b.dataset.tab === tab));
  document.querySelectorAll('.tab-content').forEach(c => c.classList.toggle('active', c.id === 'tab-' + tab));
}

/* Scale Factor */
function setScale(s) {
  currentScale = s;
  document.querySelectorAll('.scale-btn').forEach(b => b.classList.toggle('active', parseInt(b.dataset.scale) === s));
}

/* Background */
function setBg(type) {
  currentBg = type;
  document.querySelectorAll('.bg-opt').forEach(o => o.classList.toggle('active', o.dataset.bg === type));
  const colorInput = document.getElementById('customBgColor');
  if (type === 'custom') {
    colorInput.style.display = '';
    colorInput.click();
  } else {
    colorInput.style.display = 'none';
  }
}

function updateCustomBg() {
  customBgColor = document.getElementById('customBgColor').value;
  const customOpt = document.querySelector('.bg-opt.custom');
  if (customOpt) customOpt.style.background = customBgColor;
}

/* Quality */
function updateQualityLabel() {
  document.getElementById('qualityLabel').textContent = document.getElementById('qualitySlider').value + '%';
}

/* File Upload */
const uploadZone = document.getElementById('uploadZone');
const fileInput = document.getElementById('fileInput');

uploadZone.addEventListener('dragover', e => { e.preventDefault(); uploadZone.classList.add('dragover'); });
uploadZone.addEventListener('dragleave', () => uploadZone.classList.remove('dragover'));
uploadZone.addEventListener('drop', e => {
  e.preventDefault();
  uploadZone.classList.remove('dragover');
  handleFiles(e.dataTransfer.files);
});
fileInput.addEventListener('change', e => { handleFiles(e.target.files); e.target.value = ''; });

function handleFiles(files) {
  Array.from(files).forEach(file => {
    if (!file.type.includes('svg') && !file.name.endsWith('.svg')) {
      showToast('Skipped ' + file.name + ' (not SVG)');
      return;
    }
    const reader = new FileReader();
    reader.onload = e => {
      addSvgItem(e.target.result, file.name);
    };
    reader.readAsText(file);
  });
}

/* Add from Code */
function addFromCode() {
  const code = document.getElementById('svgCodeInput').value.trim();
  if (!code) { showToast('Please paste SVG code first'); return; }
  if (!code.includes('<svg')) { showToast('Invalid SVG code'); return; }
  addSvgItem(code, 'pasted-svg-' + (itemIdCounter + 1) + '.svg');
  document.getElementById('svgCodeInput').value = '';
  showToast('SVG added');
}

/* Core: Add SVG Item */
function addSvgItem(svgString, name) {
  // Parse to extract viewBox/width/height
  const parser = new DOMParser();
  const doc = parser.parseFromString(svgString, 'image/svg+xml');
  const svgEl = doc.querySelector('svg');
  if (!svgEl) { showToast('Invalid SVG: ' + name); return; }

  let w = 300, h = 150;
  const vb = svgEl.getAttribute('viewBox');
  const svgW = svgEl.getAttribute('width');
  const svgH = svgEl.getAttribute('height');

  if (vb) {
    const parts = vb.split(/[\s,]+/).map(Number);
    if (parts.length >= 4) { w = parts[2]; h = parts[3]; }
  }
  if (svgW && svgH) {
    const pw = parseFloat(svgW);
    const ph = parseFloat(svgH);
    if (!isNaN(pw) && pw > 0) w = pw;
    if (!isNaN(ph) && ph > 0) h = ph;
  }

  // Ensure the SVG has xmlns
  if (!svgEl.getAttribute('xmlns')) {
    svgString = svgString.replace('<svg', '<svg xmlns="http://www.w3.org/2000/svg"');
  }

  const item = {
    id: ++itemIdCounter,
    name: name,
    svgString: svgString,
    naturalW: w,
    naturalH: h,
    pngDataUrl: null,
    pngBlob: null
  };
  svgItems.push(item);
  renderBatchGrid();
  showToast('Added: ' + name);
}

/* Render Batch Grid */
function renderBatchGrid() {
  const grid = document.getElementById('batchGrid');
  const empty = document.getElementById('emptyState');
  const actions = document.getElementById('batchActions');
  const statusBar = document.getElementById('statusBar');
  const fileCount = document.getElementById('fileCount');

  if (svgItems.length === 0) {
    grid.style.display = 'none';
    empty.style.display = '';
    actions.style.display = 'none';
    statusBar.style.display = 'none';
    return;
  }

  empty.style.display = 'none';
  grid.style.display = '';
  actions.style.display = '';
  statusBar.style.display = '';
  fileCount.textContent = svgItems.length + ' file' + (svgItems.length !== 1 ? 's' : '');

  grid.innerHTML = svgItems.map(item => {
    const bgClass = currentBg === 'transparent' ? 'transparent-bg' : (currentBg === 'white' ? 'white-bg' : '');
    const bgStyle = currentBg === 'custom' ? 'background:' + customBgColor : '';
    const previewContent = item.pngDataUrl
      ? '<img src="' + item.pngDataUrl + '" alt="Converted PNG">'
      : '<div style="color:var(--text2);font-size:.75rem">' + escapeHtml(item.svgString).substring(0, 50) + '...</div>';
    const svgPreview = !item.pngDataUrl
      ? 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(item.svgString)
      : null;

    return '<div class="batch-item" data-id="' + item.id + '">' +
      '<div class="batch-preview ' + bgClass + '" style="' + bgStyle + '">' +
      (item.pngDataUrl
        ? '<img src="' + item.pngDataUrl + '" alt="' + escapeHtml(item.name) + '">'
        : '<img src="' + svgPreview + '" alt="' + escapeHtml(item.name) + '" onerror="this.parentElement.innerHTML=\'<div style=color:var(--red)>Preview error</div>\'">') +
      '</div>' +
      '<div class="batch-info">' +
        '<span class="batch-name" title="' + escapeHtml(item.name) + '">' + escapeHtml(item.name) + '</span>' +
        '<span class="batch-size">' + item.naturalW + 'x' + item.naturalH + '</span>' +
        '<div class="batch-actions">' +
          (item.pngDataUrl
            ? '<button onclick="downloadSingle(' + item.id + ')" title="Download PNG">&#11015;</button>'
            : '<button onclick="convertSingle(' + item.id + ')" title="Convert to PNG">&#9889;</button>') +
          '<button class="remove" onclick="removeItem(' + item.id + ')" title="Remove">&#10005;</button>' +
        '</div>' +
      '</div>' +
    '</div>';
  }).join('');
}

/* Convert Single */
function convertSingle(id) {
  const item = svgItems.find(i => i.id === id);
  if (!item) return;
  convertItem(item).then(() => {
    renderBatchGrid();
    showToast('Converted: ' + item.name);
  }).catch(err => {
    showToast('Error converting: ' + item.name);
    console.error(err);
  });
}

/* Convert All */
function convertAll() {
  const unconverted = svgItems.filter(i => !i.pngDataUrl);
  if (unconverted.length === 0) { showToast('All files already converted'); return; }

  document.getElementById('statusText').textContent = 'Converting...';
  let completed = 0;

  Promise.all(unconverted.map(item =>
    convertItem(item).then(() => {
      completed++;
      document.getElementById('statusText').textContent = 'Converting... ' + completed + '/' + unconverted.length;
    })
  )).then(() => {
    renderBatchGrid();
    document.getElementById('statusText').textContent = 'All converted';
    showToast('All ' + unconverted.length + ' files converted');
  }).catch(err => {
    renderBatchGrid();
    showToast('Some conversions failed');
    console.error(err);
  });
}

/* Core Conversion */
function convertItem(item) {
  return new Promise((resolve, reject) => {
    const canvas = document.getElementById('renderCanvas');
    const ctx = canvas.getContext('2d');

    // Determine output size
    const userW = parseInt(document.getElementById('outputWidth').value);
    const userH = parseInt(document.getElementById('outputHeight').value);
    let baseW, baseH;

    if (userW > 0 && userH > 0) {
      baseW = userW;
      baseH = userH;
    } else if (userW > 0) {
      baseW = userW;
      baseH = Math.round(userW * (item.naturalH / item.naturalW));
    } else if (userH > 0) {
      baseH = userH;
      baseW = Math.round(userH * (item.naturalW / item.naturalH));
    } else {
      baseW = item.naturalW;
      baseH = item.naturalH;
    }

    // Apply scale factor
    const finalW = Math.round(baseW * currentScale);
    const finalH = Math.round(baseH * currentScale);

    // Clamp to safe size
    const maxDim = 8192;
    const cW = Math.min(finalW, maxDim);
    const cH = Math.min(finalH, maxDim);

    canvas.width = cW;
    canvas.height = cH;

    // Clear and draw background
    ctx.clearRect(0, 0, cW, cH);
    if (currentBg === 'white') {
      ctx.fillStyle = '#ffffff';
      ctx.fillRect(0, 0, cW, cH);
    } else if (currentBg === 'custom') {
      ctx.fillStyle = customBgColor;
      ctx.fillRect(0, 0, cW, cH);
    }
    // transparent = no fill (default)

    // Create image from SVG
    const img = new Image();
    const blob = new Blob([item.svgString], { type: 'image/svg+xml;charset=utf-8' });
    const url = URL.createObjectURL(blob);

    img.onload = function() {
      ctx.drawImage(img, 0, 0, cW, cH);
      URL.revokeObjectURL(url);

      const quality = parseInt(document.getElementById('qualitySlider').value) / 100;
      // PNG does not actually use quality param, but we can use it via toDataURL
      // For lossy simulation, we could convert via JPEG then back, but PNG is lossless
      // We use quality for toBlob type selection: 100% = PNG, <100% = we still do PNG
      const dataUrl = canvas.toDataURL('image/png');
      item.pngDataUrl = dataUrl;

      canvas.toBlob(function(b) {
        item.pngBlob = b;
        resolve();
      }, 'image/png');
    };

    img.onerror = function() {
      URL.revokeObjectURL(url);
      reject(new Error('Failed to load SVG as image'));
    };

    img.src = url;
  });
}

/* Download Single */
function downloadSingle(id) {
  const item = svgItems.find(i => i.id === id);
  if (!item || !item.pngDataUrl) { showToast('Convert first'); return; }
  const a = document.createElement('a');
  const pngName = item.name.replace(/\.svg$/i, '') + '.png';
  a.href = item.pngDataUrl;
  a.download = pngName;
  a.click();
  showToast('Downloaded: ' + pngName);
}

/* Download All */
function downloadAll() {
  const converted = svgItems.filter(i => i.pngDataUrl);
  if (converted.length === 0) { showToast('Convert files first'); return; }

  if (converted.length === 1) {
    downloadSingle(converted[0].id);
    return;
  }

  // Download each with a slight delay to avoid browser blocking
  converted.forEach((item, idx) => {
    setTimeout(() => {
      const a = document.createElement('a');
      a.href = item.pngDataUrl;
      a.download = item.name.replace(/\.svg$/i, '') + '.png';
      a.click();
    }, idx * 300);
  });
  showToast('Downloading ' + converted.length + ' files...');
}

/* Remove Item */
function removeItem(id) {
  svgItems = svgItems.filter(i => i.id !== id);
  renderBatchGrid();
}

/* Clear All */
function clearAll() {
  svgItems = [];
  renderBatchGrid();
  showToast('All cleared');
}

/* Helpers */
function escapeHtml(s) { return s.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;'); }

function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2200);
}

/* IntersectionObserver fade-in */
const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('visible'); observer.unobserve(entry.target); }});
}, { threshold: 0.1 });
document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));
</script>
<script src="/js/analytics-lite.js" defer></script>
<script src="/js/revenue.js" defer></script>
<script src="/js/lead-capture.js" defer></script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "How do I convert SVG to PNG?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Upload your SVG file or paste SVG code into NexTool's SVG to PNG Converter. Choose your desired output dimensions, scale factor, and background color, then click Convert. The PNG renders entirely in your browser using the Canvas API. No data is sent to any server."
      }
    },
    {
      "@type": "Question",
      "name": "Can I batch convert multiple SVG files to PNG?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes. You can drag and drop or select multiple SVG files at once. All files appear in a grid and you can convert them all with a single click. You can also download all converted PNGs at once."
      }
    },
    {
      "@type": "Question",
      "name": "What is the scale factor for?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "The scale factor multiplies the output dimensions. For example, 2x produces a PNG at double the base resolution, which is ideal for retina or high-DPI displays. 4x gives you four times the resolution for the sharpest possible output."
      }
    },
    {
      "@type": "Question",
      "name": "Is the SVG to PNG conversion private?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes. The entire conversion happens in your browser using the HTML5 Canvas API. Your SVG files never leave your device. No data is uploaded to any server."
      }
    }
  ]
}
</script>
</body>
</html>
