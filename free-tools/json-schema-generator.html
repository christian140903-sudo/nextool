<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>JSON Schema Generator — Free Online Tool | NexTool</title>
<meta name="description" content="Generate JSON Schema from any JSON data instantly. Auto-detect types, patterns (email, URL, date, UUID), required fields. Supports Draft 4/6/7/2020-12.">
<meta name="keywords" content="json schema generator, json to schema, json schema online, json validator, schema generator, api schema">
<meta name="author" content="NexTool">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://nextool.app/free-tools/json-schema-generator.html">
<meta property="og:title" content="JSON Schema Generator — Free Online Tool | NexTool">
<meta property="og:description" content="Generate JSON Schema from any JSON data instantly. Auto-detect types, patterns, required fields.">
<meta property="og:image" content="https://nextool.app/assets/img/tools/json-schema-generator-og.png">
<meta property="og:url" content="https://nextool.app/free-tools/json-schema-generator.html">
<meta property="og:type" content="website">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="JSON Schema Generator — Free Online Tool | NexTool">
<meta name="twitter:description" content="Generate JSON Schema from any JSON data instantly. Supports all draft versions.">
<meta name="twitter:image" content="https://nextool.app/assets/img/tools/json-schema-generator-og.png">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"BreadcrumbList",
  "itemListElement":[
    {"@type":"ListItem","position":1,"name":"Home","item":"https://nextool.app/"},
    {"@type":"ListItem","position":2,"name":"Free Tools","item":"https://nextool.app/free-tools/"},
    {"@type":"ListItem","position":3,"name":"JSON Schema Generator","item":"https://nextool.app/free-tools/json-schema-generator.html"}
  ]
}
</script>
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"FAQPage",
  "mainEntity":[
    {"@type":"Question","name":"What is JSON Schema?","acceptedAnswer":{"@type":"Answer","text":"JSON Schema is a vocabulary that allows you to annotate and validate JSON documents. It describes the structure, data types, and constraints of JSON data, and is widely used for API documentation, configuration validation, and form generation."}},
    {"@type":"Question","name":"Which JSON Schema draft version should I use?","acceptedAnswer":{"@type":"Answer","text":"Draft 2020-12 is the latest and most feature-rich version. Draft 7 is the most widely supported across tools and libraries. Use Draft 2020-12 for new projects and Draft 7 if you need maximum compatibility."}},
    {"@type":"Question","name":"Can this tool detect data formats like email and URL?","acceptedAnswer":{"@type":"Answer","text":"Yes. The generator automatically detects common patterns including email addresses, URLs, dates (ISO 8601), UUIDs, IPv4/IPv6 addresses, and hostnames, and adds the appropriate format validator to the schema."}},
    {"@type":"Question","name":"Does the generated schema include required fields?","acceptedAnswer":{"@type":"Answer","text":"Yes. By default, all properties found in the JSON data are marked as required. You can toggle this behavior off using the 'Required by default' option to generate a more permissive schema."}}
  ]
}
</script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}
:root{--bg:#050508;--surface:#111118;--primary:#6366f1;--accent:#a855f7;--text:#e2e8f0;--text2:#94a3b8;--border:rgba(255,255,255,0.06);--radius:16px;}
body{font-family:'Inter',system-ui,-apple-system,sans-serif;background:var(--bg);color:var(--text);min-height:100vh;line-height:1.6;-webkit-font-smoothing:antialiased;}
a{color:var(--primary);text-decoration:none;}
a:hover{color:#818cf8;}

.nav{position:sticky;top:0;z-index:100;background:rgba(5,5,8,0.85);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:0 24px;}
.nav-inner{max-width:1100px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;height:60px;}
.nav-logo{font-size:20px;font-weight:800;color:#fff;letter-spacing:-0.5px;}
.nav-logo span{background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.nav-links{display:flex;gap:24px;align-items:center;}
.nav-links a{color:var(--text2);font-size:14px;font-weight:500;transition:color .2s;}
.nav-links a:hover{color:#fff;}

.hero{text-align:center;padding:56px 24px 32px;max-width:700px;margin:0 auto;}
.hero-badge{display:inline-block;padding:6px 14px;border-radius:20px;font-size:12px;font-weight:600;color:var(--primary);background:rgba(99,102,241,0.1);border:1px solid rgba(99,102,241,0.2);margin-bottom:16px;letter-spacing:0.5px;text-transform:uppercase;}
.hero h1{font-size:clamp(28px,5vw,42px);font-weight:900;letter-spacing:-1px;line-height:1.15;margin-bottom:12px;}
.hero h1 span{background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.hero p{color:var(--text2);font-size:16px;max-width:520px;margin:0 auto;}

.tool{max-width:1100px;margin:0 auto;padding:0 24px 40px;}
.options-bar{display:flex;gap:16px;flex-wrap:wrap;margin-bottom:16px;align-items:center;padding:14px 18px;background:var(--surface);border:1px solid var(--border);border-radius:12px;}
.opt-group{display:flex;align-items:center;gap:8px;}
.opt-label{font-size:12px;font-weight:600;color:var(--text2);text-transform:uppercase;letter-spacing:0.5px;}
select{background:rgba(255,255,255,0.06);color:var(--text);border:1px solid var(--border);border-radius:8px;padding:6px 10px;font-family:inherit;font-size:13px;cursor:pointer;outline:none;}
select:focus{border-color:var(--primary);}
.toggle{display:flex;align-items:center;gap:8px;cursor:pointer;font-size:13px;color:var(--text2);user-select:none;}
.toggle input{display:none;}
.toggle-track{width:36px;height:20px;background:rgba(255,255,255,0.1);border-radius:10px;position:relative;transition:background .2s;}
.toggle input:checked+.toggle-track{background:var(--primary);}
.toggle-track::after{content:'';position:absolute;width:16px;height:16px;background:#fff;border-radius:50%;top:2px;left:2px;transition:transform .2s;}
.toggle input:checked+.toggle-track::after{transform:translateX(16px);}
.spacer{flex:1;}

.controls{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:16px;align-items:center;}
.btn{display:inline-flex;align-items:center;gap:6px;padding:10px 20px;border:none;border-radius:10px;font-family:inherit;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s;}
.btn-primary{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;}
.btn-primary:hover{opacity:0.9;transform:translateY(-1px);}
.btn-secondary{background:rgba(255,255,255,0.06);color:var(--text);border:1px solid var(--border);}
.btn-secondary:hover{background:rgba(255,255,255,0.1);}
.btn-sm{padding:7px 14px;font-size:13px;border-radius:8px;}

.editor-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;}
@media(max-width:768px){.editor-grid{grid-template-columns:1fr;}}
.editor-panel{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;display:flex;flex-direction:column;}
.editor-header{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid var(--border);background:rgba(255,255,255,0.02);}
.editor-title{font-size:13px;font-weight:700;color:var(--text);text-transform:uppercase;letter-spacing:0.5px;}
.editor-actions{display:flex;gap:6px;}
.editor-body{position:relative;flex:1;min-height:420px;}
.line-numbers{position:absolute;left:0;top:0;bottom:0;width:44px;background:rgba(0,0,0,0.3);padding:14px 8px;text-align:right;font-family:'SF Mono',Monaco,Consolas,'Courier New',monospace;font-size:13px;line-height:1.6;color:rgba(148,163,184,0.4);user-select:none;overflow:hidden;border-right:1px solid var(--border);}
.code-area{width:100%;height:100%;min-height:420px;background:transparent;color:var(--text);border:none;outline:none;resize:none;font-family:'SF Mono',Monaco,Consolas,'Courier New',monospace;font-size:13px;line-height:1.6;padding:14px 14px 14px 56px;tab-size:2;}
.code-area::placeholder{color:rgba(148,163,184,0.3);}
.code-area:focus{box-shadow:inset 0 0 0 1px rgba(99,102,241,0.3);}

.error-msg{background:rgba(239,68,68,0.1);border:1px solid rgba(239,68,68,0.3);color:#fca5a5;padding:10px 16px;border-radius:10px;font-size:13px;margin-bottom:12px;display:none;}

.toast{position:fixed;bottom:24px;right:24px;background:#22c55e;color:#fff;padding:12px 20px;border-radius:10px;font-size:14px;font-weight:600;opacity:0;transform:translateY(10px);transition:all .3s;z-index:999;pointer-events:none;}
.toast.show{opacity:1;transform:translateY(0);}

.faq{max-width:800px;margin:40px auto;padding:0 24px;}
.faq h2{font-size:24px;font-weight:800;margin-bottom:20px;text-align:center;}
.faq-item{background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);margin-bottom:12px;overflow:hidden;}
.faq-q{padding:16px 20px;font-weight:600;cursor:pointer;display:flex;justify-content:space-between;align-items:center;transition:background .2s;}
.faq-q:hover{background:rgba(255,255,255,0.03);}
.faq-q::after{content:'+';font-size:20px;color:var(--text2);transition:transform .3s;}
.faq-q.open::after{transform:rotate(45deg);}
.faq-a{padding:0 20px;max-height:0;overflow:hidden;transition:all .3s;color:var(--text2);font-size:14px;line-height:1.7;}
.faq-a.open{padding:0 20px 16px;max-height:300px;}

.footer{border-top:1px solid var(--border);padding:32px 24px;text-align:center;color:var(--text2);font-size:13px;margin-top:40px;}
.footer-links{display:flex;justify-content:center;gap:24px;margin-bottom:12px;flex-wrap:wrap;}
.footer-links a{color:var(--text2);font-weight:500;transition:color .2s;}
.footer-links a:hover{color:#fff;}
</style>
</head>
<body>

<nav class="nav">
<div class="nav-inner">
<a href="/" class="nav-logo">Nex<span>Tool</span></a>
<div class="nav-links">
<a href="/free-tools/">Free Tools</a>
<a href="/pro.html">Pro</a>
<a href="/blog/">Blog</a>
</div>
</div>
</nav>

<section class="hero">
<div class="hero-badge">Free Developer Tool</div>
<h1>JSON <span>Schema</span> Generator</h1>
<p>Paste any JSON data and instantly generate a complete JSON Schema with type detection, format validation, and required fields.</p>
</section>

<section class="tool">
<div class="options-bar">
<div class="opt-group">
<span class="opt-label">Draft</span>
<select id="draftVersion">
<option value="2020-12">2020-12 (Latest)</option>
<option value="draft-07" selected>Draft 7</option>
<option value="draft-06">Draft 6</option>
<option value="draft-04">Draft 4</option>
</select>
</div>
<label class="toggle">
<input type="checkbox" id="requiredToggle" checked>
<div class="toggle-track"></div>
<span>Required by default</span>
</label>
<label class="toggle">
<input type="checkbox" id="detectFormats" checked>
<div class="toggle-track"></div>
<span>Detect formats</span>
</label>
<span class="spacer"></span>
<button class="btn btn-primary" onclick="generateSchema()">Generate Schema</button>
</div>

<div class="controls">
<button class="btn btn-secondary btn-sm" onclick="loadSample()">Load Sample</button>
<button class="btn btn-secondary btn-sm" onclick="clearAll()">Clear</button>
</div>

<div class="error-msg" id="errorMsg"></div>

<div class="editor-grid">
<div class="editor-panel">
<div class="editor-header">
<span class="editor-title">JSON Input</span>
<div class="editor-actions">
<button class="btn btn-secondary btn-sm" onclick="formatInput()">Format</button>
</div>
</div>
<div class="editor-body">
<div class="line-numbers" id="linesInput">1</div>
<textarea class="code-area" id="inputJSON" placeholder='Paste your JSON data here...&#10;&#10;Example:&#10;{&#10;  "name": "John",&#10;  "email": "john@example.com",&#10;  "age": 30&#10;}' spellcheck="false" oninput="updateLines('inputJSON','linesInput')"></textarea>
</div>
</div>
<div class="editor-panel">
<div class="editor-header">
<span class="editor-title">Generated Schema</span>
<div class="editor-actions">
<button class="btn btn-secondary btn-sm" onclick="copySchema()">Copy</button>
<button class="btn btn-secondary btn-sm" onclick="downloadSchema()">Download</button>
</div>
</div>
<div class="editor-body">
<div class="line-numbers" id="linesOutput">1</div>
<textarea class="code-area" id="outputSchema" placeholder="Generated JSON Schema will appear here..." spellcheck="false" readonly oninput="updateLines('outputSchema','linesOutput')"></textarea>
</div>
</div>
</div>
</section>

<section class="faq">
<h2>Frequently Asked Questions</h2>
<div class="faq-item">
<div class="faq-q" onclick="toggleFaq(this)">What is JSON Schema?</div>
<div class="faq-a">JSON Schema is a vocabulary that allows you to annotate and validate JSON documents. It describes the structure, data types, and constraints of JSON data, and is widely used for API documentation, configuration validation, and form generation.</div>
</div>
<div class="faq-item">
<div class="faq-q" onclick="toggleFaq(this)">Which JSON Schema draft version should I use?</div>
<div class="faq-a">Draft 2020-12 is the latest and most feature-rich version. Draft 7 is the most widely supported across tools and libraries. Use Draft 2020-12 for new projects and Draft 7 if you need maximum compatibility.</div>
</div>
<div class="faq-item">
<div class="faq-q" onclick="toggleFaq(this)">Can this tool detect data formats like email and URL?</div>
<div class="faq-a">Yes. The generator automatically detects common patterns including email addresses, URLs, dates (ISO 8601), UUIDs, IPv4/IPv6 addresses, and hostnames, and adds the appropriate format validator to the schema.</div>
</div>
<div class="faq-item">
<div class="faq-q" onclick="toggleFaq(this)">Does the generated schema include required fields?</div>
<div class="faq-a">Yes. By default, all properties found in the JSON data are marked as required. You can toggle this behavior off using the "Required by default" option to generate a more permissive schema.</div>
</div>
</section>

<section style="max-width:900px;margin:40px auto;padding:0 24px;">
<div style="background:linear-gradient(135deg,rgba(99,102,241,0.1),rgba(168,85,247,0.08));border:1px solid rgba(99,102,241,0.15);border-radius:20px;padding:32px 28px;text-align:center;">
<div style="font-size:13px;color:#818cf8;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Founding Member</div>
<h3 style="font-size:22px;font-weight:800;color:#fff;margin:0 0 8px;">Get NexTool Pro</h3>
<p style="color:#94a3b8;font-size:14px;margin:0 auto 20px;max-width:500px;">No banners, clean output, enhanced features on all 231+ tools. One-time payment.</p>
<a href="/pro.html" style="display:inline-block;padding:12px 28px;background:linear-gradient(135deg,#6366f1,#a855f7);color:#fff;text-decoration:none;border-radius:12px;font-weight:700;font-size:15px;">$29 — Get Pro</a>
<a href="/free-tools/" style="display:inline-block;margin-left:12px;color:#818cf8;text-decoration:none;font-size:14px;">Browse 231+ Free Tools &rarr;</a>
</div>
</section>


<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/box-shadow-generator.html" style="color:var(--primary);text-decoration:none">CSS Box Shadow Generator</a> · <a href="/free-tools/emoji-picker.html" style="color:var(--primary);text-decoration:none">Emoji Picker & Search</a> · <a href="/free-tools/favicon-generator.html" style="color:var(--primary);text-decoration:none">Favicon Generator</a> · <a href="/free-tools/meta-tag-generator.html" style="color:var(--primary);text-decoration:none">Meta Tag Generator</a> · <a href="/free-tools/json-formatter.html" style="color:var(--primary);text-decoration:none">Free JSON Formatter & Validator</a></p>
</div>

<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/icon-generator.html" style="color:var(--primary);text-decoration:none">Free Icon Generator</a> · <a href="/free-tools/json-editor.html" style="color:var(--primary);text-decoration:none">Visual JSON Editor - Tree View &amp; Raw Editor</a> · <a href="/free-tools/json-schema-validator.html" style="color:var(--primary);text-decoration:none">Free JSON Schema Validator</a></p>
</div>

<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/json-validator.html" style="color:var(--primary);text-decoration:none">Free JSON Validator</a> · <a href="/free-tools/json-to-yaml-converter.html" style="color:var(--primary);text-decoration:none">Free JSON to YAML Converter</a> · <a href="/free-tools/accessibility-checker.html" style="color:var(--primary);text-decoration:none">Free Accessibility Checker</a></p>
</div>
<footer class="footer">
<div class="footer-links">
<a href="/">Home</a>
<a href="/free-tools/">Free Tools</a>
<a href="/pro.html">Pro</a>
<a href="/blog/">Blog</a>
</div>
<p>&copy; 2026 NexTool. All rights reserved.</p>
</footer>

<div class="toast" id="toast"></div>

<script>
/* ========== Line Numbers ========== */
function updateLines(taId, lnId) {
  const ta = document.getElementById(taId);
  const ln = document.getElementById(lnId);
  const count = ta.value.split('\n').length;
  let html = '';
  for (let i = 1; i <= count; i++) html += i + '\n';
  ln.textContent = html;
  ln.scrollTop = ta.scrollTop;
}
document.getElementById('inputJSON').addEventListener('scroll', function() {
  document.getElementById('linesInput').scrollTop = this.scrollTop;
});
document.getElementById('outputSchema').addEventListener('scroll', function() {
  document.getElementById('linesOutput').scrollTop = this.scrollTop;
});

/* ========== Format Detection ========== */
const FORMAT_PATTERNS = {
  'email': /^[a-zA-Z0-9._%+\-]+@[a-zA-Z0-9.\-]+\.[a-zA-Z]{2,}$/,
  'uri': /^https?:\/\/[^\s/$.?#].[^\s]*$/i,
  'date-time': /^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d+)?(Z|[+\-]\d{2}:\d{2})?$/,
  'date': /^\d{4}-\d{2}-\d{2}$/,
  'time': /^\d{2}:\d{2}:\d{2}(\.\d+)?(Z|[+\-]\d{2}:\d{2})?$/,
  'uuid': /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i,
  'ipv4': /^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,
  'ipv6': /^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$/,
  'hostname': /^(?!:\/\/)([a-zA-Z0-9\-]+\.)+[a-zA-Z]{2,}$/
};

function detectFormat(value) {
  if (typeof value !== 'string') return null;
  for (const [format, pattern] of Object.entries(FORMAT_PATTERNS)) {
    if (pattern.test(value)) return format;
  }
  return null;
}

/* ========== Schema Generation ========== */
function getSchemaURI(draft) {
  switch (draft) {
    case '2020-12': return 'https://json-schema.org/draft/2020-12/schema';
    case 'draft-07': return 'http://json-schema.org/draft-07/schema#';
    case 'draft-06': return 'http://json-schema.org/draft-06/schema#';
    case 'draft-04': return 'http://json-schema.org/draft-04/schema#';
    default: return 'http://json-schema.org/draft-07/schema#';
  }
}

function generateSchemaForValue(value, detectFormats) {
  if (value === null) {
    return { type: 'null' };
  }

  const jsType = typeof value;

  if (jsType === 'string') {
    const schema = { type: 'string' };
    if (detectFormats) {
      const fmt = detectFormat(value);
      if (fmt) schema.format = fmt;
    }
    if (value.length > 0) {
      schema.examples = [value];
    }
    return schema;
  }

  if (jsType === 'number') {
    const schema = Number.isInteger(value) ? { type: 'integer' } : { type: 'number' };
    schema.examples = [value];
    return schema;
  }

  if (jsType === 'boolean') {
    return { type: 'boolean' };
  }

  if (Array.isArray(value)) {
    const schema = { type: 'array' };
    if (value.length > 0) {
      /* Check if all items have same type */
      const itemSchemas = value.map(function(item) {
        return generateSchemaForValue(item, detectFormats);
      });
      /* If all same type, use single items schema */
      const types = itemSchemas.map(function(s) { return JSON.stringify(s); });
      const uniqueTypes = [...new Set(types)];
      if (uniqueTypes.length === 1) {
        schema.items = itemSchemas[0];
        delete schema.items.examples;
      } else {
        /* Merge schemas */
        schema.items = mergeSchemas(itemSchemas);
      }
    }
    return schema;
  }

  if (jsType === 'object') {
    const schema = { type: 'object', properties: {} };
    const requiredFields = [];
    const keys = Object.keys(value);
    keys.forEach(function(key) {
      schema.properties[key] = generateSchemaForValue(value[key], detectFormats);
      requiredFields.push(key);
    });
    if (document.getElementById('requiredToggle').checked && requiredFields.length > 0) {
      schema.required = requiredFields;
    }
    schema.additionalProperties = false;
    return schema;
  }

  return {};
}

function mergeSchemas(schemas) {
  /* Simple merge: if types differ, use anyOf */
  const typeSet = new Set();
  schemas.forEach(function(s) {
    if (s.type) typeSet.add(s.type);
  });
  if (typeSet.size === 1) {
    const merged = Object.assign({}, schemas[0]);
    delete merged.examples;
    return merged;
  }
  /* Different types → anyOf */
  const unique = [];
  const seen = new Set();
  schemas.forEach(function(s) {
    const key = JSON.stringify(s);
    if (!seen.has(key)) { seen.add(key); const copy = Object.assign({}, s); delete copy.examples; unique.push(copy); }
  });
  return { anyOf: unique };
}

function generateSchema() {
  const input = document.getElementById('inputJSON').value.trim();
  const errorEl = document.getElementById('errorMsg');
  errorEl.style.display = 'none';

  if (!input) { showToast('Please enter some JSON data.', '#ef4444'); return; }

  try {
    const data = JSON.parse(input);
    const draft = document.getElementById('draftVersion').value;
    const detectFormats = document.getElementById('detectFormats').checked;

    const schema = generateSchemaForValue(data, detectFormats);

    /* Add $schema */
    const draftKey = draft === '2020-12' ? '$schema' : '$schema';
    const result = {};
    result['$schema'] = getSchemaURI(draft);

    if (draft === '2020-12' || draft === 'draft-07' || draft === 'draft-06') {
      result['$id'] = 'https://example.com/schema.json';
    }

    result.title = 'Generated Schema';
    result.description = 'Auto-generated JSON Schema from sample data';

    /* Merge schema properties into result */
    Object.assign(result, schema);

    /* Remove examples from top-level */
    delete result.examples;

    const output = JSON.stringify(result, null, 2);
    document.getElementById('outputSchema').value = output;
    updateLines('outputSchema', 'linesOutput');
    showToast('Schema generated successfully!', '#22c55e');
  } catch (e) {
    errorEl.textContent = 'JSON Parse Error: ' + e.message;
    errorEl.style.display = 'block';
    showToast('Invalid JSON input.', '#ef4444');
  }
}

function formatInput() {
  const input = document.getElementById('inputJSON').value.trim();
  if (!input) return;
  try {
    const parsed = JSON.parse(input);
    document.getElementById('inputJSON').value = JSON.stringify(parsed, null, 2);
    updateLines('inputJSON', 'linesInput');
    showToast('JSON formatted!', '#22c55e');
  } catch (e) {
    showToast('Invalid JSON — cannot format.', '#ef4444');
  }
}

function copySchema() {
  const text = document.getElementById('outputSchema').value;
  if (!text) { showToast('Nothing to copy.', '#ef4444'); return; }
  navigator.clipboard.writeText(text).then(function() { showToast('Schema copied!', '#22c55e'); });
}

function downloadSchema() {
  const text = document.getElementById('outputSchema').value;
  if (!text) { showToast('Nothing to download.', '#ef4444'); return; }
  const blob = new Blob([text], { type: 'application/json' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url; a.download = 'schema.json';
  document.body.appendChild(a); a.click(); document.body.removeChild(a);
  URL.revokeObjectURL(url);
  showToast('Schema downloaded!', '#22c55e');
}

function clearAll() {
  document.getElementById('inputJSON').value = '';
  document.getElementById('outputSchema').value = '';
  document.getElementById('errorMsg').style.display = 'none';
  updateLines('inputJSON', 'linesInput');
  updateLines('outputSchema', 'linesOutput');
}

function loadSample() {
  const sample = {
    "id": "a3b8c9d0-1234-5678-abcd-ef0123456789",
    "name": "NexTool Pro User",
    "email": "user@nextool.app",
    "website": "https://nextool.app",
    "created_at": "2026-01-15T10:30:00Z",
    "age": 28,
    "is_active": true,
    "score": 97.5,
    "ip_address": "192.168.1.100",
    "tags": ["developer", "designer", "automation"],
    "address": {
      "street": "123 Tech Lane",
      "city": "San Francisco",
      "state": "CA",
      "zip": "94102",
      "country": "US"
    },
    "projects": [
      {
        "name": "Website Redesign",
        "status": "active",
        "budget": 4999.99,
        "start_date": "2026-01-01",
        "team_size": 5
      },
      {
        "name": "Chatbot Integration",
        "status": "completed",
        "budget": 2499.00,
        "start_date": "2025-11-15",
        "team_size": 3
      }
    ],
    "settings": {
      "theme": "dark",
      "notifications": true,
      "language": "en",
      "timezone": "America/Los_Angeles"
    },
    "metadata": null
  };
  document.getElementById('inputJSON').value = JSON.stringify(sample, null, 2);
  updateLines('inputJSON', 'linesInput');
  showToast('Sample data loaded!', '#22c55e');
}

function showToast(msg, color) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.style.background = color || '#22c55e';
  t.classList.add('show');
  clearTimeout(t._timer);
  t._timer = setTimeout(function() { t.classList.remove('show'); }, 2500);
}

function toggleFaq(el) {
  const a = el.nextElementSibling;
  const isOpen = el.classList.contains('open');
  document.querySelectorAll('.faq-q').forEach(function(q) { q.classList.remove('open'); });
  document.querySelectorAll('.faq-a').forEach(function(ans) { ans.classList.remove('open'); });
  if (!isOpen) { el.classList.add('open'); a.classList.add('open'); }
}

/* Init line numbers */
updateLines('inputJSON', 'linesInput');
updateLines('outputSchema', 'linesOutput');
</script>
<script defer src="/js/revenue.js"></script>
<script defer src="/js/lead-capture.js"></script>
<script defer src="/js/analytics-lite.js"></script>
</body>
</html>
