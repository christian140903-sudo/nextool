<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Morse Code Translator - Text to Morse & Morse to Text | NexTool</title>
<meta name="description" content="Free Morse Code Translator with real-time bidirectional conversion, audio playback with adjustable speed and frequency, visual dot/dash display, and a full reference chart. No signup required.">
<meta name="keywords" content="morse code translator, text to morse, morse to text, morse code audio, morse code converter, NexTool">
<link rel="canonical" href="https://nextool.app/free-tools/morse-code.html">
<meta property="og:title" content="Morse Code Translator - Text to Morse & Morse to Text | NexTool">
<meta property="og:description" content="Free Morse Code Translator with real-time conversion, audio playback, speed and frequency controls, and a full reference chart.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://nextool.app/free-tools/morse-code.html">
<meta property="og:image" content="https://nextool.app/free-tools/og/morse-code.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Morse Code Translator - Text to Morse & Morse to Text | NexTool">
<meta name="twitter:description" content="Free Morse Code Translator with real-time conversion, audio playback, and full reference chart.">
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"BreadcrumbList",
  "itemListElement":[
    {"@type":"ListItem","position":1,"name":"Home","item":"https://nextool.app/"},
    {"@type":"ListItem","position":2,"name":"Free Tools","item":"https://nextool.app/free-tools/"},
    {"@type":"ListItem","position":3,"name":"Morse Code Translator","item":"https://nextool.app/free-tools/morse-code.html"}
  ]
}
</script>
<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"SoftwareApplication",
  "name":"Morse Code Translator",
  "applicationCategory":"UtilitiesApplication",
  "operatingSystem":"Web",
  "description":"Free Morse Code Translator with real-time bidirectional conversion, audio playback, and reference chart.",
  "url":"https://nextool.app/free-tools/morse-code.html",
  "offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},
  "author":{"@type":"Organization","name":"NexTool","url":"https://nextool.app"}
}
</script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--bg:#050508;--surface:#111118;--surface2:#1a1a24;--surface3:#22222f;--primary:#6366f1;--accent:#a855f7;--pink:#ec4899;--text:#e2e8f0;--text-dim:#94a3b8;--text-muted:#64748b;--gradient:linear-gradient(135deg,#6366f1,#a855f7,#ec4899);--green:#22c55e;--red:#ef4444;--yellow:#eab308;--radius:12px;--radius-lg:20px}
html{scroll-behavior:smooth}
body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);line-height:1.6;-webkit-font-smoothing:antialiased;min-height:100vh}
.nav{position:fixed;top:0;left:0;right:0;z-index:1000;padding:0 2rem;height:64px;display:flex;align-items:center;justify-content:space-between;background:rgba(5,5,8,.75);backdrop-filter:blur(20px);border-bottom:1px solid rgba(99,102,241,.1)}
.nav-logo{display:flex;align-items:center;gap:.5rem;font-weight:800;font-size:1.15rem;text-decoration:none;color:var(--text)}
.nav-logo .ico{width:28px;height:28px;border-radius:7px;background:var(--gradient);display:flex;align-items:center;justify-content:center;font-size:.75rem;font-weight:900;color:#fff}
.nav-logo span{background:var(--gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.nav-links{display:flex;gap:1.5rem;align-items:center}
.nav-links a{color:var(--text-dim);font-size:.85rem;font-weight:500;text-decoration:none;transition:color .2s}
.nav-links a:hover{color:var(--text)}
.breadcrumb{max-width:800px;margin:0 auto;padding:80px 1.5rem 0;font-size:.8rem}
.breadcrumb a{color:var(--text-muted);text-decoration:none;transition:color .2s}
.breadcrumb a:hover{color:var(--text)}
.breadcrumb span{color:var(--text-muted);margin:0 .4rem}
.breadcrumb .current{color:var(--text-dim)}
.main{max-width:800px;margin:0 auto;padding:1rem 1.5rem 3rem}
.tool-header{text-align:center;margin-bottom:2.5rem}
.tool-badge{display:inline-flex;align-items:center;gap:.4rem;padding:.3rem .8rem;border-radius:100px;background:rgba(99,102,241,.1);border:1px solid rgba(99,102,241,.15);font-size:.72rem;font-weight:600;color:var(--primary);text-transform:uppercase;letter-spacing:.06em;margin-bottom:1rem}
.tool-header h1{font-size:clamp(1.75rem,4vw,2.5rem);font-weight:800;margin-bottom:.5rem}
.tool-header h1 .gr{background:var(--gradient);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.tool-header p{color:var(--text-dim);font-size:1rem;max-width:560px;margin:0 auto}

.card{background:var(--surface);border:1px solid rgba(99,102,241,.1);border-radius:var(--radius-lg);padding:2rem;position:relative;overflow:hidden;margin-bottom:1.5rem}
.card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:var(--gradient)}
.card h3{font-size:1rem;font-weight:700;margin-bottom:1.25rem;display:flex;align-items:center;gap:.5rem}

.mode-tabs{display:flex;justify-content:center;gap:.5rem;margin-bottom:1.5rem}
.mode-tab{padding:.5rem 1.25rem;border-radius:8px;border:1px solid var(--surface3);background:transparent;color:var(--text-dim);font-size:.85rem;font-weight:600;cursor:pointer;font-family:'Inter',sans-serif;transition:all .2s}
.mode-tab.active{background:var(--primary);color:#fff;border-color:var(--primary)}
.mode-tab:hover:not(.active){border-color:var(--primary);color:var(--text)}

.text-area{width:100%;min-height:120px;padding:1rem;border-radius:var(--radius);border:1px solid var(--surface3);background:var(--surface2);color:var(--text);font-family:'JetBrains Mono',monospace;font-size:.9rem;resize:vertical;outline:none;transition:border-color .2s;line-height:1.7}
.text-area:focus{border-color:var(--primary)}
.text-area::placeholder{color:var(--text-muted)}
.text-area[readonly]{opacity:.8;cursor:default}

.label-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem}
.label-row label{font-size:.85rem;font-weight:600;color:var(--text-dim)}
.copy-btn{padding:.3rem .7rem;border-radius:6px;border:1px solid var(--surface3);background:var(--surface2);color:var(--text-dim);font-size:.75rem;font-weight:600;cursor:pointer;font-family:'Inter',sans-serif;transition:all .2s}
.copy-btn:hover{border-color:var(--primary);color:var(--text)}
.copy-btn.copied{border-color:var(--green);color:var(--green)}

.visual-display{min-height:60px;padding:1rem;background:var(--surface2);border-radius:var(--radius);border:1px solid var(--surface3);font-family:'JetBrains Mono',monospace;font-size:1.5rem;letter-spacing:.2rem;line-height:2;word-break:break-all;margin-top:1rem;display:flex;flex-wrap:wrap;gap:.15rem;align-items:center}
.dot,.dash{display:inline-block;border-radius:50px;transition:background .15s,box-shadow .15s}
.dot{width:10px;height:10px;background:var(--primary)}
.dash{width:28px;height:10px;background:var(--accent)}
.char-space{width:14px;height:10px}
.word-space{width:28px;height:10px}
.dot.active,.dash.active{background:var(--pink);box-shadow:0 0 12px rgba(236,72,153,.6)}

.playback-controls{display:flex;align-items:center;gap:1rem;margin-top:1.25rem;flex-wrap:wrap}
.play-btn{padding:.55rem 1.5rem;border-radius:8px;border:none;background:var(--gradient);color:#fff;font-weight:700;font-size:.9rem;cursor:pointer;font-family:'Inter',sans-serif;transition:transform .2s,box-shadow .2s;display:flex;align-items:center;gap:.4rem}
.play-btn:hover{transform:translateY(-2px);box-shadow:0 4px 20px rgba(99,102,241,.4)}
.play-btn:disabled{opacity:.5;cursor:not-allowed;transform:none;box-shadow:none}
.play-btn svg{width:18px;height:18px;fill:currentColor}
.stop-btn{padding:.55rem 1.2rem;border-radius:8px;border:1px solid var(--red);background:transparent;color:var(--red);font-weight:700;font-size:.9rem;cursor:pointer;font-family:'Inter',sans-serif;transition:all .2s}
.stop-btn:hover{background:rgba(239,68,68,.1)}

.slider-group{display:flex;align-items:center;gap:.6rem;font-size:.8rem;color:var(--text-dim);font-weight:500}
.slider-group input[type=range]{-webkit-appearance:none;width:100px;height:6px;background:var(--surface3);border-radius:3px;outline:none}
.slider-group input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:16px;height:16px;border-radius:50%;background:var(--primary);cursor:pointer}
.slider-group .val{font-family:'JetBrains Mono',monospace;min-width:48px;text-align:right}

.ref-chart{display:grid;grid-template-columns:repeat(auto-fill,minmax(110px,1fr));gap:.5rem;margin-top:1rem}
.ref-item{display:flex;align-items:center;gap:.5rem;padding:.4rem .6rem;background:var(--surface2);border-radius:6px;border:1px solid var(--surface3);font-family:'JetBrains Mono',monospace;font-size:.8rem}
.ref-char{font-weight:700;color:var(--text);min-width:18px;text-align:center}
.ref-code{color:var(--text-dim);letter-spacing:.1rem}

.cta-section{text-align:center;padding:3rem 0;margin-top:1rem}
.cta-section h2{font-size:1.5rem;font-weight:800;margin-bottom:.5rem}
.cta-section p{color:var(--text-dim);margin-bottom:1.5rem;font-size:.95rem}
.cta-btn{display:inline-block;padding:.7rem 2rem;border-radius:var(--radius);background:var(--gradient);color:#fff;font-weight:700;font-size:.95rem;text-decoration:none;transition:transform .2s,box-shadow .2s}
.cta-btn:hover{transform:translateY(-2px);box-shadow:0 4px 20px rgba(99,102,241,.4)}

.footer{border-top:1px solid rgba(99,102,241,.06);padding:2rem 0;text-align:center}
.footer-inner{max-width:800px;margin:0 auto;padding:0 1.5rem;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}
.footer-logo{display:flex;align-items:center;gap:.4rem;font-weight:700;font-size:.9rem}
.footer-logo .ico{width:20px;height:20px;border-radius:5px;background:var(--gradient);display:flex;align-items:center;justify-content:center;font-size:.5rem;font-weight:900;color:#fff}
.footer-logo span{color:var(--text-dim)}
.footer-links{display:flex;gap:1.25rem}
.footer-links a{color:var(--text-muted);font-size:.8rem;text-decoration:none;transition:color .2s}
.footer-links a:hover{color:var(--text)}
.footer-copy{color:var(--text-muted);font-size:.75rem;width:100%;text-align:center;margin-top:.5rem}

@media(max-width:600px){
  .main{padding:1rem 1rem 2rem}
  .breadcrumb{padding:80px 1rem 0}
  .nav-links{display:none}
  .playback-controls{flex-direction:column;align-items:flex-start}
  .slider-group{width:100%}
  .slider-group input[type=range]{flex:1}
  .ref-chart{grid-template-columns:repeat(auto-fill,minmax(90px,1fr))}
  .footer-inner{flex-direction:column;text-align:center}
}
</style>
</head>
<body>
<nav class="nav">
  <a class="nav-logo" href="/"><div class="ico">N</div><span>NexTool</span></a>
  <div class="nav-links">
    <a href="/">Home</a>
    <a href="/free-tools/">Free Tools</a>
    <a href="/blog/">Blog</a>
    <a href="/pro.html">Pro</a>
  </div>
</nav>

<div class="breadcrumb">
  <a href="/">Home</a><span>/</span><a href="/free-tools/">Free Tools</a><span>/</span><span class="current">Morse Code Translator</span>
</div>

<div class="main">
  <div class="tool-header">
    <div class="tool-badge">Free Tool</div>
    <h1><span class="gr">Morse Code</span> Translator</h1>
    <p>Convert text to Morse code and back in real time. Listen to the audio playback with adjustable speed and frequency.</p>
  </div>

  <div class="card">
    <div class="mode-tabs">
      <button class="mode-tab active" id="tabTextToMorse" onclick="setMode('text')">Text to Morse</button>
      <button class="mode-tab" id="tabMorseToText" onclick="setMode('morse')">Morse to Text</button>
    </div>

    <div class="label-row">
      <label id="inputLabel">Text</label>
      <button class="copy-btn" id="copyInput" onclick="copyField('input')">Copy</button>
    </div>
    <textarea class="text-area" id="inputArea" placeholder="Type your text here..." oninput="convert()"></textarea>

    <div class="label-row" style="margin-top:1.25rem">
      <label id="outputLabel">Morse Code</label>
      <button class="copy-btn" id="copyOutput" onclick="copyField('output')">Copy</button>
    </div>
    <textarea class="text-area" id="outputArea" readonly placeholder="Conversion appears here..."></textarea>

    <div class="visual-display" id="visualDisplay"></div>

    <div class="playback-controls">
      <button class="play-btn" id="playBtn" onclick="startPlayback()">
        <svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg> Play
      </button>
      <button class="stop-btn" id="stopBtn" onclick="stopPlayback()" style="display:none">Stop</button>
      <div class="slider-group">
        <span>Speed</span>
        <input type="range" id="wpmSlider" min="5" max="30" value="15" oninput="updateWpm()">
        <span class="val" id="wpmVal">15 WPM</span>
      </div>
      <div class="slider-group">
        <span>Freq</span>
        <input type="range" id="freqSlider" min="400" max="1000" value="700" step="25" oninput="updateFreq()">
        <span class="val" id="freqVal">700 Hz</span>
      </div>
    </div>
  </div>

  <div class="card">
    <h3>
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18"><path d="M4 6h16M4 12h16M4 18h7"/></svg>
      Reference Chart
    </h3>
    <div class="ref-chart" id="refChart"></div>
  </div>

  <div class="cta-section">
    <h2>Explore More Free Tools</h2>
    <p>Explore 250+ Free Tools at NexTool — your all-in-one developer toolkit.</p>
    <a href="/free-tools/" class="cta-btn">Browse All Tools</a>
  </div>
</div>


<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/box-shadow-generator.html" style="color:var(--primary);text-decoration:none">CSS Box Shadow Generator</a> · <a href="/free-tools/emoji-picker.html" style="color:var(--primary);text-decoration:none">Emoji Picker & Search</a> · <a href="/free-tools/meta-tag-generator.html" style="color:var(--primary);text-decoration:none">Meta Tag Generator</a> · <a href="/free-tools/color-palette.html" style="color:var(--primary);text-decoration:none">Free Color Palette Generator</a> · <a href="/free-tools/css-animation-generator.html" style="color:var(--primary);text-decoration:none">CSS Animation Generator - Free Tool</a></p>
</div>

<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/favicon-generator.html" style="color:var(--primary);text-decoration:none">Favicon Generator</a> · <a href="/free-tools/git-diff-viewer.html" style="color:var(--primary);text-decoration:none">Free Git Diff Viewer</a> · <a href="/free-tools/http-status-codes.html" style="color:var(--primary);text-decoration:none">HTTP Status Code Reference</a></p>
</div>

<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/color-palette-generator.html" style="color:var(--primary);text-decoration:none">Free Color Palette Generator</a> · <a href="/free-tools/icon-generator.html" style="color:var(--primary);text-decoration:none">Free Icon Generator</a> · <a href="/free-tools/json-to-yaml-converter.html" style="color:var(--primary);text-decoration:none">Free JSON to YAML Converter</a></p>
</div>

<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/json-to-yaml.html" style="color:var(--primary);text-decoration:none">Free JSON to YAML Converter</a> · <a href="/free-tools/yaml-to-json.html" style="color:var(--primary);text-decoration:none">YAML to JSON Converter</a> · <a href="/free-tools/css-gradient-generator.html" style="color:var(--primary);text-decoration:none">Free CSS Gradient Generator</a></p>
</div>
<footer class="footer">
  <div class="footer-inner">
    <div class="footer-logo"><div class="ico">N</div><span>NexTool</span></div>
    <div class="footer-links">
      <a href="/free-tools/">Free Tools</a>
      <a href="/blog/">Blog</a>
      <a href="/pro.html">Pro</a>
      <a href="/privacy.html">Privacy</a>
      <a href="/terms.html">Terms</a>
    </div>
    <div class="footer-copy">&copy; 2026 NexTool. Free forever.</div>
  </div>
</footer>

<script>
const MORSE_MAP = {
  'A':'.-','B':'-...','C':'-.-.','D':'-..','E':'.','F':'..-.','G':'--.','H':'....','I':'..','J':'.---',
  'K':'-.-','L':'.-..','M':'--','N':'-.','O':'---','P':'.--.','Q':'--.-','R':'.-.','S':'...','T':'-',
  'U':'..-','V':'...-','W':'.--','X':'-..-','Y':'-.--','Z':'--..',
  '0':'-----','1':'.----','2':'..---','3':'...--','4':'....-','5':'.....',
  '6':'-....','7':'--...','8':'---..','9':'----.',
  '.':'.-.-.-',',':'--..--','?':'..--..','!':'-.-.--','\'':'.----.','\"':'.-..-.','(':'-.--.',')':'-.--.-',
  '&':'.-...',':':'---...',';':'-.-.-.','=':'-...-','+':'.-.-.','-':'-....-','/':'-..-.',
  '@':'.--.-.','_':'..--.-',' ':' '
};
const REVERSE_MAP = {};
for (const k in MORSE_MAP) { if (k !== ' ') REVERSE_MAP[MORSE_MAP[k]] = k; }

let mode = 'text';
let wpm = 15;
let freq = 700;
let audioCtx = null;
let playbackActive = false;
let playbackTimeout = null;

function setMode(m) {
  mode = m;
  document.getElementById('tabTextToMorse').classList.toggle('active', m === 'text');
  document.getElementById('tabMorseToText').classList.toggle('active', m === 'morse');
  document.getElementById('inputLabel').textContent = m === 'text' ? 'Text' : 'Morse Code';
  document.getElementById('outputLabel').textContent = m === 'text' ? 'Morse Code' : 'Text';
  document.getElementById('inputArea').placeholder = m === 'text' ? 'Type your text here...' : 'Type morse code (use . and -, separate letters with spaces, words with /)...';
  document.getElementById('inputArea').value = '';
  document.getElementById('outputArea').value = '';
  document.getElementById('visualDisplay').innerHTML = '';
}

function textToMorse(text) {
  return text.toUpperCase().split('').map(c => MORSE_MAP[c] || '').filter(Boolean).join(' ').replace(/  +/g, ' / ');
}

function morseToText(morse) {
  return morse.split(' / ').map(word =>
    word.split(' ').map(code => REVERSE_MAP[code.trim()] || '').join('')
  ).join(' ');
}

function convert() {
  const input = document.getElementById('inputArea').value;
  let output = '';
  if (mode === 'text') {
    output = textToMorse(input);
  } else {
    output = morseToText(input);
  }
  document.getElementById('outputArea').value = output;
  renderVisual(mode === 'text' ? output : textToMorse(output));
}

function renderVisual(morse) {
  const container = document.getElementById('visualDisplay');
  container.innerHTML = '';
  if (!morse.trim()) return;
  const parts = morse.split('');
  let i = 0;
  while (i < parts.length) {
    if (parts[i] === '.') {
      const el = document.createElement('span');
      el.className = 'dot';
      container.appendChild(el);
    } else if (parts[i] === '-') {
      const el = document.createElement('span');
      el.className = 'dash';
      container.appendChild(el);
    } else if (parts[i] === '/' || (parts[i] === ' ' && parts[i+1] === '/' && parts[i+2] === ' ')) {
      const el = document.createElement('span');
      el.className = 'word-space';
      container.appendChild(el);
      if (parts[i] === ' ') i += 2;
    } else if (parts[i] === ' ') {
      const el = document.createElement('span');
      el.className = 'char-space';
      container.appendChild(el);
    }
    i++;
  }
}

function copyField(which) {
  const el = document.getElementById(which === 'input' ? 'inputArea' : 'outputArea');
  const btn = document.getElementById(which === 'input' ? 'copyInput' : 'copyOutput');
  navigator.clipboard.writeText(el.value).then(() => {
    btn.textContent = 'Copied!';
    btn.classList.add('copied');
    setTimeout(() => { btn.textContent = 'Copy'; btn.classList.remove('copied'); }, 1500);
  });
}

function updateWpm() {
  wpm = +document.getElementById('wpmSlider').value;
  document.getElementById('wpmVal').textContent = wpm + ' WPM';
}

function updateFreq() {
  freq = +document.getElementById('freqSlider').value;
  document.getElementById('freqVal').textContent = freq + ' Hz';
}

function getTimings() {
  const dotDur = 1.2 / wpm;
  return { dot: dotDur, dash: dotDur * 3, symbolGap: dotDur, charGap: dotDur * 3, wordGap: dotDur * 7 };
}

function startPlayback() {
  const morseStr = mode === 'text' ? document.getElementById('outputArea').value : textToMorse(document.getElementById('outputArea').value);
  if (!morseStr.trim()) return;
  if (playbackActive) stopPlayback();

  if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  playbackActive = true;
  document.getElementById('playBtn').style.display = 'none';
  document.getElementById('stopBtn').style.display = '';

  const timing = getTimings();
  const symbols = [];
  const visualEls = document.getElementById('visualDisplay').children;

  let viIdx = 0;
  const chars = morseStr.split('');
  for (let i = 0; i < chars.length; i++) {
    if (chars[i] === '.' || chars[i] === '-') {
      symbols.push({ type: chars[i], viIdx: viIdx++ });
    } else if (chars[i] === ' ' && chars[i+1] === '/' && chars[i+2] === ' ') {
      symbols.push({ type: 'wordgap', viIdx: viIdx++ });
      i += 2;
    } else if (chars[i] === '/') {
      symbols.push({ type: 'wordgap', viIdx: viIdx++ });
    } else if (chars[i] === ' ') {
      symbols.push({ type: 'chargap', viIdx: viIdx++ });
    }
  }

  let idx = 0;
  function playNext() {
    if (!playbackActive || idx >= symbols.length) {
      stopPlayback();
      return;
    }
    const s = symbols[idx];
    const el = visualEls[s.viIdx];

    if (s.type === '.' || s.type === '-') {
      const dur = s.type === '.' ? timing.dot : timing.dash;
      if (el) el.classList.add('active');
      playTone(dur);
      playbackTimeout = setTimeout(() => {
        if (el) el.classList.remove('active');
        idx++;
        playbackTimeout = setTimeout(playNext, timing.symbolGap * 1000);
      }, dur * 1000);
    } else if (s.type === 'chargap') {
      idx++;
      playbackTimeout = setTimeout(playNext, timing.charGap * 1000);
    } else if (s.type === 'wordgap') {
      idx++;
      playbackTimeout = setTimeout(playNext, timing.wordGap * 1000);
    } else {
      idx++;
      playNext();
    }
  }
  playNext();
}

function playTone(duration) {
  if (!audioCtx) return;
  const osc = audioCtx.createOscillator();
  const gain = audioCtx.createGain();
  osc.connect(gain);
  gain.connect(audioCtx.destination);
  osc.type = 'sine';
  osc.frequency.value = freq;
  gain.gain.setValueAtTime(0.3, audioCtx.currentTime);
  gain.gain.exponentialRampToValueAtTime(0.001, audioCtx.currentTime + duration);
  osc.start(audioCtx.currentTime);
  osc.stop(audioCtx.currentTime + duration);
}

function stopPlayback() {
  playbackActive = false;
  clearTimeout(playbackTimeout);
  document.getElementById('playBtn').style.display = '';
  document.getElementById('stopBtn').style.display = 'none';
  document.querySelectorAll('.dot.active, .dash.active').forEach(el => el.classList.remove('active'));
}

function buildRefChart() {
  const container = document.getElementById('refChart');
  const entries = Object.entries(MORSE_MAP).filter(([k]) => k !== ' ');
  entries.forEach(([char, code]) => {
    const item = document.createElement('div');
    item.className = 'ref-item';
    item.innerHTML = '<span class="ref-char">' + char + '</span><span class="ref-code">' + code + '</span>';
    container.appendChild(item);
  });
}

buildRefChart();
</script>
<script src="/js/revenue.js" defer></script>
<script src="/js/lead-capture.js" defer></script>
<script src="/js/analytics-lite.js" defer></script>
</body>
</html>
