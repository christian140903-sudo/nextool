<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Free API Tester & HTTP Client — Test APIs Online | NexTool</title>
<meta name="description" content="Free online API tester and HTTP client. Send GET, POST, PUT, PATCH, DELETE requests with custom headers, JSON body, and view responses with syntax highlighting.">
<meta name="keywords" content="API tester, REST client, HTTP client, API testing tool, free online API tester, NexTool">
<meta name="robots" content="index, follow">
<meta property="og:title" content="Free API Tester & HTTP Client | NexTool">
<meta property="og:description" content="Test REST APIs in your browser. Custom headers, JSON body, response highlighting, request history. 100% free.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://nextool.app/free-tools/api-tester.html">
<meta property="og:image" content="https://nextool.app/assets/og-default.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<link rel="canonical" href="https://nextool.app/free-tools/api-tester.html">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Free API Tester & HTTP Client | NexTool">
<meta name="twitter:description" content="Test REST APIs instantly in your browser. Free online tool by NexTool.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"SoftwareApplication","name":"NexTool API Tester & HTTP Client","applicationCategory":"DeveloperApplication","operatingSystem":"Web","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"description":"Free online API tester and HTTP client. Send GET, POST, PUT, PATCH, DELETE requests with custom headers and request bodies."}
</script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--bg:#050508;--surface:#111118;--surface2:#1a1a24;--border:#2a2a3a;--text:#e4e4eb;--text2:#9494a8;--primary:#6366f1;--accent:#a855f7;--pink:#ec4899;--green:#22c55e;--red:#ef4444;--cyan:#22d3ee;--yellow:#eab308;--orange:#f97316;--blue:#3b82f6;--radius:12px;--glass:rgba(17,17,24,0.7)}
html{scroll-behavior:smooth}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;min-height:100vh;overflow-x:hidden}
.nav{position:sticky;top:0;z-index:100;background:rgba(5,5,8,0.85);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:0 2rem;height:64px;display:flex;align-items:center;justify-content:space-between}
.nav-logo{font-size:1.4rem;font-weight:800;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-decoration:none}
.nav-links{display:flex;align-items:center;gap:1.5rem}
.nav-links a{color:var(--text2);text-decoration:none;font-size:.875rem;font-weight:500;transition:color .2s}
.nav-links a:hover{color:var(--text)}
.nav-cta{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff!important;padding:.5rem 1.2rem;border-radius:8px;font-weight:600;-webkit-text-fill-color:#fff!important}
.nav-cta:hover{opacity:.9}
.nav-toggle{display:none;background:none;border:none;color:var(--text);font-size:1.5rem;cursor:pointer}
.hero{text-align:center;padding:3rem 1.5rem 2rem;max-width:700px;margin:0 auto}
.hero h1{font-size:2.2rem;font-weight:800;line-height:1.2;margin-bottom:.75rem}
.hero h1 span{background:linear-gradient(135deg,var(--primary),var(--accent),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{color:var(--text2);font-size:1rem}
.tool-container{max-width:1100px;margin:0 auto;padding:0 1.5rem 3rem}
/* Request Bar */
.request-bar{display:flex;gap:.5rem;margin-bottom:1rem;flex-wrap:wrap}
.method-select{background:var(--primary);color:#fff;border:none;padding:.6rem 1rem;border-radius:8px;font-size:.85rem;font-weight:700;cursor:pointer;font-family:inherit;min-width:100px}
.method-select option{background:var(--surface);color:var(--text)}
.url-input{flex:1;min-width:200px;background:var(--surface);border:1px solid var(--border);color:var(--text);padding:.6rem 1rem;border-radius:8px;font-size:.85rem;font-family:'Courier New',monospace;outline:none;transition:border-color .2s}
.url-input:focus{border-color:var(--primary)}
.send-btn{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;border:none;padding:.6rem 1.5rem;border-radius:8px;font-size:.85rem;font-weight:700;cursor:pointer;transition:opacity .2s;font-family:inherit}
.send-btn:hover{opacity:.9}
.send-btn:disabled{opacity:.5;cursor:not-allowed}
/* Tabs */
.tabs{display:flex;gap:0;border-bottom:1px solid var(--border);margin-bottom:1rem}
.tab{padding:.5rem 1rem;color:var(--text2);font-size:.8rem;font-weight:600;cursor:pointer;border-bottom:2px solid transparent;transition:all .2s;background:none;border-top:none;border-left:none;border-right:none;font-family:inherit}
.tab:hover{color:var(--text)}
.tab.active{color:var(--primary);border-bottom-color:var(--primary)}
.tab-badge{background:rgba(99,102,241,.2);color:var(--primary);font-size:.7rem;padding:1px 6px;border-radius:10px;margin-left:4px}
.tab-content{display:none}
.tab-content.active{display:block}
/* Panel */
.panel{background:var(--glass);backdrop-filter:blur(16px);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;margin-bottom:1rem}
.panel-header{padding:.6rem 1rem;border-bottom:1px solid var(--border);font-size:.8rem;font-weight:600;color:var(--text2);display:flex;justify-content:space-between;align-items:center;background:rgba(26,26,36,0.5)}
.panel-body{padding:1rem;overflow:auto}
/* Headers editor */
.header-row{display:flex;gap:.5rem;margin-bottom:.5rem;align-items:center}
.header-row input{flex:1;background:var(--surface);border:1px solid var(--border);color:var(--text);padding:.4rem .7rem;border-radius:6px;font-size:.8rem;font-family:'Courier New',monospace;outline:none}
.header-row input:focus{border-color:var(--primary)}
.header-row button{background:none;border:1px solid var(--border);color:var(--red);padding:.3rem .6rem;border-radius:6px;cursor:pointer;font-size:.8rem;transition:all .2s}
.header-row button:hover{background:rgba(239,68,68,.1);border-color:var(--red)}
.add-btn{background:none;border:1px dashed var(--border);color:var(--text2);padding:.4rem 1rem;border-radius:6px;cursor:pointer;font-size:.8rem;transition:all .2s;font-family:inherit;width:100%}
.add-btn:hover{border-color:var(--primary);color:var(--primary)}
/* Body editor */
.body-textarea{width:100%;min-height:180px;background:var(--surface);border:1px solid var(--border);color:var(--text);font-family:'Courier New',monospace;font-size:.85rem;padding:1rem;border-radius:8px;resize:vertical;outline:none;line-height:1.7;tab-size:2}
.body-textarea:focus{border-color:var(--primary)}
.body-type-bar{display:flex;gap:.5rem;margin-bottom:.75rem}
.body-type-btn{background:var(--surface2);border:1px solid var(--border);color:var(--text2);padding:.3rem .7rem;border-radius:6px;font-size:.75rem;cursor:pointer;transition:all .2s;font-family:inherit}
.body-type-btn.active{background:rgba(99,102,241,.15);border-color:var(--primary);color:var(--primary)}
/* Response */
.response-status{display:flex;flex-wrap:wrap;align-items:center;gap:1rem;margin-bottom:.75rem;font-size:.85rem}
.status-badge{padding:.25rem .7rem;border-radius:6px;font-weight:700;font-size:.85rem}
.status-2xx{background:rgba(34,197,94,.15);color:var(--green)}
.status-3xx{background:rgba(99,102,241,.15);color:var(--primary)}
.status-4xx{background:rgba(234,179,8,.15);color:var(--yellow)}
.status-5xx{background:rgba(239,68,68,.15);color:var(--red)}
.status-0{background:rgba(239,68,68,.15);color:var(--red)}
.response-meta{color:var(--text2);font-size:.8rem}
.response-body{font-family:'Courier New',monospace;font-size:.83rem;line-height:1.7;white-space:pre-wrap;word-break:break-all;max-height:500px;overflow:auto}
.response-headers{font-family:'Courier New',monospace;font-size:.83rem;line-height:1.7}
.response-headers .rh-key{color:#c084fc}.response-headers .rh-val{color:#4ade80}
.hl-key{color:#c084fc}.hl-str{color:#4ade80}.hl-num{color:var(--cyan)}.hl-bool{color:var(--yellow)}.hl-null{color:#6b7280}.hl-brace{color:var(--text2)}
/* History */
.history-list{max-height:300px;overflow:auto}
.history-item{display:flex;align-items:center;gap:.7rem;padding:.5rem .7rem;border-bottom:1px solid var(--border);cursor:pointer;transition:background .2s;font-size:.8rem}
.history-item:hover{background:rgba(99,102,241,.06)}
.history-method{font-weight:700;font-size:.75rem;min-width:50px}
.history-method.GET{color:var(--green)}.history-method.POST{color:var(--yellow)}.history-method.PUT{color:var(--blue)}.history-method.PATCH{color:var(--orange)}.history-method.DELETE{color:var(--red)}
.history-url{flex:1;color:var(--text2);overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-family:'Courier New',monospace;font-size:.78rem}
.history-status{font-size:.75rem;font-weight:600}
.history-delete{background:none;border:none;color:var(--text2);cursor:pointer;font-size:.75rem;padding:2px 6px;opacity:.5;transition:opacity .2s}
.history-delete:hover{opacity:1;color:var(--red)}
.history-clear{margin-top:.5rem}
/* curl modal */
.curl-area{width:100%;min-height:120px;background:var(--surface);border:1px solid var(--border);color:var(--text);font-family:'Courier New',monospace;font-size:.83rem;padding:.75rem;border-radius:8px;resize:vertical;outline:none;line-height:1.6}
.curl-area:focus{border-color:var(--primary)}
/* Notice */
.cors-notice{background:rgba(234,179,8,0.08);border:1px solid rgba(234,179,8,0.2);border-radius:8px;padding:.6rem 1rem;font-size:.78rem;color:var(--yellow);margin-bottom:1rem;line-height:1.5}
/* Misc buttons */
.small-btn{background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.35rem .7rem;border-radius:6px;font-size:.75rem;cursor:pointer;transition:all .2s;font-family:inherit}
.small-btn:hover{border-color:var(--primary);background:rgba(99,102,241,.12)}
/* CTA + Footer */
.cta-section{text-align:center;padding:4rem 1.5rem;max-width:700px;margin:0 auto}
.cta-section h2{font-size:1.8rem;font-weight:800;margin-bottom:.75rem}
.cta-section h2 span{background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.cta-section p{color:var(--text2);margin-bottom:1.5rem}
.cta-btn{display:inline-block;background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;padding:.75rem 2rem;border-radius:10px;font-weight:700;text-decoration:none;font-size:1rem;transition:transform .2s,box-shadow .2s}
.cta-btn:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(99,102,241,.3)}
.footer{border-top:1px solid var(--border);padding:3rem 2rem 2rem;max-width:1200px;margin:0 auto}
.footer-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:2rem;margin-bottom:2rem}
.footer-col h4{font-size:.85rem;font-weight:700;margin-bottom:.75rem;color:var(--text)}
.footer-col a{display:block;color:var(--text2);text-decoration:none;font-size:.8rem;margin-bottom:.4rem;transition:color .2s}
.footer-col a:hover{color:var(--primary)}
.footer-bottom{text-align:center;color:var(--text2);font-size:.75rem;padding-top:1.5rem;border-top:1px solid var(--border)}
.fade-in{opacity:0;transform:translateY(20px);transition:opacity .6s,transform .6s}
.fade-in.visible{opacity:1;transform:translateY(0)}
.toast{position:fixed;bottom:2rem;left:50%;transform:translateX(-50%) translateY(80px);background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.6rem 1.2rem;border-radius:10px;font-size:.85rem;font-weight:500;z-index:200;transition:transform .3s;pointer-events:none}
.toast.show{transform:translateX(-50%) translateY(0)}
@media(max-width:768px){
  .request-bar{flex-direction:column}
  .method-select,.url-input,.send-btn{width:100%}
  .nav-links{display:none;position:absolute;top:64px;left:0;right:0;background:var(--bg);border-bottom:1px solid var(--border);flex-direction:column;padding:1rem 2rem;gap:1rem}
  .nav-links.open{display:flex}
  .nav-toggle{display:block}
  .hero h1{font-size:1.6rem}
  .footer-grid{grid-template-columns:1fr}
}
</style>
</head>
<body>

<nav class="nav">
  <a href="/" class="nav-logo">NexTool</a>
  <button class="nav-toggle" onclick="document.querySelector('.nav-links').classList.toggle('open')" aria-label="Menu">&#9776;</button>
  <div class="nav-links">
    <a href="/">Home</a>
    <a href="/free-tools/">Tools</a>
    <a href="/free-tools/">Free Tools</a>
    <a href="/blog/">Blog</a>
    <a href="/pro.html" class="nav-cta">Get Pro — $29</a>
  </div>
</nav>

<section class="hero fade-in">
  <h1>Free <span>API Tester</span> & HTTP Client</h1>
  <p>Send HTTP requests and inspect responses instantly. Supports GET, POST, PUT, PATCH, DELETE with custom headers, JSON body, and cURL import/export. Request history saved locally.</p>
</section>

<div class="tool-container fade-in">
  <div class="cors-notice">This tool runs entirely in your browser. It can only reach APIs that allow CORS (Cross-Origin Resource Sharing). Most public APIs support CORS, but some private APIs may not.</div>

  <div class="request-bar">
    <select class="method-select" id="method">
      <option value="GET">GET</option>
      <option value="POST">POST</option>
      <option value="PUT">PUT</option>
      <option value="PATCH">PATCH</option>
      <option value="DELETE">DELETE</option>
    </select>
    <input type="text" class="url-input" id="urlInput" placeholder="https://jsonplaceholder.typicode.com/posts/1" value="https://jsonplaceholder.typicode.com/posts/1" spellcheck="false">
    <button class="send-btn" id="sendBtn" onclick="sendRequest()">Send</button>
  </div>

  <!-- Request tabs -->
  <div class="tabs" id="reqTabs">
    <button class="tab active" data-tab="headers" onclick="switchTab('req', 'headers')">Headers <span class="tab-badge" id="headerCount">1</span></button>
    <button class="tab" data-tab="body" onclick="switchTab('req', 'body')">Body</button>
    <button class="tab" data-tab="curl" onclick="switchTab('req', 'curl')">cURL</button>
    <button class="tab" data-tab="history" onclick="switchTab('req', 'history')">History <span class="tab-badge" id="historyCount">0</span></button>
  </div>

  <!-- Headers tab -->
  <div class="tab-content active" id="tab-headers">
    <div id="headersEditor">
      <div class="header-row" data-idx="0">
        <input type="text" placeholder="Key" value="Content-Type" class="hdr-key">
        <input type="text" placeholder="Value" value="application/json" class="hdr-val">
        <button onclick="removeHeader(this)">&times;</button>
      </div>
    </div>
    <button class="add-btn" onclick="addHeader()">+ Add Header</button>
  </div>

  <!-- Body tab -->
  <div class="tab-content" id="tab-body">
    <div class="body-type-bar">
      <button class="body-type-btn active" data-type="json" onclick="setBodyType('json')">JSON</button>
      <button class="body-type-btn" data-type="text" onclick="setBodyType('text')">Raw Text</button>
      <button class="body-type-btn" data-type="form" onclick="setBodyType('form')">Form Data</button>
    </div>
    <textarea class="body-textarea" id="bodyInput" placeholder='{"key": "value"}' spellcheck="false"></textarea>
  </div>

  <!-- cURL tab -->
  <div class="tab-content" id="tab-curl">
    <div style="margin-bottom:.75rem;display:flex;gap:.5rem;flex-wrap:wrap">
      <button class="small-btn" onclick="importCurl()">Import cURL</button>
      <button class="small-btn" onclick="exportCurl()">Export cURL</button>
      <button class="small-btn" onclick="copyCurl()">Copy cURL</button>
    </div>
    <textarea class="curl-area" id="curlInput" placeholder="Paste a cURL command here to import, or click Export to generate one from current settings..." spellcheck="false"></textarea>
  </div>

  <!-- History tab -->
  <div class="tab-content" id="tab-history">
    <div class="history-list" id="historyList"></div>
    <button class="add-btn history-clear" onclick="clearHistory()">Clear History</button>
  </div>

  <!-- Response -->
  <div class="panel" id="responsePanel" style="display:none">
    <div class="panel-header"><span>Response</span><span id="responseTime"></span></div>
    <div class="panel-body">
      <div class="response-status" id="responseStatus"></div>
      <div class="tabs" id="resTabs">
        <button class="tab active" data-tab="res-body" onclick="switchTab('res', 'res-body')">Body</button>
        <button class="tab" data-tab="res-headers" onclick="switchTab('res', 'res-headers')">Headers</button>
      </div>
      <div class="tab-content active" id="tab-res-body">
        <div class="response-body" id="responseBody"></div>
      </div>
      <div class="tab-content" id="tab-res-headers">
        <div class="response-headers" id="responseHeaders"></div>
      </div>
    </div>
  </div>
</div>

<section class="cta-section fade-in">
  <h2>Need something <span>more powerful</span>?</h2>
  <p>Let us build it for you. Custom APIs, dashboards, automations &mdash; whatever you need.</p>
  <a href="/#contact" class="cta-btn">Start a Project &rarr;</a>
</section>

<section style="max-width:900px;margin:40px auto;padding:0 24px;">
<div style="background:linear-gradient(135deg,rgba(99,102,241,0.1),rgba(168,85,247,0.08));border:1px solid rgba(99,102,241,0.15);border-radius:20px;padding:32px 28px;text-align:center;">
<div style="font-size:13px;color:#818cf8;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Founding Member</div>
<h3 style="font-size:22px;font-weight:800;color:#fff;margin:0 0 8px;">Get NexTool Pro</h3>
<p style="color:#94a3b8;font-size:14px;margin:0 auto 20px;max-width:500px;">No banners, clean output, enhanced features on all 250+ tools. One-time payment.</p>
<div style="display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap;">
<a href="/pro.html" style="display:inline-block;padding:12px 28px;background:linear-gradient(135deg,#6366f1,#a855f7,#ec4899);color:#fff;border-radius:10px;font-weight:700;font-size:15px;text-decoration:none;">$29 — Get Pro</a>
<a href="/free-tools/" style="color:#94a3b8;font-size:14px;text-decoration:none;">Browse 250+ Free Tools &rarr;</a>
</div>
</div>
</section>


<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/box-shadow-generator.html" style="color:var(--primary);text-decoration:none">CSS Box Shadow Generator</a> · <a href="/free-tools/api-request-builder.html" style="color:var(--primary);text-decoration:none">Free API Request Builder</a> · <a href="/free-tools/emoji-picker.html" style="color:var(--primary);text-decoration:none">Emoji Picker & Search</a></p>
</div>
<footer class="footer fade-in">
  <div class="footer-grid">
    <div class="footer-col">
      <h4>Products</h4>
      <a href="/free-tools/">250+ Free Tools</a>
      <a href="/pro.html">NexTool Pro</a>
      <a href="/workspace.html">Workspace</a>
    </div>
    <div class="footer-col">
      <h4>Explore</h4>
      <a href="/free-tools/">Free Tools</a><a href="/blog/">Blog</a><a href="/pro.html">FAQ</a><a href="/pro.html">Pro — $29</a>
    </div>
    <div class="footer-col">
      <h4>Ecosystem</h4>
      <a href="/">NexTool Home</a><a href="/#contact">Contact</a><a href="https://github.com/christian140903-sudo/nextool" target="_blank">GitHub</a>
    </div>
  </div>
  <div class="footer-bottom">&copy; 2026 NexTool. AI-powered tools for everyone.</div>
</footer>

<div class="toast" id="toast"></div>

<script>
/* ========== State ========== */
let bodyType = 'json';
let history = [];
const HISTORY_KEY = 'ntool_api_history';

// Load history
try { history = JSON.parse(localStorage.getItem(HISTORY_KEY) || '[]'); } catch(e) { history = []; }
renderHistory();

/* ========== Tabs ========== */
function switchTab(group, tabId) {
  const prefix = group === 'req' ? 'tab-' : 'tab-';
  const tabsEl = group === 'req' ? document.getElementById('reqTabs') : document.getElementById('resTabs');
  tabsEl.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  tabsEl.querySelector('[data-tab="' + (group === 'req' ? tabId : tabId) + '"]').classList.add('active');
  // Hide all tab content for this group
  const allTabs = group === 'req' ? ['headers', 'body', 'curl', 'history'] : ['res-body', 'res-headers'];
  allTabs.forEach(id => {
    const el = document.getElementById('tab-' + id);
    if (el) el.classList.toggle('active', id === tabId);
  });
}

/* ========== Headers ========== */
function addHeader() {
  const editor = document.getElementById('headersEditor');
  const row = document.createElement('div');
  row.className = 'header-row';
  row.innerHTML = '<input type="text" placeholder="Key" class="hdr-key"><input type="text" placeholder="Value" class="hdr-val"><button onclick="removeHeader(this)">&times;</button>';
  editor.appendChild(row);
  updateHeaderCount();
}

function removeHeader(btn) {
  btn.parentElement.remove();
  updateHeaderCount();
}

function getHeaders() {
  const headers = {};
  document.querySelectorAll('.header-row').forEach(row => {
    const key = row.querySelector('.hdr-key').value.trim();
    const val = row.querySelector('.hdr-val').value.trim();
    if (key) headers[key] = val;
  });
  return headers;
}

function updateHeaderCount() {
  const count = document.querySelectorAll('.header-row').length;
  document.getElementById('headerCount').textContent = count;
}

/* ========== Body Type ========== */
function setBodyType(type) {
  bodyType = type;
  document.querySelectorAll('.body-type-btn').forEach(b => b.classList.toggle('active', b.dataset.type === type));
  const textarea = document.getElementById('bodyInput');
  if (type === 'json') textarea.placeholder = '{"key": "value"}';
  else if (type === 'form') textarea.placeholder = 'key1=value1&key2=value2';
  else textarea.placeholder = 'Raw text body...';
}

/* ========== Send Request ========== */
async function sendRequest() {
  const method = document.getElementById('method').value;
  const url = document.getElementById('urlInput').value.trim();
  if (!url) { showToast('Please enter a URL'); return; }

  const sendBtn = document.getElementById('sendBtn');
  sendBtn.disabled = true;
  sendBtn.textContent = 'Sending...';

  const headers = getHeaders();
  const body = document.getElementById('bodyInput').value.trim();
  const hasBody = ['POST', 'PUT', 'PATCH'].includes(method) && body;

  const opts = { method, headers, mode: 'cors' };
  if (hasBody) {
    if (bodyType === 'json') {
      opts.body = body;
      if (!headers['Content-Type']) headers['Content-Type'] = 'application/json';
    } else if (bodyType === 'form') {
      opts.body = body;
      if (!headers['Content-Type']) headers['Content-Type'] = 'application/x-www-form-urlencoded';
    } else {
      opts.body = body;
    }
    opts.headers = headers;
  }

  const startTime = performance.now();
  let response, responseText, responseHeaders, status, statusText, elapsed;

  try {
    response = await fetch(url, opts);
    elapsed = Math.round(performance.now() - startTime);
    status = response.status;
    statusText = response.statusText;
    responseText = await response.text();
    responseHeaders = {};
    response.headers.forEach((val, key) => { responseHeaders[key] = val; });
  } catch (err) {
    elapsed = Math.round(performance.now() - startTime);
    status = 0;
    statusText = 'Network Error';
    responseText = 'Error: ' + err.message + '\n\nThis usually means the API does not allow CORS requests from the browser, or the URL is unreachable.';
    responseHeaders = {};
  }

  sendBtn.disabled = false;
  sendBtn.textContent = 'Send';

  // Display response
  showResponse(status, statusText, elapsed, responseText, responseHeaders);

  // Save to history
  addToHistory(method, url, status, elapsed);
}

function showResponse(status, statusText, elapsed, body, headers) {
  const panel = document.getElementById('responsePanel');
  panel.style.display = '';

  // Status badge
  let cls = 'status-0';
  if (status >= 200 && status < 300) cls = 'status-2xx';
  else if (status >= 300 && status < 400) cls = 'status-3xx';
  else if (status >= 400 && status < 500) cls = 'status-4xx';
  else if (status >= 500) cls = 'status-5xx';

  document.getElementById('responseStatus').innerHTML =
    '<span class="status-badge ' + cls + '">' + status + ' ' + esc(statusText) + '</span>' +
    '<span class="response-meta">' + elapsed + 'ms</span>' +
    '<span class="response-meta">' + formatBytes(new Blob([body]).size) + '</span>' +
    '<button class="small-btn" style="margin-left:auto" onclick="copyResponse()">Copy Body</button>';

  document.getElementById('responseTime').textContent = elapsed + 'ms';

  // Try to format as JSON
  let displayBody;
  try {
    const parsed = JSON.parse(body);
    displayBody = syntaxHighlight(JSON.stringify(parsed, null, 2));
  } catch(e) {
    displayBody = esc(body);
  }
  document.getElementById('responseBody').innerHTML = displayBody;

  // Response headers
  let hdrHtml = '';
  for (const [key, val] of Object.entries(headers)) {
    hdrHtml += '<span class="rh-key">' + esc(key) + '</span>: <span class="rh-val">' + esc(val) + '</span>\n';
  }
  document.getElementById('responseHeaders').innerHTML = hdrHtml || '<span style="color:var(--text2)">No headers available</span>';

  // Switch to body tab
  switchTab('res', 'res-body');
}

function copyResponse() {
  const body = document.getElementById('responseBody').textContent;
  navigator.clipboard.writeText(body).then(() => showToast('Response copied'));
}

/* ========== Syntax Highlighting ========== */
function syntaxHighlight(json) {
  return esc(json).replace(/("(\\u[\da-fA-F]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?|\bnull\b|[{}\[\],])/g, match => {
    let cls = 'hl-num';
    if (/^"/.test(match)) cls = /:$/.test(match) ? 'hl-key' : 'hl-str';
    else if (/true|false/.test(match)) cls = 'hl-bool';
    else if (/null/.test(match)) cls = 'hl-null';
    else if (/[{}\[\],]/.test(match)) cls = 'hl-brace';
    return '<span class="' + cls + '">' + match + '</span>';
  });
}

/* ========== cURL ========== */
function exportCurl() {
  const method = document.getElementById('method').value;
  const url = document.getElementById('urlInput').value.trim();
  const headers = getHeaders();
  const body = document.getElementById('bodyInput').value.trim();

  let curl = "curl -X " + method + " '" + url + "'";
  for (const [key, val] of Object.entries(headers)) {
    curl += " \\\n  -H '" + key + ": " + val + "'";
  }
  if (['POST', 'PUT', 'PATCH'].includes(method) && body) {
    curl += " \\\n  -d '" + body.replace(/'/g, "'\\''") + "'";
  }
  document.getElementById('curlInput').value = curl;
}

function importCurl() {
  const curl = document.getElementById('curlInput').value.trim();
  if (!curl) { showToast('Paste a cURL command first'); return; }

  // Parse method
  const methodMatch = curl.match(/-X\s+(\w+)/i);
  if (methodMatch) document.getElementById('method').value = methodMatch[1].toUpperCase();
  else if (/--data|-d\s/.test(curl)) document.getElementById('method').value = 'POST';
  else document.getElementById('method').value = 'GET';

  // Parse URL
  const urlMatch = curl.match(/curl\s+(?:-[^\s]+\s+)*['"]?(https?:\/\/[^\s'"]+)['"]?/i) || curl.match(/['"]?(https?:\/\/[^\s'"]+)['"]?/);
  if (urlMatch) document.getElementById('urlInput').value = urlMatch[1];

  // Parse headers
  const headerRegex = /-H\s+['"]([^'"]+)['"]/gi;
  const headersEditor = document.getElementById('headersEditor');
  headersEditor.innerHTML = '';
  let match;
  while ((match = headerRegex.exec(curl)) !== null) {
    const [key, ...valParts] = match[1].split(':');
    const val = valParts.join(':').trim();
    const row = document.createElement('div');
    row.className = 'header-row';
    row.innerHTML = '<input type="text" placeholder="Key" class="hdr-key" value="' + esc(key.trim()) + '"><input type="text" placeholder="Value" class="hdr-val" value="' + esc(val) + '"><button onclick="removeHeader(this)">&times;</button>';
    headersEditor.appendChild(row);
  }
  if (!headersEditor.children.length) addHeader();
  updateHeaderCount();

  // Parse body
  const dataMatch = curl.match(/(?:--data|-d)\s+['"]([^'"]*)['"]/i);
  if (dataMatch) {
    document.getElementById('bodyInput').value = dataMatch[1];
  }

  showToast('cURL imported');
  switchTab('req', 'headers');
}

function copyCurl() {
  exportCurl();
  const curl = document.getElementById('curlInput').value;
  if (!curl) return;
  navigator.clipboard.writeText(curl).then(() => showToast('cURL copied'));
}

/* ========== History ========== */
function addToHistory(method, url, status, time) {
  history.unshift({ method, url, status, time, ts: Date.now() });
  if (history.length > 50) history = history.slice(0, 50);
  try { localStorage.setItem(HISTORY_KEY, JSON.stringify(history)); } catch(e) {}
  renderHistory();
}

function renderHistory() {
  const list = document.getElementById('historyList');
  if (!history.length) {
    list.innerHTML = '<div style="padding:1rem;color:var(--text2);font-size:.85rem;text-align:center">No requests yet</div>';
  } else {
    list.innerHTML = history.map((h, i) => {
      const statusCls = h.status >= 200 && h.status < 300 ? 'color:var(--green)' :
                         h.status >= 400 ? 'color:var(--red)' : 'color:var(--text2)';
      return '<div class="history-item" onclick="loadHistoryItem(' + i + ')">' +
        '<span class="history-method ' + h.method + '">' + h.method + '</span>' +
        '<span class="history-url">' + esc(h.url) + '</span>' +
        '<span class="history-status" style="' + statusCls + '">' + h.status + '</span>' +
        '<span style="color:var(--text2);font-size:.73rem">' + h.time + 'ms</span>' +
        '<button class="history-delete" onclick="event.stopPropagation();deleteHistoryItem(' + i + ')" title="Delete">&times;</button>' +
        '</div>';
    }).join('');
  }
  document.getElementById('historyCount').textContent = history.length;
}

function loadHistoryItem(idx) {
  const h = history[idx];
  if (!h) return;
  document.getElementById('method').value = h.method;
  document.getElementById('urlInput').value = h.url;
  switchTab('req', 'headers');
  showToast('Loaded from history');
}

function deleteHistoryItem(idx) {
  history.splice(idx, 1);
  try { localStorage.setItem(HISTORY_KEY, JSON.stringify(history)); } catch(e) {}
  renderHistory();
}

function clearHistory() {
  history = [];
  try { localStorage.removeItem(HISTORY_KEY); } catch(e) {}
  renderHistory();
  showToast('History cleared');
}

/* ========== Utilities ========== */
function esc(s) { return String(s).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;'); }

function formatBytes(bytes) {
  if (bytes === 0) return '0 B';
  const k = 1024, sizes = ['B', 'KB', 'MB'];
  const i = Math.floor(Math.log(bytes) / Math.log(k));
  return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
}

function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2000);
}

// Enter key sends request
document.getElementById('urlInput').addEventListener('keydown', e => {
  if (e.key === 'Enter') sendRequest();
});

// Fade in
const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('visible'); observer.unobserve(entry.target); }});
}, { threshold: 0.1 });
document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));
</script>
<script src="/js/analytics-lite.js" defer></script>
<script src="/js/revenue.js" defer></script>
<script src="/js/lead-capture.js" defer></script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What is an API tester?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "An API tester is a tool that lets you send HTTP requests (GET, POST, PUT, PATCH, DELETE) to API endpoints and inspect the responses. NexTool's API Tester runs entirely in your browser with custom headers, JSON body support, and request history."
      }
    },
    {
      "@type": "Question",
      "name": "Why do some APIs not work with this tool?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "This tool runs in your browser, so it is subject to CORS (Cross-Origin Resource Sharing) restrictions. APIs that do not send CORS headers will be blocked by the browser. Most public APIs support CORS, but some private APIs may not."
      }
    },
    {
      "@type": "Question",
      "name": "Can I import and export cURL commands?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, you can paste a cURL command to automatically fill in the method, URL, headers, and body. You can also export your current request as a cURL command to use in your terminal."
      }
    },
    {
      "@type": "Question",
      "name": "Is request history saved?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, NexTool's API Tester saves your last 50 requests in your browser's local storage. You can reload any previous request with one click, or clear your history at any time."
      }
    }
  ]
}
</script>
</body>
</html>