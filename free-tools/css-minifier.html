<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
    <link rel="icon" type="image/svg+xml" href="/img/favicon.svg">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Free CSS Minifier Online — Minify & Beautify CSS | ANIMA</title>
<meta name="description" content="Free CSS minifier online. Minify CSS to reduce file size or beautify for readability. Shows compression stats, handles @media and @keyframes. No signup needed.">
<meta name="keywords" content="css minifier, css minifier online free, minify css, css beautifier, css compressor, css optimizer, reduce css file size, css formatter, free online tool">
<meta name="robots" content="index, follow">
<meta property="og:title" content="Free CSS Minifier Online — Minify & Beautify CSS | ANIMA">
<meta property="og:description" content="Minify or beautify CSS instantly. Compression stats, @media/@keyframes support, copy and download. 100% free, 100% client-side.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://nextool.app/free-tools/css-minifier.html">
<meta property="og:image" content="https://nextool.app/img/og-image.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<link rel="canonical" href="https://nextool.app/free-tools/css-minifier.html">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Free CSS Minifier Online — Minify & Beautify CSS | ANIMA">
<meta name="twitter:description" content="Minify or beautify CSS code instantly. Free with compression stats.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"SoftwareApplication","name":"CSS Minifier & Beautifier","applicationCategory":"DeveloperApplication","operatingSystem":"Web","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"description":"Free online CSS minifier and beautifier with compression statistics, file upload, copy, and download. Handles @media queries, @keyframes, and nested rules."}
</script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--bg:#050508;--surface:#111118;--surface2:#1a1a24;--border:#2a2a3a;--text:#e4e4eb;--text2:#9494a8;--primary:#00d4ff;--accent:#a855f7;--pink:#ec4899;--green:#22c55e;--red:#ef4444;--cyan:#22d3ee;--yellow:#eab308;--radius:12px;--glass:rgba(17,17,24,0.7)}
html{scroll-behavior:smooth}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;min-height:100vh;overflow-x:hidden}
.nav{position:sticky;top:0;z-index:100;background:rgba(5,5,8,0.85);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:0 2rem;height:64px;display:flex;align-items:center;justify-content:space-between}
.nav-logo{font-size:1.4rem;font-weight:800;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-decoration:none}
.nav-links{display:flex;align-items:center;gap:1.5rem}
.nav-links a{color:var(--text2);text-decoration:none;font-size:.875rem;font-weight:500;transition:color .2s}
.nav-links a:hover{color:var(--text)}
.nav-cta{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff!important;padding:.5rem 1.2rem;border-radius:8px;font-weight:600;-webkit-text-fill-color:#fff!important}
.nav-cta:hover{opacity:.9}
.nav-toggle{display:none;background:none;border:none;color:var(--text);font-size:1.5rem;cursor:pointer}
.hero{text-align:center;padding:3rem 1.5rem 2rem;max-width:700px;margin:0 auto}
.hero h1{font-size:2.2rem;font-weight:800;line-height:1.2;margin-bottom:.75rem}
.hero h1 span{background:linear-gradient(135deg,var(--primary),var(--accent),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{color:var(--text2);font-size:1rem}
.tool-container{max-width:1200px;margin:0 auto;padding:0 1.5rem 3rem}
.toolbar{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:1rem;align-items:center}
.toolbar button{background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.45rem .9rem;border-radius:8px;font-size:.8rem;font-weight:500;cursor:pointer;transition:all .2s;font-family:inherit}
.toolbar button:hover{border-color:var(--primary);background:rgba(0,212,255,.12)}
.toolbar button.active{background:linear-gradient(135deg,var(--primary),var(--accent));border-color:transparent;color:#fff}
.toolbar .sep{width:1px;height:24px;background:var(--border);margin:0 .25rem}
.options-row{display:flex;flex-wrap:wrap;gap:.75rem;margin-bottom:1rem;align-items:center;padding:.6rem 1rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)}
.opt-label{display:flex;align-items:center;gap:.35rem;font-size:.78rem;color:var(--text2);cursor:pointer;user-select:none}
.opt-label input[type=checkbox]{accent-color:var(--primary);width:15px;height:15px}
.status-bar{display:flex;align-items:center;gap:1rem;margin-bottom:1rem;font-size:.8rem;color:var(--text2);flex-wrap:wrap}
.status-dot{width:8px;height:8px;border-radius:50%;display:inline-block}
.status-dot.valid{background:var(--green)}.status-dot.invalid{background:var(--red)}.status-dot.empty{background:var(--border)}
.panels{display:grid;grid-template-columns:1fr 1fr;gap:1rem;min-height:500px}
.panel{background:var(--glass);backdrop-filter:blur(16px);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;display:flex;flex-direction:column}
.panel-header{padding:.6rem 1rem;border-bottom:1px solid var(--border);font-size:.8rem;font-weight:600;color:var(--text2);display:flex;justify-content:space-between;align-items:center;background:rgba(26,26,36,0.5)}
.panel-body{flex:1;position:relative;overflow:auto}
#cssInput{width:100%;height:100%;min-height:400px;background:transparent;border:none;color:var(--text);font-family:'Courier New',monospace;font-size:.85rem;padding:1rem;resize:none;outline:none;line-height:1.7;tab-size:2}
#cssInput::placeholder{color:var(--text2);opacity:.5}
.output-area{padding:1rem;font-family:'Courier New',monospace;font-size:.85rem;line-height:1.7;white-space:pre-wrap;word-break:break-all;min-height:400px;color:var(--text)}
.stats-bar{display:grid;grid-template-columns:repeat(auto-fit,minmax(130px,1fr));gap:.75rem;margin-top:1rem}
.stat-card{background:var(--surface2);border:1px solid var(--border);border-radius:8px;padding:.6rem .8rem;text-align:center}
.stat-card .label{font-size:.7rem;color:var(--text2);text-transform:uppercase;letter-spacing:.5px;margin-bottom:.2rem}
.stat-card .value{font-size:1.1rem;font-weight:700}
.stat-card .value.green{color:var(--green)}
.stat-card .value.red{color:var(--red)}
.stat-card .value.cyan{color:var(--cyan)}
.stat-card .value.yellow{color:var(--yellow)}
.stat-card .value.pink{color:var(--pink)}
.reduction-visual{margin-top:1rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius);padding:1rem}
.reduction-visual .rv-label{font-size:.72rem;text-transform:uppercase;letter-spacing:.06em;color:var(--text2);margin-bottom:.5rem;font-weight:600}
.rv-track{height:28px;background:var(--surface2);border-radius:6px;overflow:hidden;position:relative}
.rv-bar{height:100%;background:linear-gradient(90deg,var(--primary),var(--accent));border-radius:6px;transition:width .6s ease;display:flex;align-items:center;justify-content:center;font-size:.7rem;font-weight:700;color:#fff;min-width:40px}
.rv-labels{display:flex;justify-content:space-between;margin-top:.4rem;font-size:.72rem;color:var(--text2)}
/* File upload drop zone */
.drop-overlay{display:none;position:absolute;inset:0;background:rgba(0,212,255,.12);border:2px dashed var(--primary);border-radius:var(--radius);z-index:10;align-items:center;justify-content:center;font-size:1rem;font-weight:600;color:var(--primary)}
.drop-overlay.active{display:flex}
.upload-hint{text-align:center;padding:1rem;font-size:.78rem;color:var(--text2)}
.upload-hint label{color:var(--primary);cursor:pointer;font-weight:600;text-decoration:underline}
.upload-hint label:hover{color:var(--accent)}
.cta-section{text-align:center;padding:4rem 1.5rem;max-width:700px;margin:0 auto}
.cta-section h2{font-size:1.8rem;font-weight:800;margin-bottom:.75rem}
.cta-section h2 span{background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.cta-section p{color:var(--text2);margin-bottom:1.5rem}
.cta-btn{display:inline-block;background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;padding:.75rem 2rem;border-radius:10px;font-weight:700;text-decoration:none;font-size:1rem;transition:transform .2s,box-shadow .2s}
.cta-btn:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(0,212,255,.3)}
.footer{border-top:1px solid var(--border);padding:3rem 2rem 2rem;max-width:1200px;margin:0 auto}
.footer-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:2rem;margin-bottom:2rem}
.footer-col h4{font-size:.85rem;font-weight:700;margin-bottom:.75rem;color:var(--text)}
.footer-col a{display:block;color:var(--text2);text-decoration:none;font-size:.8rem;margin-bottom:.4rem;transition:color .2s}
.footer-col a:hover{color:var(--primary)}
.footer-bottom{text-align:center;color:var(--text2);font-size:.75rem;padding-top:1.5rem;border-top:1px solid var(--border)}
.fade-in{opacity:0;transform:translateY(20px);transition:opacity .6s,transform .6s}
.fade-in.visible{opacity:1;transform:translateY(0)}
.toast{position:fixed;bottom:2rem;left:50%;transform:translateX(-50%) translateY(80px);background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.6rem 1.2rem;border-radius:10px;font-size:.85rem;font-weight:500;z-index:200;transition:transform .3s;pointer-events:none}
.toast.show{transform:translateX(-50%) translateY(0)}
@media(max-width:768px){
  .panels{grid-template-columns:1fr}
  .nav-links{display:none;position:absolute;top:64px;left:0;right:0;background:var(--bg);border-bottom:1px solid var(--border);flex-direction:column;padding:1rem 2rem;gap:1rem}
  .nav-links.open{display:flex}
  .nav-toggle{display:block}
  .hero h1{font-size:1.6rem}
  .footer-grid{grid-template-columns:1fr}
  .toolbar{gap:.35rem}
  .stats-bar{grid-template-columns:1fr 1fr}
  .options-row{gap:.5rem}
}
</style>
</head>
<body>

<nav class="nav">
  <a href="/" class="nav-logo">ANIMA</a>
  <button class="nav-toggle" onclick="document.querySelector('.nav-links').classList.toggle('open')" aria-label="Menu">&#9776;</button>
  <div class="nav-links">
    <a href="/">Home</a>
    <a href="/free-tools/">Tools</a>
    <a href="/free-tools/">Free Tools</a>
    <a href="/blog/">Blog</a>
    <a href="https://github.com/christian140903-sudo/nextool" class="nav-cta" target="_blank" rel="noopener">GitHub</a>
  </div>
</nav>

<section class="hero fade-in">
  <h1>Free <span>CSS Minifier</span> &amp; Beautifier</h1>
  <p style="color:#94a3b8;font-size:15px;line-height:1.6;margin-bottom:24px;max-width:700px;margin-left:auto;margin-right:auto;">Minify CSS to reduce file size or beautify for readability. Handles @media queries, @keyframes, vendor prefixes, and nested rules. See compression stats instantly. Paste code or upload a .css file &mdash; everything runs in your browser.</p>
</section>

<div class="tool-container fade-in">
  <div class="toolbar">
    <button onclick="doMinify()" title="Minify CSS">Minify</button>
    <button onclick="doBeautify()" title="Beautify/format CSS">Beautify</button>
    <span class="sep"></span>
    <button onclick="copyOutput()" title="Copy output to clipboard">Copy</button>
    <button onclick="downloadCSS()" title="Download as .css file">Download</button>
    <button onclick="clearAll()" title="Clear input and output">Clear</button>
    <button onclick="loadSample()" title="Load sample CSS">Sample</button>
  </div>

  <div class="options-row">
    <label class="opt-label"><input type="checkbox" id="optComments" checked> Remove comments</label>
    <label class="opt-label"><input type="checkbox" id="optWhitespace" checked> Remove whitespace</label>
    <label class="opt-label"><input type="checkbox" id="optEmptyRules" checked> Remove empty rules</label>
    <label class="opt-label"><input type="checkbox" id="optLastSemicolon" checked> Remove last semicolons</label>
    <label class="opt-label"><input type="checkbox" id="optZeros" checked> Simplify zeros</label>
    <label class="opt-label"><input type="checkbox" id="optColors" checked> Shorten colors</label>
  </div>

  <div class="status-bar">
    <span><span class="status-dot empty" id="statusDot"></span></span>
    <span id="statusText">Paste CSS or upload a file to begin</span>
    <span id="sizeInfo" style="margin-left:auto"></span>
  </div>

  <div class="panels">
    <div class="panel" style="position:relative">
      <div class="panel-header"><span>Input</span><span id="inputInfo"></span></div>
      <div class="panel-body" style="position:relative">
        <textarea id="cssInput" placeholder="Paste your CSS code here...&#10;&#10;Example:&#10;.container {&#10;  max-width: 1200px;&#10;  margin: 0 auto;&#10;  padding: 0px 1.5rem;&#10;}" spellcheck="false"></textarea>
        <div class="drop-overlay" id="dropOverlay">Drop .css file here</div>
      </div>
      <div class="upload-hint">
        Or <label for="fileUpload">upload a .css file</label>
        <input type="file" id="fileUpload" accept=".css,text/css" style="display:none">
      </div>
    </div>
    <div class="panel">
      <div class="panel-header"><span id="outputLabel">Output</span><span id="outputInfo"></span></div>
      <div class="panel-body">
        <div class="output-area" id="cssOutput"></div>
      </div>
    </div>
  </div>

  <div class="stats-bar" id="statsBar" style="display:none">
    <div class="stat-card"><div class="label">Input Size</div><div class="value cyan" id="statInputSize">--</div></div>
    <div class="stat-card"><div class="label">Output Size</div><div class="value green" id="statOutputSize">--</div></div>
    <div class="stat-card"><div class="label">Reduction</div><div class="value green" id="statReduction">--</div></div>
    <div class="stat-card"><div class="label">Input Lines</div><div class="value" id="statInputLines">--</div></div>
    <div class="stat-card"><div class="label">Output Lines</div><div class="value" id="statOutputLines">--</div></div>
    <div class="stat-card"><div class="label">Rules</div><div class="value yellow" id="statRules">--</div></div>
    <div class="stat-card"><div class="label">Properties</div><div class="value" id="statProps">--</div></div>
  </div>

  <div class="reduction-visual" id="reductionVis" style="display:none">
    <div class="rv-label">Size Comparison</div>
    <div class="rv-track">
      <div class="rv-bar" id="rvBar" style="width:100%">100%</div>
    </div>
    <div class="rv-labels">
      <span id="rvLabelOut">Output: --</span>
      <span id="rvLabelIn">Original: --</span>
    </div>
  </div>
</div>

<section class="cta-section fade-in">
  <h2>Need something <span>more powerful</span>?</h2>
  <p>Let us build it for you. Custom APIs, dashboards, automations &mdash; whatever you need.</p>
  <a href="/#contact" class="cta-btn">Start a Project &rarr;</a>
</section>

<section style="max-width:900px;margin:40px auto;padding:0 24px;">
<div style="background:linear-gradient(135deg,rgba(0,212,255,0.1),rgba(168,85,247,0.08));border:1px solid rgba(0,212,255,0.15);border-radius:20px;padding:32px 28px;text-align:center;">
<div style="font-size:13px;color:#818cf8;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Founding Member</div>
<h3 style="font-size:22px;font-weight:800;color:#fff;margin:0 0 8px;">ANIMA on GitHub</h3>
<p style="color:#94a3b8;font-size:14px;margin:0 auto 20px;max-width:500px;">248+ free tools. No signup. Open source. Built by Christian Bucher.</p>
<div style="display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap;">
<a href="/about/" style="display:inline-block;padding:12px 28px;background:linear-gradient(135deg,#00d4ff,#a855f7,#ec4899);color:#fff;border-radius:10px;font-weight:700;font-size:15px;text-decoration:none;">Open Source &mdash; Free Forever</a>
<a href="/free-tools/" style="color:#94a3b8;font-size:14px;text-decoration:none;">Browse 250+ Free Tools &rarr;</a>
</div>
</div>
</section>


<!-- AUTO-LINKED by ANIMA Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/css-formatter.html" style="color:var(--primary);text-decoration:none">CSS Beautifier &amp; Minifier</a> · <a href="/free-tools/box-shadow-generator.html" style="color:var(--primary);text-decoration:none">CSS Box Shadow Generator</a> · <a href="/free-tools/emoji-picker.html" style="color:var(--primary);text-decoration:none">Emoji Picker & Search</a></p>
</div>
<footer class="footer fade-in">
  <div class="footer-grid">
    <div class="footer-col">
      <h4>Products</h4>
      <a href="/free-tools/">250+ Free Tools</a>
      <a href="/about/">About</a>
      <a href="/docs/">Documentation</a>
    </div>
    <div class="footer-col">
      <h4>Explore</h4>
      <a href="/free-tools/">Free Tools</a>
      <a href="/blog/">Blog</a>
      <a href="/about/">FAQ</a>
      <a href="/about/">About</a>
    </div>
    <div class="footer-col">
      <h4>Ecosystem</h4>
      <a href="/">ANIMA Home</a>
      <a href="/#contact">Contact</a>
      <a href="https://github.com/christian140903-sudo/nextool" target="_blank">GitHub</a>
    </div>
  </div>
  <div class="footer-bottom">&copy; 2026 ANIMA. AI-powered tools for everyone.</div>
</footer>

<div class="toast" id="toast"></div>

<script>
const cssInput = document.getElementById('cssInput');
const cssOutput = document.getElementById('cssOutput');
const statusDot = document.getElementById('statusDot');
const statusText = document.getElementById('statusText');
const sizeInfo = document.getElementById('sizeInfo');
const inputInfo = document.getElementById('inputInfo');
const outputInfo = document.getElementById('outputInfo');
const outputLabel = document.getElementById('outputLabel');
let lastOutput = '';

cssInput.addEventListener('input', debounce(autoCheck, 400));
cssInput.addEventListener('input', updateInputInfo);

function debounce(fn, ms) { let t; return (...a) => { clearTimeout(t); t = setTimeout(() => fn(...a), ms); }; }

function updateInputInfo() {
  const v = cssInput.value;
  const lines = v.split('\n').length;
  const chars = v.length;
  inputInfo.textContent = lines + ' lines, ' + chars.toLocaleString() + ' chars';
  sizeInfo.textContent = formatBytes(new Blob([v]).size);
}

function formatBytes(bytes) {
  if (bytes === 0) return '0 B';
  const k = 1024, sizes = ['B', 'KB', 'MB'];
  const i = Math.floor(Math.log(bytes) / Math.log(k));
  return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
}

function autoCheck() {
  const raw = cssInput.value.trim();
  if (!raw) {
    statusDot.className = 'status-dot empty';
    statusText.textContent = 'Paste CSS or upload a file to begin';
    sizeInfo.textContent = '';
    inputInfo.textContent = '';
    return;
  }
  // Basic CSS validation: check for balanced braces
  const opens = (raw.match(/{/g) || []).length;
  const closes = (raw.match(/}/g) || []).length;
  if (opens !== closes) {
    statusDot.className = 'status-dot invalid';
    statusText.textContent = 'Unbalanced braces (' + opens + ' open, ' + closes + ' close)';
  } else {
    statusDot.className = 'status-dot valid';
    statusText.textContent = 'Valid CSS (' + opens + ' rule' + (opens !== 1 ? 's' : '') + ')';
  }
}

/* ===== CSS MINIFIER ===== */
function doMinify() {
  const raw = cssInput.value;
  if (!raw.trim()) { showToast('No CSS to minify'); return; }

  let css = raw;
  const opts = {
    comments: document.getElementById('optComments').checked,
    whitespace: document.getElementById('optWhitespace').checked,
    emptyRules: document.getElementById('optEmptyRules').checked,
    lastSemicolon: document.getElementById('optLastSemicolon').checked,
    zeros: document.getElementById('optZeros').checked,
    colors: document.getElementById('optColors').checked
  };

  // 1. Remove comments (but preserve content inside strings)
  if (opts.comments) {
    css = css.replace(/\/\*[\s\S]*?\*\//g, '');
  }

  // 2. Remove whitespace
  if (opts.whitespace) {
    // Preserve calc() expressions (spaces around + and - are required in calc)
    const calcExprs = [];
    css = css.replace(/calc\((?:[^)(]*|\((?:[^)(]*|\([^)(]*\))*\))*\)/gi, function(m) {
      calcExprs.push(m);
      return '___CALC' + (calcExprs.length - 1) + '___';
    });
    // Collapse all whitespace to single space
    css = css.replace(/\s+/g, ' ');
    // Remove spaces around structural chars
    css = css.replace(/\s*{\s*/g, '{');
    css = css.replace(/\s*}\s*/g, '}');
    css = css.replace(/\s*;\s*/g, ';');
    css = css.replace(/\s*:\s*/g, ':');
    css = css.replace(/\s*,\s*/g, ',');
    // Remove spaces around CSS combinators
    css = css.replace(/\s*>\s*/g, '>');
    css = css.replace(/\s*~\s*/g, '~');
    css = css.replace(/\s*\+\s*/g, '+');
    // Restore calc() expressions
    calcExprs.forEach(function(expr, idx) {
      css = css.replace('___CALC' + idx + '___', expr);
    });
    css = css.trim();
  }

  // 3. Remove empty rules (rules with no declarations)
  if (opts.emptyRules) {
    // Handle nested empty (e.g., @media with only empty rules)
    let prev;
    do {
      prev = css;
      css = css.replace(/[^{}]*{}\s*/g, function(match) {
        // Don't remove @keyframes or @font-face that might be intentionally empty
        // Just remove genuinely empty selectors
        return '';
      });
    } while (css !== prev);
  }

  // 4. Remove last semicolons before closing brace
  if (opts.lastSemicolon) {
    css = css.replace(/;}/g, '}');
  }

  // 5. Simplify zeros
  if (opts.zeros) {
    // 0px -> 0, 0em -> 0, etc. (but not inside custom properties or special values)
    css = css.replace(/([\s:,])0(?:px|em|rem|%|pt|ex|ch|vw|vh|vmin|vmax|cm|mm|in|pc)\b/g, '$10');
    // 0.5 -> .5
    css = css.replace(/([\s:,])0+\./g, '$1.');
    // Collapse margin/padding shorthand zeros: 0 0 0 0 -> 0
    css = css.replace(/:0 0 0 0([;}])/g, ':0$1');
    css = css.replace(/:0 0 0([;}])/g, ':0$1');
    css = css.replace(/:0 0([;}])/g, ':0$1');
  }

  // 6. Shorten hex colors
  if (opts.colors) {
    // #aabbcc -> #abc
    css = css.replace(/#([0-9a-fA-F])\1([0-9a-fA-F])\2([0-9a-fA-F])\3/g, '#$1$2$3');
    // #aabbccdd -> #abcd (8-digit hex to 4-digit)
    css = css.replace(/#([0-9a-fA-F])\1([0-9a-fA-F])\2([0-9a-fA-F])\3([0-9a-fA-F])\4/g, '#$1$2$3$4');
  }

  // 7. Additional minification
  // Remove unnecessary quotes in url()
  css = css.replace(/url\(\s*['"]([^'"()]+)['"]\s*\)/g, 'url($1)');
  // Remove leading zeros from decimals in values
  css = css.replace(/([\s:,])0+(\.\d+)/g, '$1$2');

  lastOutput = css;
  cssOutput.textContent = css;
  outputLabel.textContent = 'Minified Output';
  updateStats(raw, css);
  showToast('CSS minified');
}

/* ===== CSS BEAUTIFIER ===== */
function doBeautify() {
  const raw = cssInput.value;
  if (!raw.trim()) { showToast('No CSS to beautify'); return; }

  let css = raw;
  let result = '';
  let indent = 0;
  const indentStr = '  ';
  let inString = false;
  let stringChar = '';
  let blockComment = false;

  // Normalize line endings
  css = css.replace(/\r\n/g, '\n').replace(/\r/g, '\n');

  let i = 0;
  while (i < css.length) {
    const ch = css[i];
    const next = css[i + 1] || '';

    // Handle strings
    if (!blockComment) {
      if ((ch === '"' || ch === "'") && !inString) {
        inString = true;
        stringChar = ch;
        result += ch;
        i++;
        continue;
      }
      if (inString && ch === stringChar && css[i - 1] !== '\\') {
        inString = false;
        result += ch;
        i++;
        continue;
      }
      if (inString) {
        result += ch;
        i++;
        continue;
      }
    }

    // Handle block comments
    if (ch === '/' && next === '*' && !inString) {
      blockComment = true;
      // Ensure comment starts on its own line
      result = result.trimEnd();
      if (result.length > 0 && result[result.length - 1] !== '\n') {
        result += '\n';
      }
      result += indentStr.repeat(indent) + '/*';
      i += 2;
      continue;
    }
    if (blockComment && ch === '*' && next === '/') {
      blockComment = false;
      result += '*/\n';
      i += 2;
      continue;
    }
    if (blockComment) {
      result += ch;
      i++;
      continue;
    }

    // Opening brace
    if (ch === '{') {
      result = result.trimEnd();
      result += ' {\n';
      indent++;
      result += indentStr.repeat(indent);
      i++;
      // Skip whitespace after brace
      while (i < css.length && /\s/.test(css[i])) i++;
      continue;
    }

    // Closing brace
    if (ch === '}') {
      indent = Math.max(0, indent - 1);
      result = result.trimEnd();
      result += '\n' + indentStr.repeat(indent) + '}\n';
      // Add blank line after top-level blocks
      if (indent === 0) result += '\n';
      i++;
      // Skip whitespace after brace
      while (i < css.length && /\s/.test(css[i])) i++;
      continue;
    }

    // Semicolons
    if (ch === ';') {
      result += ';\n' + indentStr.repeat(indent);
      i++;
      // Skip whitespace after semicolon
      while (i < css.length && /\s/.test(css[i])) i++;
      continue;
    }

    // Colons (property: value)
    if (ch === ':' && indent > 0) {
      // Check if this is a pseudo-selector like :hover, ::before, @media (min-width:...)
      // Look back to see if we're in a selector context (no { since last } or start)
      let lookback = result.trimEnd();
      let lastOpen = lookback.lastIndexOf('{');
      let lastSemicolon = lookback.lastIndexOf(';');
      let lastNewline = lookback.lastIndexOf('\n');
      let afterLast = Math.max(lastOpen, lastSemicolon, lastNewline);
      let segment = lookback.substring(afterLast + 1).trim();

      // If it looks like a property (no selector chars like ., #, etc. at start and doesn't start with &)
      // Simple heuristic: if the segment before : contains only property-name chars
      if (/^[a-zA-Z\-_]+$/.test(segment) || /^--([\w-]+)$/.test(segment)) {
        // This is a property declaration
        result += ': ';
      } else {
        result += ':';
      }
      i++;
      // Skip whitespace after colon
      while (i < css.length && css[i] === ' ') i++;
      continue;
    }
    if (ch === ':' && indent === 0) {
      result += ':';
      i++;
      continue;
    }

    // Skip excess whitespace
    if (/\s/.test(ch)) {
      // Don't add whitespace at beginning of line
      if (result.length > 0 && result[result.length - 1] !== '\n' && result.trimEnd()[result.trimEnd().length - 1] !== '{') {
        result += ' ';
      }
      i++;
      // Skip remaining whitespace
      while (i < css.length && /\s/.test(css[i])) i++;
      continue;
    }

    result += ch;
    i++;
  }

  // Clean up multiple blank lines
  result = result.replace(/\n{3,}/g, '\n\n');
  result = result.trim() + '\n';

  lastOutput = result;
  cssOutput.textContent = result;
  outputLabel.textContent = 'Beautified Output';
  updateStats(raw, result);
  showToast('CSS beautified');
}

/* ===== STATS ===== */
function updateStats(input, output) {
  const statsBar = document.getElementById('statsBar');
  statsBar.style.display = '';

  const inputBytes = new Blob([input]).size;
  const outputBytes = new Blob([output]).size;
  const reduction = inputBytes > 0 ? ((1 - outputBytes / inputBytes) * 100).toFixed(1) : 0;
  const inputLines = input.split('\n').length;
  const outputLines = output.split('\n').length;
  const rules = (output.match(/{/g) || []).length;
  const props = (output.match(/[a-zA-Z\-]+\s*:/g) || []).length;

  document.getElementById('statInputSize').textContent = formatBytes(inputBytes);
  document.getElementById('statOutputSize').textContent = formatBytes(outputBytes);
  document.getElementById('statReduction').textContent = (reduction >= 0 ? '' : '+') + Math.abs(reduction) + '%';
  document.getElementById('statReduction').className = 'value ' + (reduction >= 0 ? 'green' : 'red');
  document.getElementById('statInputLines').textContent = inputLines.toLocaleString();
  document.getElementById('statOutputLines').textContent = outputLines.toLocaleString();
  document.getElementById('statRules').textContent = rules;
  document.getElementById('statProps').textContent = props;

  outputInfo.textContent = outputLines + ' lines, ' + output.length.toLocaleString() + ' chars';

  // Reduction visual bar
  const vis = document.getElementById('reductionVis');
  vis.style.display = '';
  const ratio = inputBytes > 0 ? Math.max(5, (outputBytes / inputBytes) * 100) : 100;
  const bar = document.getElementById('rvBar');
  bar.style.width = Math.min(100, ratio).toFixed(1) + '%';
  bar.textContent = Math.round(ratio) + '%';
  document.getElementById('rvLabelOut').textContent = 'Output: ' + formatBytes(outputBytes);
  document.getElementById('rvLabelIn').textContent = 'Original: ' + formatBytes(inputBytes);
}

/* ===== UTILITIES ===== */
function copyOutput() {
  if (!lastOutput) { showToast('Nothing to copy'); return; }
  navigator.clipboard.writeText(lastOutput).then(() => showToast('Copied to clipboard'));
}

function downloadCSS() {
  if (!lastOutput) { showToast('No output to download'); return; }
  const blob = new Blob([lastOutput], { type: 'text/css' });
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'styles.min.css';
  a.click();
  URL.revokeObjectURL(a.href);
  showToast('Downloaded styles.min.css');
}

function clearAll() {
  cssInput.value = '';
  cssOutput.textContent = '';
  lastOutput = '';
  statusDot.className = 'status-dot empty';
  statusText.textContent = 'Paste CSS or upload a file to begin';
  sizeInfo.textContent = '';
  inputInfo.textContent = '';
  outputInfo.textContent = '';
  outputLabel.textContent = 'Output';
  document.getElementById('statsBar').style.display = 'none';
  document.getElementById('reductionVis').style.display = 'none';
}

function loadSample() {
  cssInput.value = `/* ==========================================================================
   ANIMA Design System v2.0
   Modern dark theme with glassmorphism effects
   ========================================================================== */

/* CSS Custom Properties */
:root {
  --bg: #050508;
  --surface: #111118;
  --surface2: #1a1a24;
  --primary: #00d4ff;
  --accent: #a855f7;
  --pink: #ec4899;
  --text: #e2e8f0;
  --text-muted: #94a3b8;
  --border: rgba(255, 255, 255, 0.06);
  --radius: 16px;
  --glow: 0 0 30px rgba(168, 85, 247, 0.2);
}

/* Base Reset */
*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0px;
  padding: 0px;
}

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  background-color: #050508;
  color: #e2e8f0;
  line-height: 1.600;
  margin: 0px;
  padding: 0px;
  -webkit-font-smoothing: antialiased;
}

/* Navigation */
.nav {
  position: sticky;
  top: 0px;
  z-index: 100;
  background: rgba(5, 5, 8, 0.85);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
  padding: 0px 2rem;
  height: 64px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.nav-logo {
  font-size: 1.35rem;
  font-weight: 800;
  background: linear-gradient(135deg, #00d4ff, #a855f7);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

/* Hero Section */
.hero {
  text-align: center;
  padding: 4rem 2rem;
}

.hero h1 {
  font-size: 3.2rem;
  font-weight: 800;
  line-height: 1.15;
  margin-bottom: 0px;
}

/* Empty rules that should be removed */
.unused-class {
}

.another-empty {
}

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  padding: 0.65rem 1.25rem;
  border-radius: 10px;
  border: 0px;
  font-family: 'Inter', sans-serif;
  font-size: 0.85rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.25s ease;
}

.btn-primary {
  background: linear-gradient(135deg, #00d4ff, #a855f7);
  color: #ffffff;
}

.btn-primary:hover {
  opacity: 0.9;
  transform: translateY(-1px);
  box-shadow: 0px 4px 15px rgba(0, 212, 255, 0.30);
}

/* Glass Card */
.card {
  background: rgba(17, 17, 24, 0.7);
  backdrop-filter: blur(16px);
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 16px;
  padding: 1.5rem;
  transition: all 0.3s ease;
}

.card:hover {
  border-color: #00d4ff;
  transform: translateY(-3px);
  box-shadow: 0px 8px 30px rgba(0, 212, 255, 0.1);
}

/* Animations */
@keyframes fadeIn {
  0% {
    opacity: 0;
    transform: translateY(20px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

.fade-in {
  animation: fadeIn 0.6s ease forwards;
}

/* Responsive Design */
@media (max-width: 768px) {
  .hero h1 {
    font-size: 2rem;
  }

  .nav-links {
    display: none;
  }

  .card {
    padding: 1rem;
  }
}

@media (max-width: 480px) {
  body {
    font-size: 14px;
  }

  .btn {
    padding: 0.5rem 1rem;
    font-size: 0.8rem;
  }
}

/* Footer */
footer {
  margin-top: 0px;
  padding: 2rem;
  text-align: center;
  border-top: 1px solid rgba(255, 255, 255, 0.06);
  color: #94a3b8;
  font-size: 0.8rem;
}`;
  updateInputInfo();
  autoCheck();
  showToast('Sample CSS loaded');
}

function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2000);
}

/* ===== FILE UPLOAD & DRAG-DROP ===== */
const fileUpload = document.getElementById('fileUpload');
const dropOverlay = document.getElementById('dropOverlay');
const inputPanel = cssInput.closest('.panel-body');

fileUpload.addEventListener('change', function(e) {
  const file = e.target.files[0];
  if (file) readFile(file);
});

// Drag and drop
inputPanel.addEventListener('dragover', function(e) {
  e.preventDefault();
  dropOverlay.classList.add('active');
});
inputPanel.addEventListener('dragleave', function(e) {
  e.preventDefault();
  dropOverlay.classList.remove('active');
});
inputPanel.addEventListener('drop', function(e) {
  e.preventDefault();
  dropOverlay.classList.remove('active');
  const file = e.dataTransfer.files[0];
  if (file) readFile(file);
});

function readFile(file) {
  if (!file.name.endsWith('.css') && file.type !== 'text/css') {
    showToast('Please upload a .css file');
    return;
  }
  const reader = new FileReader();
  reader.onload = function(e) {
    cssInput.value = e.target.result;
    updateInputInfo();
    autoCheck();
    showToast('Loaded: ' + file.name);
  };
  reader.readAsText(file);
}

/* ===== TAB KEY SUPPORT ===== */
cssInput.addEventListener('keydown', e => {
  if (e.key === 'Tab') {
    e.preventDefault();
    const start = cssInput.selectionStart, end = cssInput.selectionEnd;
    cssInput.value = cssInput.value.substring(0, start) + '  ' + cssInput.value.substring(end);
    cssInput.selectionStart = cssInput.selectionEnd = start + 2;
  }
});

/* ===== KEYBOARD SHORTCUTS ===== */
document.addEventListener('keydown', function(e) {
  if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') { e.preventDefault(); doMinify(); }
  if ((e.ctrlKey || e.metaKey) && e.shiftKey && (e.key === 'B' || e.key === 'b')) { e.preventDefault(); doBeautify(); }
});

/* ===== INTERSECTION OBSERVER ===== */
const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('visible'); observer.unobserve(entry.target); }});
}, { threshold: 0.1 });
document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));
</script>
<script src="/js/analytics-lite.js" defer></script>
<script src="/js/revenue.js" defer></script>
<script src="/js/lead-capture.js" defer></script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What does the CSS Minifier do?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "The CSS Minifier removes comments, whitespace, empty rules, and unnecessary characters from your CSS code to reduce file size. It also shortens hex colors, simplifies zero values, and removes trailing semicolons. It handles @media queries, @keyframes, vendor prefixes, and nested rules correctly."
      }
    },
    {
      "@type": "Question",
      "name": "Can I also beautify CSS code?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, the tool includes a Beautify mode that formats minified or messy CSS with proper indentation, line breaks, and spacing, making it easy to read and debug. It preserves comments and correctly indents nested rules like @media blocks."
      }
    },
    {
      "@type": "Question",
      "name": "Does the CSS Minifier handle @media queries and @keyframes?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, the minifier correctly handles all CSS at-rules including @media queries, @keyframes animations, @font-face declarations, @import statements, and @supports rules. Nested structures are preserved during both minification and beautification."
      }
    },
    {
      "@type": "Question",
      "name": "Is this CSS Minifier free?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, ANIMA's CSS Minifier is 100% free with no signup required. It runs entirely in your browser, so your code never leaves your machine. You can paste CSS directly or upload a .css file. For an ad-free experience, upgrade to About for free."
      }
    }
  ]
}
</script>
</body>
</html>