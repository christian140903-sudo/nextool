<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
    <link rel="icon" type="image/svg+xml" href="/img/favicon.svg">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mermaid Diagram Editor â€” Create Diagrams Online Free | ANIMA</title>
<meta name="description" content="Create flowcharts, sequence diagrams, Gantt charts, and more with Mermaid.js. Live preview, export to SVG/PNG. Free online editor. No signup required.">
<meta name="keywords" content="mermaid editor, mermaid diagram, flowchart maker, sequence diagram, gantt chart, mermaid.js online, free diagram tool, ANIMA">
<meta property="og:title" content="Free Mermaid Diagram Editor | ANIMA">
<meta property="og:description" content="Create flowcharts, sequence diagrams, Gantt charts and more with Mermaid.js. Live preview, export to SVG/PNG. 100% free.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://nextool.app/free-tools/mermaid-editor.html">
<meta property="og:image" content="https://nextool.app/img/og-image.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<link rel="canonical" href="https://nextool.app/free-tools/mermaid-editor.html">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Free Mermaid Diagram Editor | ANIMA">
<meta name="twitter:description" content="Create flowcharts, sequence diagrams, Gantt charts and more. Free online Mermaid.js editor by ANIMA.">
<meta name="robots" content="index, follow">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"SoftwareApplication","name":"Mermaid Diagram Editor","applicationCategory":"DeveloperApplication","operatingSystem":"Web","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"description":"Free online Mermaid diagram editor with live preview, SVG/PNG export, and templates for flowcharts, sequence diagrams, Gantt charts, and more."}
</script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--bg:#050508;--surface:#111118;--surface2:#1a1a24;--border:#2a2a3a;--text:#e4e4eb;--text2:#9494a8;--primary:#00d4ff;--accent:#a855f7;--pink:#ec4899;--green:#22c55e;--red:#ef4444;--cyan:#22d3ee;--yellow:#eab308;--radius:12px;--glass:rgba(17,17,24,0.7)}
html{scroll-behavior:smooth}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;min-height:100vh;overflow-x:hidden}
/* NAV */
.nav{position:sticky;top:0;z-index:100;background:rgba(5,5,8,0.85);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:0 2rem;height:64px;display:flex;align-items:center;justify-content:space-between}
.nav-logo{font-size:1.4rem;font-weight:800;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-decoration:none}
.nav-links{display:flex;align-items:center;gap:1.5rem}
.nav-links a{color:var(--text2);text-decoration:none;font-size:.875rem;font-weight:500;transition:color .2s}
.nav-links a:hover{color:var(--text)}
.nav-cta{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff!important;padding:.5rem 1.2rem;border-radius:8px;font-weight:600;-webkit-text-fill-color:#fff!important}
.nav-cta:hover{opacity:.9}
.nav-toggle{display:none;background:none;border:none;color:var(--text);font-size:1.5rem;cursor:pointer}
/* HERO */
.hero{text-align:center;padding:3rem 1.5rem 2rem;max-width:700px;margin:0 auto}
.hero h1{font-size:2.2rem;font-weight:800;line-height:1.2;margin-bottom:.75rem}
.hero h1 span{background:linear-gradient(135deg,var(--primary),var(--accent),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{color:var(--text2);font-size:1rem}
/* TOOL */
.tool-container{max-width:1400px;margin:0 auto;padding:0 1.5rem 3rem}
.toolbar{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:1rem;align-items:center}
.toolbar button{background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.45rem .9rem;border-radius:8px;font-size:.8rem;font-weight:500;cursor:pointer;transition:all .2s;font-family:inherit}
.toolbar button:hover{border-color:var(--primary);background:rgba(0,212,255,.12)}
.toolbar button.active{background:linear-gradient(135deg,var(--primary),var(--accent));border-color:transparent;color:#fff}
.template-bar{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:1rem;align-items:center}
.template-bar span{color:var(--text2);font-size:.8rem;font-weight:600;margin-right:.25rem}
.template-bar button{background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.35rem .75rem;border-radius:8px;font-size:.75rem;font-weight:500;cursor:pointer;transition:all .2s;font-family:inherit}
.template-bar button:hover{border-color:var(--accent);background:rgba(168,85,247,.12)}
.status-bar{display:flex;align-items:center;gap:1rem;margin-bottom:1rem;font-size:.8rem;color:var(--text2)}
.status-dot{width:8px;height:8px;border-radius:50%;display:inline-block}
.status-dot.valid{background:var(--green)}
.status-dot.invalid{background:var(--red)}
.status-dot.empty{background:var(--border)}
.status-dot.rendering{background:var(--yellow)}
.panels{display:grid;grid-template-columns:1fr 1fr;gap:1rem;min-height:550px}
.panels.fullscreen-mode{grid-template-columns:1fr;position:fixed;inset:0;z-index:200;background:var(--bg);padding:1rem;min-height:100vh}
.panels.fullscreen-mode .panel-editor{display:none}
.panel{background:var(--glass);backdrop-filter:blur(16px);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;display:flex;flex-direction:column}
.panel-header{padding:.6rem 1rem;border-bottom:1px solid var(--border);font-size:.8rem;font-weight:600;color:var(--text2);display:flex;justify-content:space-between;align-items:center;background:rgba(26,26,36,0.5)}
.panel-body{flex:1;position:relative;overflow:auto}
#codeInput{width:100%;height:100%;min-height:450px;background:transparent;border:none;color:var(--cyan);font-family:'Courier New',monospace;font-size:.85rem;padding:1rem;resize:none;outline:none;line-height:1.7;tab-size:2}
#codeInput::placeholder{color:var(--text2);opacity:.5}
.preview-area{padding:1rem;min-height:450px;display:flex;align-items:center;justify-content:center;background:rgba(255,255,255,.03)}
.preview-area svg{max-width:100%;height:auto}
/* Override Mermaid dark background for readability */
.preview-area .mermaid-output{width:100%;text-align:center}
.preview-area .mermaid-output svg{max-width:100%;height:auto}
/* ERROR */
.error-display{padding:1rem;color:var(--red);font-size:.85rem;font-family:'Courier New',monospace;white-space:pre-wrap;display:none}
.error-display.show{display:block}
.error-display .error-line{background:rgba(239,68,68,.1);border-left:3px solid var(--red);padding:.3rem .6rem;margin:.3rem 0;border-radius:4px}
/* FULLSCREEN BUTTON */
.fullscreen-exit{position:fixed;top:1rem;right:1rem;z-index:210;background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.5rem 1rem;border-radius:8px;font-size:.8rem;font-weight:600;cursor:pointer;display:none;font-family:inherit}
.fullscreen-exit:hover{border-color:var(--primary);background:rgba(0,212,255,.12)}
.panels.fullscreen-mode ~ .fullscreen-exit{display:block}
/* CTA */
.cta-section{text-align:center;padding:4rem 1.5rem;max-width:700px;margin:0 auto}
.cta-section h2{font-size:1.8rem;font-weight:800;margin-bottom:.75rem}
.cta-section h2 span{background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.cta-section p{color:var(--text2);margin-bottom:1.5rem}
.cta-btn{display:inline-block;background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;padding:.75rem 2rem;border-radius:10px;font-weight:700;text-decoration:none;font-size:1rem;transition:transform .2s,box-shadow .2s}
.cta-btn:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(0,212,255,.3)}
/* FOOTER */
.footer{border-top:1px solid var(--border);padding:3rem 2rem 2rem;max-width:1200px;margin:0 auto}
.footer-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:2rem;margin-bottom:2rem}
.footer-col h4{font-size:.85rem;font-weight:700;margin-bottom:.75rem;color:var(--text)}
.footer-col a{display:block;color:var(--text2);text-decoration:none;font-size:.8rem;margin-bottom:.4rem;transition:color .2s}
.footer-col a:hover{color:var(--primary)}
.footer-bottom{text-align:center;color:var(--text2);font-size:.75rem;padding-top:1.5rem;border-top:1px solid var(--border)}
/* FADE IN */
.fade-in{opacity:0;transform:translateY(20px);transition:opacity .6s,transform .6s}
.fade-in.visible{opacity:1;transform:translateY(0)}
/* TOAST */
.toast{position:fixed;bottom:2rem;left:50%;transform:translateX(-50%) translateY(80px);background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.6rem 1.2rem;border-radius:10px;font-size:.85rem;font-weight:500;z-index:300;transition:transform .3s;pointer-events:none}
.toast.show{transform:translateX(-50%) translateY(0)}
/* RESPONSIVE */
@media(max-width:768px){
  .panels{grid-template-columns:1fr}
  .nav-links{display:none;position:absolute;top:64px;left:0;right:0;background:var(--bg);border-bottom:1px solid var(--border);flex-direction:column;padding:1rem 2rem;gap:1rem}
  .nav-links.open{display:flex}
  .nav-toggle{display:block}
  .hero h1{font-size:1.6rem}
  .footer-grid{grid-template-columns:1fr}
  .toolbar{gap:.35rem}
  .template-bar{gap:.35rem}
  #codeInput{min-height:300px}
  .preview-area{min-height:300px}
}
</style>
</head>
<body>

<nav class="nav">
  <a href="/" class="nav-logo">ANIMA</a>
  <button class="nav-toggle" onclick="document.querySelector('.nav-links').classList.toggle('open')" aria-label="Menu">&#9776;</button>
  <div class="nav-links">
    <a href="/">Home</a>
    <a href="/free-tools/">Tools</a>
    <a href="/free-tools/">Free Tools</a>
    <a href="/blog/">Blog</a>
    <a href="https://github.com/christian140903-sudo/nextool" class="nav-cta" target="_blank" rel="noopener">GitHub</a>
  </div>
</nav>

<section class="hero fade-in">
  <h1>Free <span>Mermaid Diagram Editor</span></h1>
  <p class="tool-summary" style="color:#94a3b8;font-size:15px;line-height:1.6;margin-bottom:24px;max-width:700px;margin-left:auto;margin-right:auto;">Create flowcharts, sequence diagrams, Gantt charts, class diagrams, ER diagrams, and pie charts with Mermaid.js. Live preview as you type, export to SVG or PNG, and choose from ready-made templates. 100% free, no signup, runs entirely in your browser.</p>
</section>

<div class="tool-container fade-in">
  <div class="toolbar">
    <button onclick="renderDiagram()" title="Render diagram">Render</button>
    <button onclick="copyCode()" title="Copy Mermaid code">Copy Code</button>
    <button onclick="exportSVG()" title="Export as SVG file">Export SVG</button>
    <button onclick="exportPNG()" title="Export as PNG image">Export PNG</button>
    <button onclick="toggleFullscreen()" id="fullscreenBtn" title="Toggle fullscreen preview">Fullscreen</button>
    <button onclick="clearEditor()" title="Clear editor">Clear</button>
  </div>

  <div class="template-bar">
    <span>Templates:</span>
    <button onclick="loadTemplate('flowchart')">Flowchart</button>
    <button onclick="loadTemplate('sequence')">Sequence</button>
    <button onclick="loadTemplate('gantt')">Gantt</button>
    <button onclick="loadTemplate('class')">Class Diagram</button>
    <button onclick="loadTemplate('er')">ER Diagram</button>
    <button onclick="loadTemplate('pie')">Pie Chart</button>
  </div>

  <div class="status-bar">
    <span><span class="status-dot empty" id="statusDot"></span></span>
    <span id="statusText">Write Mermaid code or choose a template</span>
    <span id="autoSaveStatus" style="margin-left:auto;font-size:.75rem"></span>
  </div>

  <div class="panels" id="panelsContainer">
    <div class="panel panel-editor">
      <div class="panel-header"><span>Mermaid Code</span><span id="lineCount"></span></div>
      <div class="panel-body">
        <textarea id="codeInput" placeholder="graph TD
    A[Start] --> B{Decision}
    B -->|Yes| C[Do Something]
    B -->|No| D[Do Something Else]
    C --> E[End]
    D --> E" spellcheck="false"></textarea>
      </div>
    </div>
    <div class="panel panel-preview">
      <div class="panel-header"><span>Live Preview</span><span id="previewInfo"></span></div>
      <div class="panel-body">
        <div class="preview-area" id="previewArea">
          <div class="mermaid-output" id="mermaidOutput"></div>
        </div>
        <div class="error-display" id="errorOutput"></div>
      </div>
    </div>
  </div>
  <button class="fullscreen-exit" id="fullscreenExit" onclick="toggleFullscreen()">Exit Fullscreen</button>
</div>

<section class="cta-section fade-in">
  <h2>Need something <span>more powerful</span>?</h2>
  <p>Let us build it for you. Custom APIs, dashboards, automations &mdash; whatever you need.</p>
  <a href="/#contact" class="cta-btn">Start a Project &rarr;</a>
</section>

<!-- Cross Promo -->
<section style="max-width:900px;margin:40px auto;padding:0 24px;">
<div style="background:linear-gradient(135deg,rgba(0,212,255,0.1),rgba(168,85,247,0.08));border:1px solid rgba(0,212,255,0.15);border-radius:20px;padding:32px 28px;text-align:center;">
<div style="font-size:13px;color:#818cf8;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Founding Member</div>
<h3 style="font-size:22px;font-weight:800;color:#fff;margin:0 0 8px;">ANIMA on GitHub</h3>
<p style="color:#94a3b8;font-size:14px;margin:0 auto 20px;max-width:500px;">250+ free tools. No signup. Open source. Built by Christian Bucher.</p>
<div style="display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap;">
<a href="/about/" style="display:inline-block;padding:12px 28px;background:linear-gradient(135deg,#00d4ff,#a855f7,#ec4899);color:#fff;border-radius:10px;font-weight:700;font-size:15px;text-decoration:none;">GitHub</a>
<a href="/free-tools/" style="color:#94a3b8;font-size:14px;text-decoration:none;">Browse 250+ Free Tools &rarr;</a>
</div>
</div>
</section>

<!-- Related Tools -->
<div style="max-width:900px;margin:2rem auto;padding:0 24px;">
<div style="padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/markdown-preview.html" style="color:var(--primary);text-decoration:none">Markdown Preview</a> &middot; <a href="/free-tools/svg-editor.html" style="color:var(--primary);text-decoration:none">SVG Editor</a> &middot; <a href="/free-tools/json-formatter.html" style="color:var(--primary);text-decoration:none">JSON Formatter</a> &middot; <a href="/free-tools/whiteboard.html" style="color:var(--primary);text-decoration:none">Online Whiteboard</a> &middot; <a href="/free-tools/code-screenshot.html" style="color:var(--primary);text-decoration:none">Code Screenshot</a></p>
</div>
</div>

<footer class="footer fade-in">
  <div class="footer-grid">
    <div class="footer-col">
      <h4>Products</h4>
      <a href="/free-tools/">250+ Free Tools</a>
<a href="/about/">About</a>
<a href="/docs/">Documentation</a>
    </div>
    <div class="footer-col">
      <h4>Explore</h4>
      <a href="/free-tools/">Free Tools</a><a href="/blog/">Blog</a><a href="/about/">FAQ</a><a href="/about/">About</a>
    </div>
    <div class="footer-col">
      <h4>Ecosystem</h4>
      <a href="/">ANIMA Home</a><a href="/#contact">Contact</a><a href="https://github.com/christian140903-sudo/nextool" target="_blank">GitHub</a>
    </div>
  </div>
  <div class="footer-bottom">&copy; 2026 ANIMA. AI-powered tools for everyone.</div>
</footer>

<div class="toast" id="toast"></div>

<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
<script>
// Initialize Mermaid with dark theme
mermaid.initialize({
  startOnLoad: false,
  theme: 'dark',
  securityLevel: 'loose',
  fontFamily: 'Inter, system-ui, sans-serif',
  themeVariables: {
    darkMode: true,
    background: '#111118',
    primaryColor: '#6366f1',
    primaryTextColor: '#e4e4eb',
    primaryBorderColor: '#a855f7',
    lineColor: '#94a3b8',
    secondaryColor: '#1a1a24',
    tertiaryColor: '#2a2a3a',
    noteBkgColor: '#1a1a24',
    noteTextColor: '#e4e4eb',
    actorBkg: '#111118',
    actorBorder: '#6366f1',
    actorTextColor: '#e4e4eb',
    signalColor: '#e4e4eb',
    signalTextColor: '#e4e4eb'
  }
});

const codeInput = document.getElementById('codeInput');
const mermaidOutput = document.getElementById('mermaidOutput');
const previewArea = document.getElementById('previewArea');
const errorOutput = document.getElementById('errorOutput');
const statusDot = document.getElementById('statusDot');
const statusText = document.getElementById('statusText');
const lineCount = document.getElementById('lineCount');
const previewInfo = document.getElementById('previewInfo');
const panelsContainer = document.getElementById('panelsContainer');
const autoSaveStatus = document.getElementById('autoSaveStatus');

let renderTimeout = null;
let renderCounter = 0;

// Templates
const templates = {
  flowchart: `graph TD
    A[Start] --> B{Is it working?}
    B -->|Yes| C[Great!]
    B -->|No| D[Debug]
    D --> E[Fix the code]
    E --> B
    C --> F[Deploy]
    F --> G[End]

    style A fill:#6366f1,stroke:#a855f7,color:#fff
    style G fill:#22c55e,stroke:#16a34a,color:#fff
    style D fill:#ef4444,stroke:#dc2626,color:#fff`,

  sequence: `sequenceDiagram
    participant U as User
    participant C as Client
    participant S as Server
    participant DB as Database

    U->>C: Click Login
    C->>S: POST /api/login
    S->>DB: Query user
    DB-->>S: User data
    alt Valid credentials
        S-->>C: 200 OK + JWT
        C-->>U: Show dashboard
    else Invalid credentials
        S-->>C: 401 Unauthorized
        C-->>U: Show error
    end`,

  gantt: `gantt
    title Project Timeline
    dateFormat  YYYY-MM-DD
    section Planning
        Requirements     :done, req, 2026-01-01, 7d
        Design           :done, des, after req, 5d
    section Development
        Frontend         :active, fe, after des, 14d
        Backend          :active, be, after des, 14d
        API Integration  :api, after fe, 7d
    section Testing
        Unit Tests       :test1, after api, 5d
        Integration Tests:test2, after test1, 5d
    section Deployment
        Staging          :stage, after test2, 3d
        Production       :prod, after stage, 2d`,

  class: `classDiagram
    class Animal {
        +String name
        +int age
        +makeSound() void
        +move() void
    }
    class Dog {
        +String breed
        +fetch() void
        +makeSound() void
    }
    class Cat {
        +bool isIndoor
        +purr() void
        +makeSound() void
    }
    class Shelter {
        -List~Animal~ animals
        +addAnimal(Animal a) void
        +adoptAnimal(String name) Animal
        +getCount() int
    }

    Animal <|-- Dog
    Animal <|-- Cat
    Shelter "1" --> "*" Animal : houses`,

  er: `erDiagram
    CUSTOMER ||--o{ ORDER : places
    ORDER ||--|{ LINE_ITEM : contains
    PRODUCT ||--o{ LINE_ITEM : "is in"
    CUSTOMER {
        int id PK
        string name
        string email
        string phone
    }
    ORDER {
        int id PK
        date created_at
        string status
        float total
        int customer_id FK
    }
    LINE_ITEM {
        int id PK
        int quantity
        float unit_price
        int order_id FK
        int product_id FK
    }
    PRODUCT {
        int id PK
        string name
        string category
        float price
        int stock
    }`,

  pie: `pie title Website Traffic Sources
    "Organic Search" : 42
    "Direct" : 25
    "Social Media" : 18
    "Referral" : 10
    "Email" : 5`
};

// Load saved code from localStorage
function loadSaved() {
  try {
    const saved = localStorage.getItem('mermaid_editor_code');
    if (saved) {
      codeInput.value = saved;
      updateLineCount();
      renderDiagram();
    }
  } catch (e) {}
}

// Save code to localStorage
function saveCode() {
  try {
    localStorage.setItem('mermaid_editor_code', codeInput.value);
    autoSaveStatus.textContent = 'Saved';
    setTimeout(function() { autoSaveStatus.textContent = ''; }, 1500);
  } catch (e) {}
}

// Debounced input handler
codeInput.addEventListener('input', function() {
  updateLineCount();
  clearTimeout(renderTimeout);
  renderTimeout = setTimeout(function() {
    renderDiagram();
    saveCode();
  }, 500);
});

function updateLineCount() {
  var lines = codeInput.value.split('\n').length;
  lineCount.textContent = lines + ' line' + (lines !== 1 ? 's' : '');
}

// Core render function
async function renderDiagram() {
  var code = codeInput.value.trim();
  if (!code) {
    mermaidOutput.innerHTML = '';
    errorOutput.classList.remove('show');
    statusDot.className = 'status-dot empty';
    statusText.textContent = 'Write Mermaid code or choose a template';
    previewInfo.textContent = '';
    return;
  }

  statusDot.className = 'status-dot rendering';
  statusText.textContent = 'Rendering...';

  try {
    // Each render needs a unique ID
    renderCounter++;
    var id = 'mermaid-svg-' + renderCounter;

    var result = await mermaid.render(id, code);
    mermaidOutput.innerHTML = result.svg;
    errorOutput.classList.remove('show');
    statusDot.className = 'status-dot valid';
    statusText.textContent = 'Diagram rendered successfully';

    // Count elements in SVG for info
    var svg = mermaidOutput.querySelector('svg');
    if (svg) {
      var nodes = svg.querySelectorAll('.node, .actor, .task, .slice, .entity').length;
      previewInfo.textContent = nodes > 0 ? nodes + ' elements' : '';
    }
  } catch (e) {
    var msg = e.message || String(e);
    // Clean up mermaid error artifacts
    var errSvg = document.getElementById('d' + id);
    if (errSvg) errSvg.remove();

    errorOutput.innerHTML = '<strong>Syntax Error</strong>\n\n<div class="error-line">' + escapeHtml(msg) + '</div>';
    errorOutput.classList.add('show');
    statusDot.className = 'status-dot invalid';
    statusText.textContent = 'Syntax error in diagram';
    previewInfo.textContent = '';
  }
}

function escapeHtml(s) {
  return s.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
}

// Template loading
function loadTemplate(name) {
  if (templates[name]) {
    codeInput.value = templates[name];
    updateLineCount();
    renderDiagram();
    saveCode();
    showToast('Loaded ' + name + ' template');
  }
}

// Copy code
function copyCode() {
  var code = codeInput.value.trim();
  if (!code) { showToast('Nothing to copy'); return; }
  navigator.clipboard.writeText(code).then(function() {
    showToast('Code copied to clipboard');
  }).catch(function() {
    showToast('Failed to copy');
  });
}

// Export SVG
function exportSVG() {
  var svg = mermaidOutput.querySelector('svg');
  if (!svg) { showToast('No diagram to export'); return; }

  var svgData = new XMLSerializer().serializeToString(svg);
  var blob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });
  var url = URL.createObjectURL(blob);
  var a = document.createElement('a');
  a.href = url;
  a.download = 'mermaid-diagram.svg';
  a.click();
  URL.revokeObjectURL(url);
  showToast('SVG exported');
}

// Export PNG
function exportPNG() {
  var svg = mermaidOutput.querySelector('svg');
  if (!svg) { showToast('No diagram to export'); return; }

  var svgData = new XMLSerializer().serializeToString(svg);
  var canvas = document.createElement('canvas');
  var ctx = canvas.getContext('2d');
  var img = new Image();

  // Get SVG dimensions
  var svgRect = svg.getBoundingClientRect();
  var scale = 2; // 2x for retina
  canvas.width = svgRect.width * scale;
  canvas.height = svgRect.height * scale;

  img.onload = function() {
    // Dark background
    ctx.fillStyle = '#111118';
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

    canvas.toBlob(function(blob) {
      if (!blob) { showToast('PNG export failed'); return; }
      var url = URL.createObjectURL(blob);
      var a = document.createElement('a');
      a.href = url;
      a.download = 'mermaid-diagram.png';
      a.click();
      URL.revokeObjectURL(url);
      showToast('PNG exported (2x resolution)');
    }, 'image/png');
  };

  img.onerror = function() {
    showToast('PNG export failed - try SVG instead');
  };

  var svgBlob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });
  img.src = URL.createObjectURL(svgBlob);
}

// Fullscreen toggle
function toggleFullscreen() {
  panelsContainer.classList.toggle('fullscreen-mode');
  var isFS = panelsContainer.classList.contains('fullscreen-mode');
  document.getElementById('fullscreenBtn').classList.toggle('active', isFS);
  document.getElementById('fullscreenExit').style.display = isFS ? 'block' : 'none';
}

// Clear editor
function clearEditor() {
  codeInput.value = '';
  mermaidOutput.innerHTML = '';
  errorOutput.classList.remove('show');
  statusDot.className = 'status-dot empty';
  statusText.textContent = 'Write Mermaid code or choose a template';
  lineCount.textContent = '';
  previewInfo.textContent = '';
  try { localStorage.removeItem('mermaid_editor_code'); } catch (e) {}
  showToast('Editor cleared');
}

// Toast
function showToast(msg) {
  var t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(function() { t.classList.remove('show'); }, 2000);
}

// Tab key support in textarea
codeInput.addEventListener('keydown', function(e) {
  if (e.key === 'Tab') {
    e.preventDefault();
    var start = codeInput.selectionStart, end = codeInput.selectionEnd;
    codeInput.value = codeInput.value.substring(0, start) + '    ' + codeInput.value.substring(end);
    codeInput.selectionStart = codeInput.selectionEnd = start + 4;
  }
  // Ctrl/Cmd + Enter to render
  if (e.key === 'Enter' && (e.ctrlKey || e.metaKey)) {
    e.preventDefault();
    renderDiagram();
  }
});

// Escape to exit fullscreen
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape' && panelsContainer.classList.contains('fullscreen-mode')) {
    toggleFullscreen();
  }
});

// IntersectionObserver fade-in
var observer = new IntersectionObserver(function(entries) {
  entries.forEach(function(entry) {
    if (entry.isIntersecting) {
      entry.target.classList.add('visible');
      observer.unobserve(entry.target);
    }
  });
}, { threshold: 0.1 });
document.querySelectorAll('.fade-in').forEach(function(el) { observer.observe(el); });

// Init: load saved or show default
loadSaved();
if (!codeInput.value.trim()) {
  loadTemplate('flowchart');
}
</script>
<script src="/js/analytics-lite.js" defer></script>
<script src="/js/revenue.js" defer></script>
<script src="/js/lead-capture.js" defer></script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What is Mermaid.js?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Mermaid.js is an open-source JavaScript library that renders text-based diagram definitions into SVG graphics. It supports flowcharts, sequence diagrams, Gantt charts, class diagrams, ER diagrams, pie charts, and more. ANIMA's Mermaid Editor provides a free online environment to write and preview Mermaid diagrams instantly."
      }
    },
    {
      "@type": "Question",
      "name": "Can I export my diagrams as images?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, ANIMA's Mermaid Diagram Editor supports exporting to both SVG and PNG formats. SVG exports are vector-based and scale perfectly at any size. PNG exports are rendered at 2x resolution for crisp images suitable for presentations and documentation."
      }
    },
    {
      "@type": "Question",
      "name": "Is this Mermaid editor free to use?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, this Mermaid diagram editor is completely free to use with no signup or account required. It runs entirely in your browser, so your diagram code never leaves your device. Your work is automatically saved to your browser's local storage."
      }
    },
    {
      "@type": "Question",
      "name": "What types of diagrams can I create?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "You can create flowcharts, sequence diagrams, Gantt charts, class diagrams, entity-relationship (ER) diagrams, and pie charts. The editor includes ready-made templates for each diagram type to help you get started quickly."
      }
    },
    {
      "@type": "Question",
      "name": "Does the editor auto-save my work?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes, the editor automatically saves your Mermaid code to your browser's local storage as you type. When you return to the page, your last diagram will be restored automatically. Note that clearing your browser data will remove saved diagrams."
      }
    }
  ]
}
</script>
</body>
</html>
