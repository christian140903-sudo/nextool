<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>JavaScript Beautifier &amp; Minifier — Format JS Code Instantly | NexTool</title>
<meta name="description" content="Beautify or minify JavaScript code instantly. Configurable indentation, quote style, semicolons, syntax highlighting. Free online tool by NexTool.">
<meta name="keywords" content="JavaScript beautifier, JS formatter, JavaScript minifier, format JavaScript, JS beautify, NexTool">
<meta property="og:title" content="Free JavaScript Beautifier & Minifier | NexTool">
<meta property="og:description" content="Beautify or minify JavaScript code instantly. Syntax highlighting, configurable options, copy and download. Free online tool.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://nextool.app/free-tools/javascript-formatter.html">
<meta property="og:image" content="https://nextool.app/free-tools/og/javascript-formatter.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<link rel="canonical" href="https://nextool.app/free-tools/javascript-formatter.html">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Free JavaScript Beautifier & Minifier | NexTool">
<meta name="twitter:description" content="Format or compress JavaScript code instantly. Free online tool by NexTool.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://nextool.app/"},{"@type":"ListItem","position":2,"name":"Free Tools","item":"https://nextool.app/free-tools/"},{"@type":"ListItem","position":3,"name":"JavaScript Formatter","item":"https://nextool.app/free-tools/javascript-formatter.html"}]}
</script>
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"SoftwareApplication","name":"NexTool JavaScript Beautifier & Minifier","applicationCategory":"DeveloperApplication","operatingSystem":"Web","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"description":"Beautify or minify JavaScript code with syntax highlighting, configurable indentation, quote style, and semicolons."}
</script>
<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{--bg:#050508;--surface:#111118;--surface2:#1a1a24;--border:#252533;--primary:#6366f1;--accent:#a855f7;--pink:#ec4899;--text:#e2e8f0;--text2:#94a3b8;--radius:12px;--glass:rgba(17,17,24,.7)}
html{scroll-behavior:smooth}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;overflow-x:hidden}
a{color:var(--primary);text-decoration:none}
.nav{position:sticky;top:0;z-index:100;backdrop-filter:blur(20px);background:rgba(5,5,8,.85);border-bottom:1px solid var(--border);padding:0 24px}
.nav-inner{max-width:1200px;margin:0 auto;display:flex;align-items:center;justify-content:space-between;height:64px}
.logo{font-weight:800;font-size:1.35rem;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.nav-links{display:flex;gap:28px;align-items:center}
.nav-links a{color:var(--text2);font-size:.9rem;font-weight:500;transition:color .2s}
.nav-links a:hover{color:var(--text)}
.nav-links a.active{color:var(--primary)}
.btn-cta{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;padding:9px 22px;border-radius:8px;font-weight:600;font-size:.85rem;border:none;cursor:pointer;transition:transform .2s,box-shadow .2s}
.btn-cta:hover{transform:translateY(-1px);box-shadow:0 4px 20px rgba(99,102,241,.4)}
.mobile-toggle{display:none;background:none;border:none;color:var(--text);font-size:1.5rem;cursor:pointer}
.breadcrumb{max-width:1200px;margin:0 auto;padding:16px 24px 0;font-size:.82rem;color:var(--text2)}
.breadcrumb a{color:var(--text2);transition:color .2s}
.breadcrumb a:hover{color:var(--primary)}
.breadcrumb span{margin:0 8px;opacity:.5}
.hero{text-align:center;padding:60px 24px 40px;max-width:800px;margin:0 auto}
.hero .badge{display:inline-block;padding:6px 16px;border-radius:20px;background:var(--surface);border:1px solid var(--border);font-size:.8rem;color:var(--accent);font-weight:600;margin-bottom:20px}
.hero h1{font-size:clamp(2rem,5vw,3rem);font-weight:800;line-height:1.15;margin-bottom:16px}
.hero h1 .grad{background:linear-gradient(135deg,var(--primary),var(--accent),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{color:var(--text2);font-size:1.05rem;max-width:560px;margin:0 auto}
.tool-section{max-width:1100px;margin:0 auto;padding:0 24px 60px}
.glass-card{background:var(--glass);backdrop-filter:blur(16px);border:1px solid var(--border);border-radius:var(--radius);padding:32px;transition:transform .3s,box-shadow .3s}
.glass-card:hover{box-shadow:0 8px 40px rgba(99,102,241,.1)}
.controls{display:flex;gap:10px;margin-bottom:20px;flex-wrap:wrap;align-items:center}
.controls .action-btn{padding:10px 22px;border-radius:8px;font-weight:600;font-size:.85rem;cursor:pointer;border:1px solid var(--border);background:var(--surface2);color:var(--text);transition:all .2s;font-family:inherit}
.controls .action-btn:hover{border-color:var(--primary);color:var(--primary)}
.controls .action-btn.primary{background:linear-gradient(135deg,var(--primary),var(--accent));border:none;color:#fff}
.controls .action-btn.primary:hover{transform:translateY(-1px);box-shadow:0 4px 16px rgba(99,102,241,.35)}
.controls .action-btn.active{border-color:var(--primary);color:var(--primary);background:rgba(99,102,241,.1)}
.controls .spacer{flex:1}
.stats{font-size:.8rem;color:var(--text2);padding:4px 12px;background:var(--surface2);border-radius:6px;display:flex;gap:16px;align-items:center}
.stats span{white-space:nowrap}
.options-bar{display:flex;gap:10px;margin-bottom:16px;flex-wrap:wrap;align-items:center}
.opt-group{display:flex;align-items:center;gap:6px;font-size:.8rem;color:var(--text2)}
.opt-group label{cursor:pointer;white-space:nowrap}
.opt-group select{background:var(--surface2);color:var(--text);border:1px solid var(--border);border-radius:6px;padding:4px 8px;font-size:.78rem;font-family:inherit;cursor:pointer}
.opt-group select:focus{outline:none;border-color:var(--primary)}
.editor-grid{display:grid;grid-template-columns:1fr 1fr;gap:24px}
.editor-pane{display:flex;flex-direction:column}
.editor-pane label{font-weight:600;font-size:.82rem;margin-bottom:8px;color:var(--text2);display:flex;justify-content:space-between;align-items:center}
.editor-pane label .label-actions{display:flex;gap:8px}
.label-btn{background:none;border:none;color:var(--text2);cursor:pointer;font-size:.78rem;font-weight:600;font-family:inherit;padding:2px 6px;border-radius:4px;transition:color .2s}
.label-btn:hover{color:var(--primary)}
textarea.code-input{width:100%;min-height:420px;background:var(--surface2);border:1px solid var(--border);border-radius:8px;padding:16px;color:var(--text);font-size:.85rem;font-family:'SF Mono','Fira Code','Cascadia Code',Consolas,monospace;line-height:1.65;resize:vertical;tab-size:2;transition:border-color .2s}
textarea.code-input:focus{outline:none;border-color:var(--primary)}
.output-wrap{position:relative;width:100%;min-height:420px;background:var(--surface2);border:1px solid var(--border);border-radius:8px;overflow:auto}
.output-wrap pre{padding:16px;margin:0;font-size:.85rem;font-family:'SF Mono','Fira Code','Cascadia Code',Consolas,monospace;line-height:1.65;white-space:pre-wrap;word-break:break-all}
.output-wrap .line-numbers{position:absolute;left:0;top:0;padding:16px 0;width:40px;text-align:right;color:var(--text2);font-size:.75rem;font-family:'SF Mono','Fira Code','Cascadia Code',Consolas,monospace;line-height:1.65;user-select:none;opacity:.5}
.output-wrap pre.has-lines{padding-left:52px}
.hl-keyword{color:#c084fc;font-weight:600}
.hl-string{color:#34d399}
.hl-number{color:#fb923c}
.hl-comment{color:#64748b;font-style:italic}
.hl-operator{color:#94a3b8}
.hl-function{color:#67e8f9}
.hl-property{color:#fbbf24}
.hl-regex{color:#f472b6}
.hl-boolean{color:#fb923c}
.hl-null{color:#f87171}
.hl-brace{color:#94a3b8}
.hl-template{color:#34d399}
.cta-bottom{text-align:center;padding:80px 24px;max-width:700px;margin:0 auto}
.cta-bottom h2{font-size:clamp(1.5rem,3.5vw,2.2rem);font-weight:800;margin-bottom:14px}
.cta-bottom h2 .grad{background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.cta-bottom p{color:var(--text2);margin-bottom:28px;font-size:1rem}
footer{border-top:1px solid var(--border);padding:60px 24px 32px;max-width:1200px;margin:0 auto}
.footer-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:40px;margin-bottom:40px}
.footer-col h4{font-size:.85rem;font-weight:700;margin-bottom:16px;color:var(--text)}
.footer-col a{display:block;color:var(--text2);font-size:.85rem;margin-bottom:10px;transition:color .2s}
.footer-col a:hover{color:var(--primary)}
.footer-bottom{text-align:center;color:var(--text2);font-size:.8rem;padding-top:24px;border-top:1px solid var(--border)}
@keyframes fadeUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
.fade-in{opacity:0;transform:translateY(24px);transition:opacity .6s,transform .6s}.fade-in.visible{opacity:1;transform:translateY(0)}
.toast{position:fixed;bottom:32px;left:50%;transform:translateX(-50%) translateY(80px);background:var(--primary);color:#fff;padding:12px 28px;border-radius:10px;font-weight:600;font-size:.9rem;z-index:200;transition:transform .35s cubic-bezier(.4,0,.2,1);pointer-events:none}
.toast.show{transform:translateX(-50%) translateY(0)}
@media(max-width:768px){
  .nav-links{display:none;position:absolute;top:64px;left:0;right:0;background:var(--surface);flex-direction:column;padding:20px;gap:16px;border-bottom:1px solid var(--border)}
  .nav-links.open{display:flex}
  .mobile-toggle{display:block}
  .editor-grid{grid-template-columns:1fr}
  .footer-grid{grid-template-columns:1fr 1fr}
  .glass-card{padding:24px 18px}
  .controls{flex-direction:column;align-items:stretch}
  .controls .spacer{display:none}
  .stats{justify-content:center}
  .options-bar{flex-direction:column;align-items:flex-start}
}
</style>
</head>
<body>
<nav class="nav"><div class="nav-inner">
  <a href="/" class="logo">NexTool</a>
  <button class="mobile-toggle" onclick="document.querySelector('.nav-links').classList.toggle('open')" aria-label="Menu">&#9776;</button>
  <div class="nav-links">
    <a href="/">Home</a><a href="/free-tools/" class="active">Free Tools</a><a href="/blog/">Blog</a>
    <a href="/pro.html" class="btn-cta">Get Pro</a>
  </div>
</div></nav>

<div class="breadcrumb">
  <a href="/">Home</a><span>/</span><a href="/free-tools/">Free Tools</a><span>/</span>JavaScript Formatter
</div>

<section class="hero fade-in">
  <div class="badge">Free Tool</div>
  <h1>JavaScript <span class="grad">Beautifier &amp; Minifier</span></h1>
  <p class="tool-summary" style="color:#94a3b8;font-size:15px;line-height:1.6;margin-bottom:24px;max-width:700px;margin-left:auto;margin-right:auto;">Format compressed JavaScript into clean, readable code or minify it for production. Features configurable indentation, semicolon handling, quote style conversion, and full syntax highlighting for keywords, strings, functions, and operators. Includes three sample code presets to try instantly.</p>
  <p>Format your JavaScript with proper indentation, syntax highlighting, and configurable options. Or compress it for production use.</p>
</section>

<section class="tool-section">
  <div class="glass-card fade-in">
    <div class="controls">
      <button class="action-btn primary" id="btn-beautify" onclick="beautify()">Beautify</button>
      <button class="action-btn" id="btn-minify" onclick="minifyJS()">Minify</button>
      <div class="spacer"></div>
      <div class="stats" id="stats">
        <span>Lines: <strong id="stat-lines">0</strong></span>
        <span>Input: <strong id="stat-in">0</strong></span>
        <span>Output: <strong id="stat-out">0</strong></span>
        <span id="stat-saving" style="display:none">Saved: <strong id="stat-pct">0</strong>%</span>
      </div>
    </div>
    <div class="options-bar">
      <div class="opt-group">
        <label for="opt-indent">Indent:</label>
        <select id="opt-indent">
          <option value="2">2 spaces</option>
          <option value="4">4 spaces</option>
          <option value="tab">Tab</option>
        </select>
      </div>
      <div class="opt-group">
        <label for="opt-semi">Semicolons:</label>
        <select id="opt-semi">
          <option value="keep">Keep as-is</option>
          <option value="add">Add missing</option>
          <option value="remove">Remove all</option>
        </select>
      </div>
      <div class="opt-group">
        <label for="opt-quotes">Quotes:</label>
        <select id="opt-quotes">
          <option value="keep">Keep as-is</option>
          <option value="single">Single quotes</option>
          <option value="double">Double quotes</option>
        </select>
      </div>
    </div>
    <div class="editor-grid">
      <div class="editor-pane">
        <label>
          Input JavaScript
          <div class="label-actions">
            <button class="label-btn" onclick="loadSample('basic')">Basic</button>
            <button class="label-btn" onclick="loadSample('async')">Async</button>
            <button class="label-btn" onclick="loadSample('class')">Class</button>
            <button class="label-btn" onclick="clearInput()">Clear</button>
          </div>
        </label>
        <textarea class="code-input" id="input" placeholder="Paste your JavaScript here..." spellcheck="false"></textarea>
      </div>
      <div class="editor-pane">
        <label>
          Output
          <div class="label-actions">
            <button class="label-btn" onclick="copyOutput()">Copy</button>
            <button class="label-btn" onclick="downloadFile()">Download .js</button>
          </div>
        </label>
        <div class="output-wrap" id="output-wrap">
          <div class="line-numbers" id="line-nums"></div>
          <pre id="output" class="has-lines"></pre>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="cta-bottom fade-in">
  <h2>Explore <span class="grad">150+ Free Tools</span></h2>
  <p>NexTool is your all-in-one developer toolkit. Formatters, generators, converters, and more — all free, all instant.</p>
  <a href="/free-tools/" class="btn-cta" style="display:inline-block;padding:14px 36px;font-size:1rem">Browse All Tools</a>
</section>

<section style="max-width:900px;margin:40px auto;padding:0 24px;">
<div style="background:linear-gradient(135deg,rgba(99,102,241,0.1),rgba(168,85,247,0.08));border:1px solid rgba(99,102,241,0.15);border-radius:20px;padding:32px 28px;text-align:center;">
<div style="font-size:13px;color:#818cf8;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Founding Member</div>
<h3 style="font-size:22px;font-weight:800;color:#fff;margin:0 0 8px;">Get NexTool Pro</h3>
<p style="color:#94a3b8;font-size:14px;margin:0 auto 20px;max-width:500px;">No banners, clean output, enhanced features on all 150+ tools. One-time payment.</p>
<div style="display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap;">
<a href="/pro.html" style="display:inline-block;padding:12px 28px;background:linear-gradient(135deg,#6366f1,#a855f7,#ec4899);color:#fff;border-radius:10px;font-weight:700;font-size:15px;text-decoration:none;transition:transform 0.2s;" onmouseenter="this.style.transform='translateY(-2px)'" onmouseleave="this.style.transform='translateY(0)'">$29 — Get Pro</a>
<a href="/free-tools/" style="color:#94a3b8;font-size:14px;text-decoration:none;transition:color 0.2s;" onmouseenter="this.style.color='#e2e8f0'" onmouseleave="this.style.color='#94a3b8'">Browse 150+ Free Tools &rarr;</a>
</div>
</div>
</section>


<!-- AUTO-LINKED by NexTool Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/box-shadow-generator.html" style="color:var(--primary);text-decoration:none">CSS Box Shadow Generator</a> · <a href="/free-tools/emoji-picker.html" style="color:var(--primary);text-decoration:none">Emoji Picker & Search</a> · <a href="/free-tools/javascript-minifier.html" style="color:var(--primary);text-decoration:none">JavaScript Minifier & Beautifier</a> · <a href="/free-tools/meta-tag-generator.html" style="color:var(--primary);text-decoration:none">Meta Tag Generator</a> · <a href="/free-tools/favicon-generator.html" style="color:var(--primary);text-decoration:none">Favicon Generator</a></p>
</div>
<footer>
  <div class="footer-grid">
    <div class="footer-col"><h4>Tools</h4>
      <a href="/free-tools/">All Free Tools</a><a href="/free-tools/html-formatter.html">HTML Formatter</a><a href="/free-tools/css-formatter.html">CSS Formatter</a><a href="/free-tools/yaml-formatter.html">YAML Formatter</a><a href="/free-tools/csv-formatter.html">CSV Formatter</a>
    </div>
    <div class="footer-col"><h4>Resources</h4>
      <a href="/free-tools/">Free Tools</a><a href="/blog/">Blog</a><a href="/pro.html">NexTool Pro</a>
    </div>
    <div class="footer-col"><h4>Legal</h4>
      <a href="/terms.html">Privacy Policy</a><a href="/terms.html">Terms of Service</a>
    </div>
    <div class="footer-col"><h4>Product</h4>
      <a href="/">Home</a><a href="/pro.html">Pro</a><a href="/blog/">Blog</a>
    </div>
  </div>
  <div class="footer-bottom">&copy; 2026 NexTool. All rights reserved.</div>
</footer>

<div class="toast" id="toast">Copied!</div>

<script>
const inputEl=document.getElementById('input');
const outputEl=document.getElementById('output');
const lineNumsEl=document.getElementById('line-nums');
const statIn=document.getElementById('stat-in');
const statOut=document.getElementById('stat-out');
const statLines=document.getElementById('stat-lines');
const statSaving=document.getElementById('stat-saving');
const statPct=document.getElementById('stat-pct');
let rawOutput='';

function showToast(msg){
  const t=document.getElementById('toast');
  t.textContent=msg;t.classList.add('show');
  setTimeout(()=>t.classList.remove('show'),2000);
}

function getIndent(){
  const v=document.getElementById('opt-indent').value;
  return v==='tab'?'\t':' '.repeat(parseInt(v));
}

function updateStats(){
  const inLen=inputEl.value.length;
  const outLen=rawOutput.length;
  const lines=rawOutput?rawOutput.split('\n').length:0;
  statIn.textContent=inLen.toLocaleString()+' chars';
  statOut.textContent=outLen.toLocaleString()+' chars';
  statLines.textContent=lines.toLocaleString();
  if(inLen>0&&outLen>0&&outLen<inLen){
    const pct=Math.round((1-outLen/inLen)*100);
    if(pct>0){statPct.textContent=pct;statSaving.style.display=''}
    else{statSaving.style.display='none'}
  }else{statSaving.style.display='none'}
}

// ========== JS BEAUTIFIER ==========
function beautify(){
  const js=inputEl.value;
  if(!js.trim()){showToast('Paste some JavaScript first');return}
  const indent=getIndent();
  const semiOpt=document.getElementById('opt-semi').value;
  const quoteOpt=document.getElementById('opt-quotes').value;
  rawOutput=jsBeautify(js,indent,semiOpt,quoteOpt);
  renderOutput(rawOutput);
  updateStats();
  document.getElementById('btn-beautify').classList.add('active');
  document.getElementById('btn-minify').classList.remove('active');
}

function jsBeautify(code,indent,semiOpt,quoteOpt){
  let result='';
  let level=0;
  let i=0;
  const len=code.length;
  let newline=true;
  let lastChar='';
  let inFor=false;
  let forParens=0;

  function addIndent(){
    result+=indent.repeat(level);
  }

  function isAlphaNum(ch){return/[\w$]/.test(ch)}

  while(i<len){
    // Skip whitespace
    if(/\s/.test(code[i])){
      if(!newline&&result.length>0&&!result.endsWith(' ')&&!result.endsWith('\n')){
        result+=' ';
      }
      while(i<len&&/\s/.test(code[i]))i++;
      continue;
    }

    // Single-line comment
    if(code[i]==='/'&&code[i+1]==='/'){
      if(!newline){/* keep on same line */}else{addIndent()}
      let end=code.indexOf('\n',i);
      if(end===-1)end=len;
      result+=code.slice(i,end)+'\n';
      i=end+1;
      newline=true;
      continue;
    }

    // Multi-line comment
    if(code[i]==='/'&&code[i+1]==='*'){
      if(newline)addIndent();
      let end=code.indexOf('*/',i+2);
      if(end===-1)end=len-2;
      end+=2;
      result+=code.slice(i,end)+'\n';
      i=end;
      newline=true;
      continue;
    }

    // Strings
    if(code[i]==='"'||code[i]==="'"||code[i]==='`'){
      if(newline){addIndent();newline=false}
      const q=code[i];
      let j=i+1;
      if(q==='`'){
        // Template literal
        while(j<len&&code[j]!=='`'){
          if(code[j]==='\\')j++;
          j++;
        }
        j++;
      }else{
        while(j<len&&code[j]!==q){
          if(code[j]==='\\')j++;
          j++;
        }
        j++;
      }
      let str=code.slice(i,j);
      // Quote conversion
      if(quoteOpt==='single'&&q==='"'&&!str.includes("'")){
        str="'"+str.slice(1,-1).replace(/\\"/g,'"')+"'";
      }else if(quoteOpt==='double'&&q==="'"&&!str.includes('"')){
        str='"'+str.slice(1,-1).replace(/\\'/g,"'")+'"';
      }
      result+=str;
      lastChar=str[str.length-1];
      i=j;
      continue;
    }

    // Regex literal (basic detection)
    if(code[i]==='/'&&i>0){
      const prevNonSpace=result.trimEnd().slice(-1);
      if('=({[,;!&|?:+->~'.includes(prevNonSpace)){
        if(newline){addIndent();newline=false}
        let j=i+1;
        while(j<len&&code[j]!=='/'){
          if(code[j]==='\\')j++;
          if(code[j]==='['){while(j<len&&code[j]!==']'){if(code[j]==='\\')j++;j++}}
          j++;
        }
        j++;
        while(j<len&&/[gimsuy]/.test(code[j]))j++;
        result+=code.slice(i,j);
        lastChar=code[j-1];
        i=j;
        continue;
      }
    }

    if(newline){addIndent();newline=false}

    // Track 'for' statement for semicolons inside parens
    if(code.slice(i,i+3)==='for'&&!isAlphaNum(code[i+3]||'')){
      inFor=true;forParens=0;
    }

    // Opening braces
    if(code[i]==='{'||code[i]==='['){
      // Check if empty
      let peek=i+1;
      while(peek<len&&/\s/.test(code[peek]))peek++;
      const closingChar=code[i]==='{'?'}':']';
      if(code[peek]===closingChar){
        result+=code[i]+closingChar;
        i=peek+1;
        lastChar=closingChar;
        continue;
      }
      result+=' '+code[i]+'\n';
      level++;
      newline=true;
      lastChar=code[i];
      i++;
      continue;
    }

    // Closing braces
    if(code[i]==='}'||code[i]===']'){
      if(!newline)result+='\n';
      level=Math.max(0,level-1);
      addIndent();
      result+=code[i];
      lastChar=code[i];
      i++;
      // Check what comes after
      let peek=i;
      while(peek<len&&/\s/.test(code[peek]))peek++;
      if(code[peek]===','||code[peek]===';'||code[peek]===')'||code[peek]===']'){
        // Will be handled next iteration
      }else if(code[peek]!=='}'&&code[peek]!==']'&&peek<len){
        result+='\n';
        if(code[peek]!==undefined)newline=true;
      }
      continue;
    }

    // Parentheses
    if(code[i]==='('){
      if(inFor)forParens++;
      result+='(';
      lastChar='(';
      i++;continue;
    }
    if(code[i]===')'){
      if(inFor){forParens--;if(forParens<=0)inFor=false}
      result+=')';
      lastChar=')';
      i++;continue;
    }

    // Semicolons
    if(code[i]===';'){
      if(inFor&&forParens>0){
        result+='; ';
      }else{
        if(semiOpt!=='remove'){
          result+=';\n';
        }else{
          result+='\n';
        }
        newline=true;
      }
      lastChar=';';
      i++;continue;
    }

    // Comma
    if(code[i]===','){
      result+=',\n';
      newline=true;
      lastChar=',';
      i++;continue;
    }

    // Operators
    if('=+-*/%<>&|!^~?:'.includes(code[i])){
      // Multi-char operators
      const two=code.slice(i,i+2);
      const three=code.slice(i,i+3);
      if(three==='==='||three==='!=='||three==='>>>'||three==='**='||three==='&&='||three==='||='||three==='??='){
        result+=' '+three+' ';i+=3;lastChar=three[2];continue;
      }
      if(two==='=='||two==='!='||two==='>='||two==='<='||two==='=>'||two==='+='||two==='-='||two==='*='||two==='/='||two==='%='||two==='&&'||two==='||'||two==='??'||two==='**'||two==='>>'||two==='<<'||two==='++' ||two==='--'){
        if(two==='=>'){
          result+=' => ';
        }else if(two==='++'||two==='--'){
          result+=two;
        }else{
          result+=' '+two+' ';
        }
        i+=2;lastChar=two[1];continue;
      }
      if(code[i]==='?'||code[i]===':'){
        result+=' '+code[i]+' ';
      }else if(code[i]==='!'){
        result+=code[i];
      }else{
        result+=' '+code[i]+' ';
      }
      lastChar=code[i];
      i++;continue;
    }

    // Default: identifiers, numbers, etc.
    let j=i;
    while(j<len&&/[\w$.]/.test(code[j]))j++;
    if(j>i){
      const word=code.slice(i,j);
      // Add semicolons after statements if needed
      if(semiOpt==='add'&&result.endsWith('\n')&&!newline){
        // handled at semicolons
      }
      result+=word;
      lastChar=word[word.length-1];
      i=j;
    }else{
      result+=code[i];
      lastChar=code[i];
      i++;
    }
  }

  // Clean up
  let lines=result.split('\n');
  lines=lines.map(l=>l.trimEnd());
  result=lines.join('\n').replace(/\n{3,}/g,'\n\n').trim()+'\n';

  return result;
}

// ========== JS MINIFIER ==========
function minifyJS(){
  const js=inputEl.value;
  if(!js.trim()){showToast('Paste some JavaScript first');return}
  rawOutput=jsMinify(js);
  renderOutput(rawOutput);
  updateStats();
  document.getElementById('btn-minify').classList.add('active');
  document.getElementById('btn-beautify').classList.remove('active');
}

function jsMinify(code){
  let r='';
  let i=0;
  const len=code.length;
  let lastNonSpace='';

  while(i<len){
    // Single-line comment
    if(code[i]==='/'&&code[i+1]==='/'){
      let end=code.indexOf('\n',i);
      if(end===-1)end=len;
      i=end+1;continue;
    }
    // Multi-line comment
    if(code[i]==='/'&&code[i+1]==='*'){
      let end=code.indexOf('*/',i+2);
      if(end===-1)end=len-2;
      i=end+2;continue;
    }
    // Strings
    if(code[i]==='"'||code[i]==="'"||code[i]==='`'){
      const q=code[i];let j=i+1;
      if(q==='`'){
        while(j<len&&code[j]!=='`'){if(code[j]==='\\')j++;j++}
      }else{
        while(j<len&&code[j]!==q){if(code[j]==='\\')j++;j++}
      }
      j++;
      r+=code.slice(i,j);
      lastNonSpace=code[j-1];
      i=j;continue;
    }
    // Regex
    if(code[i]==='/'&&'=({[,;!&|?:+->~'.includes(lastNonSpace)){
      let j=i+1;
      while(j<len&&code[j]!=='/'){if(code[j]==='\\')j++;if(code[j]==='['){while(j<len&&code[j]!==']'){if(code[j]==='\\')j++;j++}}j++}
      j++;while(j<len&&/[gimsuy]/.test(code[j]))j++;
      r+=code.slice(i,j);lastNonSpace=code[j-1];i=j;continue;
    }
    // Whitespace
    if(/\s/.test(code[i])){
      while(i<len&&/\s/.test(code[i]))i++;
      // Need space between identifiers
      if(r.length>0&&/[\w$]/.test(r[r.length-1])&&i<len&&/[\w$]/.test(code[i])){
        r+=' ';
      }
      continue;
    }
    r+=code[i];
    lastNonSpace=code[i];
    i++;
  }
  return r;
}

// ========== SYNTAX HIGHLIGHTER ==========
function highlightJS(code){
  function esc(s){return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')}
  const keywords=new Set(['var','let','const','function','return','if','else','for','while','do','switch','case','break','continue','new','delete','typeof','instanceof','in','of','class','extends','super','import','export','default','from','as','try','catch','finally','throw','async','await','yield','void','this','static','get','set','with','debugger']);
  const boolNull=new Set(['true','false','null','undefined','NaN','Infinity']);
  let result='';
  let i=0;
  const len=code.length;
  let lastNonSpace='';

  while(i<len){
    // Single-line comment
    if(code[i]==='/'&&code[i+1]==='/'){
      let end=code.indexOf('\n',i);
      if(end===-1)end=len;
      result+='<span class="hl-comment">'+esc(code.slice(i,end))+'</span>';
      i=end;continue;
    }
    // Multi-line comment
    if(code[i]==='/'&&code[i+1]==='*'){
      let end=code.indexOf('*/',i+2);
      if(end===-1)end=len-2;
      end+=2;
      result+='<span class="hl-comment">'+esc(code.slice(i,end))+'</span>';
      i=end;continue;
    }
    // Template literals
    if(code[i]==='`'){
      let j=i+1;
      let s='<span class="hl-template">'+esc('`');
      while(j<len&&code[j]!=='`'){
        if(code[j]==='\\'){s+=esc(code.slice(j,j+2));j+=2;continue}
        if(code[j]==='$'&&code[j+1]==='{'){
          s+=esc('${')+'</span>';
          j+=2;
          let depth=1;
          while(j<len&&depth>0){
            if(code[j]==='{')depth++;
            if(code[j]==='}')depth--;
            if(depth>0)s+=esc(code[j]);
            j++;
          }
          s+='<span class="hl-template">'+esc('}');
          continue;
        }
        s+=esc(code[j]);j++;
      }
      if(j<len){s+=esc('`');j++}
      s+='</span>';
      result+=s;i=j;continue;
    }
    // Strings
    if(code[i]==='"'||code[i]==="'"){
      const q=code[i];let j=i+1;
      while(j<len&&code[j]!==q){if(code[j]==='\\')j++;j++}
      j++;
      result+='<span class="hl-string">'+esc(code.slice(i,j))+'</span>';
      lastNonSpace=q;i=j;continue;
    }
    // Regex
    if(code[i]==='/'&&'=({[,;!&|?:+->~ '.includes(lastNonSpace)){
      let j=i+1;let valid=true;
      while(j<len&&code[j]!=='/'){
        if(code[j]==='\n'){valid=false;break}
        if(code[j]==='\\')j++;
        if(code[j]==='['){while(j<len&&code[j]!==']'){if(code[j]==='\\')j++;j++}}
        j++;
      }
      if(valid&&j<len){
        j++;while(j<len&&/[gimsuy]/.test(code[j]))j++;
        result+='<span class="hl-regex">'+esc(code.slice(i,j))+'</span>';
        lastNonSpace='/';i=j;continue;
      }
    }
    // Numbers
    if(/\d/.test(code[i])||(code[i]==='.'&&/\d/.test(code[i+1]||''))){
      let j=i;
      if(code[j]==='0'&&(code[j+1]==='x'||code[j+1]==='X')){j+=2;while(j<len&&/[\da-fA-F_]/.test(code[j]))j++}
      else if(code[j]==='0'&&(code[j+1]==='b'||code[j+1]==='B')){j+=2;while(j<len&&/[01_]/.test(code[j]))j++}
      else if(code[j]==='0'&&(code[j+1]==='o'||code[j+1]==='O')){j+=2;while(j<len&&/[0-7_]/.test(code[j]))j++}
      else{while(j<len&&/[\d._]/.test(code[j]))j++;if(j<len&&(code[j]==='e'||code[j]==='E')){j++;if(code[j]==='+'||code[j]==='-')j++;while(j<len&&/\d/.test(code[j]))j++}if(j<len&&code[j]==='n')j++}
      result+='<span class="hl-number">'+esc(code.slice(i,j))+'</span>';
      lastNonSpace=code[j-1];i=j;continue;
    }
    // Identifiers & keywords
    if(/[\w$]/.test(code[i])){
      let j=i;while(j<len&&/[\w$]/.test(code[j]))j++;
      const word=code.slice(i,j);
      // Check if next non-space is (
      let peek=j;while(peek<len&&/\s/.test(code[peek]))peek++;
      if(keywords.has(word)){
        result+='<span class="hl-keyword">'+esc(word)+'</span>';
      }else if(boolNull.has(word)){
        result+='<span class="hl-'+(word==='null'||word==='undefined'?'null':'boolean')+'">'+esc(word)+'</span>';
      }else if(code[peek]==='('){
        result+='<span class="hl-function">'+esc(word)+'</span>';
      }else{
        result+=esc(word);
      }
      lastNonSpace=word[word.length-1];i=j;continue;
    }
    // Braces
    if('{}[]()'.includes(code[i])){
      result+='<span class="hl-brace">'+esc(code[i])+'</span>';
      lastNonSpace=code[i];i++;continue;
    }
    // Operators
    if('=+-*/%<>&|!^~?:,.;'.includes(code[i])){
      result+='<span class="hl-operator">'+esc(code[i])+'</span>';
      if(!/\s/.test(code[i]))lastNonSpace=code[i];
      i++;continue;
    }
    // Whitespace / other
    if(/\s/.test(code[i])){
      result+=code[i];i++;continue;
    }
    result+=esc(code[i]);
    lastNonSpace=code[i];
    i++;
  }
  return result;
}

// ========== RENDER OUTPUT ==========
function renderOutput(code){
  const highlighted=highlightJS(code);
  outputEl.innerHTML=highlighted;
  const lines=code.split('\n');
  let nums='';
  for(let i=1;i<=lines.length;i++)nums+=i+'\n';
  lineNumsEl.textContent=nums;
  document.getElementById('output-wrap').scrollTop=0;
}

// ========== ACTIONS ==========
function copyOutput(){
  if(!rawOutput){showToast('Nothing to copy');return}
  navigator.clipboard.writeText(rawOutput).then(()=>showToast('Copied to clipboard!')).catch(()=>showToast('Copy failed'));
}

function downloadFile(){
  if(!rawOutput){showToast('Nothing to download');return}
  const blob=new Blob([rawOutput],{type:'text/javascript'});
  const a=document.createElement('a');
  a.href=URL.createObjectURL(blob);
  a.download='formatted.js';
  a.click();
  URL.revokeObjectURL(a.href);
  showToast('Downloaded!');
}

function clearInput(){
  inputEl.value='';rawOutput='';
  outputEl.innerHTML='';lineNumsEl.textContent='';
  updateStats();
}

function loadSample(type){
  const samples={
    basic:`const greet=function(name){if(!name){console.warn("No name provided");return null}const message="Hello, "+name+"!";console.log(message);return message};const users=["Alice","Bob","Charlie"];for(let i=0;i<users.length;i++){greet(users[i])}const config={api:"https://api.example.com",timeout:5000,retries:3,headers:{"Content-Type":"application/json","Authorization":"Bearer token123"}};function fetchData(url,options){return fetch(url,{...config,...options}).then(res=>res.json()).catch(err=>{console.error("Fetch failed:",err);throw err})}`,
    async:`async function loadUserData(userId){try{const response=await fetch(\`/api/users/\${userId}\`);if(!response.ok){throw new Error(\`HTTP \${response.status}\`)}const user=await response.json();const[posts,comments]=await Promise.all([fetch(\`/api/posts?user=\${userId}\`).then(r=>r.json()),fetch(\`/api/comments?user=\${userId}\`).then(r=>r.json())]);return{...user,posts,comments}}catch(error){console.error("Failed to load user:",error);return null}}const delay=(ms)=>new Promise(resolve=>setTimeout(resolve,ms));async function retryFetch(url,retries=3){for(let i=0;i<retries;i++){try{return await fetch(url)}catch(e){if(i===retries-1)throw e;await delay(1000*Math.pow(2,i))}}}`,
    class:`class EventEmitter{#listeners=new Map();#maxListeners=10;constructor(options={}){this.#maxListeners=options.maxListeners??10}on(event,listener){if(!this.#listeners.has(event)){this.#listeners.set(event,[])}const listeners=this.#listeners.get(event);if(listeners.length>=this.#maxListeners){console.warn(\`Max listeners (\${this.#maxListeners}) for "\${event}"\`)}listeners.push(listener);return this}off(event,listener){const listeners=this.#listeners.get(event);if(listeners){const idx=listeners.indexOf(listener);if(idx>-1)listeners.splice(idx,1)}return this}emit(event,...args){const listeners=this.#listeners.get(event)||[];for(const listener of listeners){listener.apply(this,args)}return listeners.length>0}once(event,listener){const wrapper=(...args)=>{this.off(event,wrapper);listener.apply(this,args)};this.on(event,wrapper);return this}}`
  };
  inputEl.value=samples[type]||samples.basic;
  beautify();
}

inputEl.addEventListener('input',()=>{
  statIn.textContent=inputEl.value.length.toLocaleString()+' chars';
});

const obs=new IntersectionObserver(entries=>{entries.forEach(e=>{if(e.isIntersecting){e.target.classList.add('visible');obs.unobserve(e.target)}})},{threshold:.15});
document.querySelectorAll('.fade-in').forEach(el=>obs.observe(el));
</script>
<script src="/js/revenue.js" defer></script>
<script src="/js/lead-capture.js" defer></script>
<script src="/js/analytics-lite.js" defer></script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "What does a JavaScript beautifier do?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "A JavaScript beautifier takes minified or poorly formatted JavaScript code and reformats it with proper indentation, line breaks, and spacing. NexTool's JS Beautifier handles functions, classes, async/await, template literals, and regex patterns while adding syntax highlighting for easier reading."
      }
    },
    {
      "@type": "Question",
      "name": "Can I convert between single and double quotes?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes. The tool offers a quote style option that lets you convert all string literals to single quotes or double quotes, or keep them as-is. It only converts quotes when it is safe to do so (no conflicting quotes inside the string)."
      }
    },
    {
      "@type": "Question",
      "name": "Does the JavaScript minifier remove comments?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "Yes. The minifier strips all single-line and multi-line comments, removes unnecessary whitespace, and collapses the code to the smallest possible size while preserving functionality. It correctly handles strings, template literals, and regex patterns to avoid breaking your code."
      }
    }
  ]
}
</script>
</body>
</html>