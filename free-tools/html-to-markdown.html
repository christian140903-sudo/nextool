<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
    <link rel="icon" type="image/svg+xml" href="/img/favicon.svg">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Free HTML to Markdown Converter — Paste HTML, Get MD | ANIMA</title>
<meta name="description" content="Convert HTML to clean Markdown instantly. Supports tables, lists, headings, links, images, code blocks, and GFM. Live preview. 100% free, no signup.">
<meta name="keywords" content="HTML to Markdown, HTML converter, Markdown converter, GFM, HTML to MD, free online tool, ANIMA">
<meta name="robots" content="index, follow">
<meta property="og:title" content="Free HTML to Markdown Converter | ANIMA">
<meta property="og:description" content="Convert HTML to clean Markdown instantly. Tables, lists, code blocks, GFM support. 100% free.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://nextool.app/free-tools/html-to-markdown.html">
<meta property="og:image" content="https://nextool.app/img/og-image.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<link rel="canonical" href="https://nextool.app/free-tools/html-to-markdown.html">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Free HTML to Markdown Converter | ANIMA">
<meta name="twitter:description" content="Convert HTML to clean Markdown instantly. Free online tool by ANIMA.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"SoftwareApplication","name":"HTML to Markdown Converter","applicationCategory":"DeveloperApplication","operatingSystem":"Web","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"description":"Free online HTML to Markdown converter with GFM support, tables, code blocks, and live preview."}
</script>
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{--bg:#050508;--surface:#111118;--surface2:#1a1a24;--border:#2a2a3a;--text:#e4e4eb;--text2:#9494a8;--primary:#00d4ff;--accent:#a855f7;--pink:#ec4899;--green:#22c55e;--red:#ef4444;--cyan:#22d3ee;--yellow:#eab308;--radius:12px;--glass:rgba(17,17,24,0.7)}
html{scroll-behavior:smooth}
body{font-family:'Inter',system-ui,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;min-height:100vh;overflow-x:hidden}
.nav{position:sticky;top:0;z-index:100;background:rgba(5,5,8,0.85);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);padding:0 2rem;height:64px;display:flex;align-items:center;justify-content:space-between}
.nav-logo{font-size:1.4rem;font-weight:800;background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;text-decoration:none}
.nav-links{display:flex;align-items:center;gap:1.5rem}
.nav-links a{color:var(--text2);text-decoration:none;font-size:.875rem;font-weight:500;transition:color .2s}
.nav-links a:hover{color:var(--text)}
.nav-cta{background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff!important;padding:.5rem 1.2rem;border-radius:8px;font-weight:600;-webkit-text-fill-color:#fff!important}
.nav-cta:hover{opacity:.9}
.nav-toggle{display:none;background:none;border:none;color:var(--text);font-size:1.5rem;cursor:pointer}
.hero{text-align:center;padding:3rem 1.5rem 2rem;max-width:700px;margin:0 auto}
.hero h1{font-size:2.2rem;font-weight:800;line-height:1.2;margin-bottom:.75rem}
.hero h1 span{background:linear-gradient(135deg,var(--primary),var(--accent),var(--pink));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{color:var(--text2);font-size:1rem}
.tool-container{max-width:1200px;margin:0 auto;padding:0 1.5rem 3rem}
.toolbar{display:flex;flex-wrap:wrap;gap:.5rem;margin-bottom:1rem;align-items:center}
.toolbar button,.toolbar select,.toolbar label{background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.45rem .9rem;border-radius:8px;font-size:.8rem;font-weight:500;cursor:pointer;transition:all .2s;font-family:inherit}
.toolbar button:hover{border-color:var(--primary);background:rgba(0,212,255,.12)}
.toolbar button.active{background:linear-gradient(135deg,var(--primary),var(--accent));border-color:transparent;color:#fff}
.toolbar label{display:flex;align-items:center;gap:.4rem;cursor:pointer;font-size:.78rem}
.toolbar label input[type="checkbox"]{accent-color:var(--primary);width:14px;height:14px}
.mode-btns{display:flex;gap:0;margin-right:.5rem}
.mode-btns button{border-radius:0;border-right:none}
.mode-btns button:first-child{border-radius:8px 0 0 8px}
.mode-btns button:last-child{border-radius:0 8px 8px 0;border-right:1px solid var(--border)}
.mode-btns button.active{border-color:transparent}
.status-bar{display:flex;align-items:center;gap:1rem;margin-bottom:1rem;font-size:.8rem;color:var(--text2)}
.status-dot{width:8px;height:8px;border-radius:50%;display:inline-block}
.status-dot.ok{background:var(--green)}.status-dot.empty{background:var(--border)}
.panels{display:grid;grid-template-columns:1fr 1fr;gap:1rem;min-height:500px}
.panel{background:var(--glass);backdrop-filter:blur(16px);border:1px solid var(--border);border-radius:var(--radius);overflow:hidden;display:flex;flex-direction:column}
.panel-header{padding:.6rem 1rem;border-bottom:1px solid var(--border);font-size:.8rem;font-weight:600;color:var(--text2);display:flex;justify-content:space-between;align-items:center;background:rgba(26,26,36,0.5)}
.panel-body{flex:1;position:relative;overflow:auto}
textarea.code-input{width:100%;height:100%;min-height:400px;background:transparent;border:none;color:var(--text);font-family:'Courier New',monospace;font-size:.85rem;padding:1rem;resize:none;outline:none;line-height:1.7;tab-size:2}
textarea.code-input::placeholder{color:var(--text2);opacity:.5}
.output-area{padding:1rem;font-family:'Courier New',monospace;font-size:.85rem;line-height:1.7;white-space:pre-wrap;word-break:break-all;min-height:400px;color:var(--text);user-select:text}
.preview-area{padding:1.5rem;font-family:'Inter',sans-serif;font-size:.9rem;line-height:1.7;min-height:400px;color:var(--text)}
.preview-area h1,.preview-area h2,.preview-area h3,.preview-area h4,.preview-area h5,.preview-area h6{color:var(--text);margin:1em 0 .5em;font-weight:700}
.preview-area h1{font-size:1.8em;border-bottom:1px solid var(--border);padding-bottom:.3em}
.preview-area h2{font-size:1.4em;border-bottom:1px solid var(--border);padding-bottom:.2em}
.preview-area h3{font-size:1.2em}
.preview-area p{margin:.6em 0}
.preview-area a{color:var(--primary)}
.preview-area code{background:var(--surface2);padding:.15em .4em;border-radius:4px;font-size:.85em;font-family:'Courier New',monospace}
.preview-area pre{background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:1rem;overflow-x:auto;margin:.8em 0}
.preview-area pre code{background:none;padding:0}
.preview-area blockquote{border-left:3px solid var(--primary);padding:.5em 1em;margin:.8em 0;color:var(--text2);background:rgba(0,212,255,.05);border-radius:0 8px 8px 0}
.preview-area ul,.preview-area ol{padding-left:1.5em;margin:.6em 0}
.preview-area li{margin:.3em 0}
.preview-area table{border-collapse:collapse;width:100%;margin:.8em 0}
.preview-area th,.preview-area td{border:1px solid var(--border);padding:.5em .8em;text-align:left}
.preview-area th{background:var(--surface2);font-weight:600}
.preview-area hr{border:none;border-top:1px solid var(--border);margin:1.5em 0}
.preview-area img{max-width:100%;border-radius:8px}
.preview-area strong{font-weight:700}
.preview-area em{font-style:italic}
.cta-section{text-align:center;padding:4rem 1.5rem;max-width:700px;margin:0 auto}
.cta-section h2{font-size:1.8rem;font-weight:800;margin-bottom:.75rem}
.cta-section h2 span{background:linear-gradient(135deg,var(--primary),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.cta-section p{color:var(--text2);margin-bottom:1.5rem}
.cta-btn{display:inline-block;background:linear-gradient(135deg,var(--primary),var(--accent));color:#fff;padding:.75rem 2rem;border-radius:10px;font-weight:700;text-decoration:none;font-size:1rem;transition:transform .2s,box-shadow .2s}
.cta-btn:hover{transform:translateY(-2px);box-shadow:0 8px 30px rgba(0,212,255,.3)}
.footer{border-top:1px solid var(--border);padding:3rem 2rem 2rem;max-width:1200px;margin:0 auto}
.footer-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:2rem;margin-bottom:2rem}
.footer-col h4{font-size:.85rem;font-weight:700;margin-bottom:.75rem;color:var(--text)}
.footer-col a{display:block;color:var(--text2);text-decoration:none;font-size:.8rem;margin-bottom:.4rem;transition:color .2s}
.footer-col a:hover{color:var(--primary)}
.footer-bottom{text-align:center;color:var(--text2);font-size:.75rem;padding-top:1.5rem;border-top:1px solid var(--border)}
.fade-in{opacity:0;transform:translateY(20px);transition:opacity .6s,transform .6s}
.fade-in.visible{opacity:1;transform:translateY(0)}
.toast{position:fixed;bottom:2rem;left:50%;transform:translateX(-50%) translateY(80px);background:var(--surface2);border:1px solid var(--border);color:var(--text);padding:.6rem 1.2rem;border-radius:10px;font-size:.85rem;font-weight:500;z-index:200;transition:transform .3s;pointer-events:none}
.toast.show{transform:translateX(-50%) translateY(0)}
@media(max-width:768px){
  .panels{grid-template-columns:1fr}
  .nav-links{display:none;position:absolute;top:64px;left:0;right:0;background:var(--bg);border-bottom:1px solid var(--border);flex-direction:column;padding:1rem 2rem;gap:1rem}
  .nav-links.open{display:flex}
  .nav-toggle{display:block}
  .hero h1{font-size:1.6rem}
  .footer-grid{grid-template-columns:1fr}
  .toolbar{gap:.35rem}
}
</style>
</head>
<body>

<nav class="nav">
  <a href="/" class="nav-logo">ANIMA</a>
  <button class="nav-toggle" onclick="document.querySelector('.nav-links').classList.toggle('open')" aria-label="Menu">&#9776;</button>
  <div class="nav-links">
    <a href="/">Home</a>
    <a href="/free-tools/">Tools</a>
    <a href="/free-tools/">Free Tools</a>
    <a href="/blog/">Blog</a>
    <a href="https://github.com/christian140903-sudo/nextool" class="nav-cta" target="_blank" rel="noopener">GitHub</a>
  </div>
</nav>

<section class="hero fade-in">
  <h1>Free <span>HTML to Markdown</span> Converter</h1>
  <p>Paste HTML, get clean Markdown. Supports headings, tables, lists, links, images, code blocks, and GitHub Flavored Markdown. Live preview included. No signup required.</p>
</section>

<div class="tool-container fade-in">
  <div class="toolbar">
    <div class="mode-btns">
      <button class="active" id="modeHtmlMd" onclick="setMode('html-to-md')">HTML &rarr; MD</button>
      <button id="modeMdHtml" onclick="setMode('md-to-html')">MD &rarr; HTML</button>
    </div>
    <button onclick="copyOutput()">Copy</button>
    <button onclick="downloadOutput()">Download</button>
    <button onclick="loadSample()">Sample</button>
    <button onclick="clearAll()">Clear</button>
    <button id="previewBtn" onclick="togglePreview()">Preview</button>
    <label><input type="checkbox" id="optGfm" checked onchange="convert()"> GFM Tables</label>
    <label><input type="checkbox" id="optBr" onchange="convert()"> Line Breaks</label>
  </div>

  <div class="status-bar">
    <span><span class="status-dot empty" id="statusDot"></span></span>
    <span id="statusText">Paste HTML to begin</span>
    <span id="sizeInfo" style="margin-left:auto"></span>
  </div>

  <div class="panels">
    <div class="panel">
      <div class="panel-header"><span id="inputLabel">HTML Input</span><span id="lineCount"></span></div>
      <div class="panel-body">
        <textarea class="code-input" id="inputArea" placeholder="Paste your HTML here..." spellcheck="false"></textarea>
      </div>
    </div>
    <div class="panel">
      <div class="panel-header"><span id="outputLabel">Markdown Output</span><span id="outputInfo"></span></div>
      <div class="panel-body">
        <div class="output-area" id="outputArea"></div>
        <div class="preview-area" id="previewArea" style="display:none"></div>
      </div>
    </div>
  </div>
</div>

<section class="cta-section fade-in">
  <h2>Need something <span>more powerful</span>?</h2>
  <p>Let us build it for you. Custom APIs, dashboards, automations &mdash; whatever you need.</p>
  <a href="/#contact" class="cta-btn">Start a Project &rarr;</a>
</section>

<section style="max-width:900px;margin:40px auto;padding:0 24px;">
<div style="background:linear-gradient(135deg,rgba(0,212,255,0.1),rgba(168,85,247,0.08));border:1px solid rgba(0,212,255,0.15);border-radius:20px;padding:32px 28px;text-align:center;">
<div style="font-size:13px;color:#818cf8;font-weight:600;text-transform:uppercase;letter-spacing:1px;margin-bottom:8px;">Founding Member</div>
<h3 style="font-size:22px;font-weight:800;color:#fff;margin:0 0 8px;">ANIMA on GitHub</h3>
<p style="color:#94a3b8;font-size:14px;margin:0 auto 20px;max-width:500px;">253+ free tools. No signup. Open source. Built by Christian Bucher.</p>
<div style="display:flex;align-items:center;justify-content:center;gap:12px;flex-wrap:wrap;">
<a href="/about/" style="display:inline-block;padding:12px 28px;background:linear-gradient(135deg,#00d4ff,#a855f7,#ec4899);color:#fff;border-radius:10px;font-weight:700;font-size:15px;text-decoration:none;">GitHub</a>
<a href="/free-tools/" style="color:#94a3b8;font-size:14px;text-decoration:none;">Browse 250+ Free Tools &rarr;</a>
</div>
</div>
</section>


<!-- AUTO-LINKED by ANIMA Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/box-shadow-generator.html" style="color:var(--primary);text-decoration:none">CSS Box Shadow Generator</a> · <a href="/free-tools/emoji-picker.html" style="color:var(--primary);text-decoration:none">Emoji Picker & Search</a> · <a href="/free-tools/json-to-yaml-converter.html" style="color:var(--primary);text-decoration:none">Free JSON to YAML Converter</a></p>
</div>

<!-- AUTO-LINKED by ANIMA Engine -->
<div style="margin:2rem 0;padding:1.5rem;background:var(--surface);border:1px solid var(--border);border-radius:var(--radius)">
<p style="font-weight:600;margin-bottom:.5rem">Related Tools</p>
<p><a href="/free-tools/json-to-yaml.html" style="color:var(--primary);text-decoration:none">Free JSON to YAML Converter</a> · <a href="/free-tools/yaml-to-json.html" style="color:var(--primary);text-decoration:none">YAML to JSON Converter</a> · <a href="/free-tools/markdown-editor.html" style="color:var(--primary);text-decoration:none">Free Markdown Editor</a></p>
</div>
<footer class="footer fade-in">
  <div class="footer-grid">
    <div class="footer-col">
      <h4>Products</h4>
      <a href="/free-tools/">250+ Free Tools</a>
      <a href="/about/">About</a>
      <a href="/docs/">Documentation</a>
    </div>
    <div class="footer-col">
      <h4>Explore</h4>
      <a href="/free-tools/">Free Tools</a><a href="/blog/">Blog</a><a href="/about/">FAQ</a><a href="/about/">About</a>
    </div>
    <div class="footer-col">
      <h4>Ecosystem</h4>
      <a href="/">ANIMA Home</a><a href="/#contact">Contact</a><a href="https://github.com/christian140903-sudo/nextool" target="_blank">GitHub</a>
    </div>
  </div>
  <div class="footer-bottom">&copy; 2026 ANIMA. AI-powered tools for everyone.</div>
</footer>

<div class="toast" id="toast"></div>

<script>
let mode = 'html-to-md';
let showPreview = false;
let lastOutput = '';

const inputArea = document.getElementById('inputArea');
const outputArea = document.getElementById('outputArea');
const previewArea = document.getElementById('previewArea');
const statusDot = document.getElementById('statusDot');
const statusText = document.getElementById('statusText');
const sizeInfo = document.getElementById('sizeInfo');
const lineCount = document.getElementById('lineCount');
const outputInfo = document.getElementById('outputInfo');

inputArea.addEventListener('input', debounce(convert, 200));
inputArea.addEventListener('input', updateLineCount);

function debounce(fn, ms) { let t; return (...a) => { clearTimeout(t); t = setTimeout(() => fn(...a), ms); }; }

function updateLineCount() {
  const n = inputArea.value.split('\n').length;
  lineCount.textContent = n + ' line' + (n !== 1 ? 's' : '');
}

function setMode(m) {
  mode = m;
  document.getElementById('modeHtmlMd').classList.toggle('active', m === 'html-to-md');
  document.getElementById('modeMdHtml').classList.toggle('active', m === 'md-to-html');
  document.getElementById('inputLabel').textContent = m === 'html-to-md' ? 'HTML Input' : 'Markdown Input';
  document.getElementById('outputLabel').textContent = m === 'html-to-md' ? 'Markdown Output' : 'HTML Output';
  inputArea.placeholder = m === 'html-to-md' ? 'Paste your HTML here...' : 'Type or paste Markdown here...';
  convert();
}

function togglePreview() {
  showPreview = !showPreview;
  document.getElementById('previewBtn').classList.toggle('active', showPreview);
  outputArea.style.display = showPreview ? 'none' : '';
  previewArea.style.display = showPreview ? '' : 'none';
  if (showPreview) renderPreview();
}

function renderPreview() {
  if (mode === 'html-to-md') {
    previewArea.innerHTML = mdToHtml(lastOutput);
  } else {
    previewArea.innerHTML = lastOutput;
  }
}

function convert() {
  const raw = inputArea.value;
  if (!raw.trim()) {
    outputArea.textContent = '';
    previewArea.innerHTML = '';
    lastOutput = '';
    statusDot.className = 'status-dot empty';
    statusText.textContent = mode === 'html-to-md' ? 'Paste HTML to begin' : 'Type Markdown to begin';
    sizeInfo.textContent = '';
    outputInfo.textContent = '';
    return;
  }
  sizeInfo.textContent = formatBytes(new Blob([raw]).size);
  if (mode === 'html-to-md') {
    lastOutput = htmlToMarkdown(raw);
  } else {
    lastOutput = mdToHtml(raw);
  }
  outputArea.textContent = lastOutput;
  outputInfo.textContent = lastOutput.split('\n').length + ' lines';
  statusDot.className = 'status-dot ok';
  statusText.textContent = 'Converted';
  if (showPreview) renderPreview();
}

/* ========== HTML to Markdown Engine ========== */
function htmlToMarkdown(html) {
  const gfm = document.getElementById('optGfm').checked;
  const br = document.getElementById('optBr').checked;
  const doc = new DOMParser().parseFromString(html, 'text/html');
  return processNode(doc.body, { gfm, br }).replace(/\n{3,}/g, '\n\n').trim();
}

function processNode(node, opts) {
  if (node.nodeType === 3) {
    let t = node.textContent;
    if (node.parentElement && ['PRE','CODE','SCRIPT','STYLE'].includes(node.parentElement.tagName)) return t;
    t = t.replace(/\s+/g, ' ');
    return t;
  }
  if (node.nodeType !== 1) return '';
  const tag = node.tagName;
  const children = () => {
    let r = '';
    for (const c of node.childNodes) r += processNode(c, opts);
    return r;
  };

  switch (tag) {
    case 'H1': case 'H2': case 'H3': case 'H4': case 'H5': case 'H6': {
      const lvl = parseInt(tag[1]);
      return '\n\n' + '#'.repeat(lvl) + ' ' + children().trim() + '\n\n';
    }
    case 'P': return '\n\n' + children().trim() + '\n\n';
    case 'BR': return opts.br ? '  \n' : '\n';
    case 'HR': return '\n\n---\n\n';
    case 'STRONG': case 'B': return '**' + children().trim() + '**';
    case 'EM': case 'I': return '*' + children().trim() + '*';
    case 'DEL': case 'S': case 'STRIKE': return '~~' + children().trim() + '~~';
    case 'A': {
      const href = node.getAttribute('href') || '';
      const title = node.getAttribute('title');
      const text = children().trim();
      if (!text) return '';
      if (title) return '[' + text + '](' + href + ' "' + title + '")';
      return '[' + text + '](' + href + ')';
    }
    case 'IMG': {
      const src = node.getAttribute('src') || '';
      const alt = node.getAttribute('alt') || '';
      const title = node.getAttribute('title');
      if (title) return '![' + alt + '](' + src + ' "' + title + '")';
      return '![' + alt + '](' + src + ')';
    }
    case 'CODE': {
      if (node.parentElement && node.parentElement.tagName === 'PRE') return children();
      const text = children();
      if (text.includes('`')) return '`` ' + text + ' ``';
      return '`' + text + '`';
    }
    case 'PRE': {
      const codeEl = node.querySelector('code');
      let lang = '';
      if (codeEl) {
        const cls = codeEl.className || '';
        const m = cls.match(/(?:language-|lang-)(\w+)/);
        if (m) lang = m[1];
      }
      const code = codeEl ? codeEl.textContent : node.textContent;
      return '\n\n```' + lang + '\n' + code.replace(/\n$/, '') + '\n```\n\n';
    }
    case 'BLOCKQUOTE': {
      const inner = children().trim();
      return '\n\n' + inner.split('\n').map(l => '> ' + l).join('\n') + '\n\n';
    }
    case 'UL': {
      let items = '';
      for (const li of node.children) {
        if (li.tagName === 'LI') items += processLi(li, opts, '-');
      }
      return '\n\n' + items.trim() + '\n\n';
    }
    case 'OL': {
      let items = '';
      let idx = parseInt(node.getAttribute('start') || '1');
      for (const li of node.children) {
        if (li.tagName === 'LI') { items += processLi(li, opts, idx + '.'); idx++; }
      }
      return '\n\n' + items.trim() + '\n\n';
    }
    case 'LI': return children();
    case 'TABLE': {
      if (!opts.gfm) return children();
      return '\n\n' + processTable(node) + '\n\n';
    }
    case 'THEAD': case 'TBODY': case 'TFOOT': case 'TR': case 'TH': case 'TD': return children();
    case 'INPUT': {
      if (node.type === 'checkbox') return node.checked ? '[x] ' : '[ ] ';
      return '';
    }
    case 'SCRIPT': case 'STYLE': case 'NOSCRIPT': return '';
    case 'DIV': case 'SECTION': case 'ARTICLE': case 'MAIN': case 'HEADER': case 'FOOTER': case 'NAV': case 'ASIDE':
      return '\n\n' + children().trim() + '\n\n';
    case 'SPAN': case 'ABBR': case 'SMALL': case 'SUP': case 'SUB': return children();
    default: return children();
  }
}

function processLi(li, opts, bullet) {
  let text = '';
  let sub = '';
  for (const c of li.childNodes) {
    if (c.nodeType === 1 && (c.tagName === 'UL' || c.tagName === 'OL')) {
      sub += processNode(c, opts).trim().split('\n').map(l => '    ' + l).join('\n') + '\n';
    } else {
      text += processNode(c, opts);
    }
  }
  return bullet + ' ' + text.trim() + '\n' + sub;
}

function processTable(table) {
  const rows = [];
  const allTr = table.querySelectorAll('tr');
  allTr.forEach(tr => {
    const cells = [];
    tr.querySelectorAll('th, td').forEach(cell => {
      cells.push(cell.textContent.trim().replace(/\|/g, '\\|'));
    });
    rows.push(cells);
  });
  if (rows.length === 0) return '';
  const colCount = Math.max(...rows.map(r => r.length));
  rows.forEach(r => { while (r.length < colCount) r.push(''); });
  let md = '| ' + rows[0].join(' | ') + ' |\n';
  md += '| ' + rows[0].map(() => '---').join(' | ') + ' |\n';
  for (let i = 1; i < rows.length; i++) {
    md += '| ' + rows[i].join(' | ') + ' |\n';
  }
  return md.trim();
}

/* ========== Markdown to HTML Engine ========== */
function mdToHtml(md) {
  let html = md;
  // Code blocks
  html = html.replace(/```(\w*)\n([\s\S]*?)```/g, (_, lang, code) => {
    const cls = lang ? ' class="language-' + escHtml(lang) + '"' : '';
    return '<pre><code' + cls + '>' + escHtml(code.replace(/\n$/, '')) + '</code></pre>';
  });
  // Headings
  html = html.replace(/^(#{1,6})\s+(.+)$/gm, (_, h, t) => '<h' + h.length + '>' + inlineMd(t) + '</h' + h.length + '>');
  // HR
  html = html.replace(/^(\*{3,}|-{3,}|_{3,})\s*$/gm, '<hr>');
  // Blockquote
  html = html.replace(/^(?:>\s?(.+)\n?)+/gm, m => {
    const inner = m.replace(/^>\s?/gm, '').trim();
    return '<blockquote><p>' + inlineMd(inner) + '</p></blockquote>';
  });
  // Unordered lists
  html = html.replace(/^(?:[-*+]\s+.+\n?)+/gm, m => {
    const items = m.trim().split('\n').map(l => '<li>' + inlineMd(l.replace(/^[-*+]\s+/, '')) + '</li>').join('');
    return '<ul>' + items + '</ul>';
  });
  // Ordered lists
  html = html.replace(/^(?:\d+\.\s+.+\n?)+/gm, m => {
    const items = m.trim().split('\n').map(l => '<li>' + inlineMd(l.replace(/^\d+\.\s+/, '')) + '</li>').join('');
    return '<ol>' + items + '</ol>';
  });
  // Table
  html = html.replace(/^\|(.+)\|\s*\n\|[-:\s|]+\|\s*\n((?:\|.+\|\s*\n?)*)/gm, (_, hdr, body) => {
    const thCells = hdr.split('|').map(c => '<th>' + inlineMd(c.trim()) + '</th>').join('');
    const rows = body.trim().split('\n').map(r => {
      const cells = r.replace(/^\||\|$/g, '').split('|').map(c => '<td>' + inlineMd(c.trim()) + '</td>').join('');
      return '<tr>' + cells + '</tr>';
    }).join('');
    return '<table><thead><tr>' + thCells + '</tr></thead><tbody>' + rows + '</tbody></table>';
  });
  // Paragraphs
  html = html.replace(/^(?!<[a-z])((?:.+\n?)+)/gm, m => {
    const t = m.trim();
    if (!t || t.startsWith('<')) return t;
    return '<p>' + inlineMd(t) + '</p>';
  });
  return html.trim();
}

function inlineMd(t) {
  t = t.replace(/`([^`]+)`/g, '<code>$1</code>');
  t = t.replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>');
  t = t.replace(/__(.+?)__/g, '<strong>$1</strong>');
  t = t.replace(/\*(.+?)\*/g, '<em>$1</em>');
  t = t.replace(/_(.+?)_/g, '<em>$1</em>');
  t = t.replace(/~~(.+?)~~/g, '<del>$1</del>');
  t = t.replace(/!\[([^\]]*)\]\(([^)]+)\)/g, '<img src="$2" alt="$1">');
  t = t.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2">$1</a>');
  return t;
}

function escHtml(s) { return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;'); }

/* ========== Utility Functions ========== */
function copyOutput() {
  if (!lastOutput) { showToast('Nothing to copy'); return; }
  navigator.clipboard.writeText(lastOutput).then(() => showToast('Copied to clipboard'));
}

function downloadOutput() {
  if (!lastOutput) { showToast('Nothing to download'); return; }
  const ext = mode === 'html-to-md' ? 'md' : 'html';
  const type = mode === 'html-to-md' ? 'text/markdown' : 'text/html';
  const blob = new Blob([lastOutput], { type });
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'converted.' + ext;
  a.click();
  URL.revokeObjectURL(a.href);
  showToast('Downloaded converted.' + ext);
}

function clearAll() {
  inputArea.value = '';
  outputArea.textContent = '';
  previewArea.innerHTML = '';
  lastOutput = '';
  statusDot.className = 'status-dot empty';
  statusText.textContent = mode === 'html-to-md' ? 'Paste HTML to begin' : 'Type Markdown to begin';
  sizeInfo.textContent = '';
  lineCount.textContent = '';
  outputInfo.textContent = '';
}

function loadSample() {
  if (mode === 'html-to-md') {
    inputArea.value = '<h1>Welcome to ANIMA</h1>\n<p>This is a <strong>bold</strong> and <em>italic</em> text example with a <a href="https://nextool.app">link</a>.</p>\n\n<h2>Features</h2>\n<ul>\n  <li>Fast conversion</li>\n  <li>GFM table support</li>\n  <li>Code block handling</li>\n</ul>\n\n<h3>Code Example</h3>\n<pre><code class="language-javascript">function greet(name) {\n  console.log(`Hello, ${name}!`);\n}</code></pre>\n\n<blockquote>This is a blockquote with <strong>bold</strong> text.</blockquote>\n\n<table>\n  <thead>\n    <tr><th>Tool</th><th>Price</th><th>Rating</th></tr>\n  </thead>\n  <tbody>\n    <tr><td>ANIMA Free</td><td>$0</td><td>4.9/5</td></tr>\n    <tr><td>About</td><td>free</td><td>5.0/5</td></tr>\n  </tbody>\n</table>\n\n<hr>\n<p>Image example: <img src="https://example.com/photo.jpg" alt="Example photo"></p>';
  } else {
    inputArea.value = '# Welcome to ANIMA\n\nThis is a **bold** and *italic* text example with a [link](https://nextool.app).\n\n## Features\n\n- Fast conversion\n- GFM table support\n- Code block handling\n\n### Code Example\n\n```javascript\nfunction greet(name) {\n  console.log(`Hello, ${name}!`);\n}\n```\n\n> This is a blockquote with **bold** text.\n\n| Tool | Price | Rating |\n| --- | --- | --- |\n| ANIMA Free | $0 | 4.9/5 |\n| About | free | 5.0/5 |\n\n---\n\nImage example: ![Example photo](https://example.com/photo.jpg)';
  }
  updateLineCount();
  convert();
}

function formatBytes(b) {
  if (b === 0) return '0 B';
  const k = 1024, s = ['B', 'KB', 'MB'];
  const i = Math.floor(Math.log(b) / Math.log(k));
  return parseFloat((b / Math.pow(k, i)).toFixed(1)) + ' ' + s[i];
}

function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2000);
}

inputArea.addEventListener('keydown', e => {
  if (e.key === 'Tab') {
    e.preventDefault();
    const s = inputArea.selectionStart, end = inputArea.selectionEnd;
    inputArea.value = inputArea.value.substring(0, s) + '  ' + inputArea.value.substring(end);
    inputArea.selectionStart = inputArea.selectionEnd = s + 2;
  }
});

const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('visible'); observer.unobserve(entry.target); }});
}, { threshold: 0.1 });
document.querySelectorAll('.fade-in').forEach(el => observer.observe(el));
</script>
<script src="/js/analytics-lite.js" defer></script>
<script src="/js/revenue.js" defer></script>
<script src="/js/lead-capture.js" defer></script>
</body>
</html>